(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{Av0i:function(t,e,n){"use strict";n.r(e);var s=n("aceb"),c=n("ofXK"),i=n("emOf"),o=n("ZatZ"),b=n("lJxs"),a=n("qsE9"),l=n("EQut"),r=n("JmRu"),u=n("IAlr"),d=n("fXoL"),m=n("tyNb");function h(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",16),d.ec("click",(function(){d.uc(t);const e=d.gc().$implicit;return d.gc(3).editReceipt(e._id,e.receiptId)})),d.Rb(1,"nb-icon",17),d.Vb()}}function p(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",18),d.ec("click",(function(){d.uc(t);const e=d.gc().$implicit;return d.gc(3).deleteReceipt(e._id,e.receiptId)})),d.Rb(1,"nb-icon",19),d.Vb()}}function g(t,e){if(1&t){const t=d.Xb();d.Wb(0,"tr"),d.Wb(1,"td"),d.Cc(2),d.Vb(),d.Wb(3,"td"),d.Cc(4),d.Vb(),d.Wb(5,"td"),d.Cc(6),d.Vb(),d.Wb(7,"td"),d.Cc(8),d.Vb(),d.Wb(9,"td"),d.Wb(10,"button",13),d.ec("click",(function(){d.uc(t);const n=e.$implicit,s=d.gc(3);return n.receiptId?s.showReceipt(n.receiptId):s.collectInstallment(n._id)})),d.Cc(11),d.Vb(),d.Vb(),d.Wb(12,"td"),d.Ac(13,h,2,0,"button",14),d.Vb(),d.Wb(14,"td"),d.Ac(15,p,2,0,"button",15),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit,n=d.gc(3);d.Eb(2),d.Ec("Installment ",t.installmentNo,""),d.Eb(2),d.Dc(n.dateService.formatDate(t.installmentDate)),d.Eb(2),d.Dc(t.installmentAmount),d.Eb(2),d.Dc(t.amountPending),d.Eb(2),d.mc("status",t.receiptId?"success":"info"),d.Eb(1),d.Ec(" ",t.receiptId?"Receipt":" Collect"," "),d.Eb(2),d.mc("ngIf",t.receiptId),d.Eb(2),d.mc("ngIf",t.receiptId)}}function I(t,e){if(1&t&&(d.Wb(0,"div",6),d.Wb(1,"table",7),d.Wb(2,"thead"),d.Wb(3,"tr"),d.Wb(4,"th"),d.Cc(5,"Installment No"),d.Vb(),d.Wb(6,"th"),d.Cc(7,"Installment Date"),d.Vb(),d.Wb(8,"th"),d.Cc(9,"Installment Amount"),d.Vb(),d.Wb(10,"th"),d.Cc(11,"Pending Amount"),d.Vb(),d.Wb(12,"th"),d.Cc(13,"Collect/Receipt"),d.Vb(),d.Wb(14,"th",11),d.Cc(15,"Action"),d.Vb(),d.Vb(),d.Vb(),d.Wb(16,"tbody"),d.Ac(17,g,16,8,"tr",12),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.gc(2);d.Eb(17),d.mc("ngForOf",t.studentCourseInstallment.installments)}}function C(t,e){1&t&&(d.Wb(0,"p",20),d.Cc(1,"No Student Course Installments Available"),d.Vb())}function f(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",6),d.Wb(2,"table",7),d.Wb(3,"tbody"),d.Wb(4,"tr",8),d.Wb(5,"td"),d.Wb(6,"span"),d.Wb(7,"strong"),d.Cc(8,"Course: "),d.Vb(),d.Cc(9),d.hc(10,"async"),d.Vb(),d.Rb(11,"br"),d.Wb(12,"span"),d.Wb(13,"strong"),d.Cc(14,"Date: "),d.Vb(),d.Cc(15),d.Vb(),d.Vb(),d.Wb(16,"td"),d.Wb(17,"span"),d.Wb(18,"strong"),d.Cc(19,"Collected Amount: "),d.Vb(),d.Cc(20),d.Vb(),d.Rb(21,"br"),d.Wb(22,"span"),d.Wb(23,"strong"),d.Cc(24,"Pending Amount: "),d.Vb(),d.Cc(25),d.Vb(),d.Rb(26,"br"),d.Wb(27,"span"),d.Wb(28,"strong"),d.Cc(29,"Total Amount: "),d.Vb(),d.Cc(30),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Rb(31,"br"),d.Ac(32,I,18,1,"div",9),d.Ac(33,C,2,0,"ng-template",null,10,d.Bc),d.Tb()),2&t){const t=d.sc(34),e=d.gc();d.Eb(9),d.Ec("",d.ic(10,7,e.getCourseName(e.studentCourseInstallment.course))," "),d.Eb(6),d.Ec("",e.dateService.formatDate(e.studentCourseInstallment.date)," "),d.Eb(5),d.Ec("",e.studentCourseInstallment.amountCollected," "),d.Eb(5),d.Ec("",e.studentCourseInstallment.pendingAmount," "),d.Eb(5),d.Dc(e.studentCourseInstallment.totalAmount),d.Eb(2),d.mc("ngIf",e.studentCourseInstallment.installments.length>0)("ngIfElse",t)}}function V(t,e){1&t&&(d.Wb(0,"p",20),d.Cc(1,"Loading..."),d.Vb())}const W=[{path:"",component:(()=>{class t{constructor(t,e,n,s,c,i,o,b,a){this.branchService=t,this.dateService=e,this.toastrService=n,this.studentCourseInstallmentService=s,this.studentCourseInstallmentReceiptService=c,this.courseService=i,this.studentService=o,this.router=b,this.route=a}ngOnInit(){this.loading=!0,this.branchId=this.branchService.getBranchId(),this.categoryId=this.branchService.getCategoryId(),this.studentId=this.studentService.getStudentId(),this.branchId&&this.categoryId&&this.studentId?(this.studentCourseInstallmentService.getStudentCourseInstallmentData().subscribe(t=>{this.studentCourseInstallment=t}),this.loading=!1):this.router.navigate(["../"],{relativeTo:this.route})}getStudentName(){return this.studentService.getStudentName().pipe(Object(b.a)(t=>t))}getCourseName(t){return this.courseService.getCourseName(t).pipe(Object(b.a)(t=>t))}editReceipt(t,e){this.studentCourseInstallmentReceiptService.setStudentCourseInstallmentReceiptId(e),this.studentCourseInstallmentService.setCourseInstallmentId(t),this.router.navigate(["../edit"],{relativeTo:this.route,queryParams:{mode:"edit"}})}showReceipt(t){this.studentCourseInstallmentReceiptService.setStudentCourseInstallmentReceiptId(t),this.router.navigate(["../receipt"],{relativeTo:this.route})}deleteReceipt(t,e){this.loading=!0,this.studentCourseInstallmentReceiptService.deleteStudentCourseInstallmentReceipt(e).subscribe(e=>{this.studentCourseInstallmentService.setCourseInstallmentReceipt(t,null),this.loading=!1},t=>{this.showToastr("top-right","danger",t),this.loading=!1})}collectInstallment(t){this.studentCourseInstallmentService.setCourseInstallmentId(t),this.router.navigate(["../collect"],{relativeTo:this.route})}showToastr(t,e,n){this.toastrService.show(e,n,{position:t,status:e})}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(l.a),d.Qb(o.a),d.Qb(s.xb),d.Qb(a.a),d.Qb(i.a),d.Qb(u.a),d.Qb(r.a),d.Qb(m.c),d.Qb(m.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["ngx-manage-student-course-installment"]],decls:16,vars:7,consts:[[1,"row"],[1,"col-md-9"],[1,"body-container"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["loadingData",""],[1,"table-responsive"],[1,"table"],[1,"border","shadow-sm"],["class","table-responsive",4,"ngIf","ngIfElse"],["noStudentCourseInstallments",""],["colspan","2"],[4,"ngFor","ngForOf"],["nbButton","","size","small",3,"status","click"],["nbButton","","status","basic","size","small",3,"click",4,"ngIf"],["nbButton","","status","danger","size","small",3,"click",4,"ngIf"],["nbButton","","status","basic","size","small",3,"click"],["nbTooltip","Edit Receipt","icon","edit-outline"],["nbButton","","status","danger","size","small",3,"click"],["nbTooltip","Delete Receipt","icon","trash-outline"],[1,"text-center"]],template:function(t,e){if(1&t&&(d.Wb(0,"nb-card"),d.Wb(1,"nb-card-header"),d.Wb(2,"div",0),d.Wb(3,"div",1),d.Wb(4,"h3"),d.Cc(5," Installments "),d.Wb(6,"small"),d.Cc(7),d.hc(8,"uppercase"),d.hc(9,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(10,"nb-card-body",2),d.Wb(11,"div",0),d.Wb(12,"div",3),d.Ac(13,f,35,9,"ng-container",4),d.Ac(14,V,2,0,"ng-template",null,5,d.Bc),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.sc(15);d.Eb(7),d.Ec("of ",d.ic(8,3,d.ic(9,5,e.getStudentName())),""),d.Eb(6),d.mc("ngIf",!e.loading)("ngIfElse",t)}},directives:[s.x,s.z,s.w,c.n,c.m,s.u,s.L,s.zb],pipes:[c.v,c.b],styles:["td[_ngcontent-%COMP%]{white-space:nowrap}"]}),t})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(t=>t.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let v=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[m.g.forChild(W)],m.g]}),t})();n.d(e,"ManageStudentCourseInstallmentModule",(function(){return S}));let S=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[c.c,v,s.A,s.v,s.N,s.Ab]]}),t})()}}]);