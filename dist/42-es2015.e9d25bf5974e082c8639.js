(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"uk+c":function(e,r,t){"use strict";t.r(r);var o=t("ofXK"),n=t("3b5Z"),s=t("nwtg"),i=t("3Pt+"),a=t("5hth"),l=t("AytR"),c=t("fvxu"),u=t("fXoL"),m=t("aceb"),d=t("tyNb");function b(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Full name is required! "),u.Vb())}function f(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Full name should contains minimum 5 "),u.Vb())}function g(e,r){if(1&e&&(u.Ub(0),u.Ac(1,b,2,0,"p",25),u.Ac(2,f,2,0,"p",25),u.Tb()),2&e){const e=u.gc();u.Eb(1),u.mc("ngIf",null==e.form.get("name").errors?null:e.form.get("name").errors.required),u.Eb(1),u.mc("ngIf",null==e.form.get("name").errors?null:e.form.get("name").errors.minlength)}}function h(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Email is required! "),u.Vb())}function p(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Email should be the real one! "),u.Vb())}function w(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Email Already registered, Please try another Email! "),u.Vb())}function v(e,r){if(1&e&&(u.Ub(0),u.Ac(1,h,2,0,"p",25),u.Ac(2,p,2,0,"p",25),u.Ac(3,w,2,0,"p",25),u.Tb()),2&e){const e=u.gc();u.Eb(1),u.mc("ngIf",null==e.form.get("email").errors?null:e.form.get("email").errors.required),u.Eb(1),u.mc("ngIf",null==e.form.get("email").errors?null:e.form.get("email").errors.email),u.Eb(1),u.mc("ngIf",e.userExist)}}function W(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Phone is required! "),u.Vb())}function C(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Phone should contain 10 digits "),u.Vb())}function V(e,r){if(1&e&&(u.Ub(0),u.Ac(1,W,2,0,"p",25),u.Ac(2,C,2,0,"p",25),u.Tb()),2&e){const e=u.gc();u.Eb(1),u.mc("ngIf",null==e.form.get("phone").errors?null:e.form.get("phone").errors.required),u.Eb(1),u.mc("ngIf",(null==e.form.get("phone").errors?null:e.form.get("phone").errors.pattern)||(null==e.form.get("phone").errors?null:e.form.get("phone").errors.minlength))}}function E(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Password is required! "),u.Vb())}function A(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Password should contain minimum 7 characters "),u.Vb())}function P(e,r){if(1&e&&(u.Ub(0),u.Ac(1,E,2,0,"p",25),u.Ac(2,A,2,0,"p",25),u.Tb()),2&e){const e=u.gc();u.Eb(1),u.mc("ngIf",null==e.form.get("password").errors?null:e.form.get("password").errors.required),u.Eb(1),u.mc("ngIf",null==e.form.get("password").errors?null:e.form.get("password").errors.minlength)}}function R(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Password confirmation is required! "),u.Vb())}function x(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," Password does not match the confirm password. "),u.Vb())}function y(e,r){if(1&e&&(u.Ub(0),u.Ac(1,R,2,0,"p",25),u.Ac(2,x,2,0,"p",25),u.Tb()),2&e){const e=u.gc();u.Eb(1),u.mc("ngIf",null==e.form.get("confirmPassword").errors?null:e.form.get("confirmPassword").errors.required),u.Eb(1),u.mc("ngIf",e.form.get("password").value!=e.form.get("confirmPassword").value&&!(null!=e.form.get("confirmPassword").errors&&e.form.get("confirmPassword").errors.required))}}function I(e,r){if(1&e&&(u.Wb(0,"nb-option",27),u.Cc(1),u.hc(2,"uppercase"),u.Vb()),2&e){const e=r.$implicit;u.mc("value",e),u.Eb(1),u.Dc(u.ic(2,2,e))}}function q(e,r){1&e&&(u.Wb(0,"p",26),u.Cc(1," User Role is required! "),u.Vb())}function T(e,r){if(1&e&&(u.Ub(0),u.Ac(1,q,2,0,"p",25),u.Tb()),2&e){const e=u.gc();u.Eb(1),u.mc("ngIf",null==e.form.get("userRole").errors?null:e.form.get("userRole").errors.required)}}const S=[{path:"",component:(()=>{class e{constructor(e,r,t,o,n,s,i){this.authService=e,this.roleService=r,this.toastrService=t,this.router=o,this.route=n,this.encryptService=s,this.userService=i}ngOnInit(){this.loading=!0,this.roles=this.roleService.getUserRoles(),this.userExist=!1,this.form=new i.f({name:new i.d(null,{validators:[i.u.required,i.u.minLength(5),i.u.maxLength(30)]}),email:new i.d(null,{validators:[i.u.required,i.u.email]}),phone:new i.d(null,{validators:[i.u.required,i.u.minLength(10),i.u.maxLength(10)]}),password:new i.d(null,{validators:[i.u.required,i.u.minLength(7),i.u.maxLength(20)]}),confirmPassword:new i.d(null,{validators:[i.u.required,i.u.minLength(7),i.u.maxLength(20)]}),userRole:new i.d(this.roles[0],{validators:[i.u.required]})},{validators:this.passwordValidator.bind(this)}),this.loading=!1}passwordValidator(e){return e.value.password!==e.value.confirmPassword?{invalidConfirmPassword:!0}:null}checkUser(){this.form.get("email").valid&&this.userService.checkUser(this.form.value.email).subscribe(e=>{this.userExist=e.exist},e=>{})}acceptTermsConditions(e){this.termsConditions=e}register(){if(this.form.markAllAsTouched(),!this.form.valid)return void this.showToastr("top-right","danger","All Fields are required");if(this.userExist)return void this.showToastr("top-right","danger","This user Already exist, Please try another Email");if(!this.termsConditions)return void this.showToastr("top-right","warning","Accept Terms & Conditions");this.loading=!0;const e={name:this.form.value.name.toLowerCase(),userRole:this.form.value.userRole,email:this.form.value.email,phone:this.form.value.phone,password:this.encryptService.encrypt(this.form.value.password,l.a.encKey)};let r;r=this.authService.createUser(e),r.subscribe(e=>{this.loading=!1,this.showToastr("top-right","success","New User Created Successfully"),this.router.navigate(["/login"],{relativeTo:this.route})},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}showToastr(e,r,t){this.toastrService.show(r,t,{position:e,status:r})}}return e.\u0275fac=function(r){return new(r||e)(u.Qb(s.a),u.Qb(n.a),u.Qb(m.xb),u.Qb(d.c),u.Qb(d.a),u.Qb(a.a),u.Qb(c.a))},e.\u0275cmp=u.Kb({type:e,selectors:[["ngx-register"]],decls:53,vars:14,consts:[[1,"row"],[1,"col-md-6","col-sm-10","col-12","mx-auto"],["id","title",1,"title"],[3,"formGroup","ngSubmit"],[1,"form-control-group"],["for","input-name",1,"label"],["type","text","nbInput","","id","input-name","name","fullName","placeholder","Full name","formControlName","name","minlength","5","maxlength","30","autofocus","","fullWidth","",3,"status"],[4,"ngIf"],["for","input-email",1,"label"],["type","email","nbInput","","id","input-email","name","email","formControlName","email","placeholder","Email address","fullWidth","",3,"status","input"],["for","input-phone",1,"label"],["type","number","nbInput","","id","input-phone","name","phone","formControlName","phone","placeholder","phone","minlength","10","maxlength","10","min","0","fullWidth","",3,"status"],["for","input-password",1,"label"],["type","password","nbInput","","id","input-password","name","password","formControlName","password","placeholder","Password","minlength","7","maxlength","20","fullWidth","",3,"status"],["for","input-re-password",1,"label"],["nbInput","","type","password","id","input-re-password","name","rePass","formControlName","confirmPassword","placeholder","Confirm Password","minlength","5","maxlength","30","fullWidth","",3,"status"],["for","input-role",1,"label"],["type","text","selected","institute","id","input-role","name","userRole","placeholder","Select User Role","formControlName","userRole","fullWidth","",3,"status"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control-group","accept-group"],["name","terms",3,"checkedChange"],["href","#","target","_blank"],["nbButton","","fullWidth","","status","primary"],["aria-label","Sign in",1,"another-action","text-right"],["routerLink","/login",1,"text-link"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[3,"value"]],template:function(e,r){1&e&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"nb-card"),u.Wb(3,"nb-card-body"),u.Wb(4,"h1",2),u.Cc(5,"Register"),u.Vb(),u.Wb(6,"form",3),u.ec("ngSubmit",(function(){return r.register()})),u.Wb(7,"div",4),u.Wb(8,"label",5),u.Cc(9,"Full name:"),u.Vb(),u.Rb(10,"input",6),u.Ac(11,g,3,2,"ng-container",7),u.Vb(),u.Wb(12,"div",4),u.Wb(13,"label",8),u.Cc(14,"Email address:"),u.Vb(),u.Wb(15,"input",9),u.ec("input",(function(){return r.checkUser()})),u.Vb(),u.Ac(16,v,4,3,"ng-container",7),u.Vb(),u.Wb(17,"div",4),u.Wb(18,"label",10),u.Cc(19,"Phone:"),u.Vb(),u.Rb(20,"input",11),u.Ac(21,V,3,2,"ng-container",7),u.Vb(),u.Wb(22,"div",4),u.Wb(23,"label",12),u.Cc(24,"Password:"),u.Vb(),u.Rb(25,"input",13),u.Ac(26,P,3,2,"ng-container",7),u.Vb(),u.Wb(27,"div",4),u.Wb(28,"label",14),u.Cc(29,"Repeat password:"),u.Vb(),u.Rb(30,"input",15),u.Ac(31,y,3,2,"ng-container",7),u.Vb(),u.Wb(32,"div",4),u.Wb(33,"label",16),u.Cc(34,"User Role:"),u.Vb(),u.Wb(35,"nb-select",17),u.Ac(36,I,3,4,"nb-option",18),u.Vb(),u.Ac(37,T,2,1,"ng-container",7),u.Vb(),u.Rb(38,"br"),u.Wb(39,"div",19),u.Wb(40,"nb-checkbox",20),u.ec("checkedChange",(function(e){return r.acceptTermsConditions(e)})),u.Cc(41," Agree to "),u.Wb(42,"a",21),u.Wb(43,"strong"),u.Cc(44,"Terms & Conditions"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(45,"br"),u.Wb(46,"button",22),u.Cc(47," Register "),u.Vb(),u.Vb(),u.Rb(48,"br"),u.Wb(49,"section",23),u.Cc(50," Already have an account? "),u.Wb(51,"a",24),u.Cc(52,"Log in"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Eb(6),u.mc("formGroup",r.form),u.Eb(4),u.mc("status",r.form.get("name").touched?r.form.get("name").invalid?"danger":"success":"basic"),u.Eb(1),u.mc("ngIf",r.form.get("name").invalid&&r.form.get("name").touched),u.Eb(4),u.mc("status",r.form.get("email").touched?r.form.get("email").invalid||r.userExist?"danger":"success":"basic"),u.Eb(1),u.mc("ngIf",(r.form.get("email").invalid||r.userExist)&&r.form.get("email").touched),u.Eb(4),u.mc("status",r.form.get("phone").touched?r.form.get("phone").invalid?"danger":"success":"basic"),u.Eb(1),u.mc("ngIf",r.form.get("phone").invalid&&r.form.get("phone").touched),u.Eb(4),u.mc("status",r.form.get("password").touched?r.form.get("password").invalid?"danger":"success":"basic"),u.Eb(1),u.mc("ngIf",r.form.get("password").invalid&&r.form.get("password").touched),u.Eb(4),u.mc("status",r.form.get("confirmPassword").touched?r.form.get("confirmPassword").invalid||r.form.get("password").value!=r.form.get("confirmPassword").value?"danger":"success":"basic"),u.Eb(1),u.mc("ngIf",r.form.get("confirmPassword").invalid&&r.form.get("confirmPassword").touched),u.Eb(4),u.mc("status",r.form.get("userRole").touched?r.form.get("userRole").invalid?"danger":"success":"basic"),u.Eb(1),u.mc("ngForOf",r.roles),u.Eb(1),u.mc("ngIf",r.form.get("userRole").invalid&&r.form.get("userRole").touched))},directives:[m.x,m.w,i.v,i.n,i.g,m.O,i.a,i.m,i.e,i.j,i.i,o.n,i.q,m.jb,o.m,m.C,m.u,d.f,m.eb],pipes:[o.v],styles:["",""]}),e})(),canActivate:[]},{path:"page-not-found",loadChildren:()=>t.e(0).then(t.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let U=(()=>{class e{}return e.\u0275mod=u.Ob({type:e}),e.\u0275inj=u.Nb({factory:function(r){return new(r||e)},imports:[[d.g.forChild(S)],d.g]}),e})();var k=t("vTDv");t.d(r,"RegisterModule",(function(){return N}));let N=(()=>{class e{}return e.\u0275mod=u.Ob({type:e}),e.\u0275inj=u.Nb({factory:function(r){return new(r||e)},imports:[[o.c,U,i.h,i.s,k.a,m.A,m.v,m.N,m.v,m.n,m.P,m.D,m.p,m.kb]]}),e})()}}]);