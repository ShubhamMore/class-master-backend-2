(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"7v7B":function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("ZatZ"),d=n("fvxu"),i=n("cxbk"),s=n("5hth"),l=n("/ehT"),o=n("JmRu"),m=n("3Pt+"),u=n("EQut"),h=n("fXoL"),c=n("aceb"),p=n("tyNb");const g=["stepper"];function S(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",20),h["\u0275\u0275elementStart"](1,"nb-checkbox",34),h["\u0275\u0275listener"]("checkedChange",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().alreadyRegister(t)})),h["\u0275\u0275text"](2,"Already Registered Student"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("checked",e.alreadyRegisteredUser)}}function b(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"button",40),h["\u0275\u0275element"](1,"nb-icon",41),h["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Student Id is required! "),h["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,v,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentSearchForm.get("studentId").errors?null:e.studentSearchForm.get("studentId").errors.required)}}function E(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",35),h["\u0275\u0275elementStart"](1,"form",36),h["\u0275\u0275listener"]("submit",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().searchStudent()})),h["\u0275\u0275elementStart"](2,"div",12),h["\u0275\u0275elementStart"](3,"label",37),h["\u0275\u0275text"](4,"Student Id:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"nb-form-field"),h["\u0275\u0275element"](6,"input",38),h["\u0275\u0275template"](7,b,2,0,"button",39),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,f,2,1,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("formGroup",e.studentSearchForm),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("status",e.studentSearchForm.get("studentId").touched?e.studentSearchForm.get("studentId").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!e.student),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.studentSearchForm.get("studentId").invalid&&e.studentSearchForm.get("studentId").touched)}}function x(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Student name is required! "),h["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Student Name should contain minimum 3 characters "),h["\u0275\u0275elementEnd"]())}function I(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,x,2,0,"p",42),h["\u0275\u0275template"](2,F,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("name").errors?null:e.studentForm.get("name").errors.required),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("name").errors?null:e.studentForm.get("name").errors.minlength)}}function y(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Email is required! "),h["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Email should be the real one! "),h["\u0275\u0275elementEnd"]())}function w(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Email Already registered, Please try another Email! "),h["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,y,2,0,"p",42),h["\u0275\u0275template"](2,C,2,0,"p",42),h["\u0275\u0275template"](3,w,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("email").errors?null:e.studentForm.get("email").errors.required),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("email").errors?null:e.studentForm.get("email").errors.email),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.userExist)}}function P(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Phone is required! "),h["\u0275\u0275elementEnd"]())}function N(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Phone should contain 10 digits "),h["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,P,2,0,"p",42),h["\u0275\u0275template"](2,N,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("phone").errors?null:e.studentForm.get("phone").errors.required),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",(null==e.studentForm.get("phone").errors?null:e.studentForm.get("phone").errors.minlength)||(null==e.studentForm.get("phone").errors?null:e.studentForm.get("phone").errors.maxlength)||(null==e.studentForm.get("phone").errors?null:e.studentForm.get("phone").errors.min)||(null==e.studentForm.get("phone").errors?null:e.studentForm.get("phone").errors.max))}}function k(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Parent Name should contain minimum 3 characters "),h["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,k,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("parentName").errors?null:e.studentForm.get("parentName").errors.minlength)}}function B(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Parent Email should be the real one! "),h["\u0275\u0275elementEnd"]())}function A(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,B,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.studentForm.get("parentEmail").errors?null:e.studentForm.get("parentEmail").errors.parentEmail)}}function R(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Parent Phone should contain 10 digits "),h["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,R,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",(null==e.studentForm.get("parentPhone").errors?null:e.studentForm.get("parentPhone").errors.minlength)||(null==e.studentForm.get("parentPhone").errors?null:e.studentForm.get("parentPhone").errors.maxlength)||(null==e.studentForm.get("parentPhone").errors?null:e.studentForm.get("parentPhone").errors.min)||(null==e.studentForm.get("parentPhone").errors?null:e.studentForm.get("parentPhone").errors.max))}}function M(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"form",36),h["\u0275\u0275listener"]("submit",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().studentFormSubmit()})),h["\u0275\u0275elementStart"](1,"div",5),h["\u0275\u0275elementStart"](2,"div",11),h["\u0275\u0275elementStart"](3,"div",12),h["\u0275\u0275elementStart"](4,"label",44),h["\u0275\u0275text"](5,"Student Name:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](6,"input",45),h["\u0275\u0275template"](7,I,3,2,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",11),h["\u0275\u0275elementStart"](9,"div",12),h["\u0275\u0275elementStart"](10,"label",46),h["\u0275\u0275text"](11,"Email address:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"input",47),h["\u0275\u0275listener"]("input",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().checkUser()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](13,D,4,3,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",11),h["\u0275\u0275elementStart"](15,"div",12),h["\u0275\u0275elementStart"](16,"label",48),h["\u0275\u0275text"](17,"Phone:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](18,"input",49),h["\u0275\u0275template"](19,T,3,2,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",11),h["\u0275\u0275elementStart"](21,"div",12),h["\u0275\u0275elementStart"](22,"label",50),h["\u0275\u0275text"](23,"Birth Date:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](24,"input",51),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",20),h["\u0275\u0275elementStart"](26,"div",12),h["\u0275\u0275elementStart"](27,"label",52),h["\u0275\u0275text"](28,"Address:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](29,"textarea",53),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",11),h["\u0275\u0275elementStart"](31,"div",12),h["\u0275\u0275elementStart"](32,"label",54),h["\u0275\u0275text"](33,"Parent Name:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](34,"input",55),h["\u0275\u0275template"](35,q,2,1,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",11),h["\u0275\u0275elementStart"](37,"div",12),h["\u0275\u0275elementStart"](38,"label",56),h["\u0275\u0275text"](39,"Parent Email address:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](40,"input",57),h["\u0275\u0275template"](41,A,2,1,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"div",11),h["\u0275\u0275elementStart"](43,"div",12),h["\u0275\u0275elementStart"](44,"label",58),h["\u0275\u0275text"](45,"Parent Phone:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](46,"input",59),h["\u0275\u0275template"](47,j,2,1,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](48,"hr"),h["\u0275\u0275elementStart"](49,"div",5),h["\u0275\u0275elementStart"](50,"div",60),h["\u0275\u0275elementStart"](51,"button",27),h["\u0275\u0275elementStart"](52,"span"),h["\u0275\u0275text"](53,"Next"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](54,"nb-icon",28),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("formGroup",e.studentForm),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("status",e.studentForm.get("name").touched?e.studentForm.get("name").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.studentForm.get("name").invalid&&e.studentForm.get("name").touched),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("status",e.studentForm.get("email").touched?e.studentForm.get("email").invalid||e.userExist?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",(e.studentForm.get("email").invalid||e.userExist)&&e.studentForm.get("email").touched),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("status",e.studentForm.get("phone").touched?e.studentForm.get("phone").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.studentForm.get("phone").invalid&&e.studentForm.get("phone").touched),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("max",e.dateService.getDateString()),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("status",e.studentForm.get("parentName").touched?e.studentForm.get("parentName").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.studentForm.get("parentName").invalid&&e.studentForm.get("parentName").touched),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("status",e.studentForm.get("parentEmail").touched?e.studentForm.get("parentEmail").invalid||e.userExist?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",(e.studentForm.get("parentEmail").invalid||e.userExist)&&e.studentForm.get("parentEmail").touched),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("status",e.studentForm.get("parentPhone").touched?e.studentForm.get("parentPhone").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.studentForm.get("parentPhone").invalid&&e.studentForm.get("parentPhone").touched)}}function V(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"nb-option",61),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275property"]("value",e._id),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](e.category)}}function W(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Branch Category is required! "),h["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,W,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.branchStudentForm.get("category").errors?null:e.branchStudentForm.get("category").errors.required)}}function O(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"p",43),h["\u0275\u0275text"](1," Admission Date is required! "),h["\u0275\u0275elementEnd"]())}function G(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,O,2,0,"p",42),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",null==e.branchStudentForm.get("admissionDate").errors?null:e.branchStudentForm.get("admissionDate").errors.required)}}function L(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"th"),h["\u0275\u0275text"](2,"IMS Id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](e.studentSearchForm.value.studentId)}}const Q=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a,d,i,s,l){this.branchService=e,this.studentService=t,this.dateService=n,this.userService=r,this.toastrService=a,this.branchStudentService=d,this.encryptService=i,this.router=s,this.route=l,l.queryParams.subscribe(e=>{this.ngOnInit()})}ngOnInit(){if(this.loading=!0,this.branchId=this.branchService.getBranchId(),!this.branchId)return void this.router.navigate(["../"],{relativeTo:this.route});let e;return this.studentId=this.studentService.getStudentId(),this.branchStudentId=this.branchStudentService.getBranchStudentId(),this.route.queryParams.subscribe(t=>{e=t.mode}),e&&"edit"!==e?(this.showToastr("top-right","danger","Invalid Route"),void this.router.navigate(["../page-not-found"],{relativeTo:this.route})):!e||this.studentId||this.branchStudentId?(this.alreadyRegisteredUser=!1,this.categories=[],this.getCategories(),this.studentSearchForm=new m.f({studentId:new m.d(null,{validators:[m.u.required]})}),this.studentForm=new m.f({name:new m.d(null,{validators:[m.u.required,m.u.minLength(3)]}),email:new m.d(null,{validators:[m.u.required,m.u.email]}),phone:new m.d(null,{validators:[m.u.required,m.u.minLength(10),m.u.maxLength(10),m.u.min(1e9),m.u.max(9999999999)]}),birthDate:new m.d(null,{validators:[]}),parentName:new m.d(null,{validators:[]}),parentEmail:new m.d(null,{validators:[m.u.email]}),parentPhone:new m.d(null,{validators:[m.u.minLength(10),m.u.maxLength(10),m.u.min(1e9),m.u.max(9999999999)]}),address:new m.d(null,{validators:[]})}),this.branchStudentForm=new m.f({category:new m.d("",{validators:[m.u.required]}),admissionDate:new m.d(this.dateService.getDateString(),{validators:[m.u.required]}),description:new m.d(null,{validators:[]})}),void(e&&this.studentId&&this.branchStudentId?this.branchStudentService.getBranchStudentForEditing(this.branchStudentId,this.studentId).subscribe(e=>{this.student=e.student,this.branchStudent=e.branchStudent,this.userExist=!1,this.studentSearchForm.patchValue({studentId:this.student.imsMasterId}),this.studentForm.patchValue({name:this.student.name,email:this.student.email,phone:this.student.phone,parentName:this.student.parentName,parentEmail:this.student.parentEmail,parentPhone:this.student.parentPhone,birthDate:this.student.birthDate,address:this.student.address}),this.disableStudentDetails(),this.branchStudentForm.patchValue({category:this.branchStudent.category,admissionDate:this.branchStudent.admissionDate,description:this.branchStudent.description}),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.back()}):this.loading=!1)):(this.showToastr("top-right","danger","Student Not Found"),void this.router.navigate(["../page-not-found"],{relativeTo:this.route}))}getCategories(){this.branchService.getBranchData().subscribe(e=>{this.categories=e.categories}),this.categories||this.branchService.getBranch(this.branchId).subscribe(e=>{this.branchService.setBranchData(e),this.categories=e.categories},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}checkUser(){this.studentForm.get("email").valid&&!this.student&&this.userService.checkUser(this.studentForm.value.email).subscribe(e=>{this.userExist=e.exist},e=>{})}alreadyRegister(e){this.alreadyRegisteredUser=e}searchStudent(){this.studentSearchForm.markAllAsTouched(),this.studentSearchForm.invalid?this.showToastr("top-right","danger","Enter Student Id"):(this.studentId=this.studentSearchForm.value.studentId,this.loading=!0,this.studentService.searchStudent(this.studentId).subscribe(e=>{this.student=e,this.studentId=e.imsMasterId,this.userExist=!1,this.alreadyRegisteredUser=!1,this.studentSearchForm.patchValue({studentId:this.student.imsMasterId}),this.studentForm.patchValue({name:this.student.name,email:this.student.email,phone:this.student.phone,parentName:this.student.parentName,parentEmail:this.student.parentEmail,parentPhone:this.student.parentPhone,birthDate:this.student.birthDate,address:this.student.address}),this.disableStudentDetails(),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.studentId=null,this.loading=!1}))}enableStudentDetails(){this.studentForm.get("name").enable(),this.studentForm.get("email").enable(),this.studentForm.get("phone").enable(),this.studentForm.get("parentName").enable(),this.studentForm.get("parentEmail").enable(),this.studentForm.get("parentPhone").enable(),this.studentForm.get("birthDate").enable(),this.studentForm.get("address").enable(),this.studentSearchForm.get("studentId").enable()}disableStudentDetails(){this.studentForm.get("name").disable(),this.studentForm.get("email").disable(),this.studentForm.get("phone").disable(),this.studentForm.get("parentName").disable(),this.studentForm.get("parentEmail").disable(),this.studentForm.get("parentPhone").disable(),this.studentForm.get("birthDate").disable(),this.studentForm.get("address").disable(),this.studentSearchForm.get("studentId").disable()}previousStep(){this.stepper.previous(),this.student&&this.disableStudentDetails()}studentFormSubmit(){this.studentForm.markAllAsTouched(),this.studentForm.invalid?this.showToastr("top-right","danger","Student Details are Required"):this.userExist?this.showToastr("top-right","danger","User with this email address is already Exist"):(this.student&&this.enableStudentDetails(),this.stepper.next())}branchStudentFormSubmit(){this.branchStudentForm.markAllAsTouched(),this.studentForm.invalid?this.showToastr("top-right","danger","Student Branch Details are Required"):this.stepper.next()}saveStudent(){if(this.studentForm.markAllAsTouched(),this.branchStudentForm.markAllAsTouched(),this.studentForm.invalid)this.showToastr("top-right","danger","Student Details are Required");else if(this.studentForm.invalid)this.showToastr("top-right","danger","Student Branch Details are Required");else if(this.loading=!0,this.studentId||this.branchStudentId)if(this.studentId&&!this.branchStudentId){const e=this.branchStudentForm.value;e.branch=this.branchId,e.student=this.studentId,this.branchStudentService.newBranchStudent(e).subscribe(e=>{this.showToastr("top-right","success","New Branch Student added Successfully"),this.back(),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}else if(this.studentId&&this.branchStudentId){const e=this.branchStudentForm.value;e._id=this.branchStudentId,this.branchStudentService.editBranchStudent(e).subscribe(e=>{this.showToastr("top-right","success","Student Updated Successfully"),this.back(),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}else this.showToastr("top-right","danger","Invalid data"),this.loading=!1;else{const e=this.studentForm.value;e.password=this.encryptService.encrypt(e.phone,i.a.encKey);const t=this.branchStudentForm.value;t.branch=this.branchId,this.studentService.addStudent(e,t).subscribe(e=>{this.showToastr("top-right","success","New Student Added Successfully"),this.back(),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}getCategory(e){const t=this.categories.find(t=>t._id===e);return t?t.category:"--"}back(){const e=this.studentService.getStudentType();this.router.navigate(["../"],{relativeTo:this.route,queryParams:{type:e}})}ngOnDestroy(){this.studentService.deleteStudentId(),this.branchStudentService.deleteBranchStudentId()}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](o.a),h["\u0275\u0275directiveInject"](a.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](c.Db),h["\u0275\u0275directiveInject"](l.a),h["\u0275\u0275directiveInject"](s.a),h["\u0275\u0275directiveInject"](p.c),h["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-student"]],viewQuery:function(e,t){var n;1&e&&h["\u0275\u0275viewQuery"](g,!0),2&e&&h["\u0275\u0275queryRefresh"](n=h["\u0275\u0275loadQuery"]())&&(t.stepper=n.first)},decls:117,vars:27,consts:[["type","button","nbButton","","status","warning","size","tiny",1,"float-right",3,"click"],[1,""],[3,"linear","disableStepNavigation"],["stepper",""],["label","Basic Details",3,"stepControl"],[1,"row"],["class","col-md-12",4,"ngIf"],["class","col-md-6 col-sm-8",4,"ngIf"],["class","",3,"formGroup","submit",4,"ngIf"],["label","Enrollment Details",3,"stepControl"],[1,"step-container",3,"formGroup","ngSubmit"],[1,"col-md-6"],[1,"form-control-group"],["for","input-category",1,"label"],["id","input-category","name","category","formControlName","category","placeholder","Select Category","fullWidth","",3,"status"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","input-admission-date",1,"label"],["type","date","nbInput","","id","input-admission-date","name","admissionDate","formControlName","admissionDate","placeholder","admissionDate","fullWidth","",3,"status"],[1,"col-md-12"],["for","input-description",1,"label"],["type","text","nbInput","","id","input-description","name","description","formControlName","description","placeholder","Description (Optional)","fullWidth",""],[1,"col-md-6","text-left"],["type","button","nbButton","",1,"",3,"click"],["icon","arrow-ios-back-outline"],[1,"col-md-6","text-right"],["nbButton","","type","submit"],["icon","arrow-ios-forward-outline"],["label","Submit"],[1,"step-container"],[1,"table-responsive"],[1,"table","table-bordered"],["nbButton","",3,"click"],["id","input-already-registered","name","alreadyRegistered",3,"checked","checkedChange"],[1,"col-md-6","col-sm-8"],[1,"",3,"formGroup","submit"],["for","input-student-student-id",1,"label"],["type","text","nbInput","","id","input-student-id","studentId","studentId","formControlName","studentId","placeholder","Student Email or IMS Master Id","fullWidth","",3,"status"],["nbSuffix","","nbTooltip","Fetch","nbButton","","ghost","","type","submit",4,"ngIf"],["nbSuffix","","nbTooltip","Fetch","nbButton","","ghost","","type","submit"],["icon","arrow-circle-right-outline","status","success"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],["for","input-student-student-name",1,"label"],["type","text","nbInput","","id","input-student-name","name","name","formControlName","name","placeholder","Student Name","minlength","3","maxlength","30","fullWidth","",3,"status"],["for","input-email",1,"label"],["type","email","nbInput","","id","input-email","name","email","formControlName","email","placeholder","Email address","fullWidth","",3,"status","input"],["for","input-phone",1,"label"],["type","number","nbInput","","id","input-phone","name","phone","formControlName","phone","placeholder","phone","minlength","10","maxlength","10","min","1000000000","max","9999999999","fullWidth","",3,"status"],["for","input-birth-date",1,"label"],["type","date","nbInput","","id","input-birth-date","name","birthDate","formControlName","birthDate","placeholder","Birth Date","fullWidth","",3,"max"],["for","input-address",1,"label"],["type","text","nbInput","","id","input-address","name","address","formControlName","address","placeholder","Address (Optional)","fullWidth",""],["for","input-parent-name",1,"label"],["type","text","nbInput","","id","input-parent-name","name","parentName","formControlName","parentName","placeholder","Parent Name","minlength","3","maxlength","30","fullWidth","",3,"status"],["for","input-parent-email",1,"label"],["type","parentEmail","nbInput","","id","input-parent-email","name","parentEmail","formControlName","parentEmail","placeholder","Parent Email address","fullWidth","",3,"status"],["for","input-parent-phone",1,"label"],["type","number","nbInput","","id","input-parent-phone","name","parentPhone","formControlName","parentPhone","placeholder","Parent Phone","minlength","10","maxlength","10","min","1000000000","max","9999999999","fullWidth","",3,"status"],[1,"col-md-12","text-right"],[3,"value"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card"),h["\u0275\u0275elementStart"](1,"nb-card-header"),h["\u0275\u0275elementStart"](2,"button",0),h["\u0275\u0275listener"]("click",(function(){return t.back()})),h["\u0275\u0275text"](3," Back "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"h3",1),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"uppercase"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"nb-card-body"),h["\u0275\u0275elementStart"](8,"nb-stepper",2,3),h["\u0275\u0275elementStart"](10,"nb-step",4),h["\u0275\u0275elementStart"](11,"div",5),h["\u0275\u0275template"](12,S,3,1,"div",6),h["\u0275\u0275template"](13,E,9,4,"div",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](14,M,55,14,"form",8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"nb-step",9),h["\u0275\u0275elementStart"](16,"form",10),h["\u0275\u0275listener"]("ngSubmit",(function(){return t.branchStudentFormSubmit()})),h["\u0275\u0275elementStart"](17,"div",5),h["\u0275\u0275elementStart"](18,"div",11),h["\u0275\u0275elementStart"](19,"div",12),h["\u0275\u0275elementStart"](20,"label",13),h["\u0275\u0275text"](21,"Branch Category:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"nb-select",14),h["\u0275\u0275elementStart"](23,"nb-option",15),h["\u0275\u0275text"](24,"Select Category"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](25,V,2,2,"nb-option",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](26,U,2,1,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",11),h["\u0275\u0275elementStart"](28,"div",12),h["\u0275\u0275elementStart"](29,"label",18),h["\u0275\u0275text"](30,"Admission Date:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](31,"input",19),h["\u0275\u0275template"](32,G,2,1,"ng-container",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",20),h["\u0275\u0275elementStart"](34,"div",12),h["\u0275\u0275elementStart"](35,"label",21),h["\u0275\u0275text"](36,"Description:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](37,"textarea",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](38,"hr"),h["\u0275\u0275elementStart"](39,"div",5),h["\u0275\u0275elementStart"](40,"div",23),h["\u0275\u0275elementStart"](41,"button",24),h["\u0275\u0275listener"]("click",(function(){return t.previousStep()})),h["\u0275\u0275element"](42,"nb-icon",25),h["\u0275\u0275elementStart"](43,"span"),h["\u0275\u0275text"](44,"prev"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"div",26),h["\u0275\u0275elementStart"](46,"button",27),h["\u0275\u0275elementStart"](47,"span"),h["\u0275\u0275text"](48,"Next"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](49,"nb-icon",28),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"nb-step",29),h["\u0275\u0275elementStart"](51,"div",30),h["\u0275\u0275elementStart"](52,"div",31),h["\u0275\u0275elementStart"](53,"table",32),h["\u0275\u0275elementStart"](54,"tbody"),h["\u0275\u0275template"](55,L,5,1,"tr",17),h["\u0275\u0275elementStart"](56,"tr"),h["\u0275\u0275elementStart"](57,"th"),h["\u0275\u0275text"](58,"Student Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](59,"td"),h["\u0275\u0275text"](60),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](61,"tr"),h["\u0275\u0275elementStart"](62,"th"),h["\u0275\u0275text"](63,"Email"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](64,"td"),h["\u0275\u0275text"](65),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](66,"tr"),h["\u0275\u0275elementStart"](67,"th"),h["\u0275\u0275text"](68,"Phone"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](69,"td"),h["\u0275\u0275text"](70),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](71,"tr"),h["\u0275\u0275elementStart"](72,"th"),h["\u0275\u0275text"](73,"Address"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](74,"td"),h["\u0275\u0275text"](75),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](76,"tr"),h["\u0275\u0275elementStart"](77,"th"),h["\u0275\u0275text"](78,"Parent Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](79,"td"),h["\u0275\u0275text"](80),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](81,"tr"),h["\u0275\u0275elementStart"](82,"th"),h["\u0275\u0275text"](83,"Parent Email"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](84,"td"),h["\u0275\u0275text"](85),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](86,"tr"),h["\u0275\u0275elementStart"](87,"th"),h["\u0275\u0275text"](88,"Parent Phone"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](89,"td"),h["\u0275\u0275text"](90),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](91,"tr"),h["\u0275\u0275elementStart"](92,"th"),h["\u0275\u0275text"](93,"Category"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](94,"td"),h["\u0275\u0275text"](95),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](96,"tr"),h["\u0275\u0275elementStart"](97,"th"),h["\u0275\u0275text"](98,"Admission Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](99,"td"),h["\u0275\u0275text"](100),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](101,"tr"),h["\u0275\u0275elementStart"](102,"th"),h["\u0275\u0275text"](103,"Description"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](104,"td"),h["\u0275\u0275text"](105),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](106,"hr"),h["\u0275\u0275elementStart"](107,"div",5),h["\u0275\u0275elementStart"](108,"div",23),h["\u0275\u0275elementStart"](109,"button",24),h["\u0275\u0275listener"]("click",(function(){return t.previousStep()})),h["\u0275\u0275element"](110,"nb-icon",25),h["\u0275\u0275elementStart"](111,"span"),h["\u0275\u0275text"](112,"prev"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](113,"div",26),h["\u0275\u0275elementStart"](114,"button",33),h["\u0275\u0275listener"]("click",(function(){return t.saveStudent()})),h["\u0275\u0275elementStart"](115,"span"),h["\u0275\u0275text"](116,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate1"](" ",t.student?"Edit Student "+h["\u0275\u0275pipeBind1"](6,25,t.student.name):"Add New Student"," "),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("linear",!0)("disableStepNavigation",!0),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("stepControl",t.studentForm),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",!t.student),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.alreadyRegisteredUser||t.student),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!t.alreadyRegisteredUser),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("stepControl",t.branchStudentForm),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("formGroup",t.branchStudentForm),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("status",t.branchStudentForm.get("category").touched?t.branchStudentForm.get("category").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngForOf",t.categories),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.branchStudentForm.get("category").invalid&&t.branchStudentForm.get("category").touched),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("status",t.branchStudentForm.get("admissionDate").touched?t.branchStudentForm.get("admissionDate").invalid?"danger":"success":"basic"),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.branchStudentForm.get("admissionDate").invalid&&t.branchStudentForm.get("admissionDate").touched),h["\u0275\u0275advance"](23),h["\u0275\u0275property"]("ngIf",t.studentSearchForm.value.studentId),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.name),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.email),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.phone),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.address),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.parentName),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.parentEmail),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.studentForm.value.parentPhone),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.getCategory(t.branchStudentForm.value.category)),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.branchStudentForm.value.admissionDate)),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](t.branchStudentForm.value.description))},directives:[c.x,c.z,c.u,c.w,c.sb,c.rb,r.n,m.v,m.n,m.g,c.mb,m.m,m.e,c.fb,r.m,c.P,m.a,c.M,c.C,c.K,c.vb,c.Fb,m.j,m.i,m.q],pipes:[r.v],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let J=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[p.g.forChild(Q)],p.g]}),e})();n.d(t,"AddStudentModule",(function(){return K}));let K=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,J,c.A,c.nb,c.D,c.L,c.Q,c.v,c.O,c.tb,c.Gb,m.s]]}),e})()}}]);