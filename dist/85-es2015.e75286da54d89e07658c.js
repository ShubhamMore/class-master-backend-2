(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{dGLe:function(e,t,n){"use strict";n.r(t);var a=n("aceb"),r=n("ofXK"),c=n("ZatZ"),i=n("IAlr"),d=n("lst6"),l=n("7kqb"),s=n("ggm5"),o=n("EQut"),m=n("fXoL"),u=n("tyNb");function h(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td",10),m["\u0275\u0275elementStart"](6,"div",11),m["\u0275\u0275elementStart"](7,"label"),m["\u0275\u0275elementStart"](8,"input",12),m["\u0275\u0275listener"]("change",(function(n){m["\u0275\u0275restoreView"](e);const a=t.index;return m["\u0275\u0275nextContext"](2).onChangeAttendance(n.target.checked,a)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"label",13),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.rollNumber),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("id",e.student)("checked",e.attendance),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("for",e.student),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](e.attendance?"P":"A")}}function p(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",6),m["\u0275\u0275elementStart"](1,"div",7),m["\u0275\u0275elementStart"](2,"table",8),m["\u0275\u0275elementStart"](3,"thead"),m["\u0275\u0275elementStart"](4,"tr"),m["\u0275\u0275elementStart"](5,"th"),m["\u0275\u0275text"](6,"Student Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"th"),m["\u0275\u0275text"](8,"Roll Number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"th"),m["\u0275\u0275text"](10,"Mark Attendance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"tbody"),m["\u0275\u0275template"](12,h,11,6,"tr",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngForOf",e.students)}}function g(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",10),m["\u0275\u0275text"](1,"No Students Found"),m["\u0275\u0275elementEnd"]())}const S=[{path:"",component:(()=>{class e{constructor(e,t,n,a,r,c,i,d,l){this.branchService=e,this.courseService=t,this.batchService=n,this.dateService=a,this.lectureService=r,this.attendanceService=c,this.toastrService=i,this.router=d,this.route=l}ngOnInit(){return this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.lectureService.getLectureData().subscribe(e=>{this.lecture=e}),this.lecture?(this.courseService.getCourseData().subscribe(e=>{this.course=e}),this.batchService.getBatchData().subscribe(e=>{this.batch=e}),this.students=[],void this.getStudents()):(this.showToastr("top-right","danger","Lecture Not Found"),void this.back())):(this.showToastr("top-right","danger","Branch Not Found"),void this.back())}getStudents(){this.loading=!0,this.attendanceService.getStudents(this.lecture.branch,this.lecture.category,this.lecture.course,this.lecture.batch,this.lecture._id).subscribe(e=>{e.map(e=>e.attendance=!!e.attendance&&e.attendance),this.students=e,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}onChangeAttendance(e,t){this.students[t].attendance=e}saveAttendance(){this.attendanceService.saveAttendance({date:this.lecture.date,branch:this.lecture.branch,category:this.lecture.category,course:this.lecture.course,batch:this.lecture.batch,subject:this.lecture.subject,lecture:this.lecture._id,attendance:this.students}).subscribe(e=>{this.showToastr("top-right","success",`Attendance ${e?"Updated":"Marked"} Successfully`),this.back()},e=>{this.showToastr("top-right","danger",e)})}getTime(e,t){return(e=this.dateService.formatTime(e))+" - "+this.dateService.formatTime(t)}getTeacher(e){return e}getSubject(e){const t=this.course.subjects.find(t=>t._id===e);return t?t.subject:"--"}back(){this.router.navigate(["../manage"],{relativeTo:this.route})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](i.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](a.Db),m["\u0275\u0275directiveInject"](u.c),m["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-attendance"]],decls:46,vars:8,consts:[[1,"row"],[1,"col-md-4","col-sm-6","col-12"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-12","text-right"],["type","button","nbButton","","status","primary","size","small",3,"click"],["noStudents",""],[1,"col-12"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mark-attendance-selector"],["type","checkbox",1,"mark-attendance",3,"id","checked","change"],[3,"for"]],template:function(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"span"),m["\u0275\u0275elementStart"](5,"strong"),m["\u0275\u0275text"](6,"Date: "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",1),m["\u0275\u0275elementStart"](9,"span"),m["\u0275\u0275elementStart"](10,"strong"),m["\u0275\u0275text"](11,"Time: "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",1),m["\u0275\u0275elementStart"](14,"span"),m["\u0275\u0275elementStart"](15,"strong"),m["\u0275\u0275text"](16,"Course: "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",1),m["\u0275\u0275elementStart"](19,"span"),m["\u0275\u0275elementStart"](20,"strong"),m["\u0275\u0275text"](21,"Batch: "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](22),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",1),m["\u0275\u0275elementStart"](24,"span"),m["\u0275\u0275elementStart"](25,"strong"),m["\u0275\u0275text"](26,"Subject: "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](27),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"div",1),m["\u0275\u0275elementStart"](29,"span"),m["\u0275\u0275elementStart"](30,"strong"),m["\u0275\u0275text"](31,"Lecture Topic: "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](32),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"nb-card"),m["\u0275\u0275elementStart"](34,"nb-card-header"),m["\u0275\u0275elementStart"](35,"h4"),m["\u0275\u0275text"](36,"ATTENDANCE RECORDING"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"nb-card-body"),m["\u0275\u0275elementStart"](38,"div",0),m["\u0275\u0275template"](39,p,13,1,"div",2),m["\u0275\u0275element"](40,"hr"),m["\u0275\u0275elementStart"](41,"div",3),m["\u0275\u0275elementStart"](42,"button",4),m["\u0275\u0275listener"]("click",(function(){return t.saveAttendance()})),m["\u0275\u0275text"](43," Save "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](44,g,2,0,"ng-template",null,5,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275reference"](45);m["\u0275\u0275advance"](7),m["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.lecture.date)),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.getTime(t.lecture.startTime,t.lecture.endTime)),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.course.basicDetails.courseName),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.batch.basicDetails.batchName),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.getSubject(t.lecture.subject)),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.lecture.topic),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.students.length>0)("ngIfElse",e)}},directives:[a.x,a.z,a.w,r.n,a.u,r.m],styles:[".mark-attendance-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none!important}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:inline-block;font-size:75%;border:1px solid #aaa;border-radius:50%;background:#fff;height:30px;width:30px;padding:1px;margin:1px;line-height:25px;text-align:center;cursor:pointer;transition:background .2s,color .2s}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#0095ff;color:#fff}"]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found"}];let b=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[u.g.forChild(S)],u.g]}),e})();n.d(t,"AttendanceModule",(function(){return v}));let v=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,b,a.A,a.v,a.O]]}),e})()}}]);