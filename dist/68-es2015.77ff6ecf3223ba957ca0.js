(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{dGLe:function(t,e,c){"use strict";c.r(e);var n=c("aceb"),r=c("ofXK"),a=c("ZatZ"),s=c("IAlr"),b=c("lst6"),i=c("7kqb"),o=c("ggm5"),d=c("EQut"),u=c("fXoL"),h=c("tyNb");function l(t,e){if(1&t){const t=u.Xb();u.Wb(0,"tr"),u.Wb(1,"td"),u.Cc(2),u.Vb(),u.Wb(3,"td"),u.Cc(4),u.Vb(),u.Wb(5,"td",10),u.Wb(6,"div",11),u.Wb(7,"label"),u.Wb(8,"input",12),u.ec("change",(function(c){u.uc(t);const n=e.index;return u.gc(2).onChangeAttendance(c.target.checked,n)})),u.Vb(),u.Wb(9,"label",13),u.Cc(10),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=e.$implicit;u.Eb(2),u.Dc(t.name),u.Eb(2),u.Dc(t.rollNumber),u.Eb(4),u.mc("id",t.student)("checked",t.attendance),u.Eb(1),u.mc("for",t.student),u.Eb(1),u.Dc(t.attendance?"P":"A")}}function g(t,e){if(1&t&&(u.Wb(0,"div",6),u.Wb(1,"div",7),u.Wb(2,"table",8),u.Wb(3,"thead"),u.Wb(4,"tr"),u.Wb(5,"th"),u.Cc(6,"Student Name"),u.Vb(),u.Wb(7,"th"),u.Cc(8,"Roll Number"),u.Vb(),u.Wb(9,"th"),u.Cc(10,"Mark Attendance"),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"tbody"),u.Ac(12,l,11,6,"tr",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.gc();u.Eb(12),u.mc("ngForOf",t.students)}}function p(t,e){1&t&&(u.Wb(0,"p",10),u.Cc(1,"No Students Found"),u.Vb())}const V=[{path:"",component:(()=>{class t{constructor(t,e,c,n,r,a,s,b,i){this.branchService=t,this.courseService=e,this.batchService=c,this.dateService=n,this.lectureService=r,this.attendanceService=a,this.toastrService=s,this.router=b,this.route=i}ngOnInit(){return this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.lectureService.getLectureData().subscribe(t=>{this.lecture=t}),this.lecture?(this.courseService.getCourseData().subscribe(t=>{this.course=t}),this.batchService.getBatchData().subscribe(t=>{this.batch=t}),this.students=[],void this.getStudents()):(this.showToastr("top-right","danger","Lecture Not Found"),void this.back())):(this.showToastr("top-right","danger","Branch Not Found"),void this.back())}getStudents(){this.loading=!0,this.attendanceService.getStudents(this.lecture.branch,this.lecture.category,this.lecture.course,this.lecture.batch,this.lecture._id).subscribe(t=>{t.map(t=>t.attendance=!!t.attendance&&t.attendance),this.students=t,this.loading=!1},t=>{this.showToastr("top-right","danger",t),this.loading=!1})}onChangeAttendance(t,e){this.students[e].attendance=t}saveAttendance(){this.attendanceService.saveAttendance({date:this.lecture.date,branch:this.lecture.branch,category:this.lecture.category,course:this.lecture.course,batch:this.lecture.batch,subject:this.lecture.subject,lecture:this.lecture._id,attendance:this.students}).subscribe(t=>{this.showToastr("top-right","success",`Attendance ${t?"Updated":"Marked"} Successfully`),this.back()},t=>{this.showToastr("top-right","danger",t)})}getTime(t,e){return(t=this.dateService.formatTime(t))+" - "+this.dateService.formatTime(e)}getTeacher(t){return t}getSubject(t){const e=this.course.subjects.find(e=>e._id===t);return e?e.subject:"--"}back(){this.router.navigate(["../manage"],{relativeTo:this.route})}showToastr(t,e,c){this.toastrService.show(e,c,{position:t,status:e})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(d.a),u.Qb(s.a),u.Qb(b.a),u.Qb(a.a),u.Qb(i.a),u.Qb(o.a),u.Qb(n.xb),u.Qb(h.c),u.Qb(h.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["ngx-attendance"]],decls:46,vars:8,consts:[[1,"row"],[1,"col-md-4","col-sm-6","col-12"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-12","text-right"],["type","button","nbButton","","status","primary","size","small",3,"click"],["noStudents",""],[1,"col-12"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mark-attendance-selector"],["type","checkbox",1,"mark-attendance",3,"id","checked","change"],[3,"for"]],template:function(t,e){if(1&t&&(u.Wb(0,"nb-card"),u.Wb(1,"nb-card-header"),u.Wb(2,"div",0),u.Wb(3,"div",1),u.Wb(4,"span"),u.Wb(5,"strong"),u.Cc(6,"Date: "),u.Vb(),u.Cc(7),u.Vb(),u.Vb(),u.Wb(8,"div",1),u.Wb(9,"span"),u.Wb(10,"strong"),u.Cc(11,"Time: "),u.Vb(),u.Cc(12),u.Vb(),u.Vb(),u.Wb(13,"div",1),u.Wb(14,"span"),u.Wb(15,"strong"),u.Cc(16,"Course: "),u.Vb(),u.Cc(17),u.Vb(),u.Vb(),u.Wb(18,"div",1),u.Wb(19,"span"),u.Wb(20,"strong"),u.Cc(21,"Batch: "),u.Vb(),u.Cc(22),u.Vb(),u.Vb(),u.Wb(23,"div",1),u.Wb(24,"span"),u.Wb(25,"strong"),u.Cc(26,"Subject: "),u.Vb(),u.Cc(27),u.Vb(),u.Vb(),u.Wb(28,"div",1),u.Wb(29,"span"),u.Wb(30,"strong"),u.Cc(31,"Lecture Topic: "),u.Vb(),u.Cc(32),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(33,"nb-card"),u.Wb(34,"nb-card-header"),u.Wb(35,"h4"),u.Cc(36,"ATTENDANCE RECORDING"),u.Vb(),u.Vb(),u.Wb(37,"nb-card-body"),u.Wb(38,"div",0),u.Ac(39,g,13,1,"div",2),u.Rb(40,"hr"),u.Wb(41,"div",3),u.Wb(42,"button",4),u.ec("click",(function(){return e.saveAttendance()})),u.Cc(43," Save "),u.Vb(),u.Vb(),u.Vb(),u.Ac(44,p,2,0,"ng-template",null,5,u.Bc),u.Vb(),u.Vb()),2&t){const t=u.sc(45);u.Eb(7),u.Dc(e.dateService.formatDate(e.lecture.date)),u.Eb(5),u.Dc(e.getTime(e.lecture.startTime,e.lecture.endTime)),u.Eb(5),u.Dc(e.course.basicDetails.courseName),u.Eb(5),u.Dc(e.batch.basicDetails.batchName),u.Eb(5),u.Dc(e.getSubject(e.lecture.subject)),u.Eb(5),u.Dc(e.lecture.topic),u.Eb(7),u.mc("ngIf",e.students.length>0)("ngIfElse",t)}},directives:[n.x,n.z,n.w,r.n,n.u,r.m],styles:[".mark-attendance-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none!important}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:inline-block;font-size:75%;border:1px solid #aaa;border-radius:50%;background:#fff;height:30px;width:30px;padding:1px;margin:1px;line-height:25px;text-align:center;cursor:pointer;transition:background .2s,color .2s}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#0095ff;color:#fff}"]}),t})()},{path:"page-not-found",loadChildren:()=>c.e(0).then(c.bind(null,"DeSt")).then(t=>t.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found"}];let W=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[h.g.forChild(V)],h.g]}),t})();c.d(e,"AttendanceModule",(function(){return f}));let f=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[r.c,W,n.A,n.v,n.N]]}),t})()}}]);