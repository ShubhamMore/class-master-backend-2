{"version":3,"sources":["webpack:///src/app/institute/branch/exam/online-test/online-test-question/add-online-test-questions/add-online-test-questions.component.html","webpack:///src/app/institute/branch/exam/online-test/online-test-question/add-online-test-questions/add-online-test-questions-routing.module.ts","webpack:///src/app/institute/branch/exam/online-test/online-test-question/add-online-test-questions/add-online-test-questions.component.ts","webpack:///src/app/institute/branch/exam/online-test/online-test-question/add-online-test-questions/add-online-test-questions.module.ts"],"names":["routes","path","component","AddOnlineTestQuestionsComponent","branchService","onlineExamQuestionService","onlineExamService","dateService","toastrService","router","route","this","loading","submit","branchId","getBranchId","getOnlineExamData","subscribe","onlineExam","back","mode","queryParams","param","onlineExamQuestionId","getOnlineExamQuestionId","showToastr","onlineExamQuestionForm","question","validators","required","answers","marks","eachQuestionMarks","atLeastOneCorrectAnswerValidator","bind","getOnlineExamQuestion","onlineExamQuestion","patchValue","get","controls","forEach","answer","addOption","err","generateOption","navigate","relativeTo","group","isCorrect","value","atLeastOneCorrectAnswerError","answerData","push","newAnswer","i","removeAt","stepper","previous","markAllAsTouched","invalid","next","_id","editOnlineExamQuestion","res","newOnlineExamQuestion","position","status","message","show","replaceUrl","deleteOnlineExamQuestionId","deleteOnlineExamQuestionData","submitOnlineExamQuestionForm","previousStep","saveOnlineExamQuestion","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","AddOnlineTestQuestionsRoutingModule","forChild","AddOnlineTestQuestionsModule"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\r\n  <nb-card-header>\r\n    <div class=\"row\">\r\n      <div class=\"col-9\">\r\n        <h3>{{ onlineExam ? 'Edit' : 'Add' }} Online Exam Question</h3>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <button class=\"float-right\" nbButton size=\"small\" status=\"warning\" (click)=\"back()\">\r\n          Back\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </nb-card-header>\r\n\r\n  <nb-card-body>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <nb-stepper #stepper [linear]=\"true\" [disableStepNavigation]=\"true\">\r\n          <nb-step [stepControl]=\"onlineExamQuestionForm\" label=\"Online Exam Details\">\r\n            <form [formGroup]=\"onlineExamQuestionForm\" (submit)=\"submitOnlineExamQuestionForm()\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12\">\r\n                  <nb-card>\r\n                    <nb-card-header>\r\n                      <label class=\"label\" for=\"input-question\">Question:</label>\r\n                    </nb-card-header>\r\n                    <nb-card-body>\r\n                      <div class=\"form-control-group\">\r\n                        <textarea\r\n                          type=\"text\"\r\n                          nbInput\r\n                          id=\"input-question\"\r\n                          name=\"question\"\r\n                          rows=\"2\"\r\n                          formControlName=\"question\"\r\n                          placeholder=\"Question\"\r\n                          fullWidth\r\n                          [status]=\"\r\n                            onlineExamQuestionForm.get('question').touched\r\n                              ? onlineExamQuestionForm.get('question').invalid\r\n                                ? 'danger'\r\n                                : 'success'\r\n                              : 'basic'\r\n                          \"\r\n                        ></textarea>\r\n                        <ng-container\r\n                          *ngIf=\"\r\n                            onlineExamQuestionForm.get('question').invalid &&\r\n                            onlineExamQuestionForm.get('question').touched\r\n                          \"\r\n                        >\r\n                          <p\r\n                            class=\"caption status-danger\"\r\n                            *ngIf=\"onlineExamQuestionForm.get('question').errors?.required\"\r\n                          >\r\n                            Online Exam Question is required!\r\n                          </p>\r\n                        </ng-container>\r\n                      </div>\r\n                    </nb-card-body>\r\n                  </nb-card>\r\n                </div>\r\n\r\n                <div\r\n                  class=\"col-md-12\"\r\n                  *ngFor=\"\r\n                    let answer of onlineExamQuestionForm.get('answers')['controls'];\r\n                    let i = index\r\n                  \"\r\n                >\r\n                  <nb-card [formGroup]=\"answer\">\r\n                    <nb-card-header>\r\n                      <div class=\"row\">\r\n                        <div class=\"col-12\">\r\n                          <button\r\n                            class=\"float-right\"\r\n                            type=\"button\"\r\n                            nbButton\r\n                            size=\"small\"\r\n                            status=\"danger\"\r\n                            (click)=\"deleteOption(i)\"\r\n                            *ngIf=\"i !== 0 && i !== 1\"\r\n                          >\r\n                            <nb-icon icon=\"trash-outline\"></nb-icon>\r\n                          </button>\r\n                          <nb-checkbox\r\n                            [checked]=\"answer.get('isCorrect').value\"\r\n                            formControlName=\"isCorrect\"\r\n                          >\r\n                            Answer {{ i + 1 }}\r\n                          </nb-checkbox>\r\n                        </div>\r\n                      </div>\r\n                    </nb-card-header>\r\n                    <nb-card-body>\r\n                      <div class=\"form-control-group\">\r\n                        <textarea\r\n                          type=\"text\"\r\n                          nbInput\r\n                          rows=\"2\"\r\n                          id=\"input-answer-{{ i }}\"\r\n                          name=\"answer-{{ i }}\"\r\n                          formControlName=\"answer\"\r\n                          placeholder=\"Answer {{ i + 1 }}\"\r\n                          fullWidth\r\n                          [status]=\"\r\n                            answer.get('answer').touched\r\n                              ? answer.get('answer').invalid\r\n                                ? 'danger'\r\n                                : 'success'\r\n                              : 'basic'\r\n                          \"\r\n                        ></textarea>\r\n                        <ng-container\r\n                          *ngIf=\"answer.get('answer').invalid && answer.get('answer').touched\"\r\n                        >\r\n                          <p\r\n                            class=\"caption status-danger\"\r\n                            *ngIf=\"answer.get('answer').errors?.required\"\r\n                          >\r\n                            Answer {{ i + 1 }} is required!\r\n                          </p>\r\n                        </ng-container>\r\n                      </div>\r\n                    </nb-card-body>\r\n                  </nb-card>\r\n                </div>\r\n\r\n                <div class=\"col-md-12\">\r\n                  <button\r\n                    class=\"float-right\"\r\n                    type=\"button\"\r\n                    nbButton\r\n                    size=\"small\"\r\n                    status=\"primary\"\r\n                    (click)=\"generateOption()\"\r\n                  >\r\n                    Add Option\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-12\">\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    onlineExamQuestionForm.hasError('atLeastOneCorrectAnswerError') &&\r\n                    onlineExamQuestionForm.touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"\r\n                      onlineExamQuestionForm.hasError('atLeastOneCorrectAnswerError') &&\r\n                      onlineExamQuestionForm.touched\r\n                    \"\r\n                  >\r\n                    *Please Select at least One Correct Answer\r\n                  </p>\r\n                </ng-container>\r\n                <p><strong>*For correct answers, Tick the checkbox</strong></p>\r\n              </div>\r\n\r\n              <hr />\r\n              <div class=\"row\">\r\n                <div class=\"col-12\">\r\n                  <button type=\"submit\" class=\"float-right\" nbButton size=\"small\" status=\"basic\">\r\n                    Next\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </nb-step>\r\n\r\n          <nb-step label=\"Submit\">\r\n            <div class=\"step-container\">\r\n              <div class=\"table-responsive\">\r\n                <table class=\"table table-bordered\">\r\n                  <tbody>\r\n                    <tr>\r\n                      <th>Online Exam Question</th>\r\n                      <td>{{ onlineExamQuestionForm.value.question }}</td>\r\n                    </tr>\r\n                    <tr\r\n                      *ngFor=\"\r\n                        let answer of onlineExamQuestionForm.get('answers')['controls'];\r\n                        let i = index\r\n                      \"\r\n                    >\r\n                      <th>Answer {{ i + 1 }}</th>\r\n                      <td>\r\n                        <nb-icon\r\n                          [status]=\"answer.value.isCorrect ? 'success' : 'danger'\"\r\n                          [icon]=\"answer.value.isCorrect ? 'checkmark-outline' : 'close-outline'\"\r\n                        ></nb-icon>\r\n                        &nbsp;&nbsp;\r\n                        <span>{{ answer.value.answer }}</span>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n\r\n              <hr />\r\n\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6 text-left\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"\"\r\n                    nbButton\r\n                    size=\"small\"\r\n                    (click)=\"previousStep()\"\r\n                    [disabled]=\"submit\"\r\n                  >\r\n                    <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\r\n                    <span>prev</span>\r\n                  </button>\r\n                </div>\r\n                <div class=\"col-md-6 text-right\">\r\n                  <button\r\n                    nbButton\r\n                    size=\"small\"\r\n                    (click)=\"saveOnlineExamQuestion()\"\r\n                    [disabled]=\"submit\"\r\n                    [nbSpinner]=\"submit\"\r\n                    nbSpinnerStatus=\"primary\"\r\n                    nbSpinnerSize=\"small\"\r\n                  >\r\n                    <span>Submit</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </nb-step>\r\n        </nb-stepper>\r\n      </div>\r\n    </div>\r\n  </nb-card-body>\r\n</nb-card>\r\n","import { AddOnlineTestQuestionsComponent } from './add-online-test-questions.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: AddOnlineTestQuestionsComponent },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddOnlineTestQuestionsRoutingModule {}\n","import { NbToastrService, NbStepperComponent } from '@nebular/theme';\r\nimport { DateService } from './../../../../../../services/shared-services/date.service';\r\nimport { OnlineExamQuestionService } from './../../../../../../services/online-exam-question.service';\r\nimport { FormGroup, FormControl, Validators, FormArray } from '@angular/forms';\r\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport { OnlineExamService } from './../../../../../../services/online-exam.service';\r\nimport { OnlineExamModel } from './../../../../../../models/online-exam.model';\r\nimport { OnlineExamQuestionModel } from './../../../../../../models/online-exam-question.model';\r\nimport { BranchService } from './../../../../../../services/branch.service';\r\n\r\n@Component({\r\n  selector: 'ngx-add-online-test-questions',\r\n  templateUrl: './add-online-test-questions.component.html',\r\n  styleUrls: ['./add-online-test-questions.component.scss'],\r\n})\r\nexport class AddOnlineTestQuestionsComponent implements OnInit, OnDestroy {\r\n  @ViewChild('stepper', { static: false }) stepper: NbStepperComponent;\r\n\r\n  loading: boolean;\r\n  submit: boolean;\r\n\r\n  branchId: string;\r\n  onlineExam: OnlineExamModel;\r\n  onlineExamQuestion: OnlineExamQuestionModel;\r\n  onlineExamQuestionId: string;\r\n  onlineExamQuestionForm: FormGroup;\r\n\r\n  constructor(\r\n    private branchService: BranchService,\r\n    private onlineExamQuestionService: OnlineExamQuestionService,\r\n    private onlineExamService: OnlineExamService,\r\n    public dateService: DateService,\r\n    private toastrService: NbToastrService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true;\r\n    this.submit = false;\r\n\r\n    this.branchId = this.branchService.getBranchId();\r\n    if (!this.branchId) {\r\n      this.router.navigate(['../'], { relativeTo: this.route });\r\n      return;\r\n    }\r\n\r\n    this.onlineExamService.getOnlineExamData().subscribe((onlineExam: OnlineExamModel) => {\r\n      if (!onlineExam) {\r\n        this.back();\r\n        return;\r\n      }\r\n\r\n      this.onlineExam = onlineExam;\r\n\r\n      let mode: string;\r\n\r\n      this.route.queryParams.subscribe((param: Params) => {\r\n        mode = param.mode;\r\n      });\r\n\r\n      this.onlineExamQuestionId = this.onlineExamQuestionService.getOnlineExamQuestionId();\r\n\r\n      if (mode && mode !== 'edit') {\r\n        this.showToastr('top-right', 'danger', 'Invalid Route');\r\n        return;\r\n      } else if (mode && !this.onlineExamQuestionId) {\r\n        this.showToastr('top-right', 'danger', 'Online Exam Question Not Found');\r\n        return;\r\n      }\r\n\r\n      this.onlineExamQuestionForm = new FormGroup(\r\n        {\r\n          question: new FormControl(null, { validators: [Validators.required] }),\r\n          answers: new FormArray([]),\r\n          marks: new FormControl(this.onlineExam.eachQuestionMarks, {\r\n            validators: [Validators.required],\r\n          }),\r\n        },\r\n        { validators: this.atLeastOneCorrectAnswerValidator.bind(this) },\r\n      );\r\n\r\n      if (mode && this.onlineExamQuestionId) {\r\n        this.onlineExamQuestionService.getOnlineExamQuestion(this.onlineExamQuestionId).subscribe(\r\n          (question: OnlineExamQuestionModel) => {\r\n            this.onlineExamQuestion = question;\r\n\r\n            this.onlineExamQuestionForm.patchValue({\r\n              question: this.onlineExamQuestion.question,\r\n              marks: this.onlineExamQuestion.marks,\r\n            });\r\n\r\n            const answers = this.onlineExamQuestionForm.get('answers') as FormArray;\r\n            answers.controls = [];\r\n            this.onlineExamQuestion.answers.forEach((answer) => {\r\n              this.addOption(answer);\r\n            });\r\n            this.loading = false;\r\n          },\r\n          (err: any) => {\r\n            this.showToastr('top-right', 'danger', err);\r\n            this.back();\r\n            this.loading = false;\r\n          },\r\n        );\r\n      } else {\r\n        this.generateOption();\r\n        this.generateOption();\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  atLeastOneCorrectAnswerValidator(group: FormGroup): { [s: string]: boolean } {\r\n    const answers = group.value.answers;\r\n    let isCorrect = false;\r\n    answers.forEach((answer: any) => {\r\n      if (answer.isCorrect) {\r\n        isCorrect = true;\r\n      }\r\n    });\r\n\r\n    if (!isCorrect) {\r\n      return { atLeastOneCorrectAnswerError: true };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  newAnswer(answerData: any) {\r\n    return new FormGroup({\r\n      answer: new FormControl(answerData.answer ? answerData.answer : null, {\r\n        validators: [Validators.required],\r\n      }),\r\n      isCorrect: new FormControl(answerData.isCorrect, {\r\n        validators: [],\r\n      }),\r\n    });\r\n  }\r\n\r\n  addOption(answer: any) {\r\n    const answers = this.onlineExamQuestionForm.get('answers') as FormArray;\r\n    answers.push(this.newAnswer(answer));\r\n  }\r\n\r\n  generateOption() {\r\n    const answer = {\r\n      answer: '',\r\n      isCorrect: false,\r\n    };\r\n    this.addOption(answer);\r\n  }\r\n\r\n  deleteOption(i: number) {\r\n    if (i !== 0 && i !== 1) {\r\n      const answers = this.onlineExamQuestionForm.get('answers') as FormArray;\r\n      answers.removeAt(i);\r\n    }\r\n  }\r\n\r\n  previousStep() {\r\n    this.stepper.previous();\r\n  }\r\n\r\n  submitOnlineExamQuestionForm() {\r\n    this.onlineExamQuestionForm.markAllAsTouched();\r\n    if (this.onlineExamQuestionForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'All Online Exam Question are Required');\r\n      return;\r\n    }\r\n\r\n    this.stepper.next();\r\n  }\r\n\r\n  saveOnlineExamQuestion() {\r\n    this.onlineExamQuestionForm.markAllAsTouched();\r\n    if (this.onlineExamQuestionForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'All Online Exam Question Fields are Required');\r\n      return;\r\n    }\r\n\r\n    this.submit = true;\r\n\r\n    const onlineExamQuestion: any = this.onlineExamQuestionForm.value;\r\n    onlineExamQuestion.onlineExam = this.onlineExam._id;\r\n\r\n    if (!this.onlineExamQuestion) {\r\n      this.onlineExamQuestionService.newOnlineExamQuestion(onlineExamQuestion).subscribe(\r\n        (res: any) => {\r\n          this.showToastr('top-right', 'success', 'New Question Added Successfully');\r\n          this.back();\r\n        },\r\n        (err: any) => {\r\n          this.showToastr('top-right', 'danger', err);\r\n          this.submit = false;\r\n        },\r\n      );\r\n    } else {\r\n      onlineExamQuestion._id = this.onlineExamQuestion._id;\r\n      this.onlineExamQuestionService.editOnlineExamQuestion(onlineExamQuestion).subscribe(\r\n        (res: any) => {\r\n          this.showToastr('top-right', 'success', 'New Question Added Successfully');\r\n          this.back();\r\n        },\r\n        (err: any) => {\r\n          this.showToastr('top-right', 'danger', err);\r\n          this.submit = false;\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  private showToastr(position: any, status: any, message: string) {\r\n    this.toastrService.show(status, message, {\r\n      position,\r\n      status,\r\n    });\r\n  }\r\n\r\n  back() {\r\n    this.router.navigate(['../'], { relativeTo: this.route, replaceUrl: true });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.onlineExamQuestionService.deleteOnlineExamQuestionId();\r\n    this.onlineExamQuestionService.deleteOnlineExamQuestionData();\r\n  }\r\n}\r\n","import { ReactiveFormsModule } from '@angular/forms';\nimport { AddOnlineTestQuestionsComponent } from './add-online-test-questions.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AddOnlineTestQuestionsRoutingModule } from './add-online-test-questions-routing.module';\n\nimport {\n  NbInputModule,\n  NbButtonModule,\n  NbCardModule,\n  NbSpinnerModule,\n  NbStepperModule,\n  NbSelectModule,\n  NbIconModule,\n  NbCheckboxModule,\n} from '@nebular/theme';\n\n@NgModule({\n  declarations: [AddOnlineTestQuestionsComponent],\n  imports: [\n    CommonModule,\n    AddOnlineTestQuestionsRoutingModule,\n    NbInputModule,\n    NbButtonModule,\n    NbCardModule,\n    NbSpinnerModule,\n    NbStepperModule,\n    NbSelectModule,\n    NbIconModule,\n    NbCheckboxModule,\n    ReactiveFormsModule,\n  ],\n})\nexport class AddOnlineTestQuestionsModule {}\n"]}