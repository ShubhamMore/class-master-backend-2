(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"7WzG":function(t,e,s){"use strict";s.r(e);var r=s("aceb"),a=s("3Pt+"),n=s("ofXK"),c=s("lst6"),b=s("IAlr"),i=s("ZatZ"),o=s("zZNt"),u=s("EQut"),d=s("fXoL"),h=s("tyNb");function m(t,e){if(1&t&&(d.Wb(0,"p",18),d.Cc(1),d.Vb()),2&t){const t=d.gc(2).$implicit,e=d.gc(2);d.Eb(1),d.Ec(" Enter ",e.getStudent(t.value.student)," Marks ")}}function g(t,e){if(1&t&&(d.Ub(0),d.Ac(1,m,2,1,"p",17),d.Tb()),2&t){const t=d.gc().$implicit;d.Eb(1),d.mc("ngIf",null==t.get("marks").errors?null:t.get("marks").errors.required)}}function l(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"tr",13),d.Wb(2,"td"),d.Cc(3),d.Vb(),d.Wb(4,"td"),d.Wb(5,"div",14),d.Rb(6,"input",15),d.Ac(7,g,2,1,"ng-container",16),d.Vb(),d.Vb(),d.Vb(),d.Tb()),2&t){const t=e.$implicit,s=d.gc(2);d.Eb(1),d.mc("formGroup",t),d.Eb(2),d.Dc(s.getStudent(t.value.student)),d.Eb(3),d.mc("status",t.get("marks").touched?t.get("marks").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",t.get("marks").invalid&&t.get("marks").touched)}}function f(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",7),d.Wb(1,"form",8),d.ec("submit",(function(){return d.uc(t),d.gc().saveMarks()})),d.Wb(2,"table",9),d.Wb(3,"thead"),d.Wb(4,"tr"),d.Wb(5,"th"),d.Cc(6,"#"),d.Vb(),d.Wb(7,"th"),d.Cc(8,"Student"),d.Vb(),d.Wb(9,"th"),d.Cc(10,"Marks"),d.Vb(),d.Vb(),d.Vb(),d.Wb(11,"tbody"),d.Ac(12,l,8,4,"ng-container",10),d.Vb(),d.Vb(),d.Rb(13,"hr"),d.Wb(14,"div",0),d.Wb(15,"div",11),d.Wb(16,"button",12),d.Cc(17," Save "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=d.gc();d.Eb(1),d.mc("formGroup",t.studentMarksForm),d.Eb(11),d.mc("ngForOf",t.studentMarksForm.get("marks").controls)}}function p(t,e){1&t&&(d.Wb(0,"p",19),d.Cc(1," No Students Found "),d.Vb())}const k=[{path:"",component:(()=>{class t{constructor(t,e,s,r,a,n,c,b){this.branchService=t,this.toastrService=e,this.courseService=s,this.batchService=r,this.router=a,this.examService=n,this.dateService=c,this.route=b}ngOnInit(){if(this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId)return this.examService.getExamData().subscribe(t=>{this.exam=t}),this.exam?(this.branchService.getCategoryData().subscribe(t=>{this.category=t}),this.courseService.getCourseData().subscribe(t=>{this.course=t}),this.batchService.getBatchData().subscribe(t=>{this.batch=t}),this.studentMarksForm=new a.f({marks:new a.b([])}),this.students=[],this.getMarks().controls=[],void this.examService.getStudents(this.exam.branch,this.exam.category,this.exam.course,this.exam.batch).subscribe(t=>{this.students=t,this.exam.marks.length>0?this.exam.marks.forEach(t=>{this.addStudentMark(t.student,t.marks)}):t.forEach(t=>{this.addStudentMark(t.student,null)}),this.loading=!1},t=>{this.showToastr("top-right","danger",t),this.back()})):(this.showToastr("top-right","danger","Exam Not Found"),void this.back());this.back()}getMarks(){return this.studentMarksForm.get("marks")}addStudentMark(t,e){return new a.f({student:new a.d(t,{validators:[a.u.required]}),marks:new a.d(e,{validators:[a.u.required]})})}saveMarks(){this.studentMarksForm.markAllAsTouched(),this.studentMarksForm.invalid?this.showToastr("top-right","danger","Enter All Students valid Marks"):(this.loading=!0,this.examService.saveStudentsMarks(this.exam._id,this.studentMarksForm.value.marks).subscribe(t=>{this.showToastr("top-right","success","Exam Score Updates Successfully!"),this.back()},t=>{this.showToastr("top-right","danger",t),this.loading=!1}))}showToastr(t,e,s){this.toastrService.show(e,s,{position:t,status:e})}getSubject(t){const e=this.course.subjects.find(e=>e._id===t);return e?e.subject:"--"}getStudent(t){const e=this.students.find(e=>e.student===t);return e?e.student:"--"}back(){this.router.navigate(["../"],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(u.a),d.Qb(r.xb),d.Qb(b.a),d.Qb(c.a),d.Qb(h.c),d.Qb(o.a),d.Qb(i.a),d.Qb(h.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["ngx-add-test-score"]],decls:56,vars:10,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","status","warning","size","tiny",1,"float-right",3,"click"],[1,"col-md-6","col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],["noStudentMarks",""],[1,"table-responsive"],[3,"formGroup","submit"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"col-12"],["type","submit","nbButton","","status","primary","size","medium",1,"float-right"],[3,"formGroup"],[1,"form-control-group"],["type","number","nbInput","","id","input-marks","name","marks","placeholder","marks","formControlName","marks","autofocus","","fullWidth","",3,"status"],[4,"ngIf"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"text-center","mt-5","mb-5"]],template:function(t,e){if(1&t&&(d.Wb(0,"nb-card"),d.Wb(1,"nb-card-header"),d.Wb(2,"div",0),d.Wb(3,"div",1),d.Wb(4,"h3"),d.Cc(5,"Exam Score"),d.Vb(),d.Vb(),d.Wb(6,"div",2),d.Wb(7,"button",3),d.ec("click",(function(){return e.back()})),d.Cc(8," Back "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(9,"nb-card-body"),d.Wb(10,"nb-card"),d.Wb(11,"nb-card-header"),d.Wb(12,"div",0),d.Wb(13,"div",4),d.Wb(14,"span"),d.Wb(15,"strong"),d.Cc(16,"Exam Title: "),d.Vb(),d.Cc(17),d.Vb(),d.Rb(18,"br"),d.Wb(19,"span"),d.Wb(20,"strong"),d.Cc(21,"Date: "),d.Vb(),d.Cc(22),d.Vb(),d.Rb(23,"br"),d.Wb(24,"span"),d.Wb(25,"strong"),d.Cc(26,"Time: "),d.Vb(),d.Cc(27),d.Vb(),d.Rb(28,"br"),d.Wb(29,"span"),d.Wb(30,"strong"),d.Cc(31,"Duration: "),d.Vb(),d.Cc(32),d.Vb(),d.Vb(),d.Wb(33,"div",4),d.Wb(34,"span"),d.Wb(35,"strong"),d.Cc(36,"Category: "),d.Vb(),d.Cc(37),d.Vb(),d.Rb(38,"br"),d.Wb(39,"span"),d.Wb(40,"strong"),d.Cc(41,"Course: "),d.Vb(),d.Cc(42),d.Vb(),d.Rb(43,"br"),d.Wb(44,"span"),d.Wb(45,"strong"),d.Cc(46,"Batch: "),d.Vb(),d.Cc(47),d.Vb(),d.Rb(48,"br"),d.Wb(49,"span"),d.Wb(50,"strong"),d.Cc(51,"Subject: "),d.Vb(),d.Cc(52),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Ac(53,f,18,2,"div",5),d.Ac(54,p,2,0,"ng-template",null,6,d.Bc),d.Vb(),d.Vb()),2&t){const t=d.sc(55);d.Eb(17),d.Dc(e.exam.examTitle),d.Eb(5),d.Dc(e.dateService.formatDate(e.exam.date)),d.Eb(5),d.Dc(e.dateService.formatTime(e.exam.time)),d.Eb(5),d.Ec("",e.exam.duration," Min"),d.Eb(5),d.Dc(e.category.category),d.Eb(5),d.Dc(e.course.basicDetails.courseName),d.Eb(5),d.Dc(e.batch.basicDetails.batchName),d.Eb(5),d.Dc(e.getSubject(e.exam.subject)),d.Eb(1),d.mc("ngIf",e.studentMarksForm.get("marks").controls.length>0)("ngIfElse",t)}},directives:[r.x,r.z,r.u,r.w,n.n,a.v,a.n,a.g,n.m,a.q,r.O,a.a,a.m,a.e],styles:[""]}),t})()},{path:"page-not-found",loadChildren:()=>s.e(0).then(s.bind(null,"DeSt")).then(t=>t.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let v=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[h.g.forChild(k)],h.g]}),t})();s.d(e,"AddTestScoreModule",(function(){return W}));let W=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[n.c,v,r.A,r.P,r.v,a.s]]}),t})()}}]);