{"version":3,"sources":["webpack:///src/app/institute/branch/assignment/assignment-submission/submission-grading/submission-grading.component.html","webpack:///src/app/institute/branch/assignment/assignment-submission/submission-grading/submission-grading-routing.module.ts","webpack:///src/app/institute/branch/assignment/assignment-submission/submission-grading/submission-grading.component.ts","webpack:///src/app/institute/branch/assignment/assignment-submission/submission-grading/submission-grading.module.ts"],"names":["routes","path","component","SubmissionGradingComponent","branchService","assignmentSubmissionService","assignmentService","dateService","router","route","toastrService","this","loading","submit","branchId","getBranchId","getAssignmentData","subscribe","assignment","showToastr","back","getAssignmentSubmissionData","assignmentSubmission","assignmentSubmissionForm","grades","validators","required","min","max","totalGrades","remark","markAllAsTouched","invalid","submissionGrades","_id","value","saveAssignmentSubmissionGrades","res","error","position","status","message","show","navigate","relativeTo","deleteAssignmentSubmissionData","loadChildren","then","m","PageNotFoundModule","redirectTo","SubmissionGradingRoutingModule","forChild","SubmissionGradingModule"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <div>\n      <strong>Assignment : </strong>\n      <span>{{ assignment.topic }}</span>\n      <br />\n      <strong>Submission Date : </strong>\n      <span>{{ dateService.formatDate(assignment.submissionDate) }}</span>\n      <br />\n      <strong>Description : </strong>\n      <br />\n      <span class=\"pl-3\">{{ assignment.description }}</span>\n    </div>\n  </nb-card-header>\n  <nb-card-body>\n    <form\n      (submit)=\"saveGrades()\"\n      [formGroup]=\"assignmentSubmissionForm\"\n      *ngIf=\"!loading; else loadingData\"\n    >\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <p>\n            <strong>Description : </strong>\n            <br />\n            <span>{{ assignmentSubmission.description }}</span>\n          </p>\n        </div>\n        <div class=\"col-md-6\">\n          <p>\n            <strong>Submitted On : </strong\n            >{{ dateService.millisecondsToDate(assignmentSubmission.createdAt) }}\n          </p>\n          <strong>Attachment : </strong>\n          <a\n            [href]=\"assignmentSubmission.secureUrl\"\n            target=\"_blank\"\n            download=\"{{ assignmentSubmission.studentName + '-' + assignmentSubmission.fileName }}\"\n          >\n            {{ assignmentSubmission.fileName }}\n          </a>\n        </div>\n\n        <div class=\"col-md-6\">\n          <div class=\"form-control-group\">\n            <label class=\"label\" for=\"input-submission-grades\">Grades:</label>\n            <input\n              type=\"number\"\n              nbInput\n              id=\"input-submission-grades\"\n              name=\"grades\"\n              formControlName=\"grades\"\n              min=\"0\"\n              [max]=\"assignment.totalGrades\"\n              fullWidth\n              [status]=\"\n                assignmentSubmissionForm.get('grades').touched\n                  ? assignmentSubmissionForm.get('grades').invalid\n                    ? 'danger'\n                    : 'success'\n                  : 'basic'\n              \"\n              [placeholder]=\"assignment.totalGrades\"\n            />\n            <ng-container\n              *ngIf=\"\n                assignmentSubmissionForm.get('grades').invalid &&\n                assignmentSubmissionForm.get('grades').touched\n              \"\n            >\n              <p\n                class=\"caption status-danger\"\n                *ngIf=\"assignmentSubmissionForm.get('grades').errors?.required\"\n              >\n                Assignment Grades are required!\n              </p>\n              <p\n                class=\"caption status-danger\"\n                *ngIf=\"assignmentSubmissionForm.get('totalGrades').errors?.min\"\n              >\n                Assignment Total Grades Should be more than equal to 0\n              </p>\n              <p\n                class=\"caption status-danger\"\n                *ngIf=\"assignmentSubmissionForm.get('totalGrades').errors?.max\"\n              >\n                Assignment Total Grades Should be less than equal to {{ assignment.totalGrades }}\n              </p>\n            </ng-container>\n          </div>\n        </div>\n\n        <div class=\"col-md-12\">\n          <div class=\"form-control-group\">\n            <label class=\"label\" for=\"input-submission-remark\">Remark:</label>\n            <textarea\n              type=\"text\"\n              nbInput\n              id=\"input-submission-remark\"\n              name=\"remark\"\n              rows=\"2\"\n              formControlName=\"remark\"\n              placeholder=\"Remark\"\n              fullWidth\n              [status]=\"\n                assignmentSubmissionForm.get('remark').touched\n                  ? assignmentSubmissionForm.get('remark').invalid\n                    ? 'danger'\n                    : 'success'\n                  : 'basic'\n              \"\n            ></textarea>\n            <ng-container\n              *ngIf=\"\n                assignmentSubmissionForm.get('remark').invalid &&\n                assignmentSubmissionForm.get('remark').touched\n              \"\n            >\n              <p\n                class=\"caption status-danger\"\n                *ngIf=\"assignmentSubmissionForm.get('remark').errors?.required\"\n              >\n                Assignment Remark is required!\n              </p>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n\n      <hr />\n\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <button\n            type=\"submit\"\n            class=\"float-right\"\n            nbButton\n            size=\"small\"\n            status=\"primary\"\n            [disabled]=\"submit\"\n            [nbSpinner]=\"submit\"\n            nbSpinnerStatus=\"primary\"\n            nbSpinnerSize=\"small\"\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n\n<ng-template #loadingData>\n  <p class=\"pt-5 pb-5 text-center\">Loading...</p>\n</ng-template>\n","import { SubmissionGradingComponent } from './submission-grading.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubmissionGradingComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SubmissionGradingRoutingModule {}\n","import { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { AssignmentSubmissionModel } from './../../../../../models/assignment-submission.model';\r\nimport { AssignmentSubmissionService } from './../../../../../services/assignment-submission.service';\r\nimport { NbToastrService } from '@nebular/theme';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { DateService } from './../../../../../services/shared-services/date.service';\r\nimport { AssignmentService } from './../../../../../services/assignment.service';\r\nimport { BranchService } from './../../../../../services/branch.service';\r\nimport { AssignmentModel } from './../../../../../models/assignment.model';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ngx-submission-grading',\r\n  templateUrl: './submission-grading.component.html',\r\n  styleUrls: ['./submission-grading.component.scss'],\r\n})\r\nexport class SubmissionGradingComponent implements OnInit, OnDestroy {\r\n  loading: boolean;\r\n  submit: boolean;\r\n\r\n  branchId: string;\r\n\r\n  assignment: AssignmentModel;\r\n  assignmentSubmission: AssignmentSubmissionModel;\r\n\r\n  assignmentSubmissionForm: FormGroup;\r\n\r\n  constructor(\r\n    private branchService: BranchService,\r\n    private assignmentSubmissionService: AssignmentSubmissionService,\r\n    private assignmentService: AssignmentService,\r\n    public dateService: DateService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private toastrService: NbToastrService,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true;\r\n    this.submit = false;\r\n\r\n    this.branchId = this.branchService.getBranchId();\r\n    if (!this.branchId) {\r\n      this.back();\r\n      return;\r\n    }\r\n\r\n    this.assignmentService.getAssignmentData().subscribe((assignment: AssignmentModel) => {\r\n      this.assignment = assignment;\r\n\r\n      if (!assignment) {\r\n        this.showToastr('top-right', 'danger', 'Assignment Not Found');\r\n        this.back();\r\n        return;\r\n      }\r\n\r\n      this.assignmentSubmissionService\r\n        .getAssignmentSubmissionData()\r\n        .subscribe((assignmentSubmission: AssignmentSubmissionModel) => {\r\n          this.assignmentSubmission = assignmentSubmission;\r\n\r\n          if (!assignmentSubmission) {\r\n            this.back();\r\n            return;\r\n          }\r\n\r\n          this.assignmentSubmissionForm = new FormGroup({\r\n            grades: new FormControl(assignmentSubmission.grades, {\r\n              validators: [\r\n                Validators.required,\r\n                Validators.min(0),\r\n                Validators.max(+assignment.totalGrades),\r\n              ],\r\n            }),\r\n            remark: new FormControl(assignmentSubmission.remark, {\r\n              validators: [Validators.required],\r\n            }),\r\n          });\r\n\r\n          this.loading = false;\r\n        });\r\n    });\r\n  }\r\n\r\n  saveGrades() {\r\n    this.assignmentSubmissionForm.markAllAsTouched();\r\n\r\n    if (this.assignmentSubmissionForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'All grading Fields are required');\r\n      return;\r\n    }\r\n    this.submit = true;\r\n\r\n    const submissionGrades = {\r\n      _id: this.assignmentSubmission._id,\r\n      ...this.assignmentSubmissionForm.value,\r\n    };\r\n\r\n    this.assignmentSubmissionService.saveAssignmentSubmissionGrades(submissionGrades).subscribe(\r\n      (res: any) => {\r\n        this.showToastr('top-right', 'success', 'Grades Updated Successfully');\r\n        this.back();\r\n      },\r\n      (error: any) => {\r\n        this.showToastr('top-right', 'danger', error);\r\n        this.submit = false;\r\n      },\r\n    );\r\n  }\r\n\r\n  private showToastr(position: any, status: any, message: string) {\r\n    this.toastrService.show(status, message, {\r\n      position,\r\n      status,\r\n    });\r\n  }\r\n\r\n  back() {\r\n    this.router.navigate(['../'], { relativeTo: this.route });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.assignmentSubmissionService.deleteAssignmentSubmissionData();\r\n  }\r\n}\r\n","import { ReactiveFormsModule } from '@angular/forms';\nimport {\n  NbCardModule,\n  NbButtonModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbTooltipModule,\n  NbInputModule,\n} from '@nebular/theme';\nimport { SubmissionGradingComponent } from './submission-grading.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SubmissionGradingRoutingModule } from './submission-grading-routing.module';\n\n@NgModule({\n  declarations: [SubmissionGradingComponent],\n  imports: [\n    CommonModule,\n    SubmissionGradingRoutingModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbTooltipModule,\n    NbSpinnerModule,\n    NbInputModule,\n    ReactiveFormsModule,\n  ],\n})\nexport class SubmissionGradingModule {}\n"]}