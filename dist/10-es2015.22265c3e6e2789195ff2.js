(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{hPhX:function(e,t,a){"use strict";a.r(t);var i=a("aceb"),r=a("3Pt+"),s=a("ofXK"),n=a("zZNt"),o=a("lst6"),b=a("IAlr"),c=(a("R6I3"),a("EQut")),u=a("ZatZ"),m=a("fXoL"),d=a("tyNb");const l=["stepper"];function h(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Exam title is required! "),m.Vb())}function g(e,t){if(1&e&&(m.Ub(0),m.Ac(1,h,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("examTitle").errors?null:e.examForm.get("examTitle").errors.required)}}function p(e,t){if(1&e&&(m.Wb(0,"nb-option",41),m.Cc(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e._id),m.Eb(1),m.Dc(e.subject)}}function x(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Subject is required! "),m.Vb())}function f(e,t){if(1&e&&(m.Ub(0),m.Ac(1,x,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("subject").errors?null:e.examForm.get("subject").errors.required)}}function v(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Out of Marks is required! "),m.Vb())}function W(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Out of Marks should be greater than 0 "),m.Vb())}function V(e,t){if(1&e&&(m.Ub(0),m.Ac(1,v,2,0,"p",39),m.Ac(2,W,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("outOfMarks").errors?null:e.examForm.get("outOfMarks").errors.required),m.Eb(1),m.mc("ngIf",null==e.examForm.get("outOfMarks").errors?null:e.examForm.get("outOfMarks").errors.min)}}function F(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Passing Marks is required! "),m.Vb())}function E(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Passing Marks should be greater than 0 "),m.Vb())}function k(e,t){if(1&e&&(m.Ub(0),m.Ac(1,F,2,0,"p",39),m.Ac(2,E,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("passingMarks").errors?null:e.examForm.get("passingMarks").errors.required),m.Eb(1),m.mc("ngIf",null==e.examForm.get("passingMarks").errors?null:e.examForm.get("passingMarks").errors.min)}}function C(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Date is required! "),m.Vb())}function M(e,t){if(1&e&&(m.Ub(0),m.Ac(1,C,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("date").errors?null:e.examForm.get("date").errors.required)}}function T(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Time is required! "),m.Vb())}function S(e,t){if(1&e&&(m.Ub(0),m.Ac(1,T,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("time").errors?null:e.examForm.get("time").errors.required)}}function I(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Duration is required! "),m.Vb())}function w(e,t){1&e&&(m.Wb(0,"p",40),m.Cc(1," Duration should be greater than 0 "),m.Vb())}function j(e,t){if(1&e&&(m.Ub(0),m.Ac(1,I,2,0,"p",39),m.Ac(2,w,2,0,"p",39),m.Tb()),2&e){const e=m.gc();m.Eb(1),m.mc("ngIf",null==e.examForm.get("duration").errors?null:e.examForm.get("duration").errors.required),m.Eb(1),m.mc("ngIf",null==e.examForm.get("duration").errors?null:e.examForm.get("duration").errors.min)}}const A=[{path:"",component:(()=>{class e{constructor(e,t,a,i,r,s,n,o){this.branchService=e,this.courseService=t,this.dateService=a,this.batchService=i,this.examService=r,this.toastrService=s,this.router=n,this.route=o}ngOnInit(){if(this.loading=!0,this.branchId=this.branchService.getBranchId(),!this.branchId)return void this.router.navigate(["../"],{relativeTo:this.route});let e;this.route.queryParams.subscribe(t=>{e=t.mode}),this.examId=this.examService.getExamId(),e&&"edit"!==e?this.showToastr("top-right","danger","Invalid Route"):!e||this.examId?(this.branchService.getCategoryData().subscribe(e=>{this.category=e}),this.courseService.getCourseData().subscribe(e=>{this.course=e}),this.batchService.getBatchData().subscribe(e=>{this.batch=e}),this.subjects=[],this.batch.subjects.forEach(e=>{const t=this.course.subjects.find(t=>t._id===e.subject);this.subjects.push(t)}),this.examForm=new r.f({examTitle:new r.d(null,{validators:[r.u.required]}),subject:new r.d(null,{validators:[r.u.required]}),outOfMarks:new r.d(null,{validators:[r.u.required,r.u.min(0)]}),passingMarks:new r.d(null,{validators:[r.u.required,r.u.min(0)]}),date:new r.d(this.dateService.getDateString(),{validators:[r.u.required]}),time:new r.d(null,{validators:[r.u.required]}),duration:new r.d(null,{validators:[r.u.required,r.u.min(0)]})}),e&&this.examId?this.examService.getExam(this.examId).subscribe(e=>{this.exam=e,this.examForm.patchValue({examTitle:this.exam.examTitle,subject:this.exam.subject,outOfMarks:this.exam.outOfMarks,passingMarks:this.exam.passingMarks,date:this.exam.date,time:this.exam.time,duration:this.exam.duration}),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.back()}):this.loading=!1):this.showToastr("top-right","danger","Exam Not Found")}previousStep(){this.stepper.previous()}submitExamForm(){this.examForm.markAllAsTouched(),this.examForm.invalid?this.showToastr("top-right","danger","All Exam Fields are Required"):this.stepper.next()}saveExam(){if(this.examForm.markAllAsTouched(),this.examForm.invalid)return void this.showToastr("top-right","danger","All Exam Fields are Required");this.loading=!0;const e=this.examForm.value;e.branch=this.branchId,e.category=this.category._id,e.course=this.course._id,e.batch=this.batch._id,this.exam?(e._id=this.exam._id,e.marks=this.exam.marks,this.examService.editExam(e).subscribe(e=>{this.showToastr("top-right","success","New Exam Updated Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.loading=!1})):this.examService.saveExam(e).subscribe(e=>{this.showToastr("top-right","success","New Exam Added Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}getSubject(e){const t=this.subjects.find(t=>t._id===e);return t?t.subject:"--"}showToastr(e,t,a){this.toastrService.show(t,a,{position:e,status:t})}back(){this.router.navigate(["../"],{relativeTo:this.route})}ngOnDestroy(){this.examService.deleteExamId(),this.examService.deleteExamData()}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(c.a),m.Qb(b.a),m.Qb(u.a),m.Qb(o.a),m.Qb(n.a),m.Qb(i.xb),m.Qb(d.c),m.Qb(d.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["ngx-add-test"]],viewQuery:function(e,t){var a;1&e&&m.Hc(l,!0),2&e&&m.rc(a=m.fc())&&(t.stepper=a.first)},decls:119,vars:29,consts:[[1,"row"],[1,"col-9"],[1,"col-3"],["nbButton","","size","tiny","status","warning",1,"float-right",3,"click"],[1,"col-12"],[3,"linear","disableStepNavigation"],["stepper",""],["label","Exam Details",3,"stepControl"],[3,"formGroup","submit"],[1,"col-md-6"],[1,"form-control-group"],["for","input-exam-title",1,"label"],["type","text","nbInput","","id","input-exam-title","name","title","formControlName","examTitle","placeholder","Exam Title","fullWidth","",3,"status"],[4,"ngIf"],["for","input-subject",1,"label"],["id","input-subject","name","subject","formControlName","subject","placeholder","Subject","fullWidth","",3,"status"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","input-exam-out-of-marks",1,"label"],["type","number","nbInput","","id","input-exam-out-of-marks","name","outOfMarks","min","0","formControlName","outOfMarks","placeholder","Out of Marks","fullWidth","",3,"status"],["for","input-exam-passing-marks",1,"label"],["type","number","nbInput","","id","input-exam-passing-marks","name","passingMarks","min","0","formControlName","passingMarks","placeholder","Passing Marks","fullWidth","",3,"status"],["for","input-date",1,"label"],["type","date","nbInput","","id","input-date","name","date","formControlName","date","placeholder","Date","fullWidth","",3,"min","status"],["for","input-time",1,"label"],["type","time","step","300","nbInput","","id","input-time","name","time","formControlName","time","placeholder","Time","fullWidth","",3,"status"],["for","input-duration",1,"label"],["type","number","nbInput","","id","input-duration","name","duration","min","0","formControlName","duration","placeholder","Duration (in Min)","fullWidth","",3,"status"],["type","submit","nbButton","","status","basic","size","small",1,"float-right"],["label","Submit"],[1,"step-container"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"col-md-6","text-left"],["type","button","nbButton","",1,"",3,"click"],["icon","arrow-ios-back-outline"],[1,"col-md-6","text-right"],["nbButton","","size","medium",3,"click"],["size","medium",3,"formGroup","submit"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"nb-card"),m.Wb(1,"nb-card-header"),m.Wb(2,"div",0),m.Wb(3,"div",1),m.Wb(4,"h3"),m.Cc(5),m.Vb(),m.Vb(),m.Wb(6,"div",2),m.Wb(7,"button",3),m.ec("click",(function(){return t.back()})),m.Cc(8," Back "),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(9,"nb-card-body"),m.Wb(10,"div",0),m.Wb(11,"div",4),m.Wb(12,"nb-stepper",5,6),m.Wb(14,"nb-step",7),m.Wb(15,"form",8),m.ec("submit",(function(){return t.submitExamForm()})),m.Wb(16,"div",0),m.Wb(17,"div",9),m.Wb(18,"div",10),m.Wb(19,"label",11),m.Cc(20,"Exam Title:"),m.Vb(),m.Rb(21,"input",12),m.Ac(22,g,2,1,"ng-container",13),m.Vb(),m.Vb(),m.Wb(23,"div",9),m.Wb(24,"div",10),m.Wb(25,"label",14),m.Cc(26,"Subject:"),m.Vb(),m.Wb(27,"nb-select",15),m.Wb(28,"nb-option",16),m.Cc(29,"Select Subject"),m.Vb(),m.Ac(30,p,2,2,"nb-option",17),m.Vb(),m.Ac(31,f,2,1,"ng-container",13),m.Vb(),m.Vb(),m.Wb(32,"div",9),m.Wb(33,"div",10),m.Wb(34,"label",18),m.Cc(35,"Out of Marks:"),m.Vb(),m.Rb(36,"input",19),m.Ac(37,V,3,2,"ng-container",13),m.Vb(),m.Vb(),m.Wb(38,"div",9),m.Wb(39,"div",10),m.Wb(40,"label",20),m.Cc(41,"Passing Marks:"),m.Vb(),m.Rb(42,"input",21),m.Ac(43,k,3,2,"ng-container",13),m.Vb(),m.Vb(),m.Wb(44,"div",9),m.Wb(45,"div",10),m.Wb(46,"label",22),m.Cc(47,"Date:"),m.Vb(),m.Rb(48,"input",23),m.Ac(49,M,2,1,"ng-container",13),m.Vb(),m.Vb(),m.Wb(50,"div",9),m.Wb(51,"div",10),m.Wb(52,"label",24),m.Cc(53,"Time:"),m.Vb(),m.Rb(54,"input",25),m.Ac(55,S,2,1,"ng-container",13),m.Vb(),m.Vb(),m.Wb(56,"div",9),m.Wb(57,"div",10),m.Wb(58,"label",26),m.Cc(59,"Duration (in Min):"),m.Vb(),m.Rb(60,"input",27),m.Ac(61,j,3,2,"ng-container",13),m.Vb(),m.Vb(),m.Vb(),m.Rb(62,"hr"),m.Wb(63,"div",0),m.Wb(64,"div",4),m.Wb(65,"button",28),m.Cc(66," Next "),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(67,"nb-step",29),m.Wb(68,"div",30),m.Wb(69,"div",31),m.Wb(70,"table",32),m.Wb(71,"tbody"),m.Wb(72,"tr"),m.Wb(73,"th"),m.Cc(74,"Exam Title"),m.Vb(),m.Wb(75,"td"),m.Cc(76),m.Vb(),m.Vb(),m.Wb(77,"tr"),m.Wb(78,"th"),m.Cc(79,"Subject"),m.Vb(),m.Wb(80,"td"),m.Cc(81),m.Vb(),m.Vb(),m.Wb(82,"tr"),m.Wb(83,"th"),m.Cc(84,"Out of Marks"),m.Vb(),m.Wb(85,"td"),m.Cc(86),m.Vb(),m.Vb(),m.Wb(87,"tr"),m.Wb(88,"th"),m.Cc(89,"Passing Marks"),m.Vb(),m.Wb(90,"td"),m.Cc(91),m.Vb(),m.Vb(),m.Wb(92,"tr"),m.Wb(93,"th"),m.Cc(94,"Date"),m.Vb(),m.Wb(95,"td"),m.Cc(96),m.Vb(),m.Vb(),m.Wb(97,"tr"),m.Wb(98,"th"),m.Cc(99,"Time"),m.Vb(),m.Wb(100,"td"),m.Cc(101),m.Vb(),m.Vb(),m.Wb(102,"tr"),m.Wb(103,"th"),m.Cc(104,"Duration (in Min)"),m.Vb(),m.Wb(105,"td"),m.Cc(106),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Rb(107,"hr"),m.Wb(108,"div",0),m.Wb(109,"div",33),m.Wb(110,"button",34),m.ec("click",(function(){return t.previousStep()})),m.Rb(111,"nb-icon",35),m.Wb(112,"span"),m.Cc(113,"prev"),m.Vb(),m.Vb(),m.Vb(),m.Wb(114,"div",36),m.Wb(115,"button",37),m.ec("click",(function(){return t.saveExam()})),m.Wb(116,"span"),m.Cc(117,"Submit"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(118,"form",38),m.ec("submit",(function(){return t.saveExam()})),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Eb(5),m.Ec("",t.exam?"Edit":"Add"," Test"),m.Eb(7),m.mc("linear",!0)("disableStepNavigation",!0),m.Eb(2),m.mc("stepControl",t.examForm),m.Eb(1),m.mc("formGroup",t.examForm),m.Eb(6),m.mc("status",t.examForm.get("examTitle").touched?t.examForm.get("examTitle").invalid?"danger":"success":"basic"),m.Eb(1),m.mc("ngIf",t.examForm.get("examTitle").invalid&&t.examForm.get("examTitle").touched),m.Eb(5),m.mc("status",t.examForm.get("subject").touched?t.examForm.get("subject").invalid?"danger":"success":"basic"),m.Eb(3),m.mc("ngForOf",t.subjects),m.Eb(1),m.mc("ngIf",t.examForm.get("subject").invalid&&t.examForm.get("subject").touched),m.Eb(5),m.mc("status",t.examForm.get("outOfMarks").touched?t.examForm.get("outOfMarks").invalid?"danger":"success":"basic"),m.Eb(1),m.mc("ngIf",t.examForm.get("outOfMarks").invalid&&t.examForm.get("outOfMarks").touched),m.Eb(5),m.mc("status",t.examForm.get("passingMarks").touched?t.examForm.get("passingMarks").invalid?"danger":"success":"basic"),m.Eb(1),m.mc("ngIf",t.examForm.get("passingMarks").invalid&&t.examForm.get("passingMarks").touched),m.Eb(5),m.mc("min",t.exam?t.exam.date:t.dateService.getDateString())("status",t.examForm.get("date").touched?t.examForm.get("date").invalid?"danger":"success":"basic"),m.Eb(1),m.mc("ngIf",t.examForm.get("date").invalid&&t.examForm.get("date").touched),m.Eb(5),m.mc("status",t.examForm.get("time").touched?t.examForm.get("time").invalid?"danger":"success":"basic"),m.Eb(1),m.mc("ngIf",t.examForm.get("time").invalid&&t.examForm.get("time").touched),m.Eb(5),m.mc("status",t.examForm.get("duration").touched?t.examForm.get("duration").invalid?"danger":"success":"basic"),m.Eb(1),m.mc("ngIf",t.examForm.get("duration").invalid&&t.examForm.get("duration").touched),m.Eb(15),m.Dc(t.examForm.value.examTitle),m.Eb(5),m.Dc(t.getSubject(t.examForm.value.subject)),m.Eb(5),m.Dc(t.examForm.value.outOfMarks),m.Eb(5),m.Dc(t.examForm.value.passingMarks),m.Eb(5),m.Dc(t.dateService.formatDate(t.examForm.value.date)),m.Eb(5),m.Dc(t.dateService.formatTime(t.examForm.value.time)),m.Eb(5),m.Ec("",t.examForm.value.duration," Min"),m.Eb(12),m.mc("formGroup",t.examForm))},directives:[i.x,i.z,i.u,i.w,i.pb,i.ob,r.v,r.n,r.g,i.O,r.a,r.m,r.e,s.n,i.jb,i.eb,s.m,r.q,i.L],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>a.e(0).then(a.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let y=(()=>{class e{}return e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({factory:function(t){return new(t||e)},imports:[[d.g.forChild(A)],d.g]}),e})();a.d(t,"AddTestModule",(function(){return q}));let q=(()=>{class e{}return e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({factory:function(t){return new(t||e)},imports:[[s.c,y,i.P,i.N,i.kb,i.A,i.qb,i.v,r.s]]}),e})()}}]);