function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,e){for(var o=0;o<e.length;o++){var s=e[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function _createClass(r,e,o){return e&&_defineProperties(r.prototype,e),o&&_defineProperties(r,o),r}(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{eXDF:function(r,e,o){"use strict";o.r(e);var s=o("AytR"),n=o("nwtg"),a=o("3Pt+"),t=o("fvxu"),i=o("5hth"),l=o("fXoL"),d=o("aceb"),c=o("ofXK");function u(r,e){if(1&r&&(l.Wb(0,"h3"),l.Cc(1),l.hc(2,"uppercase"),l.Wb(3,"small",26),l.Cc(4),l.hc(5,"uppercase"),l.Vb(),l.Vb()),2&r){var o=l.gc();l.Eb(1),l.Ec(" ",l.ic(2,2,o.profile.name)," "),l.Eb(3),l.Dc(l.ic(5,4,o.profile.imsMasterId))}}function m(r,e){if(1&r&&(l.Wb(0,"small",26),l.Wb(1,"em"),l.Cc(2),l.hc(3,"lowercase"),l.Vb(),l.Vb()),2&r){var o=l.gc();l.Eb(2),l.Dc(l.ic(3,1,o.profile.email))}}function b(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," User Name is required! "),l.Vb())}function p(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," User Name should contain minimum 5 characters "),l.Vb())}function h(r,e){if(1&r&&(l.Ub(0),l.Ac(1,b,2,0,"p",27),l.Ac(2,p,2,0,"p",27),l.Tb()),2&r){var o=l.gc();l.Eb(1),l.mc("ngIf",null==o.profileForm.get("name").errors?null:o.profileForm.get("name").errors.required),l.Eb(1),l.mc("ngIf",null==o.profileForm.get("name").errors?null:o.profileForm.get("name").errors.minlength)}}function g(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," User phone is required! "),l.Vb())}function f(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," User phone should be 10 digits "),l.Vb())}function w(r,e){if(1&r&&(l.Ub(0),l.Ac(1,g,2,0,"p",27),l.Ac(2,f,2,0,"p",27),l.Tb()),2&r){var o=l.gc();l.Eb(1),l.mc("ngIf",null==o.profileForm.get("phone").errors?null:o.profileForm.get("phone").errors.required),l.Eb(1),l.mc("ngIf",(null==o.profileForm.get("phone").errors?null:o.profileForm.get("phone").errors.minlength)||(null==o.profileForm.get("phone").errors?null:o.profileForm.get("phone").errors.maxlength)||(null==o.profileForm.get("phone").errors?null:o.profileForm.get("phone").errors.pattern)||(null==o.profileForm.get("phone").errors?null:o.profileForm.get("phone").errors.min)||(null==o.profileForm.get("phone").errors?null:o.profileForm.get("phone").errors.max))}}function v(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," User address is required! "),l.Vb())}function P(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," User address should be 10 characters "),l.Vb())}function F(r,e){if(1&r&&(l.Ub(0),l.Ac(1,v,2,0,"p",27),l.Ac(2,P,2,0,"p",27),l.Tb()),2&r){var o=l.gc();l.Eb(1),l.mc("ngIf",null==o.profileForm.get("address").errors?null:o.profileForm.get("address").errors.required),l.Eb(1),l.mc("ngIf",null==o.profileForm.get("address").errors?null:o.profileForm.get("address").errors.minlength)}}function W(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," Old Password is required! "),l.Vb())}function V(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," Old Password should contain minimum 7 characters "),l.Vb())}function C(r,e){if(1&r&&(l.Ub(0),l.Ac(1,W,2,0,"p",27),l.Ac(2,V,2,0,"p",27),l.Tb()),2&r){var o=l.gc();l.Eb(1),l.mc("ngIf",null==o.changePasswordForm.get("oldPassword").errors?null:o.changePasswordForm.get("oldPassword").errors.required),l.Eb(1),l.mc("ngIf",null==o.changePasswordForm.get("oldPassword").errors?null:o.changePasswordForm.get("oldPassword").errors.minlength)}}function y(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," Password is required! "),l.Vb())}function E(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," Password should contain minimum 7 characters "),l.Vb())}function I(r,e){if(1&r&&(l.Ub(0),l.Ac(1,y,2,0,"p",27),l.Ac(2,E,2,0,"p",27),l.Tb()),2&r){var o=l.gc();l.Eb(1),l.mc("ngIf",null==o.changePasswordForm.get("password").errors?null:o.changePasswordForm.get("password").errors.required),l.Eb(1),l.mc("ngIf",null==o.changePasswordForm.get("password").errors?null:o.changePasswordForm.get("password").errors.minlength)}}function A(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," Password confirmation is required! "),l.Vb())}function x(r,e){1&r&&(l.Wb(0,"p",28),l.Cc(1," Password does not match the confirm password. "),l.Vb())}function U(r,e){if(1&r&&(l.Ub(0),l.Ac(1,A,2,0,"p",27),l.Ac(2,x,2,0,"p",27),l.Tb()),2&r){var o=l.gc();l.Eb(1),l.mc("ngIf",null==o.changePasswordForm.get("confirmPassword").errors?null:o.changePasswordForm.get("confirmPassword").errors.required),l.Eb(1),l.mc("ngIf",o.changePasswordForm.get("password").value!=o.changePasswordForm.get("confirmPassword").value&&!o.changePasswordForm.hasError("invalidConfirmPassword"))}}var T,q,S=((T=function(){function r(e,o,s,n){_classCallCheck(this,r),this.userService=e,this.toastrService=o,this.authService=s,this.encryptService=n}return _createClass(r,[{key:"ngOnInit",value:function(){this.loading=!0,this.profileForm=new a.f({name:new a.d(null,{validators:[a.u.required,a.u.minLength(5)]}),phone:new a.d(null,{validators:[a.u.required,a.u.minLength(10),a.u.maxLength(10),a.u.min(1e9),a.u.max(9999999999)]}),address:new a.d(null,{validators:[a.u.required,a.u.minLength(10)]})}),this.changePasswordForm=new a.f({oldPassword:new a.d(null,{validators:[a.u.required,a.u.minLength(7),a.u.maxLength(20)]}),password:new a.d(null,{validators:[a.u.required,a.u.minLength(7),a.u.maxLength(20)]}),confirmPassword:new a.d(null,{validators:[a.u.required,a.u.minLength(7),a.u.maxLength(20)]})},{validators:this.passwordValidator.bind(this)}),this.getProfile()}},{key:"passwordValidator",value:function(r){return r.value.password!==r.value.confirmPassword?{invalidConfirmPassword:!0}:null}},{key:"getProfile",value:function(){var r=this;this.userService.getProfile().subscribe((function(e){r.profile=e,r.profileForm.patchValue({name:r.profile.name,phone:r.profile.phone,address:r.profile.address}),r.loading=!1}),(function(e){r.loading=!1}))}},{key:"saveProfile",value:function(){var r=this;this.profileForm.markAllAsTouched(),this.profileForm.invalid?this.showToastr("top-right","danger","Fill Profile Details Correctly"):(this.loading=!0,this.userService.saveProfile(this.profileForm.value).subscribe((function(e){r.showToastr("top-right","success","Profile updated Successfully!"),r.loading=!1}),(function(e){r.showToastr("top-right","danger",e),r.loading=!1})))}},{key:"changePassword",value:function(){var r=this;if(this.changePasswordForm.markAllAsTouched(),this.changePasswordForm.invalid)this.showToastr("top-right","danger","Fill change Password Data Correctly");else if(this.changePasswordForm.hasError("invalidPassword"))this.showToastr("top-right","danger","New Password and Confirm Password Does Noy Match");else{this.loading=!0;var e={email:this.authService.getUserData().email,password:this.encryptService.encrypt(this.changePasswordForm.value.oldPassword,s.a.encKey),newPassword:this.encryptService.encrypt(this.changePasswordForm.value.password,s.a.encKey)};this.userService.changePassword(e).subscribe((function(e){r.changePasswordForm.reset(),r.showToastr("top-right","success","Password Changed Successfully!"),r.loading=!1}),(function(e){r.showToastr("top-right","danger",e),r.loading=!1}))}}},{key:"showToastr",value:function(r,e,o){this.toastrService.show(e,o,{position:r,status:e})}}]),r}()).\u0275fac=function(r){return new(r||T)(l.Qb(t.a),l.Qb(d.xb),l.Qb(n.a),l.Qb(i.a))},T.\u0275cmp=l.Kb({type:T,selectors:[["ngx-profile"]],decls:68,vars:16,consts:[[4,"ngIf"],[1,"row"],[1,"col-12"],["id","title",1,"title"],["class","float-right",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"sub-title"],[1,"col-md-6"],[1,"form-control-group"],["for","input-name",1,"label"],["type","text","nbInput","","id","input-name","name","name","formControlName","name","placeholder","User Name","minlength","5","maxlength","20","fullWidth","",3,"status"],["for","input-phone",1,"label"],["type","text","pattern","\\d*","nbInput","","id","input-phone","name","phone","formControlName","phone","placeholder","User phone","minlength","10","maxlength","10","min","1000000000","max","9999999999","fullWidth","",3,"status"],[1,"col-md-12"],["for","input-address",1,"label"],["type","text","nbInput","","id","input-address","name","address","formControlName","address","placeholder","User Address","rows","2","minlength","10","maxlength","150","fullWidth","",3,"status"],[1,"col-12","text-right"],["type","submit","nbButton","","status","primary"],[1,"col-md-4"],["for","input-old-password",1,"label"],["type","password","nbInput","","id","input-old-password","name","oldPassword","formControlName","oldPassword","placeholder","Old Password","minlength","7","maxlength","20","fullWidth","",3,"status"],["for","input-password",1,"label"],["type","password","nbInput","","id","input-password","name","password","formControlName","password","placeholder","Password","minlength","7","maxlength","20","fullWidth","",3,"status"],["for","input-re-password",1,"label"],["nbInput","","type","password","id","input-re-password","name","rePass","formControlName","confirmPassword","placeholder","Confirm Password","minlength","5","maxlength","30","fullWidth","",3,"status"],[1,"col-md-12","text-right"],[1,"float-right"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(r,e){1&r&&(l.Wb(0,"nb-card"),l.Wb(1,"nb-card-header"),l.Ac(2,u,6,6,"h3",0),l.Vb(),l.Wb(3,"nb-card-body"),l.Wb(4,"div",1),l.Wb(5,"div",2),l.Wb(6,"h4",3),l.Cc(7," User Profile "),l.Ac(8,m,4,3,"small",4),l.Vb(),l.Wb(9,"form",5),l.ec("ngSubmit",(function(){return e.saveProfile()})),l.Wb(10,"p",6),l.Cc(11,"Personal Details"),l.Vb(),l.Wb(12,"div",1),l.Wb(13,"div",7),l.Wb(14,"div",8),l.Wb(15,"label",9),l.Cc(16,"User Name:"),l.Vb(),l.Rb(17,"input",10),l.Ac(18,h,3,2,"ng-container",0),l.Vb(),l.Vb(),l.Wb(19,"div",7),l.Wb(20,"div",8),l.Wb(21,"label",11),l.Cc(22,"User phone:"),l.Vb(),l.Rb(23,"input",12),l.Ac(24,w,3,2,"ng-container",0),l.Vb(),l.Vb(),l.Wb(25,"div",13),l.Wb(26,"div",8),l.Wb(27,"label",14),l.Cc(28,"User Address:"),l.Vb(),l.Rb(29,"textarea",15),l.Ac(30,F,3,2,"ng-container",0),l.Vb(),l.Vb(),l.Vb(),l.Rb(31,"br"),l.Wb(32,"div",1),l.Wb(33,"div",16),l.Wb(34,"button",17),l.Cc(35,"Save Profile"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Rb(36,"hr"),l.Wb(37,"div",1),l.Wb(38,"div",13),l.Wb(39,"h4",3),l.Cc(40,"Change password"),l.Vb(),l.Wb(41,"p",6),l.Cc(42,"Please set a new password"),l.Vb(),l.Wb(43,"form",5),l.ec("ngSubmit",(function(){return e.changePassword()})),l.Wb(44,"div",1),l.Wb(45,"div",18),l.Wb(46,"div",8),l.Wb(47,"label",19),l.Cc(48,"Old Password:"),l.Vb(),l.Rb(49,"input",20),l.Ac(50,C,3,2,"ng-container",0),l.Vb(),l.Vb(),l.Wb(51,"div",18),l.Wb(52,"div",8),l.Wb(53,"label",21),l.Cc(54,"Password:"),l.Vb(),l.Rb(55,"input",22),l.Ac(56,I,3,2,"ng-container",0),l.Vb(),l.Vb(),l.Wb(57,"div",18),l.Wb(58,"div",8),l.Wb(59,"label",23),l.Cc(60,"Repeat password:"),l.Vb(),l.Rb(61,"input",24),l.Ac(62,U,3,2,"ng-container",0),l.Vb(),l.Vb(),l.Vb(),l.Rb(63,"br"),l.Wb(64,"div",1),l.Wb(65,"div",25),l.Wb(66,"button",17),l.Cc(67,"Change password"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&r&&(l.Eb(2),l.mc("ngIf",e.profile),l.Eb(6),l.mc("ngIf",e.profile),l.Eb(1),l.mc("formGroup",e.profileForm),l.Eb(8),l.mc("status",e.profileForm.get("name").touched?e.profileForm.get("name").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.profileForm.get("name").invalid&&e.profileForm.get("name").touched),l.Eb(5),l.mc("status",e.profileForm.get("phone").touched?e.profileForm.get("phone").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.profileForm.get("phone").invalid&&e.profileForm.get("phone").touched),l.Eb(5),l.mc("status",e.profileForm.get("address").touched?e.profileForm.get("address").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.profileForm.get("address").invalid&&e.profileForm.get("address").touched),l.Eb(13),l.mc("formGroup",e.changePasswordForm),l.Eb(6),l.mc("status",e.changePasswordForm.get("oldPassword").touched?e.changePasswordForm.get("oldPassword").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.changePasswordForm.get("oldPassword").invalid&&e.changePasswordForm.get("oldPassword").touched),l.Eb(5),l.mc("status",e.changePasswordForm.get("password").touched?e.changePasswordForm.get("password").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.changePasswordForm.get("password").invalid&&e.changePasswordForm.get("password").touched),l.Eb(5),l.mc("status",e.changePasswordForm.get("confirmPassword").touched?e.changePasswordForm.get("confirmPassword").invalid||e.changePasswordForm.get("password").value!=e.changePasswordForm.get("confirmPassword").value?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.changePasswordForm.get("confirmPassword").invalid&&e.changePasswordForm.get("confirmPassword").touched))},directives:[d.x,d.z,c.n,d.w,a.v,a.n,a.g,d.O,a.a,a.m,a.e,a.j,a.i,a.r,d.u],pipes:[c.v,c.k],styles:[""]}),T),N=o("tyNb"),k=[{path:"",component:S,canActivate:[]},{path:"page-not-found",loadChildren:function(){return o.e(0).then(o.bind(null,"DeSt")).then((function(r){return r.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],L=((q=function r(){_classCallCheck(this,r)}).\u0275mod=l.Ob({type:q}),q.\u0275inj=l.Nb({factory:function(r){return new(r||q)},imports:[[N.g.forChild(k)],N.g]}),q),R=o("vTDv");o.d(e,"ProfileModule",(function(){return O}));var D,O=((D=function r(){_classCallCheck(this,r)}).\u0275mod=l.Ob({type:D}),D.\u0275inj=l.Nb({factory:function(r){return new(r||D)},imports:[[c.c,L,R.a,a.s,d.A,d.Cb,d.N,d.P,d.v,d.Ab]]}),D)}}]);