function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{"q/Ke":function(t,e,n){"use strict";n.r(e);var c=n("aceb"),a=n("ofXK"),r=n("ZatZ"),i=n("IAlr"),s=n("lst6"),b=n("7kqb"),o=n("ggm5"),u=n("EQut"),d=n("fXoL"),h=n("tyNb");function l(t,e){if(1&t){var n=d.Xb();d.Wb(0,"tr"),d.Wb(1,"td"),d.Cc(2),d.Vb(),d.Wb(3,"td"),d.Cc(4),d.Vb(),d.Wb(5,"td",10),d.Wb(6,"div",11),d.Wb(7,"label"),d.Wb(8,"input",12),d.ec("change",(function(t){d.uc(n);var c=e.index;return d.gc(2).onChangeAttendance(t.target.checked,c)})),d.Vb(),d.Wb(9,"label",13),d.Cc(10),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&t){var c=e.$implicit;d.Eb(2),d.Dc(c.name),d.Eb(2),d.Dc(c.rollNumber),d.Eb(4),d.mc("id",c.student)("checked",c.attendance),d.Eb(1),d.mc("for",c.student),d.Eb(1),d.Dc(c.attendance?"P":"A")}}function f(t,e){if(1&t&&(d.Wb(0,"div",6),d.Wb(1,"div",7),d.Wb(2,"table",8),d.Wb(3,"thead"),d.Wb(4,"tr"),d.Wb(5,"th"),d.Cc(6,"Student Name"),d.Vb(),d.Wb(7,"th"),d.Cc(8,"Roll Number"),d.Vb(),d.Wb(9,"th"),d.Cc(10,"Mark Attendance"),d.Vb(),d.Vb(),d.Vb(),d.Wb(11,"tbody"),d.Ac(12,l,11,6,"tr",9),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t){var n=d.gc();d.Eb(12),d.mc("ngForOf",n.students)}}function g(t,e){1&t&&(d.Wb(0,"p",10),d.Cc(1,"No Students Found"),d.Vb())}var v,p,C=[{path:"",component:(v=function(){function t(e,n,c,a,r,i,s,b,o){_classCallCheck(this,t),this.branchService=e,this.courseService=n,this.batchService=c,this.dateService=a,this.lectureService=r,this.attendanceService=i,this.toastrService=s,this.router=b,this.route=o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;return this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.lectureService.getLectureData().subscribe((function(e){t.lecture=e})),this.lecture?(this.courseService.getCourseData().subscribe((function(e){t.course=e})),this.batchService.getBatchData().subscribe((function(e){t.batch=e})),this.students=[],void this.getStudents()):(this.showToastr("top-right","danger","Lecture Not Found"),void this.back())):(this.showToastr("top-right","danger","Branch Not Found"),void this.back())}},{key:"getStudents",value:function(){var t=this;this.loading=!0,this.attendanceService.getStudents(this.lecture.branch,this.lecture.category,this.lecture.course,this.lecture.batch,this.lecture._id).subscribe((function(e){e.map((function(t){return t.attendance=!!t.attendance&&t.attendance})),t.students=e,t.loading=!1}),(function(e){t.showToastr("top-right","danger",e),t.loading=!1}))}},{key:"onChangeAttendance",value:function(t,e){this.students[e].attendance=t}},{key:"saveAttendance",value:function(){var t=this;this.attendanceService.saveAttendance({date:this.lecture.date,branch:this.lecture.branch,category:this.lecture.category,course:this.lecture.course,batch:this.lecture.batch,subject:this.lecture.subject,lecture:this.lecture._id,attendance:this.students}).subscribe((function(e){t.showToastr("top-right","success","Attendance ".concat(e?"Updated":"Marked"," Successfully")),t.back()}),(function(e){t.showToastr("top-right","danger",e)}))}},{key:"getTime",value:function(t,e){return(t=this.dateService.formatTime(t))+" - "+this.dateService.formatTime(e)}},{key:"getTeacher",value:function(t){return t}},{key:"getSubject",value:function(t){var e=this.course.subjects.find((function(e){return e._id===t}));return e?e.subject:"--"}},{key:"back",value:function(){this.router.navigate(["../manage"],{relativeTo:this.route})}},{key:"showToastr",value:function(t,e,n){this.toastrService.show(e,n,{position:t,status:e})}}]),t}(),v.\u0275fac=function(t){return new(t||v)(d.Qb(u.a),d.Qb(i.a),d.Qb(s.a),d.Qb(r.a),d.Qb(b.a),d.Qb(o.a),d.Qb(c.xb),d.Qb(h.c),d.Qb(h.a))},v.\u0275cmp=d.Kb({type:v,selectors:[["ngx-attendance"]],decls:46,vars:8,consts:[[1,"row"],[1,"col-md-4","col-sm-6","col-12"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-12","text-right"],["type","button","nbButton","","status","primary","size","small",3,"click"],["noStudents",""],[1,"col-12"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mark-attendance-selector"],["type","checkbox",1,"mark-attendance",3,"id","checked","change"],[3,"for"]],template:function(t,e){if(1&t&&(d.Wb(0,"nb-card"),d.Wb(1,"nb-card-header"),d.Wb(2,"div",0),d.Wb(3,"div",1),d.Wb(4,"span"),d.Wb(5,"strong"),d.Cc(6,"Date: "),d.Vb(),d.Cc(7),d.Vb(),d.Vb(),d.Wb(8,"div",1),d.Wb(9,"span"),d.Wb(10,"strong"),d.Cc(11,"Time: "),d.Vb(),d.Cc(12),d.Vb(),d.Vb(),d.Wb(13,"div",1),d.Wb(14,"span"),d.Wb(15,"strong"),d.Cc(16,"Course: "),d.Vb(),d.Cc(17),d.Vb(),d.Vb(),d.Wb(18,"div",1),d.Wb(19,"span"),d.Wb(20,"strong"),d.Cc(21,"Batch: "),d.Vb(),d.Cc(22),d.Vb(),d.Vb(),d.Wb(23,"div",1),d.Wb(24,"span"),d.Wb(25,"strong"),d.Cc(26,"Subject: "),d.Vb(),d.Cc(27),d.Vb(),d.Vb(),d.Wb(28,"div",1),d.Wb(29,"span"),d.Wb(30,"strong"),d.Cc(31,"Lecture Topic: "),d.Vb(),d.Cc(32),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(33,"nb-card"),d.Wb(34,"nb-card-header"),d.Wb(35,"h4"),d.Cc(36,"ATTENDANCE RECORDING"),d.Vb(),d.Vb(),d.Wb(37,"nb-card-body"),d.Wb(38,"div",0),d.Ac(39,f,13,1,"div",2),d.Rb(40,"hr"),d.Wb(41,"div",3),d.Wb(42,"button",4),d.ec("click",(function(){return e.saveAttendance()})),d.Cc(43," Save "),d.Vb(),d.Vb(),d.Vb(),d.Ac(44,g,2,0,"ng-template",null,5,d.Bc),d.Vb(),d.Vb()),2&t){var n=d.sc(45);d.Eb(7),d.Dc(e.dateService.formatDate(e.lecture.date)),d.Eb(5),d.Dc(e.getTime(e.lecture.startTime,e.lecture.endTime)),d.Eb(5),d.Dc(e.course.basicDetails.courseName),d.Eb(5),d.Dc(e.batch.basicDetails.batchName),d.Eb(5),d.Dc(e.getSubject(e.lecture.subject)),d.Eb(5),d.Dc(e.lecture.topic),d.Eb(7),d.mc("ngIf",e.students.length>0)("ngIfElse",n)}},directives:[c.x,c.z,c.w,a.n,c.u,a.m],styles:[".mark-attendance-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none!important}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:inline-block;font-size:75%;border:1px solid #aaa;border-radius:50%;background:#fff;height:30px;width:30px;padding:1px;margin:1px;line-height:25px;text-align:center;cursor:pointer;transition:background .2s,color .2s}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#0095ff;color:#fff}"]}),v)},{path:"page-not-found",loadChildren:function(){return n.e(0).then(n.bind(null,"DeSt")).then((function(t){return t.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found"}],m=((p=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:p}),p.\u0275inj=d.Nb({factory:function(t){return new(t||p)},imports:[[h.g.forChild(C)],h.g]}),p);n.d(e,"AttendanceModule",(function(){return W}));var V,W=((V=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:V}),V.\u0275inj=d.Nb({factory:function(t){return new(t||V)},imports:[[a.c,m,c.A,c.v,c.N]]}),V)}}]);