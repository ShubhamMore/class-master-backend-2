{"version":3,"sources":["webpack:///src/app/employee/branch/assignment/batch-assignment/batch-assignment.component.html","webpack:///src/app/employee/branch/assignment/batch-assignment/batch-assignment-routing.module.ts","webpack:///src/app/employee/branch/assignment/batch-assignment/batch-assignment.component.ts","webpack:///src/app/employee/branch/assignment/batch-assignment/batch-assignment.module.ts"],"names":["BatchAssignmentComponent","BatchAssignmentModule","BatchAssignmentRoutingModule","routes","path","component","branchService","dateService","courseService","batchService","toastrService","router","route","this","loading","branchId","getBranchId","categories","courses","myCourses","batches","category","course","getCategories","getCourses","back","getBranchData","subscribe","branch","getBatches","getBranch","setBranchData","error","showToastr","getCoursesData","filter","basicDetails","batch","setBatchId","_id","setBatchData","setCourseId","myCourse","find","curCourse","setCourseData","setCategoryId","myCategory","curCategory","setCategoryData","navigate","relativeTo","categoryId","courseId","courseName","position","status","message","show","onSelectCategory","onSelectCourse","loadChildren","then","m","PageNotFoundModule","redirectTo","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-6 col-sm-4\">\n        <h3>Assignments</h3>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <nb-select\n          id=\"select-category\"\n          name=\"category\"\n          [selected]=\"category\"\n          fullWidth\n          placeholder=\"Select Category\"\n          (selectedChange)=\"onSelectCategory($event)\"\n        >\n          <nb-option value=\"\">All Categories</nb-option>\n          <nb-option *ngFor=\"let category of categories\" [value]=\"category._id\">{{\n            category.category\n          }}</nb-option>\n        </nb-select>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <nb-select\n          id=\"select-course\"\n          name=\"course\"\n          [selected]=\"course\"\n          fullWidth\n          placeholder=\"Select Course\"\n          (selectedChange)=\"onSelectCourse($event)\"\n        >\n          <nb-option value=\"\">All Courses</nb-option>\n          <nb-option *ngFor=\"let course of myCourses\" [value]=\"course._id\">{{\n            course.basicDetails.courseName\n          }}</nb-option>\n        </nb-select>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body class=\"body-container\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <ng-container *ngIf=\"!loading; else loadingData\">\n          <div class=\"table-responsive\" *ngIf=\"batches.length > 0; else noBatches\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Name</th>\n                  <th>Category</th>\n                  <th>Course</th>\n                  <th>Start Date</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let batch of batches; let i = index\">\n                  <td>{{ i + 1 }}</td>\n                  <td>{{ batch.basicDetails.batchName }}</td>\n                  <td>{{ getCategory(batch.category) }}</td>\n                  <td>{{ getCourse(batch.course) }}</td>\n                  <td>{{ dateService.formatDate(batch.basicDetails.startDate) }}</td>\n                  <td>\n                    <button\n                      nbButton\n                      size=\"small\"\n                      status=\"primary\"\n                      (click)=\"manageAssignment(batch)\"\n                    >\n                      Manage Assignment\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <ng-template #noBatches>\n            <p class=\"text-center pt-5 pb-5\">No Batches Available</p>\n          </ng-template>\n        </ng-container>\n        <ng-template #loadingData>\n          <p class=\"text-center pt-5 pb-5\">Loading...</p>\n        </ng-template>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { BatchAssignmentComponent } from './batch-assignment.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BatchAssignmentComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BatchAssignmentRoutingModule {}\n","import { DateService } from './../../../../services/shared-services/date.service';\r\nimport { BatchService } from './../../../../services/batch.service';\r\nimport { CourseService } from './../../../../services/course.service';\r\nimport { BatchModel } from './../../../../models/batch.model';\r\nimport { CourseModel, SubjectModel } from './../../../../models/course.model';\r\nimport { CategoryModel, BranchModel } from './../../../../models/branch.model';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { BranchService } from './../../../../services/branch.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { NbToastrService } from '@nebular/theme';\r\n\r\n@Component({\r\n  selector: 'ngx-batch-assignment',\r\n  templateUrl: './batch-assignment.component.html',\r\n  styleUrls: ['./batch-assignment.component.scss'],\r\n})\r\nexport class BatchAssignmentComponent implements OnInit {\r\n  loading: boolean;\r\n  branchId: string;\r\n\r\n  categories: CategoryModel[];\r\n  category: string;\r\n  courses: CourseModel[];\r\n  myCourses: CourseModel[];\r\n  course: string;\r\n  batches: BatchModel[];\r\n\r\n  constructor(\r\n    private branchService: BranchService,\r\n    public dateService: DateService,\r\n    private courseService: CourseService,\r\n    private batchService: BatchService,\r\n    private toastrService: NbToastrService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true;\r\n    this.branchId = this.branchService.getBranchId();\r\n    if (!this.branchId) {\r\n      this.back();\r\n\r\n      return;\r\n    }\r\n    this.categories = [];\r\n    this.courses = [];\r\n    this.myCourses = [];\r\n    this.batches = [];\r\n\r\n    this.category = '';\r\n    this.course = '';\r\n\r\n    this.getCategories();\r\n    this.getCourses();\r\n  }\r\n\r\n  private getCategories() {\r\n    this.branchService.getBranchData().subscribe((branch: BranchModel) => {\r\n      if (branch) {\r\n        this.categories = branch.categories;\r\n      }\r\n    });\r\n\r\n    if (!this.categories) {\r\n      this.branchService.getBranch(this.branchId).subscribe(\r\n        (branch: BranchModel) => {\r\n          this.branchService.setBranchData(branch);\r\n          this.categories = branch.categories;\r\n          this.getBatches(this.category, this.course);\r\n        },\r\n        (error: any) => {\r\n          this.showToastr('top-right', 'danger', error);\r\n          // this.loading = false;\r\n        },\r\n      );\r\n    } else {\r\n      this.getBatches(this.category, this.course);\r\n    }\r\n  }\r\n\r\n  private getCourses() {\r\n    this.courseService.getCoursesData().subscribe((courses: CourseModel[]) => {\r\n      this.courses = courses;\r\n    });\r\n  }\r\n\r\n  onSelectCategory(category: string) {\r\n    this.category = category;\r\n    this.course = '';\r\n    this.myCourses = this.courses.filter(\r\n      (course: CourseModel) => course.basicDetails.category === category,\r\n    );\r\n    this.getBatches(this.category, this.course);\r\n  }\r\n\r\n  onSelectCourse(course: string) {\r\n    this.course = course;\r\n    this.getBatches(this.category, this.course);\r\n  }\r\n\r\n  getBatches(category: string, course: string) {\r\n    this.loading = true;\r\n    this.batchService.getBatches(this.branchId, category, course).subscribe(\r\n      (batches: BatchModel[]) => {\r\n        this.batches = batches;\r\n        this.loading = false;\r\n      },\r\n      (error: any) => {\r\n        this.showToastr('top-right', 'danger', error);\r\n        this.loading = false;\r\n      },\r\n    );\r\n  }\r\n\r\n  manageAssignment(batch: BatchModel) {\r\n    this.batchService.setBatchId(batch._id);\r\n    this.batchService.setBatchData(batch);\r\n\r\n    this.courseService.setCourseId(batch.course);\r\n    const myCourse = this.courses.find((curCourse: CourseModel) => curCourse._id === batch.course);\r\n    this.courseService.setCourseData(myCourse);\r\n\r\n    this.branchService.setCategoryId(batch.category);\r\n    const myCategory = this.categories.find(\r\n      (curCategory: CategoryModel) => curCategory._id === batch.category,\r\n    );\r\n    this.branchService.setCategoryData(myCategory);\r\n\r\n    this.router.navigate(['../manage'], { relativeTo: this.route });\r\n  }\r\n\r\n  getCategory(categoryId: string) {\r\n    const category = this.categories.find(\r\n      (curCategory: CategoryModel) => curCategory._id === categoryId,\r\n    );\r\n\r\n    if (category) {\r\n      return category.category;\r\n    }\r\n\r\n    return '--';\r\n  }\r\n\r\n  getCourse(courseId: string) {\r\n    const course = this.courses.find((curCourse: CourseModel) => curCourse._id === courseId);\r\n\r\n    if (course) {\r\n      return course.basicDetails.courseName;\r\n    }\r\n\r\n    return '--';\r\n  }\r\n\r\n  back() {\r\n    this.router.navigate(['../'], { relativeTo: this.route });\r\n  }\r\n\r\n  private showToastr(position: any, status: any, message: string) {\r\n    this.toastrService.show(status, message, {\r\n      position,\r\n      status,\r\n    });\r\n  }\r\n}\r\n","import {\n  NbCardModule,\n  NbTooltipModule,\n  NbIconModule,\n  NbButtonModule,\n  NbInputModule,\n  NbAccordionModule,\n  NbFormFieldModule,\n  NbSelectModule,\n} from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { BatchAssignmentRoutingModule } from './batch-assignment-routing.module';\nimport { BatchAssignmentComponent } from './batch-assignment.component';\n\n@NgModule({\n  declarations: [BatchAssignmentComponent],\n  imports: [\n    CommonModule,\n    BatchAssignmentRoutingModule,\n\n    NbCardModule,\n    NbTooltipModule,\n    NbIconModule,\n    NbButtonModule,\n    NbInputModule,\n    NbAccordionModule,\n    NbFormFieldModule,\n    NbSelectModule,\n  ],\n})\nexport class BatchAssignmentModule {}\n"]}