(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{"6+PS":function(e,t,n){"use strict";n.r(t);var i=n("aceb"),l=n("ofXK"),a=n("tyNb"),r=n("FYcy"),o=n("IAlr"),s=n("EQut"),c=n("fXoL");const d=["filePicker"];function u(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"nb-option",20),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275property"]("value",e._id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.subject)}}function m(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"nb-select",17),c["\u0275\u0275listener"]("selectedChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).onSelectSubject(t)})),c["\u0275\u0275elementStart"](1,"nb-option",18),c["\u0275\u0275text"](2,"Select Subject"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,u,2,2,"nb-option",19),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("selected",e.subject)("status",e.invalidSubject?""===e.subject?"danger":"success":"basic"),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngForOf",e.course.subjects)}}function p(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",22),c["\u0275\u0275text"](1," Subject is required! "),c["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,p,2,0,"p",21),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",""===e.subject)}}function f(e,t){1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"p",22),c["\u0275\u0275text"](2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]())}function b(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",26),c["\u0275\u0275elementStart"](1,"td",31),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td",31),c["\u0275\u0275elementStart"](4,"span",32),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td",33),c["\u0275\u0275elementStart"](7,"button",34),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](3).removeFile(n)})),c["\u0275\u0275element"](8,"nb-icon",35),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",e.name," "),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("nbTooltip","Remove ",e.name,"")}}function g(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",23),c["\u0275\u0275elementStart"](1,"table",24),c["\u0275\u0275elementStart"](2,"thead",25),c["\u0275\u0275elementStart"](3,"tr",26),c["\u0275\u0275elementStart"](4,"th",27),c["\u0275\u0275text"](5,"ID"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th",27),c["\u0275\u0275text"](7,"Content File"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th",28),c["\u0275\u0275text"](9,"Remove"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"tbody",29),c["\u0275\u0275template"](11,b,9,3,"tr",30),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngForOf",e.uploadCourseMaterials)}}function v(e,t){1&e&&c["\u0275\u0275text"](0," No Files Selected, Please Select Files to Upload ")}function S(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"h3"),c["\u0275\u0275text"](5,"Add Material"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",3),c["\u0275\u0275elementStart"](7,"button",4),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().saveCourseMaterial()})),c["\u0275\u0275text"](8," Upload\xa0 "),c["\u0275\u0275element"](9,"nb-icon",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"nb-card-body"),c["\u0275\u0275elementStart"](11,"div",1),c["\u0275\u0275elementStart"](12,"div",6),c["\u0275\u0275elementStart"](13,"div",7),c["\u0275\u0275elementStart"](14,"label",8),c["\u0275\u0275text"](15,"Select Subject :"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,m,4,3,"nb-select",9),c["\u0275\u0275template"](17,h,2,1,"ng-container",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",6),c["\u0275\u0275elementStart"](19,"div",7),c["\u0275\u0275elementStart"](20,"label",8),c["\u0275\u0275text"](21,"Click on Following Button to Select Course Material Files"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"input",10,11),c["\u0275\u0275listener"]("change",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onFilePicked(t)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"button",12),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275reference"](23).click()})),c["\u0275\u0275text"](25," Click Here to Pick Files "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](26,f,3,0,"ng-container",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](27,"hr"),c["\u0275\u0275elementStart"](28,"h4",13),c["\u0275\u0275text"](29,"File/s To Upload"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",1),c["\u0275\u0275elementStart"](31,"div",14),c["\u0275\u0275template"](32,g,12,1,"div",15),c["\u0275\u0275template"](33,v,1,0,"ng-template",null,16,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275reference"](34),t=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](16),c["\u0275\u0275property"]("ngIf",t.course),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.invalidSubject),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngIf",t.invalidFile),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",t.uploadCourseMaterials.length>0)("ngIfElse",e)}}const x=[{path:"",component:(()=>{class e{constructor(e,t,n,i,l,a){this.branchService=e,this.courseService=t,this.courseMaterialService=n,this.toastrService=i,this.router=l,this.route=a}ngOnInit(){if(this.loading=!0,this.invalidFile=!1,this.invalidSubject=!1,this.branchId=this.branchService.getBranchId(),this.courseId=this.courseService.getCourseId(),!this.branchId||!this.courseId)return this.showToastr("top-right","danger","Invalid Course"),void this.cancel();this.uploadCourseMaterials=[],this.subject="",this.courseService.getCourseData().subscribe(e=>{if(!e)return this.showToastr("top-right","danger","Course Not Available"),void this.cancel();this.course=e,this.loading=!1})}onFilePicked(e){this.invalidFile=!1;const t=e.target.files,n=["pdf","jpg","png","jpeg","mp4"];let i=null;const l=t.length;for(let a=0;a<l;a++)if(i=t[a].name.substring(t[a].name.lastIndexOf(".")+1).toLowerCase(),-1===n.indexOf(i))return this.invalidFile=!0,void(this.fileInput.nativeElement.value="");this.invalidFile=!1;for(let a=0;a<l;a++)this.uploadCourseMaterials.push(t[a]);this.fileInput.nativeElement.value=""}onSelectSubject(e){this.subject=e,this.invalidSubject=""===e}saveCourseMaterial(){if(this.subject&&""!==this.subject||(this.invalidSubject=!0),this.uploadCourseMaterials.length<1)return this.showToastr("top-right","danger","Select at least 1 Course material File"),void(this.invalidFile=!0);if(this.invalidSubject)return void this.showToastr("top-right","danger","Please Select Subject");this.loading=!0,this.invalidFile=!1;const e=new FormData;e.append("branch",this.branchId),e.append("category",this.course.basicDetails.category),e.append("course",this.courseId),e.append("subject",this.subject);for(let t=0;t<this.uploadCourseMaterials.length;t++)e.append("material",this.uploadCourseMaterials[t],this.uploadCourseMaterials[t].name.substring(0,this.uploadCourseMaterials[t].name.lastIndexOf(".")));this.courseMaterialService.newCourseMaterials(e).subscribe(e=>{const t=this.uploadCourseMaterials.length,n=e.overStorageFiles;n<t&&this.showToastr("top-right","success",`${t-n} file${t-n==1?" is":"s are"} Uploaded Successfully!`),n>0&&this.showToastr("top-right","danger",`Storage is full, ${n} file${1===n?" is":"s are"} not Uploaded`),this.uploadCourseMaterials=[],this.cancel()},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}removeFile(e){this.uploadCourseMaterials.splice(e,1)}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](i.Db),c["\u0275\u0275directiveInject"](a.c),c["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-course-material"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](d,!0),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","type","button","size","medium","fullWidth","","size","small","status","primary",3,"click"],["icon","arrow-circle-up-outline"],[1,"col-md-6"],[1,"form-control-group"],["for","input-subject",1,"label"],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange",4,"ngIf"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","multiple","","hidden","",3,"change"],["filePicker",""],["nbButton","","type","button","fullWidth","","size","small","status","warning","id","files",3,"click"],[1,"text-center"],[1,"col-md-10","mx-auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["noFiles",""],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-heading"],[1,"table-row"],[1,"table-heading-data"],[1,"table-heading-data","text-center"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-data"],[1,"mr-2"],[1,"table-data","text-center"],["type","button","nbButton","","shape","round","status","danger","size","tiny",3,"nbTooltip","click"],["icon","close-outline"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,S,35,5,"nb-card",0),2&e&&c["\u0275\u0275property"]("ngIf",!t.loading)},directives:[l.n,i.x,i.z,i.u,i.M,i.w,i.P,i.mb,i.fb,l.m,i.Fb],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let C=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.g.forChild(x)],a.g]}),e})();n.d(t,"AddCourseMaterialModule",(function(){return E}));let E=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.c,C,i.A,i.Q,i.O,i.Gb,i.v,i.nb]]}),e})()}}]);