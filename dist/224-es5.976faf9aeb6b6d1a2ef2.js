!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{S0f3:function(n,i,s){"use strict";s.r(i),s.d(i,"AssignmentSubmissionModule",(function(){return k}));var a=s("3Pt+"),l=s("ofXK"),r=s("tyNb"),o=s("fXoL"),m=s("EQut"),d=s("ZatZ"),u=s("cbqz"),c=s("AVwh"),p=s("aceb"),b=["stepper"],h=["filePicker"];function g(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",34),o["\u0275\u0275text"](1," Assignment Description is required! "),o["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,g,2,0,"p",33),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==n.assignmentSubmissionDetailsForm.get("description").errors?null:n.assignmentSubmissionDetailsForm.get("description").errors.required)}}function f(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",35),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().clearFile()})),o["\u0275\u0275element"](1,"nb-icon",36),o["\u0275\u0275elementEnd"]()}}function v(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"p",34),o["\u0275\u0275text"](2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]())}var E,y,x,w=[{path:"",component:(E=function(){function n(t,i,s,a,l,r,o){e(this,n),this.branchService=t,this.dateService=i,this.assignmentSubmissionService=s,this.assignmentService=a,this.toastrService=l,this.router=r,this.route=o}var i,s,l;return i=n,(s=[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.submit=!1,this.invalidFile=!1,this.fileName=null,this.branchId=this.branchService.getBranchId(),this.branchId?(this.assignmentService.getAssignmentData().subscribe((function(t){e.assignment=t})),this.assignmentSubmissionDetailsForm=new a.f({description:new a.d(null,{validators:[a.u.required]})}),this.assignmentSubmissionService.getSubmissionOfAssignment(this.assignment._id).subscribe((function(t){t&&(e.assignmentSubmission=t,e.assignmentSubmissionDetailsForm.patchValue({description:t.description}),e.fileName=t.fileName),e.loading=!1}),(function(t){e.showToastr("top-right","danger",t),e.loading=!1}))):this.back()}},{key:"onFilePicked",value:function(e){this.invalidFile=!1;var t,n=e.target.files;if(t=n[0].name.substring(n[0].name.lastIndexOf(".")+1).toLowerCase(),-1===["pdf","jpg","png","jpeg","mp4"].indexOf(t))return this.invalidFile=!0,this.fileName=n[0].name,void(this.fileInput.nativeElement.value="");this.invalidFile=!1,this.uploadAssignmentSubmission=n[0],this.fileName=n[0].name,this.fileInput.nativeElement.value=""}},{key:"clearFile",value:function(){this.uploadAssignmentSubmission=null,this.fileName=null,this.fileInput.nativeElement.value="",this.invalidFile=!1}},{key:"submitAssignmentDetails",value:function(){if(this.assignmentSubmissionDetailsForm.markAllAsTouched(),!this.assignmentSubmissionDetailsForm.invalid)return this.assignmentSubmission||this.uploadAssignmentSubmission?void(this.invalidFile?this.showToastr("top-right","danger","Select Valid File"):this.stepper.next()):(this.showToastr("top-right","danger","Please select a File"),void(this.invalidFile=!0));this.showToastr("top-right","danger","Assignment details are required")}},{key:"saveAssignment",value:function(){var e=this;if(this.assignmentSubmissionDetailsForm.markAllAsTouched(),this.assignmentSubmissionDetailsForm.invalid)this.showToastr("top-right","danger","Assignment details are required");else{if(!this.assignmentSubmission&&!this.uploadAssignmentSubmission)return this.showToastr("top-right","danger","Please select a File"),void(this.invalidFile=!0);if(this.invalidFile)this.showToastr("top-right","danger","Select Valid File");else{this.submit=!0;var t=new FormData;t.append("branch",this.branchId),t.append("assignment",this.assignment._id),t.append("description",this.assignmentSubmissionDetailsForm.value.description),this.uploadAssignmentSubmission&&t.append("assignmentSubmission",this.uploadAssignmentSubmission,this.uploadAssignmentSubmission.name.substring(0,this.uploadAssignmentSubmission.name.lastIndexOf("."))),this.assignmentSubmission?(t.append("_id",this.assignmentSubmission._id),this.assignmentSubmissionService.updateAssignmentSubmission(t).subscribe((function(t){e.showToastr("top-right","success","Assignment Submission Updated Successfully!"),e.back()}),(function(t){e.showToastr("top-right","danger",t),e.submit=!1}))):this.assignmentSubmissionService.submitAssignment(t).subscribe((function(t){e.showToastr("top-right","success","New Assignment Added Successfully!"),e.back()}),(function(t){e.showToastr("top-right","danger",t),e.submit=!1}))}}}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}},{key:"back",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}},{key:"ngOnDestroy",value:function(){}}])&&t(i.prototype,s),l&&t(i,l),n}(),E.\u0275fac=function(e){return new(e||E)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](u.a),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](p.Gb),o["\u0275\u0275directiveInject"](r.c),o["\u0275\u0275directiveInject"](r.a))},E.\u0275cmp=o["\u0275\u0275defineComponent"]({type:E,selectors:[["ngx-assignment-submission"]],viewQuery:function(e,t){var n;1&e&&(o["\u0275\u0275viewQuery"](b,!0),o["\u0275\u0275viewQuery"](h,!0)),2&e&&(o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.stepper=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first))},decls:91,vars:17,consts:[["nbButton","","size","small","status","warning",1,"float-right",3,"click"],[1,""],[1,"table-responsive"],[1,"table"],[3,"linear"],["stepper",""],["label","Basic Details",3,"stepControl"],[1,"",3,"formGroup","submit"],[1,"row"],[1,"col-md-12"],[1,"form-control-group"],["for","input-description",1,"label"],["type","text","nbInput","","id","input-description","name","description","formControlName","description","placeholder","Description","fullWidth","",3,"status"],[4,"ngIf"],[1,"col-md-6"],["for","input-subject",1,"label"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","hidden","",3,"change"],["filePicker",""],["type","button","nbPrefix","","nbButton","","size","small","ghost","","nbTooltip","Attach File",3,"click"],["icon","attach-outline","pack","eva"],["type","text","nbInput","","fullWidth","","placeholder","Attach File","disabled","",3,"value","click"],["type","button","nbSuffix","","nbButton","","size","small","ghost","","nbTooltip","Remove File",3,"click",4,"ngIf"],[1,"col-md-12","text-right"],["nbButton","","size","small","type","submit"],["icon","arrow-ios-forward-outline"],["label","Submit"],[1,"step-container"],[1,"table","table-bordered"],[1,"col-6","text-left"],["nbButton","","size","small","nbStepperPrevious","",1,"",3,"disabled"],["icon","arrow-ios-back-outline"],[1,"col-6","text-right"],["nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner","click"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],["type","button","nbSuffix","","nbButton","","size","small","ghost","","nbTooltip","Remove File",3,"click"],["icon","close-outline","status","danger","pack","eva"]],template:function(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"button",0),o["\u0275\u0275listener"]("click",(function(){return t.back()})),o["\u0275\u0275text"](3," Back "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"h3",1),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"nb-card"),o["\u0275\u0275elementStart"](7,"nb-card-header"),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275elementStart"](9,"table",3),o["\u0275\u0275elementStart"](10,"tbody"),o["\u0275\u0275elementStart"](11,"tr"),o["\u0275\u0275elementStart"](12,"th"),o["\u0275\u0275text"](13,"Assignment Topic"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"th"),o["\u0275\u0275text"](15,":"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"th"),o["\u0275\u0275text"](17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"tr"),o["\u0275\u0275elementStart"](19,"th"),o["\u0275\u0275text"](20,"Assignment Description"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"th"),o["\u0275\u0275text"](22,":"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"th"),o["\u0275\u0275text"](24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"tr"),o["\u0275\u0275elementStart"](26,"th"),o["\u0275\u0275text"](27,"Assignment Submission Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"th"),o["\u0275\u0275text"](29,":"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"th"),o["\u0275\u0275text"](31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"nb-card-body"),o["\u0275\u0275elementStart"](33,"nb-stepper",4,5),o["\u0275\u0275elementStart"](35,"nb-step",6),o["\u0275\u0275elementStart"](36,"form",7),o["\u0275\u0275listener"]("submit",(function(){return t.submitAssignmentDetails()})),o["\u0275\u0275elementStart"](37,"h6"),o["\u0275\u0275text"](38,"Assignment Details:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](39,"div",8),o["\u0275\u0275elementStart"](40,"div",9),o["\u0275\u0275elementStart"](41,"div",10),o["\u0275\u0275elementStart"](42,"label",11),o["\u0275\u0275text"](43,"Description:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](44,"textarea",12),o["\u0275\u0275template"](45,S,2,1,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](46,"div",14),o["\u0275\u0275elementStart"](47,"div",10),o["\u0275\u0275elementStart"](48,"label",15),o["\u0275\u0275text"](49,"Attach File"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](50,"input",16,17),o["\u0275\u0275listener"]("change",(function(e){return t.onFilePicked(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](52,"nb-form-field"),o["\u0275\u0275elementStart"](53,"button",18),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275reference"](51).click()})),o["\u0275\u0275element"](54,"nb-icon",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](55,"input",20),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275reference"](51).click()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](56,f,2,0,"button",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](57,v,3,0,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](58,"hr"),o["\u0275\u0275elementStart"](59,"div",8),o["\u0275\u0275elementStart"](60,"div",22),o["\u0275\u0275elementStart"](61,"button",23),o["\u0275\u0275elementStart"](62,"span"),o["\u0275\u0275text"](63,"Next"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](64,"nb-icon",24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](65,"nb-step",25),o["\u0275\u0275elementStart"](66,"div",26),o["\u0275\u0275elementStart"](67,"div",2),o["\u0275\u0275elementStart"](68,"table",27),o["\u0275\u0275elementStart"](69,"tbody"),o["\u0275\u0275elementStart"](70,"tr"),o["\u0275\u0275elementStart"](71,"th"),o["\u0275\u0275text"](72,"Description"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](73,"td"),o["\u0275\u0275text"](74),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](75,"tr"),o["\u0275\u0275elementStart"](76,"th"),o["\u0275\u0275text"](77,"Attach File"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](78,"td"),o["\u0275\u0275text"](79),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](80,"hr"),o["\u0275\u0275elementStart"](81,"div",8),o["\u0275\u0275elementStart"](82,"div",28),o["\u0275\u0275elementStart"](83,"button",29),o["\u0275\u0275element"](84,"nb-icon",30),o["\u0275\u0275elementStart"](85,"span"),o["\u0275\u0275text"](86,"prev"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](87,"div",31),o["\u0275\u0275elementStart"](88,"button",32),o["\u0275\u0275listener"]("click",(function(){return t.saveAssignment()})),o["\u0275\u0275elementStart"](89,"span"),o["\u0275\u0275text"](90,"Submit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.assignmentSubmission?"Edit Submission":"Submission"," "),o["\u0275\u0275advance"](12),o["\u0275\u0275textInterpolate"](t.assignment.topic),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](t.assignment.description),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.assignment.submissionDate)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("linear",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("stepControl",t.assignmentSubmissionDetailsForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.assignmentSubmissionDetailsForm),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("status",t.assignmentSubmissionDetailsForm.get("description").touched?t.assignmentSubmissionDetailsForm.get("description").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.assignmentSubmissionDetailsForm.get("description").invalid&&t.assignmentSubmissionDetailsForm.get("description").touched),o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("value",t.fileName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.uploadAssignmentSubmission||!t.assignment&&t.fileName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.invalidFile),o["\u0275\u0275advance"](17),o["\u0275\u0275textInterpolate"](t.assignmentSubmissionDetailsForm.value.description),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.uploadAssignmentSubmission?t.fileName:"--"),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.submit),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit))},directives:[p.y,p.A,p.v,p.x,p.vb,p.ub,a.v,a.n,a.g,p.Q,a.a,a.m,a.e,l.n,p.L,p.jb,p.Ib,p.N,p.xb,p.sb,p.yb],styles:[""]}),E)},{path:"page-not-found",loadChildren:function(){return s.e(0).then(s.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found"}],F=((x=function t(){e(this,t)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},imports:[[r.g.forChild(w)],r.g]}),x),k=((y=function t(){e(this,t)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[l.c,F,p.B,p.w,p.ob,p.P,p.R,p.Jb,p.M,p.tb,p.wb,a.s]]}),y)}}])}();
//# sourceMappingURL=224-es5.976faf9aeb6b6d1a2ef2.js.map