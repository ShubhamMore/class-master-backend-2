(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{qK8W:function(t,e,c){"use strict";c.r(e);var i=c("aceb"),s=c("ofXK"),n=c("tyNb"),a=c("ZatZ"),b=c("IAlr"),o=c("lst6"),r=c("zZNt"),l=c("EQut"),h=c("fXoL");function d(t,e){if(1&t&&(h.Wb(0,"nb-option",14),h.Cc(1),h.Vb()),2&t){const t=e.$implicit;h.mc("value",t._id),h.Eb(1),h.Dc(t.subject)}}function u(t,e){if(1&t&&(h.Wb(0,"nb-option",14),h.Cc(1),h.Vb()),2&t){const t=e.$implicit;h.mc("value",t),h.Eb(1),h.Dc(t)}}function m(t,e){if(1&t&&(h.Wb(0,"nb-option",14),h.Cc(1),h.Vb()),2&t){const t=e.$implicit;h.mc("value",t.monthNo),h.Eb(1),h.Dc(t.month)}}function g(t,e){if(1&t){const t=h.Xb();h.Wb(0,"tr"),h.Wb(1,"td"),h.Cc(2),h.Vb(),h.Wb(3,"td"),h.Cc(4),h.Vb(),h.Wb(5,"td"),h.Cc(6),h.Vb(),h.Wb(7,"td"),h.Cc(8),h.Vb(),h.Wb(9,"td"),h.Cc(10),h.Vb(),h.Wb(11,"td"),h.Wb(12,"button",21),h.ec("click",(function(){h.uc(t);const c=e.$implicit;return h.gc(3).editExam(c)})),h.Cc(13," Edit "),h.Vb(),h.Vb(),h.Wb(14,"td"),h.Wb(15,"button",22),h.ec("click",(function(){h.uc(t);const c=e.$implicit;return h.gc(3).addExamScore(c)})),h.Cc(16," Score "),h.Vb(),h.Vb(),h.Wb(17,"td"),h.Wb(18,"button",23),h.ec("click",(function(){h.uc(t);const c=e.$implicit,i=e.index;return h.gc(3).changeExamStatus(c._id,!c.status,i)})),h.Cc(19),h.Vb(),h.Vb(),h.Wb(20,"td"),h.Wb(21,"button",24),h.ec("click",(function(){h.uc(t);const c=e.$implicit,i=e.index;return h.gc(3).deleteExam(c._id,i)})),h.Cc(22," Delete "),h.Vb(),h.Vb(),h.Vb()}if(2&t){const t=e.$implicit,c=e.index,i=h.gc(3);h.Eb(2),h.Dc(c+1),h.Eb(2),h.Dc(t.examTitle),h.Eb(2),h.Dc(i.dateService.formatDate(t.date)),h.Eb(2),h.Dc(i.category.category),h.Eb(2),h.Dc(i.course.basicDetails.courseName),h.Eb(8),h.mc("status",t.status?"success":"danger"),h.Eb(1),h.Ec(" ",t.status?"Inactive":"Active"," ")}}function f(t,e){if(1&t&&(h.Wb(0,"div",17),h.Wb(1,"table",18),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Cc(5,"#"),h.Vb(),h.Wb(6,"th"),h.Cc(7,"Title"),h.Vb(),h.Wb(8,"th"),h.Cc(9,"Date"),h.Vb(),h.Wb(10,"th"),h.Cc(11,"Category"),h.Vb(),h.Wb(12,"th"),h.Cc(13,"Course"),h.Vb(),h.Wb(14,"th",19),h.Cc(15,"Action"),h.Vb(),h.Vb(),h.Vb(),h.Wb(16,"tbody"),h.Ac(17,g,23,7,"tr",20),h.Vb(),h.Vb(),h.Vb()),2&t){const t=h.gc(2);h.Eb(17),h.mc("ngForOf",t.exams)}}function W(t,e){1&t&&(h.Wb(0,"p",25),h.Cc(1,"No Exams Available"),h.Vb())}function p(t,e){if(1&t&&(h.Ub(0),h.Ac(1,f,18,1,"div",15),h.Ac(2,W,2,0,"ng-template",null,16,h.Bc),h.Tb()),2&t){const t=h.sc(3),e=h.gc();h.Eb(1),h.mc("ngIf",e.exams.length>0)("ngIfElse",t)}}function v(t,e){1&t&&(h.Wb(0,"p",25),h.Cc(1,"Loading..."),h.Vb())}const V=[{path:"",component:(()=>{class t{constructor(t,e,c,i,s,n,a,b){this.branchService=t,this.courseService=e,this.batchService=c,this.toastrService=i,this.dateService=s,this.examService=n,this.router=a,this.route=b}ngOnInit(){this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.branchService.getCategoryData().subscribe(t=>{this.category=t}),this.courseService.getCourseData().subscribe(t=>{this.course=t}),this.batchService.getBatchData().subscribe(t=>{this.batch=t}),this.subjects=[],this.subject="",this.batch.subjects.forEach(t=>{const e=this.course.subjects.find(e=>e._id===t.subject);this.subjects.push(e)}),this.months=this.dateService.getMonths(),this.years=this.dateService.getYears(),this.month=(this.dateService.getDate().getMonth()+1).toString().padStart(2,"0"),this.year=this.years[this.years.length-1],this.getExams()):this.router.navigate(["../"],{relativeTo:this.route})}onSelectMonth(t){this.month=t,this.getExams()}onSelectYear(t){this.year=t,""===t&&(this.month=""),this.getExams()}onSelectSubject(t){this.subject=t,this.getExams()}getExams(){this.loading=!0,this.examService.getExams(this.branchId,this.category._id,this.course._id,this.batch._id,this.subject,this.month,this.year).subscribe(t=>{this.exams=t,this.loading=!1},t=>{this.showToastr("top-right","danger",t),this.loading=!1})}addExam(){this.router.navigate(["../add"],{relativeTo:this.route})}addExamScore(t){this.examService.setExamData(t),this.router.navigate(["../score"],{relativeTo:this.route})}editExam(t){this.examService.setExamId(t._id),this.examService.setExamData(t),this.router.navigate(["../edit"],{relativeTo:this.route,queryParams:{mode:"edit"}})}deleteExam(t,e){this.loading=!0,this.examService.deleteExam(t).subscribe(t=>{this.exams.splice(e,1),this.loading=!1},t=>{this.showToastr("top-right","danger",t),this.loading=!1})}changeExamStatus(t,e,c){}showToastr(t,e,c){this.toastrService.show(e,c,{position:t,status:e})}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(l.a),h.Qb(b.a),h.Qb(o.a),h.Qb(i.xb),h.Qb(a.a),h.Qb(r.a),h.Qb(n.c),h.Qb(n.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["ngx-manage-batch-test"]],decls:35,vars:8,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","size","small","fullWidth","","status","primary",3,"click"],["icon","plus-circle-outline"],["id","select-subject","name","subject","fullWidth","","placeholder","All Subjects",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","select-year","name","year","fullWidth","","placeholder","All Years",3,"selected","selectedChange"],["id","select-month","name","month","fullWidth","","placeholder","All Months",3,"selected","selectedChange"],[1,"body-container"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["loadingData",""],[3,"value"],["class","table-responsive",4,"ngIf","ngIfElse"],["noBatches",""],[1,"table-responsive"],[1,"table"],["colspan","4"],[4,"ngFor","ngForOf"],["nbButton","","status","primary","size","small",3,"click"],["nbButton","","status","warning","size","small",3,"click"],["nbButton","","size","small",3,"status","click"],["nbButton","","status","danger","size","small",3,"click"],[1,"text-center"]],template:function(t,e){if(1&t&&(h.Wb(0,"nb-card"),h.Wb(1,"nb-card-header"),h.Wb(2,"div",0),h.Wb(3,"div",1),h.Wb(4,"h3"),h.Cc(5,"Classroom Exams"),h.Vb(),h.Vb(),h.Wb(6,"div",2),h.Wb(7,"button",3),h.ec("click",(function(){return e.addExam()})),h.Cc(8," Add Exam "),h.Rb(9,"nb-icon",4),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(10,"nb-card"),h.Wb(11,"nb-card-header"),h.Wb(12,"div",0),h.Rb(13,"div",2),h.Wb(14,"div",2),h.Wb(15,"nb-select",5),h.ec("selectedChange",(function(t){return e.onSelectSubject(t)})),h.Wb(16,"nb-option",6),h.Cc(17,"All Subjects"),h.Vb(),h.Ac(18,d,2,2,"nb-option",7),h.Vb(),h.Vb(),h.Wb(19,"div",2),h.Wb(20,"nb-select",8),h.ec("selectedChange",(function(t){return e.onSelectYear(t)})),h.Wb(21,"nb-option",6),h.Cc(22,"All Years"),h.Vb(),h.Ac(23,u,2,2,"nb-option",7),h.Vb(),h.Vb(),h.Wb(24,"div",2),h.Wb(25,"nb-select",9),h.ec("selectedChange",(function(t){return e.onSelectMonth(t)})),h.Wb(26,"nb-option",6),h.Cc(27,"All Months"),h.Vb(),h.Ac(28,m,2,2,"nb-option",7),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(29,"nb-card-body",10),h.Wb(30,"div",0),h.Wb(31,"div",11),h.Ac(32,p,4,2,"ng-container",12),h.Ac(33,v,2,0,"ng-template",null,13,h.Bc),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&t){const t=h.sc(34);h.Eb(15),h.mc("selected",e.subject),h.Eb(3),h.mc("ngForOf",e.subjects),h.Eb(2),h.mc("selected",e.year),h.Eb(3),h.mc("ngForOf",e.years),h.Eb(2),h.mc("selected",e.month),h.Eb(3),h.mc("ngForOf",e.months),h.Eb(4),h.mc("ngIf",!e.loading)("ngIfElse",t)}},directives:[i.x,i.z,i.u,i.L,i.jb,i.eb,s.m,i.w,s.n],styles:[""]}),t})()},{path:"page-not-found",loadChildren:()=>c.e(0).then(c.bind(null,"DeSt")).then(t=>t.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let E=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[n.g.forChild(V)],n.g]}),t})();c.d(e,"ManageBatchTestModule",(function(){return x}));let x=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[s.c,E,i.A,i.kb,i.v,i.N]]}),t})()}}]);