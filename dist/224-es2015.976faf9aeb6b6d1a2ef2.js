(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{S0f3:function(e,t,n){"use strict";n.r(t),n.d(t,"AssignmentSubmissionModule",(function(){return E}));var i=n("3Pt+"),s=n("ofXK"),a=n("tyNb"),l=n("fXoL"),r=n("EQut"),o=n("ZatZ"),m=n("cbqz"),d=n("AVwh"),c=n("aceb");const u=["stepper"],p=["filePicker"];function b(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p",34),l["\u0275\u0275text"](1," Assignment Description is required! "),l["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,b,2,0,"p",33),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",null==e.assignmentSubmissionDetailsForm.get("description").errors?null:e.assignmentSubmissionDetailsForm.get("description").errors.required)}}function g(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",35),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().clearFile()})),l["\u0275\u0275element"](1,"nb-icon",36),l["\u0275\u0275elementEnd"]()}}function S(e,t){1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"p",34),l["\u0275\u0275text"](2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]())}const f=[{path:"",component:(()=>{class e{constructor(e,t,n,i,s,a,l){this.branchService=e,this.dateService=t,this.assignmentSubmissionService=n,this.assignmentService=i,this.toastrService=s,this.router=a,this.route=l}ngOnInit(){this.loading=!0,this.submit=!1,this.invalidFile=!1,this.fileName=null,this.branchId=this.branchService.getBranchId(),this.branchId?(this.assignmentService.getAssignmentData().subscribe(e=>{this.assignment=e}),this.assignmentSubmissionDetailsForm=new i.f({description:new i.d(null,{validators:[i.u.required]})}),this.assignmentSubmissionService.getSubmissionOfAssignment(this.assignment._id).subscribe(e=>{e&&(this.assignmentSubmission=e,this.assignmentSubmissionDetailsForm.patchValue({description:e.description}),this.fileName=e.fileName),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})):this.back()}onFilePicked(e){this.invalidFile=!1;const t=e.target.files;let n=null;if(n=t[0].name.substring(t[0].name.lastIndexOf(".")+1).toLowerCase(),-1===["pdf","jpg","png","jpeg","mp4"].indexOf(n))return this.invalidFile=!0,this.fileName=t[0].name,void(this.fileInput.nativeElement.value="");this.invalidFile=!1,this.uploadAssignmentSubmission=t[0],this.fileName=t[0].name,this.fileInput.nativeElement.value=""}clearFile(){this.uploadAssignmentSubmission=null,this.fileName=null,this.fileInput.nativeElement.value="",this.invalidFile=!1}submitAssignmentDetails(){if(this.assignmentSubmissionDetailsForm.markAllAsTouched(),!this.assignmentSubmissionDetailsForm.invalid)return this.assignmentSubmission||this.uploadAssignmentSubmission?void(this.invalidFile?this.showToastr("top-right","danger","Select Valid File"):this.stepper.next()):(this.showToastr("top-right","danger","Please select a File"),void(this.invalidFile=!0));this.showToastr("top-right","danger","Assignment details are required")}saveAssignment(){if(this.assignmentSubmissionDetailsForm.markAllAsTouched(),this.assignmentSubmissionDetailsForm.invalid)return void this.showToastr("top-right","danger","Assignment details are required");if(!this.assignmentSubmission&&!this.uploadAssignmentSubmission)return this.showToastr("top-right","danger","Please select a File"),void(this.invalidFile=!0);if(this.invalidFile)return void this.showToastr("top-right","danger","Select Valid File");this.submit=!0;const e=new FormData;e.append("branch",this.branchId),e.append("assignment",this.assignment._id),e.append("description",this.assignmentSubmissionDetailsForm.value.description),this.uploadAssignmentSubmission&&e.append("assignmentSubmission",this.uploadAssignmentSubmission,this.uploadAssignmentSubmission.name.substring(0,this.uploadAssignmentSubmission.name.lastIndexOf("."))),this.assignmentSubmission?(e.append("_id",this.assignmentSubmission._id),this.assignmentSubmissionService.updateAssignmentSubmission(e).subscribe(e=>{this.showToastr("top-right","success","Assignment Submission Updated Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})):this.assignmentSubmissionService.submitAssignment(e).subscribe(e=>{this.showToastr("top-right","success","New Assignment Added Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}back(){this.router.navigate(["../"],{relativeTo:this.route})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](r.a),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](c.Gb),l["\u0275\u0275directiveInject"](a.c),l["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-assignment-submission"]],viewQuery:function(e,t){var n;1&e&&(l["\u0275\u0275viewQuery"](u,!0),l["\u0275\u0275viewQuery"](p,!0)),2&e&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.stepper=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first))},decls:91,vars:17,consts:[["nbButton","","size","small","status","warning",1,"float-right",3,"click"],[1,""],[1,"table-responsive"],[1,"table"],[3,"linear"],["stepper",""],["label","Basic Details",3,"stepControl"],[1,"",3,"formGroup","submit"],[1,"row"],[1,"col-md-12"],[1,"form-control-group"],["for","input-description",1,"label"],["type","text","nbInput","","id","input-description","name","description","formControlName","description","placeholder","Description","fullWidth","",3,"status"],[4,"ngIf"],[1,"col-md-6"],["for","input-subject",1,"label"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","hidden","",3,"change"],["filePicker",""],["type","button","nbPrefix","","nbButton","","size","small","ghost","","nbTooltip","Attach File",3,"click"],["icon","attach-outline","pack","eva"],["type","text","nbInput","","fullWidth","","placeholder","Attach File","disabled","",3,"value","click"],["type","button","nbSuffix","","nbButton","","size","small","ghost","","nbTooltip","Remove File",3,"click",4,"ngIf"],[1,"col-md-12","text-right"],["nbButton","","size","small","type","submit"],["icon","arrow-ios-forward-outline"],["label","Submit"],[1,"step-container"],[1,"table","table-bordered"],[1,"col-6","text-left"],["nbButton","","size","small","nbStepperPrevious","",1,"",3,"disabled"],["icon","arrow-ios-back-outline"],[1,"col-6","text-right"],["nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner","click"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],["type","button","nbSuffix","","nbButton","","size","small","ghost","","nbTooltip","Remove File",3,"click"],["icon","close-outline","status","danger","pack","eva"]],template:function(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"button",0),l["\u0275\u0275listener"]("click",(function(){return t.back()})),l["\u0275\u0275text"](3," Back "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"h3",1),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card"),l["\u0275\u0275elementStart"](7,"nb-card-header"),l["\u0275\u0275elementStart"](8,"div",2),l["\u0275\u0275elementStart"](9,"table",3),l["\u0275\u0275elementStart"](10,"tbody"),l["\u0275\u0275elementStart"](11,"tr"),l["\u0275\u0275elementStart"](12,"th"),l["\u0275\u0275text"](13,"Assignment Topic"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"th"),l["\u0275\u0275text"](15,":"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"th"),l["\u0275\u0275text"](17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"tr"),l["\u0275\u0275elementStart"](19,"th"),l["\u0275\u0275text"](20,"Assignment Description"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"th"),l["\u0275\u0275text"](22,":"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"th"),l["\u0275\u0275text"](24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"tr"),l["\u0275\u0275elementStart"](26,"th"),l["\u0275\u0275text"](27,"Assignment Submission Date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"th"),l["\u0275\u0275text"](29,":"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"th"),l["\u0275\u0275text"](31),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"nb-card-body"),l["\u0275\u0275elementStart"](33,"nb-stepper",4,5),l["\u0275\u0275elementStart"](35,"nb-step",6),l["\u0275\u0275elementStart"](36,"form",7),l["\u0275\u0275listener"]("submit",(function(){return t.submitAssignmentDetails()})),l["\u0275\u0275elementStart"](37,"h6"),l["\u0275\u0275text"](38,"Assignment Details:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"div",8),l["\u0275\u0275elementStart"](40,"div",9),l["\u0275\u0275elementStart"](41,"div",10),l["\u0275\u0275elementStart"](42,"label",11),l["\u0275\u0275text"](43,"Description:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](44,"textarea",12),l["\u0275\u0275template"](45,h,2,1,"ng-container",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](46,"div",14),l["\u0275\u0275elementStart"](47,"div",10),l["\u0275\u0275elementStart"](48,"label",15),l["\u0275\u0275text"](49,"Attach File"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](50,"input",16,17),l["\u0275\u0275listener"]("change",(function(e){return t.onFilePicked(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](52,"nb-form-field"),l["\u0275\u0275elementStart"](53,"button",18),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275reference"](51).click()})),l["\u0275\u0275element"](54,"nb-icon",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](55,"input",20),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275reference"](51).click()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](56,g,2,0,"button",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](57,S,3,0,"ng-container",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](58,"hr"),l["\u0275\u0275elementStart"](59,"div",8),l["\u0275\u0275elementStart"](60,"div",22),l["\u0275\u0275elementStart"](61,"button",23),l["\u0275\u0275elementStart"](62,"span"),l["\u0275\u0275text"](63,"Next"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](64,"nb-icon",24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](65,"nb-step",25),l["\u0275\u0275elementStart"](66,"div",26),l["\u0275\u0275elementStart"](67,"div",2),l["\u0275\u0275elementStart"](68,"table",27),l["\u0275\u0275elementStart"](69,"tbody"),l["\u0275\u0275elementStart"](70,"tr"),l["\u0275\u0275elementStart"](71,"th"),l["\u0275\u0275text"](72,"Description"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](73,"td"),l["\u0275\u0275text"](74),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](75,"tr"),l["\u0275\u0275elementStart"](76,"th"),l["\u0275\u0275text"](77,"Attach File"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](78,"td"),l["\u0275\u0275text"](79),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](80,"hr"),l["\u0275\u0275elementStart"](81,"div",8),l["\u0275\u0275elementStart"](82,"div",28),l["\u0275\u0275elementStart"](83,"button",29),l["\u0275\u0275element"](84,"nb-icon",30),l["\u0275\u0275elementStart"](85,"span"),l["\u0275\u0275text"](86,"prev"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](87,"div",31),l["\u0275\u0275elementStart"](88,"button",32),l["\u0275\u0275listener"]("click",(function(){return t.saveAssignment()})),l["\u0275\u0275elementStart"](89,"span"),l["\u0275\u0275text"](90,"Submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",t.assignmentSubmission?"Edit Submission":"Submission"," "),l["\u0275\u0275advance"](12),l["\u0275\u0275textInterpolate"](t.assignment.topic),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](t.assignment.description),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.assignment.submissionDate)),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("linear",!0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("stepControl",t.assignmentSubmissionDetailsForm),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("formGroup",t.assignmentSubmissionDetailsForm),l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("status",t.assignmentSubmissionDetailsForm.get("description").touched?t.assignmentSubmissionDetailsForm.get("description").invalid?"danger":"success":"basic"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.assignmentSubmissionDetailsForm.get("description").invalid&&t.assignmentSubmissionDetailsForm.get("description").touched),l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("value",t.fileName),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.uploadAssignmentSubmission||!t.assignment&&t.fileName),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.invalidFile),l["\u0275\u0275advance"](17),l["\u0275\u0275textInterpolate"](t.assignmentSubmissionDetailsForm.value.description),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](t.uploadAssignmentSubmission?t.fileName:"--"),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("disabled",t.submit),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit))},directives:[c.y,c.A,c.v,c.x,c.vb,c.ub,i.v,i.n,i.g,c.Q,i.a,i.m,i.e,s.n,c.L,c.jb,c.Ib,c.N,c.xb,c.sb,c.yb],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found"}];let v=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.g.forChild(f)],a.g]}),e})(),E=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.c,v,c.B,c.w,c.ob,c.P,c.R,c.Jb,c.M,c.tb,c.wb,i.s]]}),e})()}}]);
//# sourceMappingURL=224-es2015.976faf9aeb6b6d1a2ef2.js.map