(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{tUyT:function(e,t,n){"use strict";n.r(t),n.d(t,"SmsPackagesModule",(function(){return O}));var a=n("3Pt+"),s=n("aceb"),r=n("ofXK"),c=n("fXoL"),i=n("lJxs"),l=n("JIr8"),o=n("2Vo4"),m=n("z6cu"),d=n("fCOA");let g=(()=>{class e{constructor(e){this.httpService=e,this.smsPackage=new o.a(null)}setSMSPackageData(e){this.smsPackage.next(e)}getSMSPackageData(){return this.smsPackage}deleteSMSPackageData(){this.smsPackage.next(null)}setSMSPackageId(e){this.smsPackageId=e}getSMSPackageId(){return this.smsPackageId}deleteSMSPackageId(){this.smsPackageId=null}saveSMSPackage(e){return this.httpService.httpPost({api:"newSMSPackage",data:e}).pipe(Object(i.a)(e=>e),Object(l.a)(e=>Object(m.a)(e)))}changeSMSPackageStatus(e,t){return this.httpService.httpPost({api:"changeSMSPackageStatus",data:{id:e,status:t}}).pipe(Object(i.a)(e=>e),Object(l.a)(e=>Object(m.a)(e)))}getSMSPackages(){return this.httpService.httpPost({api:"getSMSPackages",data:{}}).pipe(Object(i.a)(e=>e),Object(l.a)(e=>Object(m.a)(e)))}getSMSPackage(e){return this.httpService.httpPost({api:"getSMSPackage",data:{id:e}}).pipe(Object(i.a)(e=>e),Object(l.a)(e=>Object(m.a)(e)))}editSMSPackage(e){return this.httpService.httpPost({api:"updateSMSPackage",data:e}).pipe(Object(i.a)(e=>e),Object(l.a)(e=>Object(m.a)(e)))}deleteSMSPackage(e){return this.httpService.httpPost({api:"deleteSMSPackage",data:{id:e}}).pipe(Object(i.a)(e=>e),Object(l.a)(e=>Object(m.a)(e)))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](d.a))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function u(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",15),c["\u0275\u0275text"](1," SMS Package Name is required! "),c["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,u,2,0,"p",14),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e.smsPackageForm.get("packageName").errors?null:e.smsPackageForm.get("packageName").errors.required)}}function p(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",15),c["\u0275\u0275text"](1," SMS Count is required! "),c["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",15),c["\u0275\u0275text"](1," SMS Count should be more than or equal to 0 "),c["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,p,2,0,"p",14),c["\u0275\u0275template"](2,h,2,0,"p",14),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e.smsPackageForm.get("smsCount").errors?null:e.smsPackageForm.get("smsCount").errors.required),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e.smsPackageForm.get("smsCount").errors?null:e.smsPackageForm.get("smsCount").errors.min)}}function P(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",15),c["\u0275\u0275text"](1," Price Amount is required! "),c["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",15),c["\u0275\u0275text"](1," Price Amount should be more than or equal to 0 "),c["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,P,2,0,"p",14),c["\u0275\u0275template"](2,b,2,0,"p",14),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e.smsPackageForm.get("price").errors?null:e.smsPackageForm.get("price").errors.required),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e.smsPackageForm.get("price").errors?null:e.smsPackageForm.get("price").errors.min)}}let v=(()=>{class e{constructor(e,t,n){this.smsPackageService=e,this.toastrService=t,this.ref=n}ngOnInit(){this.loading=!0,this.submit=!1,this.smsPackageService.getSMSPackageData().subscribe(e=>{this.smsPackageForm=new a.f({packageName:new a.d(null,{validators:[a.u.required]}),smsCount:new a.d(null,{validators:[a.u.required,a.u.min(0)]}),price:new a.d(null,{validators:[a.u.required,a.u.min(0)]})}),e&&(this.smsPackage=e,this.smsPackageForm.patchValue({packageName:e.packageName,smsCount:e.smsCount,price:e.price})),this.loading=!1})}saveSMSPackage(){if(this.smsPackageForm.markAllAsTouched(),this.smsPackageForm.invalid)return void this.showToastr("top-right","danger","SMSPackage Details are required");this.submit=!0;const e=Object.assign({},this.smsPackageForm.value);this.smsPackage?(e._id=this.smsPackage._id,this.smsPackageService.editSMSPackage(e).subscribe(e=>{this.ref.close(e)},e=>{this.showToastr("top-right","danger",e),this.submit=!1})):this.smsPackageService.saveSMSPackage(e).subscribe(e=>{this.ref.close(e)},e=>{this.showToastr("top-right","danger",e),this.submit=!1})}onClose(){this.ref.close()}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}ngOnDestroy(){this.smsPackageService.setSMSPackageData(null)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](g),c["\u0275\u0275directiveInject"](s.Gb),c["\u0275\u0275directiveInject"](s.J))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-save-sms-package"]],decls:42,vars:10,consts:[[1,"smsPackage-box"],["icon","close-outline",1,"float-right","pointer",3,"click"],[1,""],[1,"",3,"formGroup","submit"],[1,"table-responsive"],[1,"table","table-borderless"],[1,"form-control-group"],["type","text","nbInput","","id","input-package-name","name","packageName","formControlName","packageName","placeholder","Package Name","fullWidth","",3,"status"],[4,"ngIf"],["type","number","nbInput","","id","input-sms-count","name","smsCount","min","0","formControlName","smsCount","placeholder","SMS Count","fullWidth","",3,"status"],["type","number","nbInput","","id","input-price","name","price","min","0","formControlName","price","placeholder","Price","fullWidth","",3,"status"],[1,"row"],[1,"col-md-12","text-right"],["type","submit","nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"nb-icon",1),c["\u0275\u0275listener"]("click",(function(){return t.onClose()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"h3",2),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"nb-card-body"),c["\u0275\u0275elementStart"](6,"form",3),c["\u0275\u0275listener"]("submit",(function(){return t.saveSMSPackage()})),c["\u0275\u0275elementStart"](7,"div",4),c["\u0275\u0275elementStart"](8,"table",5),c["\u0275\u0275elementStart"](9,"tbody"),c["\u0275\u0275elementStart"](10,"tr"),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Package Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14,":"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275elementStart"](16,"div",6),c["\u0275\u0275element"](17,"input",7),c["\u0275\u0275template"](18,S,2,1,"ng-container",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"tr"),c["\u0275\u0275elementStart"](20,"th"),c["\u0275\u0275text"](21,"SMS Count"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"td"),c["\u0275\u0275text"](23,":"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"td"),c["\u0275\u0275elementStart"](25,"div",6),c["\u0275\u0275element"](26,"input",9),c["\u0275\u0275template"](27,k,3,2,"ng-container",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"tr"),c["\u0275\u0275elementStart"](29,"th"),c["\u0275\u0275text"](30,"Price"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"td"),c["\u0275\u0275text"](32,":"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"td"),c["\u0275\u0275elementStart"](34,"div",6),c["\u0275\u0275element"](35,"input",10),c["\u0275\u0275template"](36,f,3,2,"ng-container",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](37,"hr"),c["\u0275\u0275elementStart"](38,"div",11),c["\u0275\u0275elementStart"](39,"div",12),c["\u0275\u0275elementStart"](40,"button",13),c["\u0275\u0275text"](41," Save "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"]("",t.smsPackage?"Update":"Add"," SMS Package"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("formGroup",t.smsPackageForm),c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("status",t.smsPackageForm.get("packageName").touched?t.smsPackageForm.get("packageName").invalid?"danger":"success":"basic"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.smsPackageForm.get("packageName").touched),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("status",t.smsPackageForm.get("smsCount").touched?t.smsPackageForm.get("smsCount").invalid?"danger":"success":"basic"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.smsPackageForm.get("smsCount").touched),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("status",t.smsPackageForm.get("price").touched?t.smsPackageForm.get("price").invalid?"danger":"success":"basic"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.smsPackageForm.get("price").touched),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit))},directives:[s.y,s.A,s.N,s.x,a.v,a.n,a.g,s.Q,a.a,a.m,a.e,r.n,a.q,s.v,s.sb],styles:[""]}),e})();function E(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275elementStart"](10,"button",13),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](3).editSMSPackage(n)})),c["\u0275\u0275text"](11," Edit "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275elementStart"](13,"button",14),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,a=t.index;return c["\u0275\u0275nextContext"](3).changeSMSPackageStatus(n._id,!n.status,a)})),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275elementStart"](16,"button",15),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,a=t.index;return c["\u0275\u0275nextContext"](3).deleteSMSPackage(n._id,a)})),c["\u0275\u0275text"](17," Delete "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.packageName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.smsCount),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",a.getAmount(e.price),"/-"),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("status",e.status?"warning":"success"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.status?"Deactivate":"Activate"," ")}}function x(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"table",10),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"th"),c["\u0275\u0275text"](4,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"SMS Package"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"SMS Count"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"Price"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th",11),c["\u0275\u0275text"](12,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"tbody"),c["\u0275\u0275template"](14,E,18,6,"tr",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngForOf",e.smsPackages)}}function M(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",7),c["\u0275\u0275template"](2,x,15,1,"div",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](),t=c["\u0275\u0275reference"](14);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.smsPackages.length>0)("ngIfElse",t)}}function y(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",16),c["\u0275\u0275text"](1,"Loading..."),c["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",16),c["\u0275\u0275text"](1,"No SMS Packages Available"),c["\u0275\u0275elementEnd"]())}let C=(()=>{class e{constructor(e,t,n){this.smsPackageService=e,this.toastrService=t,this.dialogService=n}ngOnInit(){this.loading=!0,this.smsPackages=[],this.getSMSPackages()}getSMSPackages(){this.loading=!0,this.smsPackageService.getSMSPackages().subscribe(e=>{this.smsPackages=e,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}openSMSPackageDialog(){this.dialogService.open(v,{context:{}}).onClose.subscribe(e=>e&&this.getSMSPackages())}getAmount(e){return(e=parseFloat(e.toString())).toFixed(2).toString()}editSMSPackage(e){this.smsPackageService.setSMSPackageData(e),this.openSMSPackageDialog()}changeSMSPackageStatus(e,t,n){this.loading=!0,this.smsPackageService.changeSMSPackageStatus(e,t).subscribe(e=>{this.showToastr("top-right","success","SMS Package Status Updated Successfully"),this.smsPackages[n].status=t,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}deleteSMSPackage(e,t){this.loading=!0,this.smsPackageService.deleteSMSPackage(e).subscribe(e=>{this.showToastr("top-right","success","SMS Package Deleted Successfully"),this.smsPackages.splice(t,1),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](g),c["\u0275\u0275directiveInject"](s.Gb),c["\u0275\u0275directiveInject"](s.K))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-sms-packages"]],decls:15,vars:2,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","status","primary","size","small","fullWidth","",3,"click"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noSMSPackages",""],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table"],["colspan","3"],[4,"ngFor","ngForOf"],["type","button","nbButton","","size","small","status","basic",3,"click"],["type","button","nbButton","","size","small",3,"status","click"],["type","button","nbButton","","size","small","status","danger",3,"click"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"h3"),c["\u0275\u0275text"](5,"SMS Packages"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",2),c["\u0275\u0275elementStart"](7,"button",3),c["\u0275\u0275listener"]("click",(function(){return t.openSMSPackageDialog()})),c["\u0275\u0275text"](8," Add SMS Package "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"nb-card-body"),c["\u0275\u0275template"](10,M,3,2,"div",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,y,2,0,"ng-template",null,5,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](13,I,2,0,"ng-template",null,6,c["\u0275\u0275templateRefExtractor"])),2&e){const e=c["\u0275\u0275reference"](12);c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",e)}},directives:[s.y,s.A,s.v,s.x,r.n,r.m],styles:[""]}),e})();var w=n("tyNb");const j=[{path:"",component:C},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let F=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[w.g.forChild(j)],w.g]}),e})(),O=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,F,s.B,s.R,s.w,s.ob,s.tb,s.P,a.s]]}),e})()}}]);
//# sourceMappingURL=62-es2015.4f1324d1baa56a56257a.js.map