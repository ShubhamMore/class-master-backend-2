{"version":3,"sources":["webpack:///src/app/institute/branch/manage-branch/course/add-course/add-course.component.html","webpack:///src/app/institute/branch/manage-branch/course/add-course/add-course-routing.module.ts","webpack:///src/app/institute/branch/manage-branch/course/add-course/add-course.component.ts","webpack:///src/app/institute/branch/manage-branch/course/add-course/add-course.module.ts"],"names":["AddCourseComponent","AddCourseModule","AddCourseRoutingModule","routes","path","component","branchService","courseService","toastrService","router","route","this","queryParams","subscribe","param","mode","ngOnInit","loading","submit","branchId","getBranchId","courseId","getCourseId","showToastr","navigate","relativeTo","courseBasicDetailsForm","courseName","validators","required","duration","maxLength","min","max","category","description","courseSubjectForm","subjects","atLeastOneSubjectValidator","bind","courseFeeDetailsForm","fees","gst","totalFees","getCategories","inclusiveGST","getCourseForEditing","course","patchValue","basicDetails","feeDetails","calculateTotal","getSubjects","controls","forEach","subject","addSubject","err","generateSubject","back","getBranchData","branch","categories","getBranch","setBranchData","error","group","status","value","atLeastOneSubjectError","get","subjectData","_id","toString","push","newSubject","i","removeAt","fee","markAllAsTouched","invalid","stepper","next","editCourse","res","addCourse","position","message","show","getRawValue","Math","round","categoryId","find","curCategory","join","replaceUrl","deleteCourseId","submitBasicDetails","submitSubjects","submitFeeDetails","inclusiveGSTChanged","saveCourse","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\r\n  <nb-card-header>\r\n    <button class=\"float-right\" nbButton size=\"small\" status=\"warning\" (click)=\"back()\">\r\n      Back\r\n    </button>\r\n    <h3 class=\"\">\r\n      {{\r\n        !course ? 'Add New Course' : 'Edit Course ' + (course.basicDetails.courseName | uppercase)\r\n      }}\r\n    </h3>\r\n  </nb-card-header>\r\n  <nb-card-body>\r\n    <nb-stepper #stepper [linear]=\"true\">\r\n      <nb-step [stepControl]=\"courseBasicDetailsForm\" label=\"Basic Details\">\r\n        <form class=\"\" (submit)=\"submitBasicDetails()\" [formGroup]=\"courseBasicDetailsForm\">\r\n          <h6>Course Details:</h6>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-5\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input -course-name\">Course Name:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  nbInput\r\n                  id=\"input-course-name\"\r\n                  name=\"courseName\"\r\n                  formControlName=\"courseName\"\r\n                  placeholder=\"Course Name\"\r\n                  minlength=\"3\"\r\n                  maxlength=\"30\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    courseBasicDetailsForm.get('courseName').touched\r\n                      ? courseBasicDetailsForm.get('courseName').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                />\r\n\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    courseBasicDetailsForm.get('courseName').invalid &&\r\n                    courseBasicDetailsForm.get('courseName').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseBasicDetailsForm.get('courseName').errors?.required\"\r\n                  >\r\n                    Course Name is required!\r\n                  </p>\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseBasicDetailsForm.get('courseName').errors?.minlength\"\r\n                  >\r\n                    Course Name should contain minimum 3 characters\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-duration\">Course Duration:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  nbInput\r\n                  id=\"input-duration\"\r\n                  name=\"duration\"\r\n                  min=\"1\"\r\n                  maxlength=\"2\"\r\n                  formControlName=\"duration\"\r\n                  placeholder=\"Duration (in Months)\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    courseBasicDetailsForm.get('duration').touched\r\n                      ? courseBasicDetailsForm.get('duration').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    courseBasicDetailsForm.get('duration').invalid &&\r\n                    courseBasicDetailsForm.get('duration').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseBasicDetailsForm.get('duration').errors?.required\"\r\n                  >\r\n                    Course Duration is required!\r\n                  </p>\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseBasicDetailsForm.get('duration').errors?.min\"\r\n                  >\r\n                    Course Duration should be greater than 1\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-billing-category\">Category:</label>\r\n                <nb-select\r\n                  id=\"input-category\"\r\n                  name=\"category\"\r\n                  formControlName=\"category\"\r\n                  placeholder=\"Select Category\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    courseBasicDetailsForm.get('category').touched\r\n                      ? courseBasicDetailsForm.get('category').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                >\r\n                  <nb-option value=\"\">Select Category</nb-option>\r\n                  <nb-option *ngFor=\"let category of categories\" [value]=\"category._id\">{{\r\n                    category.category\r\n                  }}</nb-option>\r\n                </nb-select>\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    courseBasicDetailsForm.get('category').invalid &&\r\n                    courseBasicDetailsForm.get('category').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseBasicDetailsForm.get('category').errors?.required\"\r\n                  >\r\n                    Branch Category is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-12\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-billing-description\">Description:</label>\r\n                <textarea\r\n                  type=\"text\"\r\n                  nbInput\r\n                  id=\"input-description\"\r\n                  name=\"description\"\r\n                  formControlName=\"description\"\r\n                  placeholder=\"Description (Optional)\"\r\n                  fullWidth\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12 text-right\">\r\n              <button nbButton size=\"small\" type=\"submit\">\r\n                <span>Next</span>\r\n                <nb-icon icon=\"arrow-ios-forward-outline\"></nb-icon>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </nb-step>\r\n\r\n      <nb-step [stepControl]=\"courseSubjectForm\" label=\"Subject Details\">\r\n        <form [formGroup]=\"courseSubjectForm\" (ngSubmit)=\"submitSubjects()\" class=\"step-container\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-9 col-sm-8\">\r\n              <p>Click on following button to add more Subjects</p>\r\n            </div>\r\n            <div class=\"col-md-3 col-sm-4 mb-3\">\r\n              <button type=\"button\" nbButton size=\"small\" fullWidth (click)=\"generateSubject()\">\r\n                Add Subject\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div\r\n              class=\"col-md-6\"\r\n              *ngFor=\"let subject of courseSubjectForm.get('subjects')['controls']; let i = index\"\r\n            >\r\n              <div class=\"form-control-group\" [formGroup]=\"subject\">\r\n                <label class=\"label\" for=\"input-subject-{{ i }}\">Subject {{ i + 1 }}:</label>\r\n                <nb-form-field>\r\n                  <input\r\n                    type=\"text\"\r\n                    nbInput\r\n                    id=\"input-subject-{{ i }}\"\r\n                    name=\"subject-{{ i }}\"\r\n                    formControlName=\"subject\"\r\n                    placeholder=\"Subject {{ i + 1 }}\"\r\n                    fullWidth\r\n                    [status]=\"\r\n                      subject.get('subject').touched\r\n                        ? subject.get('subject').invalid\r\n                          ? 'danger'\r\n                          : 'success'\r\n                        : 'basic'\r\n                    \"\r\n                  />\r\n                  <button\r\n                    nbSuffix\r\n                    nbButton\r\n                    size=\"small\"\r\n                    ghost\r\n                    (click)=\"deleteSubject()\"\r\n                    *ngIf=\"i !== 0\"\r\n                  >\r\n                    <nb-icon icon=\"minus-outline\" status=\"danger\"> </nb-icon>\r\n                  </button>\r\n                </nb-form-field>\r\n                <ng-container\r\n                  *ngIf=\"subject.get('subject').invalid && subject.get('subject').touched\"\r\n                >\r\n                  <p class=\"caption status-danger\" *ngIf=\"subject.get('subject').errors?.required\">\r\n                    Subject {{ i + 1 }} is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-6 text-left\">\r\n              <button class=\"\" nbButton size=\"small\" nbStepperPrevious>\r\n                <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\r\n                <span>prev</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6 text-right\">\r\n              <button nbButton size=\"small\" type=\"submit\">\r\n                <span>Next</span><nb-icon icon=\"arrow-ios-forward-outline\"></nb-icon>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </nb-step>\r\n\r\n      <nb-step [stepControl]=\"courseFeeDetailsForm\" label=\"Fee Details\">\r\n        <form\r\n          [formGroup]=\"courseFeeDetailsForm\"\r\n          (ngSubmit)=\"submitFeeDetails()\"\r\n          class=\"step-container\"\r\n        >\r\n          <div class=\"row\">\r\n            <div class=\"col-md-3\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-fees\">Fees:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  nbInput\r\n                  id=\"input-fees\"\r\n                  name=\"fees\"\r\n                  min=\"0\"\r\n                  formControlName=\"fees\"\r\n                  placeholder=\"fees\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    courseFeeDetailsForm.get('fees').touched\r\n                      ? courseFeeDetailsForm.get('fees').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                  (input)=\"calculateTotal()\"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    courseFeeDetailsForm.get('fees').invalid &&\r\n                    courseFeeDetailsForm.get('fees').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseFeeDetailsForm.get('fees').errors?.required\"\r\n                  >\r\n                    Fee is required!\r\n                  </p>\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseFeeDetailsForm.get('fees').errors?.min\"\r\n                  >\r\n                    Fee amount should be greater than 0\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n              <div class=\"form-control-group mt-4\">\r\n                <nb-checkbox\r\n                  id=\"input-inclusive-GST\"\r\n                  name=\"inclusiveGST\"\r\n                  [checked]=\"inclusiveGST\"\r\n                  (checkedChange)=\"inclusiveGSTChanged($event)\"\r\n                >\r\n                  Inclusive GST\r\n                </nb-checkbox>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-gst\">GST (in %):</label>\r\n                <input\r\n                  type=\"number\"\r\n                  nbInput\r\n                  id=\"input-gst\"\r\n                  name=\"gst\"\r\n                  min=\"0\"\r\n                  max=\"100\"\r\n                  maxlength=\"3\"\r\n                  formControlName=\"gst\"\r\n                  placeholder=\"GST (in %)\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    courseFeeDetailsForm.get('gst').touched &&\r\n                    courseFeeDetailsForm.get('gst').invalid\r\n                      ? 'danger'\r\n                      : 'basic'\r\n                  \"\r\n                  (input)=\"calculateTotal()\"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    courseFeeDetailsForm.get('gst').invalid &&\r\n                    courseFeeDetailsForm.get('gst').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseFeeDetailsForm.get('gst').errors?.required\"\r\n                  >\r\n                    GST is required!\r\n                  </p>\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"\r\n                      courseFeeDetailsForm.get('gst').errors?.max ||\r\n                      courseFeeDetailsForm.get('gst').errors?.maxLength ||\r\n                      courseFeeDetailsForm.get('gst').errors?.min\r\n                    \"\r\n                  >\r\n                    GST percentage should be between 0% to 100%\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-total-fees\">Total Fees:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  nbInput\r\n                  id=\"input-total-fees\"\r\n                  name=\"totalFees\"\r\n                  formControlName=\"totalFees\"\r\n                  placeholder=\"Total Fees\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    courseFeeDetailsForm.get('totalFees').touched &&\r\n                    courseFeeDetailsForm.get('totalFees').invalid\r\n                      ? 'danger'\r\n                      : 'basic'\r\n                  \"\r\n                  disabled=\"true\"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    courseFeeDetailsForm.get('totalFees').invalid &&\r\n                    courseFeeDetailsForm.get('totalFees').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"courseFeeDetailsForm.get('totalFees').errors?.required\"\r\n                  >\r\n                    Total Fee is required, Please enter Fee Amount\r\n                  </p>\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"\r\n                      courseFeeDetailsForm.get('totalFees').errors?.min ||\r\n                      courseFeeDetailsForm.get('totalFees').errors?.minLength\r\n                    \"\r\n                  >\r\n                    Total Fee amount should be greater than 0\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-6 text-left\">\r\n              <button class=\"\" nbButton size=\"small\" nbStepperPrevious>\r\n                <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\r\n                <span>prev</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6 text-right\">\r\n              <button nbButton size=\"small\" type=\"submit\">\r\n                <span>Next</span>\r\n                <span>\r\n                  <nb-icon icon=\"arrow-ios-forward-outline\"></nb-icon>\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </nb-step>\r\n\r\n      <nb-step label=\"Submit\">\r\n        <div class=\"step-container\">\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table table-bordered\">\r\n              <tbody>\r\n                <tr>\r\n                  <th>Course Name</th>\r\n                  <td>{{ courseBasicDetailsForm.value.courseName }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Course Duration</th>\r\n                  <td>{{ courseBasicDetailsForm.value.duration }} Month/s</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Category</th>\r\n                  <td>{{ getCategory(courseBasicDetailsForm.value.category) }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Description</th>\r\n                  <td>\r\n                    {{\r\n                      courseBasicDetailsForm.value.description\r\n                        ? courseBasicDetailsForm.value.description\r\n                        : '--'\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Subjects</th>\r\n                  <td>{{ getSubjectsData() }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Fees</th>\r\n                  <td>{{ courseFeeDetailsForm.value.fees }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>GST (in %)</th>\r\n                  <td>{{ courseFeeDetailsForm.value.gst }} %</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>GST Amount</th>\r\n                  <td>\r\n                    {{ inclusiveGST ? getGstAmount() + ' Included in Fee Amount' : getGstAmount() }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Total Fees</th>\r\n                  <td>{{ courseFeeDetailsForm.value.totalFees }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-6 text-left\">\r\n              <button class=\"\" nbButton size=\"small\" nbStepperPrevious [disabled]=\"submit\">\r\n                <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\r\n                <span>prev</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6 text-right\">\r\n              <button\r\n                nbButton\r\n                size=\"small\"\r\n                (click)=\"saveCourse()\"\r\n                [disabled]=\"submit\"\r\n                [nbSpinner]=\"submit\"\r\n                nbSpinnerStatus=\"primary\"\r\n                nbSpinnerSize=\"small\"\r\n              >\r\n                <span>Submit</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nb-step>\r\n    </nb-stepper>\r\n  </nb-card-body>\r\n</nb-card>\r\n","import { AddCourseComponent } from './add-course.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: AddCourseComponent },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddCourseRoutingModule {}\n","import { CourseModel, SubjectModel } from './../../../../../models/course.model';\r\nimport { FormGroup, Validators, FormControl, FormArray } from '@angular/forms';\r\nimport { NbToastrService, NbStepperComponent } from '@nebular/theme';\r\nimport { CourseService } from './../../../../../services/course.service';\r\nimport { CategoryModel, BranchModel } from './../../../../../models/branch.model';\r\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport { BranchService } from './../../../../../services/branch.service';\r\n\r\nimport { ObjectId } from 'bson';\r\n\r\n@Component({\r\n  selector: 'ngx-add-course',\r\n  templateUrl: './add-course.component.html',\r\n  styleUrls: ['./add-course.component.scss'],\r\n})\r\nexport class AddCourseComponent implements OnInit, OnDestroy {\r\n  @ViewChild('stepper', { static: false }) stepper: NbStepperComponent;\r\n\r\n  loading: boolean;\r\n  submit: boolean;\r\n\r\n  private branchId: string;\r\n  private courseId: string;\r\n  course: CourseModel;\r\n  categories: CategoryModel[];\r\n  courseBasicDetailsForm: FormGroup;\r\n  courseFeeDetailsForm: FormGroup;\r\n  courseSubjectForm: FormGroup;\r\n\r\n  inclusiveGST: boolean;\r\n\r\n  constructor(\r\n    private branchService: BranchService,\r\n    private courseService: CourseService,\r\n    private toastrService: NbToastrService,\r\n\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) {\r\n    this.route.queryParams.subscribe((param: Params) => {\r\n      if (param.mode) {\r\n        this.ngOnInit();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true;\r\n    this.submit = false;\r\n\r\n    this.branchId = this.branchService.getBranchId();\r\n    if (!this.branchId) {\r\n      this.back();\r\n\r\n      return;\r\n    }\r\n\r\n    this.courseId = this.courseService.getCourseId();\r\n\r\n    let mode: string;\r\n\r\n    this.route.queryParams.subscribe((param: Params) => {\r\n      mode = param.mode;\r\n    });\r\n\r\n    if (mode && mode !== 'edit') {\r\n      this.showToastr('top-right', 'danger', 'Invalid Route');\r\n      this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n      return;\r\n    } else if (mode && !this.courseId) {\r\n      this.showToastr('top-right', 'danger', 'Course Not Available');\r\n      this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n      return;\r\n    }\r\n\r\n    this.courseBasicDetailsForm = new FormGroup({\r\n      courseName: new FormControl(null, {\r\n        validators: [Validators.required],\r\n      }),\r\n      duration: new FormControl(null, {\r\n        validators: [\r\n          Validators.required,\r\n          Validators.maxLength(2),\r\n          Validators.min(1),\r\n          Validators.max(99),\r\n        ],\r\n      }),\r\n      category: new FormControl('', {\r\n        validators: [Validators.required],\r\n      }),\r\n      description: new FormControl(null, {\r\n        validators: [],\r\n      }),\r\n    });\r\n\r\n    this.courseSubjectForm = new FormGroup(\r\n      {\r\n        subjects: new FormArray([]),\r\n      },\r\n      { validators: this.atLeastOneSubjectValidator.bind(this) },\r\n    );\r\n\r\n    this.courseFeeDetailsForm = new FormGroup({\r\n      fees: new FormControl(null, {\r\n        validators: [Validators.required, Validators.min(0)],\r\n      }),\r\n      gst: new FormControl('0', {\r\n        validators: [\r\n          Validators.required,\r\n          Validators.maxLength(3),\r\n          Validators.min(0),\r\n          Validators.max(100),\r\n        ],\r\n      }),\r\n      totalFees: new FormControl(null, {\r\n        validators: [Validators.required],\r\n      }),\r\n    });\r\n\r\n    this.getCategories();\r\n\r\n    this.inclusiveGST = false;\r\n\r\n    if (this.courseId) {\r\n      this.courseService.getCourseForEditing(this.courseId).subscribe(\r\n        (course: CourseModel) => {\r\n          if (!course) {\r\n            this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n            return;\r\n          }\r\n          this.course = course;\r\n          this.courseBasicDetailsForm.patchValue({\r\n            courseName: course.basicDetails.courseName,\r\n            duration: course.basicDetails.duration,\r\n            category: course.basicDetails.category,\r\n            description: course.basicDetails.description,\r\n          });\r\n\r\n          this.courseFeeDetailsForm.patchValue({\r\n            fees: course.feeDetails.fees,\r\n            gst: course.feeDetails.gst,\r\n          });\r\n\r\n          this.inclusiveGST = course.feeDetails.inclusiveGST;\r\n          this.calculateTotal();\r\n\r\n          const subjects = this.getSubjects();\r\n          subjects.controls = [];\r\n          this.course.subjects.forEach((subject) => {\r\n            this.addSubject(subject);\r\n          });\r\n          this.loading = false;\r\n        },\r\n        (err: any) => {\r\n          this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n          return;\r\n        },\r\n      );\r\n    } else {\r\n      this.generateSubject();\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  private getCategories() {\r\n    this.branchService.getBranchData().subscribe((branch: BranchModel) => {\r\n      if (branch) {\r\n        this.categories = branch.categories;\r\n      }\r\n    });\r\n\r\n    if (!this.categories) {\r\n      this.branchService.getBranch(this.branchId).subscribe(\r\n        (branch: BranchModel) => {\r\n          this.branchService.setBranchData(branch);\r\n          this.categories = branch.categories;\r\n        },\r\n        (error: any) => {\r\n          this.showToastr('top-right', 'danger', error);\r\n          this.loading = false;\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  private atLeastOneSubjectValidator(group: FormGroup): { [s: string]: boolean } {\r\n    const subjects = group.value.subjects;\r\n    let status = false;\r\n    subjects.forEach((subject: any) => {\r\n      if (subject.status) {\r\n        status = true;\r\n      }\r\n    });\r\n\r\n    if (!status) {\r\n      return { atLeastOneSubjectError: true };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getSubjects() {\r\n    return this.courseSubjectForm.get('subjects') as FormArray;\r\n  }\r\n\r\n  private newSubject(subjectData: any) {\r\n    return new FormGroup({\r\n      _id: new FormControl(subjectData._id ? subjectData._id : new ObjectId().toString(), {\r\n        validators: [Validators.required],\r\n      }),\r\n      subject: new FormControl(subjectData.subject ? subjectData.subject : null, {\r\n        validators: [Validators.required],\r\n      }),\r\n      status: new FormControl(subjectData.status, {\r\n        validators: [],\r\n      }),\r\n    });\r\n  }\r\n\r\n  private addSubject(subject: any) {\r\n    const subjects = this.getSubjects();\r\n    subjects.push(this.newSubject(subject));\r\n  }\r\n\r\n  generateSubject() {\r\n    const subject = {\r\n      _id: new ObjectId().toString(),\r\n      subject: '',\r\n      status: true,\r\n    };\r\n    this.addSubject(subject);\r\n  }\r\n\r\n  deleteSubject(i: number) {\r\n    if (i !== 0 && i !== 1) {\r\n      const subjects = this.getSubjects();\r\n      subjects.removeAt(i);\r\n    }\r\n  }\r\n\r\n  inclusiveGSTChanged(inclusiveGST: boolean) {\r\n    this.inclusiveGST = inclusiveGST;\r\n    this.calculateTotal();\r\n  }\r\n\r\n  calculateTotal() {\r\n    const inclusiveGST = this.inclusiveGST;\r\n    const fee = this.courseFeeDetailsForm.value.fees;\r\n    const gst = this.courseFeeDetailsForm.value.gst;\r\n\r\n    if (inclusiveGST) {\r\n      this.courseFeeDetailsForm.patchValue({ totalFees: fee });\r\n      return;\r\n    }\r\n    const gstValue = (+fee / 100) * +gst;\r\n    const totalFees = (+fee + gstValue).toString();\r\n    this.courseFeeDetailsForm.patchValue({ totalFees });\r\n  }\r\n\r\n  submitBasicDetails() {\r\n    this.courseBasicDetailsForm.markAllAsTouched();\r\n    if (this.courseBasicDetailsForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'Basic details are required');\r\n      return;\r\n    }\r\n    this.stepper.next();\r\n  }\r\n\r\n  submitSubjects() {\r\n    this.courseSubjectForm.markAllAsTouched();\r\n    if (this.courseSubjectForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'At least 1 Subject is required');\r\n      return;\r\n    }\r\n    this.stepper.next();\r\n  }\r\n\r\n  submitFeeDetails() {\r\n    this.courseFeeDetailsForm.markAllAsTouched();\r\n    if (this.courseFeeDetailsForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'Fee details are required');\r\n\r\n      return;\r\n    }\r\n    this.stepper.next();\r\n  }\r\n\r\n  saveCourse() {\r\n    this.courseBasicDetailsForm.markAllAsTouched();\r\n    this.courseSubjectForm.markAllAsTouched();\r\n    this.courseFeeDetailsForm.markAllAsTouched();\r\n\r\n    if (this.courseBasicDetailsForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'Basic details are required');\r\n      return;\r\n    } else if (this.courseSubjectForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'At least 1 Subject is required');\r\n\r\n      return;\r\n    } else if (this.courseFeeDetailsForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'Fee Details are required');\r\n      return;\r\n    }\r\n    this.submit = true;\r\n\r\n    const course: any = {\r\n      branch: this.branchId,\r\n      basicDetails: this.courseBasicDetailsForm.value,\r\n      subjects: this.courseSubjectForm.value.subjects,\r\n      feeDetails: this.courseFeeDetailsForm.value,\r\n    };\r\n    course.feeDetails.inclusiveGST = this.inclusiveGST;\r\n    if (!this.course) {\r\n      this.courseService.addCourse(course).subscribe(\r\n        (res: any) => {\r\n          this.showToastr('top-right', 'success', 'New Course Added Successfully!');\r\n          this.back();\r\n        },\r\n        (error: any) => {\r\n          this.showToastr('top-right', 'danger', error);\r\n          this.submit = false;\r\n        },\r\n      );\r\n    } else {\r\n      course._id = this.course._id;\r\n\r\n      this.courseService.editCourse(course).subscribe(\r\n        (res: any) => {\r\n          this.showToastr('top-right', 'success', 'Course Updated Successfully!');\r\n          this.back();\r\n        },\r\n        (error: any) => {\r\n          this.showToastr('top-right', 'danger', error);\r\n          this.submit = false;\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  private showToastr(position: any, status: any, message: string) {\r\n    this.toastrService.show(status, message, {\r\n      position,\r\n      status,\r\n    });\r\n  }\r\n\r\n  getGstAmount() {\r\n    const totalFees = this.courseFeeDetailsForm.getRawValue().totalFees;\r\n    const gstPercentage = this.courseFeeDetailsForm.value.gst;\r\n    const amount = totalFees / (1 + gstPercentage / 100);\r\n    const gstAmount = totalFees - amount;\r\n    return Math.round(gstAmount).toString();\r\n  }\r\n\r\n  getCategory(categoryId: string) {\r\n    const category = this.categories.find(\r\n      (curCategory: CategoryModel) => curCategory._id === categoryId,\r\n    );\r\n\r\n    if (category) {\r\n      return category.category;\r\n    }\r\n\r\n    return '--';\r\n  }\r\n\r\n  getSubjectsData() {\r\n    const subjects: string[] = [];\r\n    this.courseSubjectForm.value.subjects.forEach((subject: SubjectModel) => {\r\n      subjects.push(subject.subject);\r\n    });\r\n\r\n    return subjects.join(', ');\r\n  }\r\n\r\n  back() {\r\n    this.router.navigate(['../'], { relativeTo: this.route, replaceUrl: true });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.courseService.deleteCourseId();\r\n  }\r\n}\r\n","import { AddCourseComponent } from './add-course.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AddCourseRoutingModule } from './add-course-routing.module';\n\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  NbCardModule,\n  NbButtonModule,\n  NbSelectModule,\n  NbIconModule,\n  NbInputModule,\n  NbFormFieldModule,\n  NbCheckboxModule,\n  NbSpinnerModule,\n  NbStepperModule,\n} from '@nebular/theme';\n\n@NgModule({\n  declarations: [AddCourseComponent],\n  imports: [\n    CommonModule,\n    AddCourseRoutingModule,\n\n    NbCardModule,\n    NbButtonModule,\n    NbSelectModule,\n    NbIconModule,\n    NbInputModule,\n    NbFormFieldModule,\n    NbCheckboxModule,\n    NbSpinnerModule,\n    NbStepperModule,\n    NbFormFieldModule,\n\n    ReactiveFormsModule,\n  ],\n})\nexport class AddCourseModule {}\n"]}