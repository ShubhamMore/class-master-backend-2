(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{cb2t:function(e,t,n){"use strict";n.r(t);var s=n("a7gc"),r=n("aceb"),i=n("ofXK"),o=n("2SwW"),a=n("7kqb"),c=n("EQut"),l=n("K8P5"),u=n("3Pt+"),d=n("fXoL");function h(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",15),d["\u0275\u0275text"](1," Answer is required! "),d["\u0275\u0275elementEnd"]())}function m(e,t){if(1&e&&(d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275template"](1,h,2,0,"p",14),d["\u0275\u0275elementContainerEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",null==e.answerForm.get("answer").errors?null:e.answerForm.get("answer").errors.required)}}function w(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"form",3),d["\u0275\u0275listener"]("submit",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().saveLectureQuestionAnswer()})),d["\u0275\u0275elementStart"](1,"div",4),d["\u0275\u0275elementStart"](2,"div",5),d["\u0275\u0275elementStart"](3,"div",6),d["\u0275\u0275elementStart"](4,"label",7),d["\u0275\u0275text"](5,"Answer:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](6,"textarea",8),d["\u0275\u0275template"](7,m,2,1,"ng-container",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](8,"hr"),d["\u0275\u0275elementStart"](9,"div",4),d["\u0275\u0275elementStart"](10,"div",10),d["\u0275\u0275elementStart"](11,"button",11),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onClose()})),d["\u0275\u0275text"](12," Cancel "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"div",12),d["\u0275\u0275elementStart"](14,"button",13),d["\u0275\u0275text"](15,"Save"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("formGroup",e.answerForm),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("status",e.answerForm.get("answer").touched?e.answerForm.get("answer").invalid?"danger":"success":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.answerForm.get("answer").invalid&&e.answerForm.get("answer").touched)}}let g=(()=>{class e{constructor(e,t,n,s,r){this.toastrService=e,this.branchService=t,this.lectureService=n,this.questionAnswersService=s,this.ref=r}ngOnInit(){this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.answerForm=new u.f({answer:new u.d(this.lectureQuestionAnswer?this.lectureQuestionAnswer.answer:null,{validators:[u.u.required]})}),this.questionAnswersService.getQuestion().subscribe(e=>{this.lectureQuestion=e}),this.questionAnswersService.getQuestionAnswer().subscribe(e=>{this.lectureQuestionAnswer=e,e&&this.answerForm.patchValue({answer:this.lectureQuestionAnswer.answer})}),this.lectureService.getLectureData().subscribe(e=>{this.lecture=e,this.lecture?this.loading=!1:this.onClose()})):this.onClose()}onClose(){this.ref.close()}saveLectureQuestionAnswer(){if(this.answerForm.markAllAsTouched(),this.answerForm.invalid)return void this.showToastr("top-right","danger","Answer is Required");const e=this.answerForm.value.answer,t={branch:this.branchId,category:this.lecture.category,course:this.lecture.course,batch:this.lecture.batch,lecture:this.lecture._id,question:this.lectureQuestion._id,answer:e};this.lectureQuestionAnswer?(t._id=this.lectureQuestionAnswer._id,this.questionAnswersService.editLectureQuestionAnswer(t).subscribe(t=>{this.lectureQuestionAnswer.answer=e,this.showToastr("top-right","success","Answer Updated Successfully!"),this.ref.close(this.lectureQuestionAnswer)},e=>{this.showToastr("top-right","danger",e),this.loading=!1})):this.questionAnswersService.newLectureQuestionAnswer(t).subscribe(e=>{this.showToastr("top-right","success","New Answer Added Successfully!"),this.ref.close(e)},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}ngOnDestroy(){this.questionAnswersService.deleteQuestionAnswerId(),this.questionAnswersService.deleteQuestionAnswer()}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](r.Db),d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](a.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](r.I))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-answer"]],decls:7,vars:2,consts:[[1,"answer-box"],["icon","close-outline",1,"float-right","pointer",3,"click"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"row"],[1,"col-12"],[1,"form-control-group"],["for","input-answer",1,"label"],["type","text","nbInput","","id","input-answer","name","answer","formControlName","answer","placeholder","Answer","fullWidth","",3,"status"],[4,"ngIf"],[1,"col-6"],["type","button","nbButton","","size","small","status","danger",3,"click"],[1,"col-6","text-right"],["type","submit","nbButton","","size","small","status","success"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"nb-icon",1),d["\u0275\u0275listener"]("click",(function(){return t.onClose()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"h3"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"nb-card-body"),d["\u0275\u0275template"](6,w,16,3,"form",2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate1"]("",t.lectureQuestionAnswer?"Edit":"New"," Answer"),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",!t.loading))},directives:[r.x,r.z,r.M,r.w,i.n,u.v,u.n,u.g,r.P,u.a,u.m,u.e,r.u],styles:[".answer-box[_ngcontent-%COMP%]{width:60vw;height:auto}@media only screen and (max-width:1200px){.answer-box[_ngcontent-%COMP%]{width:65vw}}@media only screen and (max-width:840px){.answer-box[_ngcontent-%COMP%]{width:70vw}}@media only screen and (max-width:420px){.answer-box[_ngcontent-%COMP%]{width:90vw}}@media only screen and (max-width:300px){.answer-box[_ngcontent-%COMP%]{width:96vw}}"]}),e})();var p=n("ZatZ"),v=n("nwtg"),b=n("tyNb");function f(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",15),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"](2);return t.editQuestion(t.lectureQuestion)})),d["\u0275\u0275text"](1," Edit "),d["\u0275\u0275elementEnd"]()}}function S(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",16),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"](2);return t.deleteQuestion(t.lectureQuestion._id)})),d["\u0275\u0275text"](1," Delete "),d["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",15),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"](3).editQuestionAnswer(t)})),d["\u0275\u0275text"](1," Edit "),d["\u0275\u0275elementEnd"]()}}function Q(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",16),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"](3).deleteQuestionAnswer(t._id)})),d["\u0275\u0275text"](1," Delete "),d["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"div",6),d["\u0275\u0275element"](4,"nb-user",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"div",8),d["\u0275\u0275template"](6,A,2,0,"button",10),d["\u0275\u0275template"](7,Q,2,0,"button",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"nb-card-body"),d["\u0275\u0275element"](9,"div",12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=d["\u0275\u0275nextContext"](3);d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("name",e.name?e.name:"Unknown")("title",n.formatQuestionAnswerDate(e.createdAt)),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",e.createdBy===n.user.imsMasterId),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.createdBy===n.user.imsMasterId),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("innerHTML",e.answer,d["\u0275\u0275sanitizeHtml"])}}function E(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275element"](1,"div",17),d["\u0275\u0275elementStart"](2,"div",18),d["\u0275\u0275template"](3,x,10,5,"nb-card",19),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngForOf",e.lectureQuestion.answers)}}function I(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",20),d["\u0275\u0275text"](1," You are first to Answer this Question.. "),d["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"div",0),d["\u0275\u0275elementStart"](2,"div",1),d["\u0275\u0275elementStart"](3,"nb-card"),d["\u0275\u0275elementStart"](4,"nb-card-header"),d["\u0275\u0275elementStart"](5,"div",0),d["\u0275\u0275elementStart"](6,"div",6),d["\u0275\u0275element"](7,"nb-user",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"div",8),d["\u0275\u0275elementStart"](9,"button",9),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().addQuestionAnswer()})),d["\u0275\u0275text"](10," Answer "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](11,f,2,0,"button",10),d["\u0275\u0275template"](12,S,2,0,"button",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"nb-card-body"),d["\u0275\u0275element"](14,"div",12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](15,E,4,1,"div",13),d["\u0275\u0275template"](16,I,2,0,"ng-template",null,14,d["\u0275\u0275templateRefExtractor"]),d["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=d["\u0275\u0275reference"](17),t=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("name",t.lectureQuestion.name?t.lectureQuestion.name:"Unknown")("title",t.formatQuestionAnswerDate(t.lectureQuestion.createdAt)),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",t.lectureQuestion.createdBy===t.user.imsMasterId),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.lectureQuestion.createdBy===t.user.imsMasterId),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("innerHTML",t.lectureQuestion.question,d["\u0275\u0275sanitizeHtml"]),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.lectureQuestion.answers.length>0)("ngIfElse",e)}}function C(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",21),d["\u0275\u0275text"](1,"Loading..."),d["\u0275\u0275elementEnd"]())}const k=[{path:"",component:(()=>{class e{constructor(e,t,n,s,r,i,o,a,c){this.authService=e,this.toastrService=t,this.branchService=n,this.lectureService=s,this.questionAnswersService=r,this.dateService=i,this.router=o,this.route=a,this.dialogService=c}ngOnInit(){if(this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId){if(this.editLectureQuestionAnswer=!1,this.user=this.authService.getUserData(),this.questionAnswersService.getQuestionAnswers().subscribe(e=>{this.lectureQuestion=e}),this.lectureService.getLectureData().subscribe(e=>{this.lecture=e,this.lecture||this.back()}),this.getLectureQuestionAnswers(this.lectureQuestion._id),this.lectureQuestion){const e=this.questionAnswersService.getQuestionAnswersId();e?this.getLectureQuestionAnswers(e):(this.showToastr("top-right","danger","Question Not Found"),this.back())}}else this.router.navigate(["../"],{relativeTo:this.route})}getLectureQuestionAnswers(e){this.questionAnswersService.getLectureQuestionAnswer(e).subscribe(e=>{this.lectureQuestion=e,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.back()})}addQuestionAnswer(){this.openAnswerDialog()}openAnswerDialog(){this.dialogService.open(g,{context:{}}).onClose.subscribe(e=>e&&this.saveLectureQuestionAnswer(e))}editQuestion(e){this.questionAnswersService.setQuestionId(e._id),this.questionAnswersService.setQuestion(e),this.dialogService.open(o.a,{context:{}}).onClose.subscribe(e=>{e&&(this.lectureQuestion=e)})}formatQuestionAnswerDate(e){return this.dateService.convertToDate(e).toString().substr(0,21)}deleteQuestion(e){this.loading=!0,this.questionAnswersService.deleteLectureQuestion(e).subscribe(e=>{this.back(),this.showToastr("top-right","success","Question Deleted Successfully!")},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}deleteQuestionAnswer(e,t){this.questionAnswersService.deleteLectureQuestionAnswer(e).subscribe(e=>{this.lectureQuestion.answers.splice(t,1),this.showToastr("top-right","success","Answer Deleted Successfully!")},e=>{this.showToastr("top-right","danger",e)})}editQuestionAnswer(e){e?(this.questionAnswersService.setQuestionAnswerId(e._id),this.questionAnswersService.setQuestionAnswer(e),this.editLectureQuestionAnswer=!0,this.openAnswerDialog()):this.showToastr("top-right","danger","Can't Edit this Answer")}saveLectureQuestionAnswer(e){if(this.editLectureQuestionAnswer){const t=this.lectureQuestion.answers.findIndex(t=>t._id===e._id);t>=0&&(this.lectureQuestion.answers[t]=e),this.editLectureQuestionAnswer=!1}else e.name=this.user.name,this.lectureQuestion.answers.push(e)}back(){this.router.navigate(["../"],{relativeTo:this.route})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}ngOnDestroy(){this.questionAnswersService.deleteQuestionAnswersId(),this.questionAnswersService.deleteQuestionAnswers()}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](v.a),d["\u0275\u0275directiveInject"](r.Db),d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](a.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](b.c),d["\u0275\u0275directiveInject"](b.a),d["\u0275\u0275directiveInject"](r.J))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-view-question-answers"]],decls:12,vars:2,consts:[[1,"row"],[1,"col-md-12"],["nbButton","","status","warning","size","tiny",1,"float-right",3,"click"],[1,"body-container"],[4,"ngIf","ngIfElse"],["loadingData",""],[1,"col-md-6","col-12"],[3,"name","title"],[1,"col-md-6","col-12","text-right"],["nbButton","","size","small","status","success",1,"mr-3",3,"click"],["class","mr-3","nbButton","","size","small","status","basic",3,"click",4,"ngIf"],["class","mr-3","nbButton","","size","small","status","danger",3,"click",4,"ngIf"],[3,"innerHTML"],["class","row",4,"ngIf","ngIfElse"],["noAnswers",""],["nbButton","","size","small","status","basic",1,"mr-3",3,"click"],["nbButton","","size","small","status","danger",1,"mr-3",3,"click"],[1,"col-1"],[1,"col-11"],[4,"ngFor","ngForOf"],[1,"pt-5","pb-5","text-center"],[1,"text-center","pt-5","pb-5"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"div",1),d["\u0275\u0275elementStart"](4,"button",2),d["\u0275\u0275listener"]("click",(function(){return t.back()})),d["\u0275\u0275text"](5," Back "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"h3"),d["\u0275\u0275text"](7,"Question & Answers"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"nb-card-body",3),d["\u0275\u0275template"](9,y,18,7,"ng-container",4),d["\u0275\u0275template"](10,C,2,0,"ng-template",null,5,d["\u0275\u0275templateRefExtractor"]),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275reference"](11);d["\u0275\u0275advance"](9),d["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",e)}},directives:[r.x,r.z,r.u,r.w,i.n,r.Hb,i.m],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found"}];let q=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[b.g.forChild(k)],b.g]}),e})();n.d(t,"ViewQuestionAnswersModule",(function(){return L}));let L=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,q,s.a,r.A,r.v,r.O,r.Ib]]}),e})()}}]);