{"version":3,"sources":["webpack:///src/app/institute/branch/lecture/study-material/manage-study-material/manage-study-material.component.html","webpack:///src/app/institute/branch/lecture/study-material/manage-study-material/manage-study-material-routing.module.ts","webpack:///src/app/institute/branch/lecture/study-material/manage-study-material/manage-study-material.component.ts","webpack:///src/app/institute/branch/lecture/study-material/manage-study-material/manage-study-material.module.ts"],"names":["ManageStudyMaterialComponent","ManageStudyMaterialModule","ManageStudyMaterialRoutingModule","routes","path","component","branchService","lectureService","lectureMaterialService","toastrService","router","route","this","loading","branchId","getBranchId","subject","lectureMaterials","getLectureData","subscribe","lecture","getLectureMaterials","back","category","course","batch","_id","err","navigate","relativeTo","id","i","deleteLectureMaterial","res","splice","showToastr","lectureMaterial","setLectureMaterialId","setLectureMaterialData","subjectId","subjects","find","curSubject","status","changeLectureMaterialStatus","position","message","show","addLectureMaterial","loadChildren","then","m","PageNotFoundModule","redirectTo","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-9 col-sm-8\">\n        <h3>\n          Lecture Material\n        </h3>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <button nbButton size=\"small\" status=\"primary\" fullWidth (click)=\"addLectureMaterial()\">\n          Add Lecture Material <nb-icon icon=\"plus-circle-outline\"></nb-icon>\n        </button>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body class=\"body-container\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <ng-container *ngIf=\"!loading; else loadingData\">\n          <div\n            class=\"table-responsive\"\n            *ngIf=\"lectureMaterials.length > 0; else noLectureMaterials\"\n          >\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Title</th>\n                  <th colspan=\"3\">Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let lectureMaterial of lectureMaterials; let i = index\">\n                  <td>{{ i + 1 }}</td>\n                  <td>{{ lectureMaterial.title }}</td>\n\n                  <td>\n                    <button\n                      nbButton\n                      size=\"small\"\n                      status=\"info\"\n                      (click)=\"viewLectureMaterial(lectureMaterial)\"\n                    >\n                      View\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      nbButton\n                      size=\"small\"\n                      [status]=\"!lectureMaterial.status ? 'warning' : 'danger'\"\n                      (click)=\"\n                        changeLectureMaterialStatus(lectureMaterial._id, !lectureMaterial.status, i)\n                      \"\n                    >\n                      {{ !lectureMaterial.status ? 'Activate' : 'Deactivate' }}\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      nbButton\n                      size=\"small\"\n                      status=\"danger\"\n                      (click)=\"deleteLectureMaterial(lectureMaterial._id)\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <ng-template #noLectureMaterials>\n            <p class=\"text-center pt-5 pb-5\">No Lecture Material Available</p>\n          </ng-template>\n        </ng-container>\n        <ng-template #loadingData>\n          <p class=\"text-center pt-5 pb-5\">Loading...</p>\n        </ng-template>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { ManageStudyMaterialComponent } from './manage-study-material.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManageStudyMaterialComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManageStudyMaterialRoutingModule {}\n","import { BatchModel } from './../../../../../models/batch.model';\nimport { SubjectModel, CourseModel } from './../../../../../models/course.model';\nimport { LectureMaterialModel } from './../../../../../models/lecture-material.model';\nimport { Component, OnInit } from '@angular/core';\nimport { ScheduleModel as LectureModel } from './../../../../../models/schedule.model';\nimport { LectureService } from './../../../../../services/lecture.service';\nimport { LectureMaterialService } from './../../../../../services/lecture-material.service';\nimport { BranchService } from './../../../../../services/branch.service';\nimport { NbToastrService } from '@nebular/theme';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'ngx-manage-study-material',\n  templateUrl: './manage-study-material.component.html',\n  styleUrls: ['./manage-study-material.component.scss'],\n})\nexport class ManageStudyMaterialComponent implements OnInit {\n  loading: boolean;\n  branchId: string;\n  course: CourseModel;\n  batch: BatchModel;\n  lecture: LectureModel;\n  subject: string;\n  lectureMaterials: LectureMaterialModel[];\n\n  constructor(\n    private branchService: BranchService,\n    private lectureService: LectureService,\n    private lectureMaterialService: LectureMaterialService,\n    private toastrService: NbToastrService,\n\n    private router: Router,\n    private route: ActivatedRoute,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.back();\n\n      return;\n    }\n    this.subject = '';\n    this.lectureMaterials = [];\n    this.lectureService.getLectureData().subscribe((lecture: LectureModel) => {\n      this.lecture = lecture;\n      if (!this.lecture) {\n        this.back();\n        return;\n      }\n      this.getLectureMaterials(this.subject);\n    });\n  }\n\n  getLectureMaterials(subject: string) {\n    this.loading = true;\n    this.subject = subject;\n    this.lectureMaterialService\n      .getLectureMaterials(\n        this.branchId,\n        this.lecture.category,\n        this.lecture.course,\n        this.lecture.batch,\n        this.lecture._id,\n      )\n      .subscribe(\n        (lectureMaterials: LectureMaterialModel[]) => {\n          this.lectureMaterials = lectureMaterials;\n          this.loading = false;\n        },\n        (err: any) => {\n          this.loading = false;\n        },\n      );\n  }\n\n  addLectureMaterial() {\n    this.router.navigate(['../add'], { relativeTo: this.route });\n  }\n\n  deleteLectureMaterial(id: string, i: number) {\n    this.loading = true;\n    this.lectureMaterialService.deleteLectureMaterial(id).subscribe(\n      (res: any) => {\n        this.lectureMaterials.splice(i, 1);\n        this.showToastr('top-right', 'success', `LectureMaterial Deleted Successfully!`);\n        this.loading = false;\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n        this.loading = false;\n      },\n    );\n  }\n\n  viewLectureMaterial(lectureMaterial: LectureMaterialModel) {\n    this.lectureMaterialService.setLectureMaterialId(lectureMaterial._id);\n    this.lectureMaterialService.setLectureMaterialData(lectureMaterial);\n    this.router.navigate(['../view'], { relativeTo: this.route });\n  }\n\n  getSubject(subjectId: string) {\n    const subject = this.course.subjects.find(\n      (curSubject: SubjectModel) => curSubject._id === subjectId,\n    );\n\n    if (subject) {\n      return subject.subject;\n    }\n\n    return '--';\n  }\n\n  changeLectureMaterialStatus(id: string, status: boolean, i: number) {\n    this.loading = true;\n    this.lectureMaterialService.changeLectureMaterialStatus(id, status).subscribe(\n      (res: any) => {\n        this.lectureMaterials[i].status = status;\n        this.showToastr(\n          'top-right',\n          'success',\n          `LectureMaterial ${status ? 'Activated' : 'Deactivated'} Successfully!`,\n        );\n        this.loading = false;\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n        this.loading = false;\n      },\n    );\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route });\n  }\n\n  showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import { NbCardModule, NbButtonModule, NbIconModule, NbSelectModule } from '@nebular/theme';\nimport { ManageStudyMaterialComponent } from './manage-study-material.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ManageStudyMaterialRoutingModule } from './manage-study-material-routing.module';\n\n@NgModule({\n  declarations: [ManageStudyMaterialComponent],\n  imports: [\n    CommonModule,\n    ManageStudyMaterialRoutingModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbSelectModule,\n  ],\n})\nexport class ManageStudyMaterialModule {}\n"]}