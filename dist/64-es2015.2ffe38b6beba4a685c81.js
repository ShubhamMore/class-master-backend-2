(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{eXDF:function(r,e,o){"use strict";o.r(e);var s=o("AytR"),n=o("nwtg"),a=o("3Pt+"),t=o("fvxu"),i=o("5hth"),d=o("fXoL"),l=o("aceb"),c=o("ofXK");function u(r,e){if(1&r&&(d.Wb(0,"h3"),d.Cc(1),d.hc(2,"uppercase"),d.Wb(3,"small",26),d.Cc(4),d.hc(5,"uppercase"),d.Vb(),d.Vb()),2&r){const r=d.gc();d.Eb(1),d.Ec(" ",d.ic(2,2,r.profile.name)," "),d.Eb(3),d.Dc(d.ic(5,4,r.profile.imsMasterId))}}function m(r,e){if(1&r&&(d.Wb(0,"small",26),d.Wb(1,"em"),d.Cc(2),d.hc(3,"lowercase"),d.Vb(),d.Vb()),2&r){const r=d.gc();d.Eb(2),d.Dc(d.ic(3,1,r.profile.email))}}function h(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," User Name is required! "),d.Vb())}function b(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," User Name should contain minimum 5 characters "),d.Vb())}function p(r,e){if(1&r&&(d.Ub(0),d.Ac(1,h,2,0,"p",27),d.Ac(2,b,2,0,"p",27),d.Tb()),2&r){const r=d.gc();d.Eb(1),d.mc("ngIf",null==r.profileForm.get("name").errors?null:r.profileForm.get("name").errors.required),d.Eb(1),d.mc("ngIf",null==r.profileForm.get("name").errors?null:r.profileForm.get("name").errors.minlength)}}function g(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," User phone is required! "),d.Vb())}function f(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," User phone should be 10 digits "),d.Vb())}function w(r,e){if(1&r&&(d.Ub(0),d.Ac(1,g,2,0,"p",27),d.Ac(2,f,2,0,"p",27),d.Tb()),2&r){const r=d.gc();d.Eb(1),d.mc("ngIf",null==r.profileForm.get("phone").errors?null:r.profileForm.get("phone").errors.required),d.Eb(1),d.mc("ngIf",(null==r.profileForm.get("phone").errors?null:r.profileForm.get("phone").errors.minlength)||(null==r.profileForm.get("phone").errors?null:r.profileForm.get("phone").errors.maxlength)||(null==r.profileForm.get("phone").errors?null:r.profileForm.get("phone").errors.pattern)||(null==r.profileForm.get("phone").errors?null:r.profileForm.get("phone").errors.min)||(null==r.profileForm.get("phone").errors?null:r.profileForm.get("phone").errors.max))}}function P(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," User address is required! "),d.Vb())}function v(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," User address should be 10 characters "),d.Vb())}function F(r,e){if(1&r&&(d.Ub(0),d.Ac(1,P,2,0,"p",27),d.Ac(2,v,2,0,"p",27),d.Tb()),2&r){const r=d.gc();d.Eb(1),d.mc("ngIf",null==r.profileForm.get("address").errors?null:r.profileForm.get("address").errors.required),d.Eb(1),d.mc("ngIf",null==r.profileForm.get("address").errors?null:r.profileForm.get("address").errors.minlength)}}function W(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," Old Password is required! "),d.Vb())}function V(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," Old Password should contain minimum 7 characters "),d.Vb())}function C(r,e){if(1&r&&(d.Ub(0),d.Ac(1,W,2,0,"p",27),d.Ac(2,V,2,0,"p",27),d.Tb()),2&r){const r=d.gc();d.Eb(1),d.mc("ngIf",null==r.changePasswordForm.get("oldPassword").errors?null:r.changePasswordForm.get("oldPassword").errors.required),d.Eb(1),d.mc("ngIf",null==r.changePasswordForm.get("oldPassword").errors?null:r.changePasswordForm.get("oldPassword").errors.minlength)}}function E(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," Password is required! "),d.Vb())}function I(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," Password should contain minimum 7 characters "),d.Vb())}function y(r,e){if(1&r&&(d.Ub(0),d.Ac(1,E,2,0,"p",27),d.Ac(2,I,2,0,"p",27),d.Tb()),2&r){const r=d.gc();d.Eb(1),d.mc("ngIf",null==r.changePasswordForm.get("password").errors?null:r.changePasswordForm.get("password").errors.required),d.Eb(1),d.mc("ngIf",null==r.changePasswordForm.get("password").errors?null:r.changePasswordForm.get("password").errors.minlength)}}function A(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," Password confirmation is required! "),d.Vb())}function x(r,e){1&r&&(d.Wb(0,"p",28),d.Cc(1," Password does not match the confirm password. "),d.Vb())}function U(r,e){if(1&r&&(d.Ub(0),d.Ac(1,A,2,0,"p",27),d.Ac(2,x,2,0,"p",27),d.Tb()),2&r){const r=d.gc();d.Eb(1),d.mc("ngIf",null==r.changePasswordForm.get("confirmPassword").errors?null:r.changePasswordForm.get("confirmPassword").errors.required),d.Eb(1),d.mc("ngIf",r.changePasswordForm.get("password").value!=r.changePasswordForm.get("confirmPassword").value&&!r.changePasswordForm.hasError("invalidConfirmPassword"))}}let q=(()=>{class r{constructor(r,e,o,s){this.userService=r,this.toastrService=e,this.authService=o,this.encryptService=s}ngOnInit(){this.loading=!0,this.profileForm=new a.f({name:new a.d(null,{validators:[a.u.required,a.u.minLength(5)]}),phone:new a.d(null,{validators:[a.u.required,a.u.minLength(10),a.u.maxLength(10),a.u.min(1e9),a.u.max(9999999999)]}),address:new a.d(null,{validators:[a.u.required,a.u.minLength(10)]})}),this.changePasswordForm=new a.f({oldPassword:new a.d(null,{validators:[a.u.required,a.u.minLength(7),a.u.maxLength(20)]}),password:new a.d(null,{validators:[a.u.required,a.u.minLength(7),a.u.maxLength(20)]}),confirmPassword:new a.d(null,{validators:[a.u.required,a.u.minLength(7),a.u.maxLength(20)]})},{validators:this.passwordValidator.bind(this)}),this.getProfile()}passwordValidator(r){return r.value.password!==r.value.confirmPassword?{invalidConfirmPassword:!0}:null}getProfile(){this.userService.getProfile().subscribe(r=>{this.profile=r,this.profileForm.patchValue({name:this.profile.name,phone:this.profile.phone,address:this.profile.address}),this.loading=!1},r=>{this.loading=!1})}saveProfile(){this.profileForm.markAllAsTouched(),this.profileForm.invalid?this.showToastr("top-right","danger","Fill Profile Details Correctly"):(this.loading=!0,this.userService.saveProfile(this.profileForm.value).subscribe(r=>{this.showToastr("top-right","success","Profile updated Successfully!"),this.loading=!1},r=>{this.showToastr("top-right","danger",r),this.loading=!1}))}changePassword(){if(this.changePasswordForm.markAllAsTouched(),this.changePasswordForm.invalid)return void this.showToastr("top-right","danger","Fill change Password Data Correctly");if(this.changePasswordForm.hasError("invalidPassword"))return void this.showToastr("top-right","danger","New Password and Confirm Password Does Noy Match");this.loading=!0;const r={email:this.authService.getUserData().email,password:this.encryptService.encrypt(this.changePasswordForm.value.oldPassword,s.a.encKey),newPassword:this.encryptService.encrypt(this.changePasswordForm.value.password,s.a.encKey)};this.userService.changePassword(r).subscribe(r=>{this.changePasswordForm.reset(),this.showToastr("top-right","success","Password Changed Successfully!"),this.loading=!1},r=>{this.showToastr("top-right","danger",r),this.loading=!1})}showToastr(r,e,o){this.toastrService.show(e,o,{position:r,status:e})}}return r.\u0275fac=function(e){return new(e||r)(d.Qb(t.a),d.Qb(l.jb),d.Qb(n.a),d.Qb(i.a))},r.\u0275cmp=d.Kb({type:r,selectors:[["ngx-profile"]],decls:68,vars:16,consts:[[4,"ngIf"],[1,"row"],[1,"col-12"],["id","title",1,"title"],["class","float-right",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"sub-title"],[1,"col-md-6"],[1,"form-control-group"],["for","input-name",1,"label"],["type","text","nbInput","","id","input-name","name","name","formControlName","name","placeholder","User Name","minlength","5","maxlength","20","fullWidth","",3,"status"],["for","input-phone",1,"label"],["type","text","pattern","\\d*","nbInput","","id","input-phone","name","phone","formControlName","phone","placeholder","User phone","minlength","10","maxlength","10","min","1000000000","max","9999999999","fullWidth","",3,"status"],[1,"col-md-12"],["for","input-address",1,"label"],["type","text","nbInput","","id","input-address","name","address","formControlName","address","placeholder","User Address","rows","2","minlength","10","maxlength","150","fullWidth","",3,"status"],[1,"col-12","text-right"],["type","submit","nbButton","","status","primary"],[1,"col-md-4"],["for","input-old-password",1,"label"],["type","password","nbInput","","id","input-old-password","name","oldPassword","formControlName","oldPassword","placeholder","Old Password","minlength","7","maxlength","20","fullWidth","",3,"status"],["for","input-password",1,"label"],["type","password","nbInput","","id","input-password","name","password","formControlName","password","placeholder","Password","minlength","7","maxlength","20","fullWidth","",3,"status"],["for","input-re-password",1,"label"],["nbInput","","type","password","id","input-re-password","name","rePass","formControlName","confirmPassword","placeholder","Confirm Password","minlength","5","maxlength","30","fullWidth","",3,"status"],[1,"col-md-12","text-right"],[1,"float-right"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(r,e){1&r&&(d.Wb(0,"nb-card"),d.Wb(1,"nb-card-header"),d.Ac(2,u,6,6,"h3",0),d.Vb(),d.Wb(3,"nb-card-body"),d.Wb(4,"div",1),d.Wb(5,"div",2),d.Wb(6,"h4",3),d.Cc(7," User Profile "),d.Ac(8,m,4,3,"small",4),d.Vb(),d.Wb(9,"form",5),d.ec("ngSubmit",(function(){return e.saveProfile()})),d.Wb(10,"p",6),d.Cc(11,"Personal Details"),d.Vb(),d.Wb(12,"div",1),d.Wb(13,"div",7),d.Wb(14,"div",8),d.Wb(15,"label",9),d.Cc(16,"User Name:"),d.Vb(),d.Rb(17,"input",10),d.Ac(18,p,3,2,"ng-container",0),d.Vb(),d.Vb(),d.Wb(19,"div",7),d.Wb(20,"div",8),d.Wb(21,"label",11),d.Cc(22,"User phone:"),d.Vb(),d.Rb(23,"input",12),d.Ac(24,w,3,2,"ng-container",0),d.Vb(),d.Vb(),d.Wb(25,"div",13),d.Wb(26,"div",8),d.Wb(27,"label",14),d.Cc(28,"User Address:"),d.Vb(),d.Rb(29,"textarea",15),d.Ac(30,F,3,2,"ng-container",0),d.Vb(),d.Vb(),d.Vb(),d.Rb(31,"br"),d.Wb(32,"div",1),d.Wb(33,"div",16),d.Wb(34,"button",17),d.Cc(35,"Save Profile"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Rb(36,"hr"),d.Wb(37,"div",1),d.Wb(38,"div",13),d.Wb(39,"h4",3),d.Cc(40,"Change password"),d.Vb(),d.Wb(41,"p",6),d.Cc(42,"Please set a new password"),d.Vb(),d.Wb(43,"form",5),d.ec("ngSubmit",(function(){return e.changePassword()})),d.Wb(44,"div",1),d.Wb(45,"div",18),d.Wb(46,"div",8),d.Wb(47,"label",19),d.Cc(48,"Old Password:"),d.Vb(),d.Rb(49,"input",20),d.Ac(50,C,3,2,"ng-container",0),d.Vb(),d.Vb(),d.Wb(51,"div",18),d.Wb(52,"div",8),d.Wb(53,"label",21),d.Cc(54,"Password:"),d.Vb(),d.Rb(55,"input",22),d.Ac(56,y,3,2,"ng-container",0),d.Vb(),d.Vb(),d.Wb(57,"div",18),d.Wb(58,"div",8),d.Wb(59,"label",23),d.Cc(60,"Repeat password:"),d.Vb(),d.Rb(61,"input",24),d.Ac(62,U,3,2,"ng-container",0),d.Vb(),d.Vb(),d.Vb(),d.Rb(63,"br"),d.Wb(64,"div",1),d.Wb(65,"div",25),d.Wb(66,"button",17),d.Cc(67,"Change password"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&r&&(d.Eb(2),d.mc("ngIf",e.profile),d.Eb(6),d.mc("ngIf",e.profile),d.Eb(1),d.mc("formGroup",e.profileForm),d.Eb(8),d.mc("status",e.profileForm.get("name").touched?e.profileForm.get("name").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",e.profileForm.get("name").invalid&&e.profileForm.get("name").touched),d.Eb(5),d.mc("status",e.profileForm.get("phone").touched?e.profileForm.get("phone").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",e.profileForm.get("phone").invalid&&e.profileForm.get("phone").touched),d.Eb(5),d.mc("status",e.profileForm.get("address").touched?e.profileForm.get("address").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",e.profileForm.get("address").invalid&&e.profileForm.get("address").touched),d.Eb(13),d.mc("formGroup",e.changePasswordForm),d.Eb(6),d.mc("status",e.changePasswordForm.get("oldPassword").touched?e.changePasswordForm.get("oldPassword").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",e.changePasswordForm.get("oldPassword").invalid&&e.changePasswordForm.get("oldPassword").touched),d.Eb(5),d.mc("status",e.changePasswordForm.get("password").touched?e.changePasswordForm.get("password").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",e.changePasswordForm.get("password").invalid&&e.changePasswordForm.get("password").touched),d.Eb(5),d.mc("status",e.changePasswordForm.get("confirmPassword").touched?e.changePasswordForm.get("confirmPassword").invalid||e.changePasswordForm.get("password").value!=e.changePasswordForm.get("confirmPassword").value?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",e.changePasswordForm.get("confirmPassword").invalid&&e.changePasswordForm.get("confirmPassword").touched))},directives:[l.r,l.s,c.n,l.q,a.v,a.n,a.g,l.G,a.a,a.m,a.e,a.j,a.i,a.r,l.o],pipes:[c.v,c.k],styles:[""]}),r})();var S=o("tyNb");const T=[{path:"",component:q,canActivate:[]},{path:"page-not-found",loadChildren:()=>o.e(0).then(o.bind(null,"DeSt")).then(r=>r.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let N=(()=>{class r{}return r.\u0275mod=d.Ob({type:r}),r.\u0275inj=d.Nb({factory:function(e){return new(e||r)},imports:[[S.g.forChild(T)],S.g]}),r})();var L=o("vTDv");o.d(e,"ProfileModule",(function(){return R}));let R=(()=>{class r{}return r.\u0275mod=d.Ob({type:r}),r.\u0275inj=d.Nb({factory:function(e){return new(e||r)},imports:[[c.c,N,L.a,a.s,l.t,l.nb,l.F,l.H,l.p,l.lb]]}),r})()}}]);