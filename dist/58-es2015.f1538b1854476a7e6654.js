(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"7plo":function(e,t,n){"use strict";n.r(t),n.d(t,"HistoryModule",(function(){return B}));var a=n("aceb"),r=n("ofXK"),l=n("jLJ7"),i=n("fXoL"),s=n("xyIN");function o(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"uppercase"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"td"),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"td"),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"td"),i["\u0275\u0275elementStart"](11,"button",10),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).selectPlanType(n)})),i["\u0275\u0275text"](12," Select "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n+1),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5,4,e.name)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",e.duration," Month/s"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",a.getAmount(e.price),"/-")}}function c(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"table",8),i["\u0275\u0275elementStart"](2,"thead"),i["\u0275\u0275elementStart"](3,"th"),i["\u0275\u0275text"](4,"#"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"th"),i["\u0275\u0275text"](6,"Membership Type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"th"),i["\u0275\u0275text"](8,"Duration"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"th"),i["\u0275\u0275text"](10,"Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"th"),i["\u0275\u0275text"](12,"Action"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"tbody"),i["\u0275\u0275template"](14,o,13,6,"tr",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngForOf",e.memberships)}}function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",5),i["\u0275\u0275template"](2,c,15,1,"div",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](11);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.memberships.length>0)("ngIfElse",t)}}function m(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",11),i["\u0275\u0275text"](1,"Loading..."),i["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",11),i["\u0275\u0275text"](1,"No Membership Plans Available"),i["\u0275\u0275elementEnd"]())}let p=(()=>{class e{constructor(e,t,n){this.membershipService=e,this.toastrService=t,this.ref=n}ngOnInit(){this.loading=!0,this.memberships=[new l.a(null,"monthly","1","1999",!0),new l.a(null,"quarterly","3","4999",!0),new l.a(null,"half-yearly","6","7999",!0),new l.a(null,"yearly","12","11999",!0)],this.getMemberships()}getMemberships(){this.loading=!0,this.membershipService.getMemberships().subscribe(e=>{for(let t=0;t<4;t++){const n=this.memberships[t],a=e.find(e=>e.name===n.name);a&&(this.memberships[t]=a)}this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}getAmount(e){return(e=parseFloat(e.toString())).toFixed(2).toString()}selectPlanType(e){this.ref.close(e)}onClose(){this.ref.close()}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](a.Gb),i["\u0275\u0275directiveInject"](a.J))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-plan-type"]],decls:12,vars:2,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noMemberships",""],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["type","button","nbButton","","size","small","status","primary",3,"click"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275text"](5,"Membership Plans"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"nb-card-body"),i["\u0275\u0275template"](7,d,3,2,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,m,2,0,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](10,h,2,0,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](9);i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",e)}},directives:[a.y,a.A,a.x,r.n,r.m,a.v],pipes:[r.w],styles:[""]}),e})();var u=n("W0sp"),g=n("ZatZ"),v=n("tyNb");function S(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n+1),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.category),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.status?"Active":"Inactive")}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275elementStart"](2,"table",15),i["\u0275\u0275elementStart"](3,"thead"),i["\u0275\u0275elementStart"](4,"th"),i["\u0275\u0275text"](5,"#"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"th"),i["\u0275\u0275text"](7,"Category"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"th"),i["\u0275\u0275text"](9,"Status"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"tbody"),i["\u0275\u0275template"](11,S,7,3,"tr",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngForOf",e.branch.categories)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"td"),i["\u0275\u0275text"](10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n+1),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.planType),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",e.amount,"/-"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.dateService.formatDate(e.activationDate)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.dateService.formatDate(e.expiryDate))}}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275elementStart"](1,"table",17),i["\u0275\u0275elementStart"](2,"thead"),i["\u0275\u0275elementStart"](3,"th"),i["\u0275\u0275text"](4,"#"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"th"),i["\u0275\u0275text"](6,"Plan Type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"th"),i["\u0275\u0275text"](8,"Amount"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"th"),i["\u0275\u0275text"](10,"Activation Date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"th"),i["\u0275\u0275text"](12,"Expiry Date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"tbody"),i["\u0275\u0275template"](14,f,11,5,"tr",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngForOf",e.history)}}function E(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",6),i["\u0275\u0275elementStart"](2,"strong"),i["\u0275\u0275text"](3,"Branch Name: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",6),i["\u0275\u0275elementStart"](6,"button",7),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]();return t.changeBranchStatus(!t.branch.status)})),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",8),i["\u0275\u0275elementStart"](9,"strong"),i["\u0275\u0275text"](10,"Email: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"strong"),i["\u0275\u0275text"](14,"Contact: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",9),i["\u0275\u0275elementStart"](17,"strong"),i["\u0275\u0275text"](18,"Address: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",10),i["\u0275\u0275elementStart"](21,"strong"),i["\u0275\u0275text"](22,"Category: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](23,x,12,1,"div",11),i["\u0275\u0275element"](24,"hr"),i["\u0275\u0275elementStart"](25,"div",9),i["\u0275\u0275elementStart"](26,"h5"),i["\u0275\u0275text"](27,"History:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,b,15,1,"div",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](13);i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("",e.branch.basicDetails.branchName," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("status",e.branch.status?"danger":"success"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.branch.status?"Deactivate":"Activate Now"," "),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](e.branch.basicDetails.email),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](e.branch.basicDetails.phone),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",e.getAddress(e.branch.address),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",e.branch.categories.length>0),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.history.length>0)("ngIfElse",t)}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",18),i["\u0275\u0275text"](1,"Loading..."),i["\u0275\u0275elementEnd"]())}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",18),i["\u0275\u0275text"](1,"No Branch History Available"),i["\u0275\u0275elementEnd"]())}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,a,r,l){this.instituteService=e,this.toastrService=t,this.dialogService=n,this.dateService=a,this.router=r,this.route=l}ngOnInit(){this.loading=!0,this.instituteService.getInstitute().subscribe(e=>{e?(this.institute=e,this.instituteService.getBranch().subscribe(e=>{e?(this.branch=e,this.instituteService.getInstituteBranchHistory(e._id).subscribe(e=>{this.history=e,this.loading=!1},e=>{this.showToastr("top right","danger",e),this.loading=!1})):this.showToastr("top right","danger","Invalid Institute")})):this.showToastr("top right","danger","Invalid Institute")})}getAddress(e){return e.address1+", "+(e.address2?e.address2+", ":"")+e.city+" - "+e.pinCode+", "+e.state}changeBranchStatus(e){e?this.openPlanTypeDialog():this.deactivateBranch()}openPlanTypeDialog(){this.dialogService.open(p,{context:{}}).onClose.subscribe(e=>e&&this.activateBranch(e))}activateBranch(e){e?(this.loading=!0,this.instituteService.activateInstituteBranch(this.branch._id,e.name,e.price).subscribe(e=>{this.branch.status=!0,this.loading=!1},e=>{this.showToastr("top right","danger",e),this.loading=!1})):this.showToastr("top right","danger","Invalid Membership Plan")}deactivateBranch(){this.loading=!0,this.instituteService.deactivateInstituteBranch(this.branch._id).subscribe(e=>{this.branch.status=!1,this.loading=!1},e=>{this.showToastr("top right","danger",e),this.loading=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}back(){this.router.navigate(["../"],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](a.Gb),i["\u0275\u0275directiveInject"](a.K),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](v.c),i["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-history"]],decls:14,vars:2,consts:[[1,"row"],[1,"col-md-12"],["type","button","size","small","nbButton","","status","warning",1,"float-right",3,"click"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noHistory",""],[1,"col-sm-6","col-12"],["nbButton","","size","small","fullWidth","",1,"",3,"status","click"],[1,"col-md-6","col-12"],[1,"col-12"],[1,"col-md-3","col-sm-5","col-12"],["class","col-md-9 col-sm-7 col-12",4,"ngIf"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"col-md-9","col-sm-7","col-12"],[1,"table-responsive"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[1,"table"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"button",2),i["\u0275\u0275listener"]("click",(function(){return t.back()})),i["\u0275\u0275text"](5," Back "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"h3"),i["\u0275\u0275text"](7,"Branch Details"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"nb-card-body"),i["\u0275\u0275template"](9,E,29,9,"div",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,I,2,0,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](12,y,2,0,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](11);i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",e)}},directives:[a.y,a.A,a.v,a.x,r.n,r.m],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let C=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[v.g.forChild(w)],v.g]}),e})(),B=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,a.Jb,a.R,a.w,a.P,a.B,C]]}),e})()}}]);
//# sourceMappingURL=58-es2015.f1538b1854476a7e6654.js.map