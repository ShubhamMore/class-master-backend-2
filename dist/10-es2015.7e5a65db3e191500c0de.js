(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{vzPq:function(e,t,n){"use strict";n.r(t);var i=n("3Pt+"),r=n("ofXK"),o=n("ZatZ"),a=n("gmaa"),s=n("RSY0"),l=n("EQut"),m=n("fXoL"),d=n("aceb"),u=n("tyNb");const c=["stepper"];function p(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",28),m["\u0275\u0275text"](1," Online Exam Question is required! "),m["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,p,2,0,"p",27),m["\u0275\u0275elementContainerEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==e.onlineExamQuestionForm.get("question").errors?null:e.onlineExamQuestionForm.get("question").errors.required)}}function E(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",33),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](e);const t=m["\u0275\u0275nextContext"]().index;return m["\u0275\u0275nextContext"]().deleteOption(t)})),m["\u0275\u0275element"](1,"nb-icon",34),m["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"p",28),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"](2).index;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" Answer ",e+1," is required! ")}}function v(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,x,2,1,"p",27),m["\u0275\u0275elementContainerEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==e.get("answer").errors?null:e.get("answer").errors.required)}}function g(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275elementStart"](1,"nb-card",29),m["\u0275\u0275elementStart"](2,"nb-card-header"),m["\u0275\u0275elementStart"](3,"div",0),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275template"](5,E,2,0,"button",30),m["\u0275\u0275elementStart"](6,"nb-checkbox",31),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"nb-card-body"),m["\u0275\u0275elementStart"](9,"div",11),m["\u0275\u0275element"](10,"textarea",32),m["\u0275\u0275template"](11,v,2,1,"ng-container",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",e),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",0!==n&&1!==n),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("checked",e.get("isCorrect").value),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" Answer ",n+1," "),m["\u0275\u0275advance"](3),m["\u0275\u0275propertyInterpolate1"]("id","input-answer-",n,""),m["\u0275\u0275propertyInterpolate1"]("name","answer-",n,""),m["\u0275\u0275propertyInterpolate1"]("placeholder","Answer ",n+1,""),m["\u0275\u0275property"]("status",e.get("answer").touched?e.get("answer").invalid?"danger":"success":"basic"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",e.get("answer").invalid&&e.get("answer").touched)}}function b(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",28),m["\u0275\u0275text"](1," *Please Select at least One Correct Answer "),m["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,b,2,0,"p",27),m["\u0275\u0275elementContainerEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",e.onlineExamQuestionForm.hasError("atLeastOneCorrectAnswerError")&&e.onlineExamQuestionForm.touched)}}function f(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"th"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275element"](4,"nb-icon",35),m["\u0275\u0275text"](5," \xa0\xa0 "),m["\u0275\u0275elementStart"](6,"span"),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("Answer ",n+1,""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("status",e.value.isCorrect?"success":"danger")("icon",e.value.isCorrect?"checkmark-outline":"close-outline"),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](e.value.answer)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,o,a){this.branchService=e,this.onlineExamQuestionService=t,this.onlineExamService=n,this.dateService=i,this.toastrService=r,this.router=o,this.route=a}ngOnInit(){this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?this.onlineExamService.getOnlineExamData().subscribe(e=>{if(!e)return void this.back();let t;this.onlineExam=e,this.route.queryParams.subscribe(e=>{t=e.mode}),this.onlineExamQuestionId=this.onlineExamQuestionService.getOnlineExamQuestionId(),t&&"edit"!==t?this.showToastr("top-right","danger","Invalid Route"):!t||this.onlineExamQuestionId?(this.onlineExamQuestionForm=new i.f({question:new i.d(null,{validators:[i.u.required]}),answers:new i.b([]),marks:new i.d(this.onlineExam.eachQuestionMarks,{validators:[i.u.required]})},{validators:this.atLeastOneCorrectAnswerValidator.bind(this)}),t&&this.onlineExamQuestionId?this.onlineExamQuestionService.getOnlineExamQuestion(this.onlineExamQuestionId).subscribe(e=>{this.onlineExamQuestion=e,this.onlineExamQuestionForm.patchValue({question:this.onlineExamQuestion.question,marks:this.onlineExamQuestion.marks}),this.onlineExamQuestionForm.get("answers").controls=[],this.onlineExamQuestion.answers.forEach(e=>{this.addOption(e)}),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.back(),this.loading=!1}):(this.generateOption(),this.generateOption(),this.loading=!1)):this.showToastr("top-right","danger","OnlineExam Not Found")}):this.router.navigate(["../"],{relativeTo:this.route})}atLeastOneCorrectAnswerValidator(e){let t=!1;return e.value.answers.forEach(e=>{e.isCorrect&&(t=!0)}),t?null:{atLeastOneCorrectAnswerError:!0}}newAnswer(e){return new i.f({answer:new i.d(e.answer?e.answer:null,{validators:[i.u.required]}),isCorrect:new i.d(e.isCorrect,{validators:[]})})}addOption(e){this.onlineExamQuestionForm.get("answers").push(this.newAnswer(e))}generateOption(){this.addOption({answer:"",isCorrect:!1})}deleteOption(e){0!==e&&1!==e&&this.onlineExamQuestionForm.get("answers").removeAt(e)}previousStep(){this.stepper.previous()}submitOnlineExamQuestionForm(){this.onlineExamQuestionForm.markAllAsTouched(),this.onlineExamQuestionForm.invalid?this.showToastr("top-right","danger","All Online Exam Question are Required"):this.stepper.next()}saveOnlineExamQuestion(){if(this.onlineExamQuestionForm.markAllAsTouched(),this.onlineExamQuestionForm.invalid)return void this.showToastr("top-right","danger","All Online Exam Question Fields are Required");this.loading=!0;const e=this.onlineExamQuestionForm.value;e.onlineExam=this.onlineExam._id,this.onlineExamQuestion?(e._id=this.onlineExamQuestion._id,this.onlineExamQuestionService.editOnlineExamQuestion(e).subscribe(e=>{this.showToastr("top-right","success","New Question Added Successfully"),this.back()},e=>{this.showToastr("top-right","danger",e),this.loading=!1})):this.onlineExamQuestionService.newOnlineExamQuestion(e).subscribe(e=>{this.showToastr("top-right","success","New Question Added Successfully"),this.back()},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}back(){this.router.navigate(["../"],{relativeTo:this.route})}ngOnDestroy(){this.onlineExamQuestionService.deleteOnlineExamQuestionId(),this.onlineExamQuestionService.deleteOnlineExamQuestionData()}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](a.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](d.Db),m["\u0275\u0275directiveInject"](u.c),m["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-online-test-questions"]],viewQuery:function(e,t){var n;1&e&&m["\u0275\u0275viewQuery"](c,!0),2&e&&m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.stepper=n.first)},decls:62,vars:11,consts:[[1,"row"],[1,"col-9"],[1,"col-3"],["nbButton","","size","tiny","status","warning",1,"float-right",3,"click"],[1,"col-12"],[3,"linear","disableStepNavigation"],["stepper",""],["label","Online Exam Details",3,"stepControl"],[3,"formGroup","submit"],[1,"col-md-12"],["for","input-question",1,"label"],[1,"form-control-group"],["type","text","nbInput","","id","input-question","name","question","rows","2","formControlName","question","placeholder","Question","fullWidth","",3,"status"],[4,"ngIf"],["class","col-md-12",4,"ngFor","ngForOf"],["type","button","nbButton","","status","primary","size","small",1,"float-right",3,"click"],["type","submit","nbButton","","status","basic","size","small",1,"float-right"],["label","Submit"],[1,"step-container"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"col-md-6","text-left"],["type","button","nbButton","",1,"",3,"click"],["icon","arrow-ios-back-outline"],[1,"col-md-6","text-right"],["nbButton","","size","medium",3,"click"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[3,"formGroup"],["class","float-right","type","button","nbButton","","status","danger","size","tiny",3,"click",4,"ngIf"],["formControlName","isCorrect",3,"checked"],["type","text","nbInput","","rows","2","formControlName","answer","fullWidth","",3,"id","name","placeholder","status"],["type","button","nbButton","","status","danger","size","tiny",1,"float-right",3,"click"],["icon","trash-outline"],[3,"status","icon"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h3"),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"button",3),m["\u0275\u0275listener"]("click",(function(){return t.back()})),m["\u0275\u0275text"](8," Back "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"nb-card-body"),m["\u0275\u0275elementStart"](10,"div",0),m["\u0275\u0275elementStart"](11,"div",4),m["\u0275\u0275elementStart"](12,"nb-stepper",5,6),m["\u0275\u0275elementStart"](14,"nb-step",7),m["\u0275\u0275elementStart"](15,"form",8),m["\u0275\u0275listener"]("submit",(function(){return t.submitOnlineExamQuestionForm()})),m["\u0275\u0275elementStart"](16,"div",0),m["\u0275\u0275elementStart"](17,"div",9),m["\u0275\u0275elementStart"](18,"nb-card"),m["\u0275\u0275elementStart"](19,"nb-card-header"),m["\u0275\u0275elementStart"](20,"label",10),m["\u0275\u0275text"](21,"Question:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"nb-card-body"),m["\u0275\u0275elementStart"](23,"div",11),m["\u0275\u0275element"](24,"textarea",12),m["\u0275\u0275template"](25,h,2,1,"ng-container",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](26,g,12,9,"div",14),m["\u0275\u0275elementStart"](27,"div",9),m["\u0275\u0275elementStart"](28,"button",15),m["\u0275\u0275listener"]("click",(function(){return t.generateOption()})),m["\u0275\u0275text"](29," Add Option "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"div",4),m["\u0275\u0275template"](31,S,2,1,"ng-container",13),m["\u0275\u0275elementStart"](32,"p"),m["\u0275\u0275elementStart"](33,"strong"),m["\u0275\u0275text"](34,"*For correct answers, Tick the checkbox"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](35,"hr"),m["\u0275\u0275elementStart"](36,"div",0),m["\u0275\u0275elementStart"](37,"div",4),m["\u0275\u0275elementStart"](38,"button",16),m["\u0275\u0275text"](39," Next "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](40,"nb-step",17),m["\u0275\u0275elementStart"](41,"div",18),m["\u0275\u0275elementStart"](42,"div",19),m["\u0275\u0275elementStart"](43,"table",20),m["\u0275\u0275elementStart"](44,"tbody"),m["\u0275\u0275elementStart"](45,"tr"),m["\u0275\u0275elementStart"](46,"th"),m["\u0275\u0275text"](47,"Online Exam Question"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](48,"td"),m["\u0275\u0275text"](49),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](50,f,8,4,"tr",21),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](51,"hr"),m["\u0275\u0275elementStart"](52,"div",0),m["\u0275\u0275elementStart"](53,"div",22),m["\u0275\u0275elementStart"](54,"button",23),m["\u0275\u0275listener"]("click",(function(){return t.previousStep()})),m["\u0275\u0275element"](55,"nb-icon",24),m["\u0275\u0275elementStart"](56,"span"),m["\u0275\u0275text"](57,"prev"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](58,"div",25),m["\u0275\u0275elementStart"](59,"button",26),m["\u0275\u0275listener"]("click",(function(){return t.saveOnlineExamQuestion()})),m["\u0275\u0275elementStart"](60,"span"),m["\u0275\u0275text"](61,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate1"]("",t.onlineExam?"Edit":"Add"," Online Exam Question"),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("linear",!0)("disableStepNavigation",!0),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("stepControl",t.onlineExamQuestionForm),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",t.onlineExamQuestionForm),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("status",t.onlineExamQuestionForm.get("question").touched?t.onlineExamQuestionForm.get("question").invalid?"danger":"success":"basic"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.onlineExamQuestionForm.get("question").invalid&&t.onlineExamQuestionForm.get("question").touched),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.onlineExamQuestionForm.get("answers").controls),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.onlineExamQuestionForm.hasError("atLeastOneCorrectAnswerError")&&t.onlineExamQuestionForm.touched),m["\u0275\u0275advance"](18),m["\u0275\u0275textInterpolate"](t.onlineExamQuestionForm.value.question),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.onlineExamQuestionForm.get("answers").controls))},directives:[d.x,d.z,d.u,d.w,d.sb,d.rb,i.v,i.n,i.g,d.P,i.a,i.m,i.e,r.n,r.m,d.M,d.C],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let Q=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[u.g.forChild(w)],u.g]}),e})();n.d(t,"AddOnlineTestQuestionsModule",(function(){return y}));let y=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,Q,d.Q,d.v,d.A,d.tb,d.nb,d.O,d.D,i.s]]}),e})()}}]);