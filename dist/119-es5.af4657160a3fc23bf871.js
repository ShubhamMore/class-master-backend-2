function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,c){return e&&_defineProperties(t.prototype,e),c&&_defineProperties(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{xIY6:function(t,e,c){"use strict";c.r(e);var n=c("aceb"),i=c("ofXK"),a=c("tyNb"),s=c("ZatZ"),o=c("IAlr"),b=c("lst6"),r=c("zZNt"),l=c("EQut"),u=c("fXoL");function h(t,e){if(1&t&&(u.Wb(0,"nb-option",14),u.Cc(1),u.Vb()),2&t){var c=e.$implicit;u.mc("value",c._id),u.Eb(1),u.Dc(c.subject)}}function d(t,e){if(1&t&&(u.Wb(0,"nb-option",14),u.Cc(1),u.Vb()),2&t){var c=e.$implicit;u.mc("value",c),u.Eb(1),u.Dc(c)}}function m(t,e){if(1&t&&(u.Wb(0,"nb-option",14),u.Cc(1),u.Vb()),2&t){var c=e.$implicit;u.mc("value",c.monthNo),u.Eb(1),u.Dc(c.month)}}function f(t,e){if(1&t){var c=u.Xb();u.Wb(0,"tr"),u.Wb(1,"td"),u.Cc(2),u.Vb(),u.Wb(3,"td"),u.Cc(4),u.Vb(),u.Wb(5,"td"),u.Cc(6),u.Vb(),u.Wb(7,"td"),u.Cc(8),u.Vb(),u.Wb(9,"td"),u.Cc(10),u.Vb(),u.Wb(11,"td"),u.Wb(12,"button",21),u.ec("click",(function(){u.uc(c);var t=e.$implicit;return u.gc(3).editExam(t)})),u.Cc(13," Edit "),u.Vb(),u.Vb(),u.Wb(14,"td"),u.Wb(15,"button",22),u.ec("click",(function(){u.uc(c);var t=e.$implicit;return u.gc(3).addExamScore(t)})),u.Cc(16," Score "),u.Vb(),u.Vb(),u.Wb(17,"td"),u.Wb(18,"button",23),u.ec("click",(function(){u.uc(c);var t=e.$implicit,n=e.index;return u.gc(3).changeExamStatus(t._id,!t.status,n)})),u.Cc(19),u.Vb(),u.Vb(),u.Wb(20,"td"),u.Wb(21,"button",24),u.ec("click",(function(){u.uc(c);var t=e.$implicit,n=e.index;return u.gc(3).deleteExam(t._id,n)})),u.Cc(22," Delete "),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index,a=u.gc(3);u.Eb(2),u.Dc(i+1),u.Eb(2),u.Dc(n.examTitle),u.Eb(2),u.Dc(a.dateService.formatDate(n.date)),u.Eb(2),u.Dc(a.category.category),u.Eb(2),u.Dc(a.course.basicDetails.courseName),u.Eb(8),u.mc("status",n.status?"success":"danger"),u.Eb(1),u.Ec(" ",n.status?"Inactive":"Active"," ")}}function g(t,e){if(1&t&&(u.Wb(0,"div",17),u.Wb(1,"table",18),u.Wb(2,"thead"),u.Wb(3,"tr"),u.Wb(4,"th"),u.Cc(5,"#"),u.Vb(),u.Wb(6,"th"),u.Cc(7,"Title"),u.Vb(),u.Wb(8,"th"),u.Cc(9,"Date"),u.Vb(),u.Wb(10,"th"),u.Cc(11,"Category"),u.Vb(),u.Wb(12,"th"),u.Cc(13,"Course"),u.Vb(),u.Wb(14,"th",19),u.Cc(15,"Action"),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"tbody"),u.Ac(17,f,23,7,"tr",20),u.Vb(),u.Vb(),u.Vb()),2&t){var c=u.gc(2);u.Eb(17),u.mc("ngForOf",c.exams)}}function v(t,e){1&t&&(u.Wb(0,"p",25),u.Cc(1,"No Exams Available"),u.Vb())}function p(t,e){if(1&t&&(u.Ub(0),u.Ac(1,g,18,1,"div",15),u.Ac(2,v,2,0,"ng-template",null,16,u.Bc),u.Tb()),2&t){var c=u.sc(3),n=u.gc();u.Eb(1),u.mc("ngIf",n.exams.length>0)("ngIfElse",c)}}function W(t,e){1&t&&(u.Wb(0,"p",25),u.Cc(1,"Loading..."),u.Vb())}var V,E,C=[{path:"",component:(V=function(){function t(e,c,n,i,a,s,o,b){_classCallCheck(this,t),this.branchService=e,this.courseService=c,this.batchService=n,this.toastrService=i,this.dateService=a,this.examService=s,this.router=o,this.route=b}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.branchService.getCategoryData().subscribe((function(e){t.category=e})),this.courseService.getCourseData().subscribe((function(e){t.course=e})),this.batchService.getBatchData().subscribe((function(e){t.batch=e})),this.subjects=[],this.subject="",this.batch.subjects.forEach((function(e){var c=t.course.subjects.find((function(t){return t._id===e.subject}));t.subjects.push(c)})),this.months=this.dateService.getMonths(),this.years=this.dateService.getYears(),this.month=(this.dateService.getDate().getMonth()+1).toString().padStart(2,"0"),this.year=this.years[this.years.length-1],this.getExams()):this.router.navigate(["../"],{relativeTo:this.route})}},{key:"onSelectMonth",value:function(t){this.month=t,this.getExams()}},{key:"onSelectYear",value:function(t){this.year=t,""===t&&(this.month=""),this.getExams()}},{key:"onSelectSubject",value:function(t){this.subject=t,this.getExams()}},{key:"getExams",value:function(){var t=this;this.loading=!0,this.examService.getExams(this.branchId,this.category._id,this.course._id,this.batch._id,this.subject,this.month,this.year).subscribe((function(e){t.exams=e,t.loading=!1}),(function(e){t.showToastr("top-right","danger",e),t.loading=!1}))}},{key:"addExam",value:function(){this.router.navigate(["../add"],{relativeTo:this.route})}},{key:"addExamScore",value:function(t){this.examService.setExamData(t),this.router.navigate(["../score"],{relativeTo:this.route})}},{key:"editExam",value:function(t){this.examService.setExamId(t._id),this.examService.setExamData(t),this.router.navigate(["../edit"],{relativeTo:this.route,queryParams:{mode:"edit"}})}},{key:"deleteExam",value:function(t,e){var c=this;this.loading=!0,this.examService.deleteExam(t).subscribe((function(t){c.exams.splice(e,1),c.loading=!1}),(function(t){c.showToastr("top-right","danger",t),c.loading=!1}))}},{key:"changeExamStatus",value:function(t,e,c){}},{key:"showToastr",value:function(t,e,c){this.toastrService.show(e,c,{position:t,status:e})}}]),t}(),V.\u0275fac=function(t){return new(t||V)(u.Qb(l.a),u.Qb(o.a),u.Qb(b.a),u.Qb(n.xb),u.Qb(s.a),u.Qb(r.a),u.Qb(a.c),u.Qb(a.a))},V.\u0275cmp=u.Kb({type:V,selectors:[["ngx-manage-batch-test"]],decls:35,vars:8,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","size","small","fullWidth","","status","primary",3,"click"],["icon","plus-circle-outline"],["id","select-subject","name","subject","fullWidth","","placeholder","All Subjects",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","select-year","name","year","fullWidth","","placeholder","All Years",3,"selected","selectedChange"],["id","select-month","name","month","fullWidth","","placeholder","All Months",3,"selected","selectedChange"],[1,"body-container"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["loadingData",""],[3,"value"],["class","table-responsive",4,"ngIf","ngIfElse"],["noBatches",""],[1,"table-responsive"],[1,"table"],["colspan","4"],[4,"ngFor","ngForOf"],["nbButton","","status","primary","size","small",3,"click"],["nbButton","","status","warning","size","small",3,"click"],["nbButton","","size","small",3,"status","click"],["nbButton","","status","danger","size","small",3,"click"],[1,"text-center"]],template:function(t,e){if(1&t&&(u.Wb(0,"nb-card"),u.Wb(1,"nb-card-header"),u.Wb(2,"div",0),u.Wb(3,"div",1),u.Wb(4,"h3"),u.Cc(5,"Classroom Exams"),u.Vb(),u.Vb(),u.Wb(6,"div",2),u.Wb(7,"button",3),u.ec("click",(function(){return e.addExam()})),u.Cc(8," Add Exam "),u.Rb(9,"nb-icon",4),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"nb-card"),u.Wb(11,"nb-card-header"),u.Wb(12,"div",0),u.Rb(13,"div",2),u.Wb(14,"div",2),u.Wb(15,"nb-select",5),u.ec("selectedChange",(function(t){return e.onSelectSubject(t)})),u.Wb(16,"nb-option",6),u.Cc(17,"All Subjects"),u.Vb(),u.Ac(18,h,2,2,"nb-option",7),u.Vb(),u.Vb(),u.Wb(19,"div",2),u.Wb(20,"nb-select",8),u.ec("selectedChange",(function(t){return e.onSelectYear(t)})),u.Wb(21,"nb-option",6),u.Cc(22,"All Years"),u.Vb(),u.Ac(23,d,2,2,"nb-option",7),u.Vb(),u.Vb(),u.Wb(24,"div",2),u.Wb(25,"nb-select",9),u.ec("selectedChange",(function(t){return e.onSelectMonth(t)})),u.Wb(26,"nb-option",6),u.Cc(27,"All Months"),u.Vb(),u.Ac(28,m,2,2,"nb-option",7),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(29,"nb-card-body",10),u.Wb(30,"div",0),u.Wb(31,"div",11),u.Ac(32,p,4,2,"ng-container",12),u.Ac(33,W,2,0,"ng-template",null,13,u.Bc),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){var c=u.sc(34);u.Eb(15),u.mc("selected",e.subject),u.Eb(3),u.mc("ngForOf",e.subjects),u.Eb(2),u.mc("selected",e.year),u.Eb(3),u.mc("ngForOf",e.years),u.Eb(2),u.mc("selected",e.month),u.Eb(3),u.mc("ngForOf",e.months),u.Eb(4),u.mc("ngIf",!e.loading)("ngIfElse",c)}},directives:[n.x,n.z,n.u,n.L,n.jb,n.eb,i.m,n.w,i.n],styles:[""]}),V)},{path:"page-not-found",loadChildren:function(){return c.e(0).then(c.bind(null,"DeSt")).then((function(t){return t.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],y=((E=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:E}),E.\u0275inj=u.Nb({factory:function(t){return new(t||E)},imports:[[a.g.forChild(C)],a.g]}),E);c.d(e,"ManageBatchTestModule",(function(){return S}));var x,S=((x=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:x}),x.\u0275inj=u.Nb({factory:function(t){return new(t||x)},imports:[[i.c,y,n.A,n.kb,n.v,n.N]]}),x)}}]);