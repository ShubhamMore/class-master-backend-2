!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{k69L:function(t,r,i){"use strict";i.r(r),i.d(r,"MembershipPlansModule",(function(){return C}));var a=i("aceb"),l=i("3Pt+"),m=i("ofXK"),o=i("fXoL"),s=i("xyIN");function d(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",13),o["\u0275\u0275text"](1," Price Amount is required! "),o["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",13),o["\u0275\u0275text"](1," Price Amount should be more than or equal to 0 "),o["\u0275\u0275elementEnd"]())}function c(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,d,2,0,"p",12),o["\u0275\u0275template"](2,p,2,0,"p",12),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==n.membershipForm.get("price").errors?null:n.membershipForm.get("price").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==n.membershipForm.get("price").errors?null:n.membershipForm.get("price").errors.min)}}var u,h=((u=function(){function t(n,r,i){e(this,t),this.membershipService=n,this.toastrService=r,this.ref=i}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.submit=!1,this.membershipService.getMembershipPlan().subscribe((function(t){e.membership=t,t?(e.membershipForm=new l.f({name:new l.d(t.name,{validators:[l.u.required]}),duration:new l.d(t.duration,{validators:[l.u.required]}),price:new l.d(t.price,{validators:[l.u.required,l.u.min(0)]})}),e.loading=!1):e.onClose()}))}},{key:"saveMembership",value:function(){var e=this;if(this.membershipForm.markAllAsTouched(),this.membershipForm.invalid)this.showToastr("top-right","danger","Membership Details are required");else{this.submit=!0;var t=Object.assign({},this.membershipForm.value);this.membership._id&&(t._id=this.membership._id),this.membershipService.saveMembershipPlan(t).subscribe((function(t){e.ref.close(t)}),(function(t){e.showToastr("top-right","danger",t),e.submit=!1}))}}},{key:"onClose",value:function(){this.ref.close()}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}},{key:"ngOnDestroy",value:function(){this.membershipService.setMembershipPlan(null)}}]),t}()).\u0275fac=function(e){return new(e||u)(o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](a.Gb),o["\u0275\u0275directiveInject"](a.J))},u.\u0275cmp=o["\u0275\u0275defineComponent"]({type:u,selectors:[["ngx-save-membership-plan"]],decls:40,vars:12,consts:[[1,"membership-box"],["icon","close-outline",1,"float-right","pointer",3,"click"],[1,""],[1,"",3,"formGroup","submit"],[1,"table-responsive"],[1,"table","table-borderless"],[1,"form-control-group"],["type","number","nbInput","","id","input-price","name","price","min","0","formControlName","price","placeholder","Price","fullWidth","",3,"status"],[4,"ngIf"],[1,"row"],[1,"col-md-12","text-right"],["type","submit","nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card",0),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"nb-icon",1),o["\u0275\u0275listener"]("click",(function(){return t.onClose()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"h3",2),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"uppercase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"nb-card-body"),o["\u0275\u0275elementStart"](7,"form",3),o["\u0275\u0275listener"]("submit",(function(){return t.saveMembership()})),o["\u0275\u0275elementStart"](8,"div",4),o["\u0275\u0275elementStart"](9,"table",5),o["\u0275\u0275elementStart"](10,"tbody"),o["\u0275\u0275elementStart"](11,"tr"),o["\u0275\u0275elementStart"](12,"th"),o["\u0275\u0275text"](13,"Plan Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"td"),o["\u0275\u0275text"](15,":"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"td"),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"uppercase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"tr"),o["\u0275\u0275elementStart"](20,"th"),o["\u0275\u0275text"](21,"Duration"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"td"),o["\u0275\u0275text"](23,":"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"td"),o["\u0275\u0275text"](25),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"tr"),o["\u0275\u0275elementStart"](27,"th"),o["\u0275\u0275text"](28,"Price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"td"),o["\u0275\u0275text"](30,":"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"td"),o["\u0275\u0275elementStart"](32,"div",6),o["\u0275\u0275element"](33,"input",7),o["\u0275\u0275template"](34,c,3,2,"ng-container",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](35,"hr"),o["\u0275\u0275elementStart"](36,"div",9),o["\u0275\u0275elementStart"](37,"div",10),o["\u0275\u0275elementStart"](38,"button",11),o["\u0275\u0275text"](39," Save "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,8,t.membership.name)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formGroup",t.membershipForm),o["\u0275\u0275advance"](10),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](18,10,t.membershipForm.value.name)),o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate1"]("",t.membershipForm.value.duration," Month/s"),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("status",t.membershipForm.get("price").touched?t.membershipForm.get("price").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.membershipForm.get("price").touched),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit))},directives:[a.y,a.A,a.N,a.x,l.v,l.n,l.g,l.q,a.Q,l.a,l.m,l.e,m.n,a.v,a.sb],pipes:[m.w],styles:[""]}),u),b=i("jLJ7");function f(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"uppercase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"td"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"td"),o["\u0275\u0275text"](9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"td"),o["\u0275\u0275elementStart"](11,"button",10),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](3).editMembership(e)})),o["\u0275\u0275text"](12," Edit "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=t.index,a=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i+1),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,4,r.name)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",r.duration," Month/s"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",a.getAmount(r.price),"/-")}}function v(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275elementStart"](1,"table",8),o["\u0275\u0275elementStart"](2,"thead"),o["\u0275\u0275elementStart"](3,"th"),o["\u0275\u0275text"](4,"#"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"th"),o["\u0275\u0275text"](6,"Membership Type"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"th"),o["\u0275\u0275text"](8,"Duration"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"th"),o["\u0275\u0275text"](10,"Price"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"th"),o["\u0275\u0275text"](12,"Action"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"tbody"),o["\u0275\u0275template"](14,f,13,6,"tr",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](14),o["\u0275\u0275property"]("ngForOf",n.memberships)}}function g(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",5),o["\u0275\u0275template"](2,v,15,1,"div",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](),r=o["\u0275\u0275reference"](11);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.memberships.length>0)("ngIfElse",r)}}function S(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",11),o["\u0275\u0275text"](1,"Loading..."),o["\u0275\u0275elementEnd"]())}function E(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",11),o["\u0275\u0275text"](1,"No Membership Plans Available"),o["\u0275\u0275elementEnd"]())}var x,y,w,I=((x=function(){function t(n,r,i){e(this,t),this.membershipService=n,this.toastrService=r,this.dialogService=i}return n(t,[{key:"ngOnInit",value:function(){this.loading=!0,this.memberships=[new b.a(null,"monthly","1","1999",!0),new b.a(null,"quarterly","3","4999",!0),new b.a(null,"half-yearly","6","7999",!0),new b.a(null,"yearly","12","11999",!0)],this.getMemberships()}},{key:"getMemberships",value:function(){var e=this;this.loading=!0,this.membershipService.getMemberships().subscribe((function(t){for(var n=function(n){var r=e.memberships[n],i=t.find((function(e){return e.name===r.name}));i&&(e.memberships[n]=i)},r=0;r<4;r++)n(r);e.loading=!1}),(function(t){e.showToastr("top-right","danger",t),e.loading=!1}))}},{key:"openMembershipDialog",value:function(){var e=this;this.dialogService.open(h,{context:{}}).onClose.subscribe((function(t){return t&&e.getMemberships()}))}},{key:"getAmount",value:function(e){return(e=parseFloat(e.toString())).toFixed(2).toString()}},{key:"editMembership",value:function(e){this.membershipService.setMembershipPlan(e),this.openMembershipDialog()}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}]),t}()).\u0275fac=function(e){return new(e||x)(o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](a.Gb),o["\u0275\u0275directiveInject"](a.K))},x.\u0275cmp=o["\u0275\u0275defineComponent"]({type:x,selectors:[["ngx-membership-plans"]],decls:12,vars:2,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noMemberships",""],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["type","button","nbButton","","size","small","status","basic",3,"click"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"div",0),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275elementStart"](4,"h3"),o["\u0275\u0275text"](5,"Membership Plans"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"nb-card-body"),o["\u0275\u0275template"](7,g,3,2,"div",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,S,2,0,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](10,E,2,0,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e){var n=o["\u0275\u0275reference"](9);o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",n)}},directives:[a.y,a.A,a.x,m.n,m.m,a.v],pipes:[m.w],styles:[""]}),x),M=i("tyNb"),k=[{path:"",component:I},{path:"page-not-found",loadChildren:function(){return i.e(0).then(i.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],F=((w=function t(){e(this,t)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||w)},imports:[[M.g.forChild(k)],M.g]}),w),C=((y=function t(){e(this,t)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[m.c,F,a.B,a.R,a.w,a.ob,a.tb,a.P,l.s]]}),y)}}])}();
//# sourceMappingURL=60-es5.cb3d076be7fa66788759.js.map