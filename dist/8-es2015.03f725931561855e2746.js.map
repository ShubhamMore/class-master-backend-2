{"version":3,"sources":["webpack:///src/app/employee/branch/assignment/save-assignment/save-assignment.component.html","webpack:///src/app/employee/branch/assignment/save-assignment/save-assignment-routing.module.ts","webpack:///src/app/employee/branch/assignment/save-assignment/save-assignment.component.ts","webpack:///src/app/employee/branch/assignment/save-assignment/save-assignment.module.ts"],"names":["routes","path","component","SaveAssignmentComponent","branchService","courseService","batchService","subjectService","assignmentService","dateService","router","route","toastrService","this","queryParams","subscribe","param","mode","ngOnInit","loading","submit","invalidFile","fileName","branchId","getBranchId","back","subjects","getCategoryData","category","getCourseData","course","getBatchData","batch","getSubjectsData","assignmentId","getAssignmentId","showToastr","navigate","relativeTo","assignmentDetailsForm","subject","validators","required","topic","date","getDateString","submissionDate","totalGrades","min","description","getAssignment","assignment","patchValue","event","files","target","ext","name","substring","lastIndexOf","toLowerCase","indexOf","fileInput","nativeElement","value","uploadAssignment","markAllAsTouched","invalid","stepper","next","FormData","append","basicDetails","_id","updateAssignment","res","error","saveAssignment","id","find","curSubject","position","status","message","show","replaceUrl","deleteAssignmentId","submitAssignmentDetails","onFilePicked","loadChildren","then","m","PageNotFoundModule","redirectTo","SaveAssignmentRoutingModule","forChild","SaveAssignmentModule"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\r\n  <nb-card-header>\r\n    <button class=\"float-right\" nbButton size=\"small\" status=\"warning\" (click)=\"back()\">\r\n      Back\r\n    </button>\r\n    <h3 class=\"\">\r\n      {{ !assignment ? 'Add New Assignment' : 'Edit Assignment ' + (assignment.topic | uppercase) }}\r\n    </h3>\r\n  </nb-card-header>\r\n  <nb-card-body>\r\n    <nb-stepper #stepper [linear]=\"true\">\r\n      <nb-step [stepControl]=\"assignmentDetailsForm\" label=\"Basic Details\">\r\n        <form class=\"\" (submit)=\"submitAssignmentDetails()\" [formGroup]=\"assignmentDetailsForm\">\r\n          <h6>Assignment Details:</h6>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-subject\">Subject:</label>\r\n                <nb-select\r\n                  type=\"text\"\r\n                  id=\"input-subject\"\r\n                  name=\"subject\"\r\n                  formControlName=\"subject\"\r\n                  placeholder=\"Subject\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    assignmentDetailsForm.get('subject').touched\r\n                      ? assignmentDetailsForm.get('subject').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                >\r\n                  <nb-option value=\"\">Select Subject</nb-option>\r\n                  <nb-option *ngFor=\"let subject of subjects\" [value]=\"subject._id\">{{\r\n                    subject.subject\r\n                  }}</nb-option>\r\n                </nb-select>\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    assignmentDetailsForm.get('subject').invalid &&\r\n                    assignmentDetailsForm.get('subject').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('subject').errors?.required\"\r\n                  >\r\n                    Subject is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-topic\">Topic:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  nbInput\r\n                  id=\"input-topic\"\r\n                  name=\"topic\"\r\n                  formControlName=\"topic\"\r\n                  placeholder=\"Topic\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    assignmentDetailsForm.get('topic').touched\r\n                      ? assignmentDetailsForm.get('topic').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    assignmentDetailsForm.get('topic').invalid &&\r\n                    assignmentDetailsForm.get('topic').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('topic').errors?.required\"\r\n                  >\r\n                    Topic is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input -assignment-date\">Assignment Date:</label>\r\n                <input\r\n                  type=\"date\"\r\n                  nbInput\r\n                  id=\"input-assignment-date\"\r\n                  name=\"date\"\r\n                  formControlName=\"date\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    assignmentDetailsForm.get('date').touched\r\n                      ? assignmentDetailsForm.get('date').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    assignmentDetailsForm.get('date').invalid &&\r\n                    assignmentDetailsForm.get('date').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('date').errors?.required\"\r\n                  >\r\n                    Assignment Date is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-12\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-description\">Description:</label>\r\n                <textarea\r\n                  type=\"text\"\r\n                  nbInput\r\n                  id=\"input-description\"\r\n                  name=\"description\"\r\n                  formControlName=\"description\"\r\n                  placeholder=\"Description\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    assignmentDetailsForm.get('description').touched\r\n                      ? assignmentDetailsForm.get('description').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                ></textarea>\r\n\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    assignmentDetailsForm.get('description').invalid &&\r\n                    assignmentDetailsForm.get('description').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('description').errors?.required\"\r\n                  >\r\n                    Assignment Description is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-subject\">Attach File</label>\r\n                <input\r\n                  type=\"file\"\r\n                  nbInput\r\n                  id=\"input-file\"\r\n                  name=\"file\"\r\n                  placeholder=\"Select File\"\r\n                  fullWidth\r\n                  #filePicker\r\n                  (change)=\"onFilePicked($event)\"\r\n                  hidden\r\n                />\r\n\r\n                <nb-form-field>\r\n                  <button\r\n                    type=\"button\"\r\n                    nbPrefix\r\n                    nbButton\r\n                    size=\"small\"\r\n                    ghost\r\n                    (click)=\"filePicker.click()\"\r\n                    nbTooltip=\"Attach File\"\r\n                  >\r\n                    <nb-icon icon=\"attach-outline\" pack=\"eva\"> </nb-icon>\r\n                  </button>\r\n                  <input\r\n                    type=\"text\"\r\n                    nbInput\r\n                    fullWidth\r\n                    [value]=\"fileName\"\r\n                    placeholder=\"Attach File\"\r\n                    (click)=\"filePicker.click()\"\r\n                    disabled\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    nbSuffix\r\n                    nbButton\r\n                    size=\"small\"\r\n                    ghost\r\n                    (click)=\"clearFile()\"\r\n                    nbTooltip=\"Remove File\"\r\n                    *ngIf=\"uploadAssignment || (!assignment && fileName)\"\r\n                  >\r\n                    <nb-icon icon=\"close-outline\" status=\"danger\" pack=\"eva\"> </nb-icon>\r\n                  </button>\r\n                </nb-form-field>\r\n\r\n                <ng-container *ngIf=\"invalidFile\">\r\n                  <p class=\"caption status-danger\">\r\n                    *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4)\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-assignment-submission-date\">Submission Date:</label>\r\n                <input\r\n                  type=\"date\"\r\n                  nbInput\r\n                  id=\"input-assignment-submission-date\"\r\n                  name=\"submissionDate\"\r\n                  formControlName=\"submissionDate\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    assignmentDetailsForm.get('submissionDate').touched\r\n                      ? assignmentDetailsForm.get('submissionDate').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    assignmentDetailsForm.get('submissionDate').invalid &&\r\n                    assignmentDetailsForm.get('submissionDate').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('submissionDate').errors?.required\"\r\n                  >\r\n                    Assignment Submission Date is required!\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n              <div class=\"form-control-group\">\r\n                <label class=\"label\" for=\"input-assignment-total-grades\">Total Grades:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  nbInput\r\n                  id=\"input-assignment-total-grades\"\r\n                  name=\"totalGrades\"\r\n                  min=\"0\"\r\n                  formControlName=\"totalGrades\"\r\n                  fullWidth\r\n                  [status]=\"\r\n                    assignmentDetailsForm.get('totalGrades').touched\r\n                      ? assignmentDetailsForm.get('totalGrades').invalid\r\n                        ? 'danger'\r\n                        : 'success'\r\n                      : 'basic'\r\n                  \"\r\n                />\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    assignmentDetailsForm.get('totalGrades').invalid &&\r\n                    assignmentDetailsForm.get('totalGrades').touched\r\n                  \"\r\n                >\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('totalGrades').errors?.required\"\r\n                  >\r\n                    Assignment Total Grades is required!\r\n                  </p>\r\n                  <p\r\n                    class=\"caption status-danger\"\r\n                    *ngIf=\"assignmentDetailsForm.get('totalGrades').errors?.min\"\r\n                  >\r\n                    Assignment Total Grades Should be more than 0\r\n                  </p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12 text-right\">\r\n              <button nbButton size=\"small\" type=\"submit\">\r\n                <span>Next</span>\r\n                <nb-icon icon=\"arrow-ios-forward-outline\"></nb-icon>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </nb-step>\r\n\r\n      <nb-step label=\"Submit\">\r\n        <div class=\"step-container\">\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table table-bordered\">\r\n              <tbody>\r\n                <tr>\r\n                  <th>Topic</th>\r\n                  <td>{{ assignmentDetailsForm.value.topic }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Subject</th>\r\n                  <td>{{ getSubjectName(assignmentDetailsForm.value.subject) }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Date</th>\r\n                  <td>{{ dateService.formatDate(assignmentDetailsForm.value.date) }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Submission Date</th>\r\n                  <td>{{ dateService.formatDate(assignmentDetailsForm.value.submissionDate) }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Total Grades</th>\r\n                  <td>{{ assignmentDetailsForm.value.totalGrades }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Description</th>\r\n                  <td>{{ assignmentDetailsForm.value.description }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>Attach File</th>\r\n                  <td>{{ uploadAssignment ? fileName : '--' }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-6 text-left\">\r\n              <button class=\"\" nbButton size=\"small\" nbStepperPrevious [disabled]=\"submit\">\r\n                <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\r\n                <span>prev</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6 text-right\">\r\n              <button\r\n                nbButton\r\n                size=\"small\"\r\n                (click)=\"saveAssignment()\"\r\n                [disabled]=\"submit\"\r\n                [nbSpinner]=\"submit\"\r\n                nbSpinnerStatus=\"primary\"\r\n                nbSpinnerSize=\"small\"\r\n              >\r\n                <span>Submit</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nb-step>\r\n    </nb-stepper>\r\n  </nb-card-body>\r\n</nb-card>\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { SaveAssignmentComponent } from './save-assignment.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SaveAssignmentComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SaveAssignmentRoutingModule {}\n","import { SubjectService } from './../../../../services/subject.service';\r\nimport { DateService } from './../../../../services/shared-services/date.service';\r\nimport { BatchModel } from './../../../../models/batch.model';\r\nimport { CategoryModel } from './../../../../models/branch.model';\r\nimport { BatchService } from './../../../../services/batch.service';\r\nimport { CourseService } from './../../../../services/course.service';\r\nimport { SubjectModel, CourseModel } from './../../../../models/course.model';\r\nimport { AssignmentModel } from './../../../../models/assignment.model';\r\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\r\nimport { NbToastrService, NbStepperComponent } from '@nebular/theme';\r\nimport { AssignmentService } from './../../../../services/assignment.service';\r\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport { BranchService } from './../../../../services/branch.service';\r\n\r\n@Component({\r\n  selector: 'ngx-save-assignment',\r\n  templateUrl: './save-assignment.component.html',\r\n  styleUrls: ['./save-assignment.component.scss'],\r\n})\r\nexport class SaveAssignmentComponent implements OnInit, OnDestroy {\r\n  @ViewChild('stepper', { static: false }) stepper: NbStepperComponent;\r\n  @ViewChild('filePicker') private fileInput: any;\r\n\r\n  loading: boolean;\r\n  submit: boolean;\r\n  private branchId: string;\r\n  private assignmentId: string;\r\n  assignment: AssignmentModel;\r\n\r\n  uploadAssignment: File;\r\n  fileName: string;\r\n  invalidFile: boolean;\r\n\r\n  batch: BatchModel;\r\n  course: CourseModel;\r\n  category: CategoryModel;\r\n\r\n  subjects: SubjectModel[];\r\n\r\n  assignmentDetailsForm: FormGroup;\r\n\r\n  constructor(\r\n    private branchService: BranchService,\r\n    private courseService: CourseService,\r\n    private batchService: BatchService,\r\n    private subjectService: SubjectService,\r\n    private assignmentService: AssignmentService,\r\n    public dateService: DateService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private toastrService: NbToastrService,\r\n  ) {\r\n    this.route.queryParams.subscribe((param: Params) => {\r\n      if (param.mode) {\r\n        this.ngOnInit();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true;\r\n    this.submit = false;\r\n\r\n    this.invalidFile = false;\r\n    this.fileName = null;\r\n    this.branchId = this.branchService.getBranchId();\r\n    if (!this.branchId) {\r\n      this.back();\r\n      return;\r\n    }\r\n\r\n    this.subjects = [];\r\n\r\n    this.branchService.getCategoryData().subscribe((category: CategoryModel) => {\r\n      this.category = category;\r\n    });\r\n\r\n    this.courseService.getCourseData().subscribe((course: CourseModel) => {\r\n      this.course = course;\r\n    });\r\n\r\n    this.batchService.getBatchData().subscribe((batch: BatchModel) => {\r\n      this.batch = batch;\r\n    });\r\n\r\n    this.subjectService.getSubjectsData().subscribe((subjects: SubjectModel[]) => {\r\n      this.subjects = subjects;\r\n    });\r\n\r\n    this.assignmentId = this.assignmentService.getAssignmentId();\r\n\r\n    let mode: string;\r\n\r\n    this.route.queryParams.subscribe((param: Params) => {\r\n      mode = param.mode;\r\n    });\r\n\r\n    if (mode && mode !== 'edit') {\r\n      this.showToastr('top-right', 'danger', 'Invalid Route');\r\n      this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n      return;\r\n    } else if (mode && !this.assignmentId) {\r\n      this.showToastr('top-right', 'danger', 'Assignment Not Available');\r\n      this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n      return;\r\n    }\r\n\r\n    this.assignmentDetailsForm = new FormGroup({\r\n      subject: new FormControl('', {\r\n        validators: [Validators.required],\r\n      }),\r\n      topic: new FormControl(null, {\r\n        validators: [Validators.required],\r\n      }),\r\n      date: new FormControl(this.dateService.getDateString(), {\r\n        validators: [Validators.required],\r\n      }),\r\n      submissionDate: new FormControl(null, {\r\n        validators: [Validators.required],\r\n      }),\r\n      totalGrades: new FormControl(null, {\r\n        validators: [Validators.required, Validators.min(0)],\r\n      }),\r\n      description: new FormControl(null, {\r\n        validators: [Validators.required],\r\n      }),\r\n    });\r\n\r\n    if (this.assignmentId) {\r\n      this.assignmentService\r\n        .getAssignment(this.assignmentId)\r\n        .subscribe((assignment: AssignmentModel) => {\r\n          if (!assignment) {\r\n            this.router.navigate(['../page-not-found'], { relativeTo: this.route });\r\n            return;\r\n          }\r\n          this.assignment = assignment;\r\n\r\n          this.assignmentDetailsForm.patchValue({\r\n            subject: assignment.subject,\r\n            topic: assignment.topic,\r\n            date: assignment.date,\r\n            submissionDate: assignment.submissionDate,\r\n            totalGrades: assignment.totalGrades,\r\n            description: assignment.description,\r\n          });\r\n\r\n          this.fileName = assignment.fileName;\r\n\r\n          this.loading = false;\r\n        });\r\n    } else {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  onFilePicked(event: Event) {\r\n    this.invalidFile = false;\r\n    const files = (event.target as HTMLInputElement).files;\r\n    const fileExt: string[] = ['pdf', 'jpg', 'png', 'jpeg', 'mp4'];\r\n    let ext: string = null;\r\n    ext = files[0].name.substring(files[0].name.lastIndexOf('.') + 1).toLowerCase();\r\n    if (!(fileExt.indexOf(ext) !== -1)) {\r\n      this.invalidFile = true;\r\n      this.fileName = files[0].name;\r\n      this.fileInput.nativeElement.value = '';\r\n      return;\r\n    }\r\n    this.invalidFile = false;\r\n    this.uploadAssignment = files[0];\r\n    this.fileName = files[0].name;\r\n    this.fileInput.nativeElement.value = '';\r\n  }\r\n\r\n  clearFile() {\r\n    this.uploadAssignment = null;\r\n    this.fileName = null;\r\n    this.fileInput.nativeElement.value = '';\r\n    this.invalidFile = false;\r\n  }\r\n\r\n  submitAssignmentDetails() {\r\n    this.assignmentDetailsForm.markAllAsTouched();\r\n    if (this.assignmentDetailsForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'Assignment details are required');\r\n      return;\r\n    } else if (this.invalidFile) {\r\n      this.showToastr('top-right', 'danger', 'Select Valid File');\r\n      return;\r\n    }\r\n    this.stepper.next();\r\n  }\r\n\r\n  saveAssignment() {\r\n    this.assignmentDetailsForm.markAllAsTouched();\r\n\r\n    if (this.assignmentDetailsForm.invalid) {\r\n      this.showToastr('top-right', 'danger', 'Assignment details are required');\r\n      return;\r\n    } else if (this.invalidFile) {\r\n      this.showToastr('top-right', 'danger', 'Select Valid File');\r\n      return;\r\n    }\r\n\r\n    this.submit = true;\r\n\r\n    const assignment = new FormData();\r\n\r\n    assignment.append('branch', this.branchId);\r\n    assignment.append('category', this.course.basicDetails.category);\r\n    assignment.append('course', this.course._id);\r\n    assignment.append('batch', this.batch._id);\r\n    assignment.append('subject', this.assignmentDetailsForm.value.subject);\r\n    assignment.append('topic', this.assignmentDetailsForm.value.topic);\r\n    assignment.append('date', this.assignmentDetailsForm.value.date);\r\n    assignment.append('description', this.assignmentDetailsForm.value.description);\r\n    assignment.append('submissionDate', this.assignmentDetailsForm.value.submissionDate);\r\n    assignment.append('totalGrades', this.assignmentDetailsForm.value.totalGrades);\r\n\r\n    if (this.uploadAssignment) {\r\n      assignment.append(\r\n        'assignment',\r\n        this.uploadAssignment,\r\n        this.uploadAssignment.name.substring(0, this.uploadAssignment.name.lastIndexOf('.')),\r\n      );\r\n    }\r\n\r\n    if (!this.assignment) {\r\n      this.assignmentService.saveAssignment(assignment).subscribe(\r\n        (res: any) => {\r\n          this.showToastr('top-right', 'success', 'New Assignment Added Successfully!');\r\n          this.router.navigate(['../manage'], { relativeTo: this.route });\r\n        },\r\n        (error: any) => {\r\n          this.showToastr('top-right', 'danger', error);\r\n          this.submit = false;\r\n        },\r\n      );\r\n    } else {\r\n      assignment.append('_id', this.assignment._id);\r\n\r\n      this.assignmentService.updateAssignment(assignment).subscribe(\r\n        (res: any) => {\r\n          this.showToastr('top-right', 'success', 'Assignment Updated Successfully!');\r\n          this.router.navigate(['../manage'], { relativeTo: this.route });\r\n        },\r\n        (error: any) => {\r\n          this.showToastr('top-right', 'danger', error);\r\n          this.submit = false;\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  getSubjectName(id: string) {\r\n    const subject = this.subjects.find((curSubject: SubjectModel) => curSubject._id === id);\r\n    if (subject) {\r\n      return subject.subject;\r\n    }\r\n\r\n    return '--';\r\n  }\r\n\r\n  private showToastr(position: any, status: any, message: string) {\r\n    this.toastrService.show(status, message, {\r\n      position,\r\n      status,\r\n    });\r\n  }\r\n\r\n  back() {\r\n    this.router.navigate(['../manage'], { relativeTo: this.route, replaceUrl: true });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.assignmentService.deleteAssignmentId();\r\n  }\r\n}\r\n","import { ReactiveFormsModule } from '@angular/forms';\nimport {\n  NbCardModule,\n  NbButtonModule,\n  NbSelectModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbInputModule,\n  NbTooltipModule,\n  NbFormFieldModule,\n  NbStepperModule,\n} from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SaveAssignmentRoutingModule } from './save-assignment-routing.module';\nimport { SaveAssignmentComponent } from './save-assignment.component';\n\n@NgModule({\n  declarations: [SaveAssignmentComponent],\n  imports: [\n    CommonModule,\n    SaveAssignmentRoutingModule,\n    NbFormFieldModule,\n    NbCardModule,\n    NbButtonModule,\n    NbSelectModule,\n    NbSpinnerModule,\n    NbIconModule,\n    NbInputModule,\n    NbTooltipModule,\n    NbStepperModule,\n    ReactiveFormsModule,\n  ],\n})\nexport class SaveAssignmentModule {}\n"]}