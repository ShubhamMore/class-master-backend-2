(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{vzPq:function(e,t,n){"use strict";n.r(t),n.d(t,"AddOnlineTestQuestionsModule",(function(){return y}));var i=n("3Pt+"),r=n("ofXK"),o=n("fXoL"),a=n("EQut"),s=n("gmaa"),l=n("RSY0"),m=n("ZatZ"),d=n("aceb"),u=n("tyNb");const c=["stepper"];function p(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",28),o["\u0275\u0275text"](1," Online Exam Question is required! "),o["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,p,2,0,"p",27),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.onlineExamQuestionForm.get("question").errors?null:e.onlineExamQuestionForm.get("question").errors.required)}}function E(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",33),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"]().deleteOption(t)})),o["\u0275\u0275element"](1,"nb-icon",34),o["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",28),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Answer ",e+1," is required! ")}}function b(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,x,2,1,"p",27),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.get("answer").errors?null:e.get("answer").errors.required)}}function v(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275elementStart"](1,"nb-card",29),o["\u0275\u0275elementStart"](2,"nb-card-header"),o["\u0275\u0275elementStart"](3,"div",0),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275template"](5,E,2,0,"button",30),o["\u0275\u0275elementStart"](6,"nb-checkbox",31),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"nb-card-body"),o["\u0275\u0275elementStart"](9,"div",11),o["\u0275\u0275element"](10,"textarea",32),o["\u0275\u0275template"](11,b,2,1,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",e),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",0!==n&&1!==n),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",e.get("isCorrect").value),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Answer ",n+1," "),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate1"]("id","input-answer-",n,""),o["\u0275\u0275propertyInterpolate1"]("name","answer-",n,""),o["\u0275\u0275propertyInterpolate1"]("placeholder","Answer ",n+1,""),o["\u0275\u0275property"]("status",e.get("answer").touched?e.get("answer").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.get("answer").invalid&&e.get("answer").touched)}}function g(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",28),o["\u0275\u0275text"](1," *Please Select at least One Correct Answer "),o["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,g,2,0,"p",27),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.onlineExamQuestionForm.hasError("atLeastOneCorrectAnswerError")&&e.onlineExamQuestionForm.touched)}}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"th"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275element"](4,"nb-icon",35),o["\u0275\u0275text"](5," \xa0\xa0 "),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("Answer ",n+1,""),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("status",e.value.isCorrect?"success":"danger")("icon",e.value.isCorrect?"checkmark-outline":"close-outline"),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.value.answer)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,o,a){this.branchService=e,this.onlineExamQuestionService=t,this.onlineExamService=n,this.dateService=i,this.toastrService=r,this.router=o,this.route=a}ngOnInit(){this.loading=!0,this.submit=!1,this.branchId=this.branchService.getBranchId(),this.branchId?this.onlineExamService.getOnlineExamData().subscribe(e=>{if(!e)return void this.back();let t;this.onlineExam=e,this.route.queryParams.subscribe(e=>{t=e.mode}),this.onlineExamQuestionId=this.onlineExamQuestionService.getOnlineExamQuestionId(),t&&"edit"!==t?this.showToastr("top-right","danger","Invalid Route"):!t||this.onlineExamQuestionId?(this.onlineExamQuestionForm=new i.f({question:new i.d(null,{validators:[i.u.required]}),answers:new i.b([]),marks:new i.d(this.onlineExam.eachQuestionMarks,{validators:[i.u.required]})},{validators:this.atLeastOneCorrectAnswerValidator.bind(this)}),t&&this.onlineExamQuestionId?this.onlineExamQuestionService.getOnlineExamQuestion(this.onlineExamQuestionId).subscribe(e=>{this.onlineExamQuestion=e,this.onlineExamQuestionForm.patchValue({question:this.onlineExamQuestion.question,marks:this.onlineExamQuestion.marks}),this.onlineExamQuestionForm.get("answers").controls=[],this.onlineExamQuestion.answers.forEach(e=>{this.addOption(e)}),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.back(),this.loading=!1}):(this.generateOption(),this.generateOption(),this.loading=!1)):this.showToastr("top-right","danger","Online Exam Question Not Found")}):this.router.navigate(["../"],{relativeTo:this.route})}atLeastOneCorrectAnswerValidator(e){let t=!1;return e.value.answers.forEach(e=>{e.isCorrect&&(t=!0)}),t?null:{atLeastOneCorrectAnswerError:!0}}newAnswer(e){return new i.f({answer:new i.d(e.answer?e.answer:null,{validators:[i.u.required]}),isCorrect:new i.d(e.isCorrect,{validators:[]})})}addOption(e){this.onlineExamQuestionForm.get("answers").push(this.newAnswer(e))}generateOption(){this.addOption({answer:"",isCorrect:!1})}deleteOption(e){0!==e&&1!==e&&this.onlineExamQuestionForm.get("answers").removeAt(e)}previousStep(){this.stepper.previous()}submitOnlineExamQuestionForm(){this.onlineExamQuestionForm.markAllAsTouched(),this.onlineExamQuestionForm.invalid?this.showToastr("top-right","danger","All Online Exam Question are Required"):this.stepper.next()}saveOnlineExamQuestion(){if(this.onlineExamQuestionForm.markAllAsTouched(),this.onlineExamQuestionForm.invalid)return void this.showToastr("top-right","danger","All Online Exam Question Fields are Required");this.submit=!0;const e=this.onlineExamQuestionForm.value;e.onlineExam=this.onlineExam._id,this.onlineExamQuestion?(e._id=this.onlineExamQuestion._id,this.onlineExamQuestionService.editOnlineExamQuestion(e).subscribe(e=>{this.showToastr("top-right","success","New Question Added Successfully"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})):this.onlineExamQuestionService.newOnlineExamQuestion(e).subscribe(e=>{this.showToastr("top-right","success","New Question Added Successfully"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}back(){this.router.navigate(["../"],{relativeTo:this.route,replaceUrl:!0})}ngOnDestroy(){this.onlineExamQuestionService.deleteOnlineExamQuestionId(),this.onlineExamQuestionService.deleteOnlineExamQuestionData()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](d.Gb),o["\u0275\u0275directiveInject"](u.c),o["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-online-test-questions"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](c,!0),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.stepper=n.first)},decls:62,vars:14,consts:[[1,"row"],[1,"col-9"],[1,"col-3"],["nbButton","","size","small","status","warning",1,"float-right",3,"click"],[1,"col-12"],[3,"linear","disableStepNavigation"],["stepper",""],["label","Online Exam Details",3,"stepControl"],[3,"formGroup","submit"],[1,"col-md-12"],["for","input-question",1,"label"],[1,"form-control-group"],["type","text","nbInput","","id","input-question","name","question","rows","2","formControlName","question","placeholder","Question","fullWidth","",3,"status"],[4,"ngIf"],["class","col-md-12",4,"ngFor","ngForOf"],["type","button","nbButton","","size","small","status","primary",1,"float-right",3,"click"],["type","submit","nbButton","","size","small","status","basic",1,"float-right"],["label","Submit"],[1,"step-container"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"col-md-6","text-left"],["type","button","nbButton","","size","small",1,"",3,"disabled","click"],["icon","arrow-ios-back-outline"],[1,"col-md-6","text-right"],["nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner","click"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[3,"formGroup"],["class","float-right","type","button","nbButton","","size","small","status","danger",3,"click",4,"ngIf"],["formControlName","isCorrect",3,"checked"],["type","text","nbInput","","rows","2","formControlName","answer","fullWidth","",3,"id","name","placeholder","status"],["type","button","nbButton","","size","small","status","danger",1,"float-right",3,"click"],["icon","trash-outline"],[3,"status","icon"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"div",0),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275elementStart"](4,"h3"),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275elementStart"](7,"button",3),o["\u0275\u0275listener"]("click",(function(){return t.back()})),o["\u0275\u0275text"](8," Back "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nb-card-body"),o["\u0275\u0275elementStart"](10,"div",0),o["\u0275\u0275elementStart"](11,"div",4),o["\u0275\u0275elementStart"](12,"nb-stepper",5,6),o["\u0275\u0275elementStart"](14,"nb-step",7),o["\u0275\u0275elementStart"](15,"form",8),o["\u0275\u0275listener"]("submit",(function(){return t.submitOnlineExamQuestionForm()})),o["\u0275\u0275elementStart"](16,"div",0),o["\u0275\u0275elementStart"](17,"div",9),o["\u0275\u0275elementStart"](18,"nb-card"),o["\u0275\u0275elementStart"](19,"nb-card-header"),o["\u0275\u0275elementStart"](20,"label",10),o["\u0275\u0275text"](21,"Question:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"nb-card-body"),o["\u0275\u0275elementStart"](23,"div",11),o["\u0275\u0275element"](24,"textarea",12),o["\u0275\u0275template"](25,h,2,1,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](26,v,12,9,"div",14),o["\u0275\u0275elementStart"](27,"div",9),o["\u0275\u0275elementStart"](28,"button",15),o["\u0275\u0275listener"]("click",(function(){return t.generateOption()})),o["\u0275\u0275text"](29," Add Option "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div",4),o["\u0275\u0275template"](31,S,2,1,"ng-container",13),o["\u0275\u0275elementStart"](32,"p"),o["\u0275\u0275elementStart"](33,"strong"),o["\u0275\u0275text"](34,"*For correct answers, Tick the checkbox"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](35,"hr"),o["\u0275\u0275elementStart"](36,"div",0),o["\u0275\u0275elementStart"](37,"div",4),o["\u0275\u0275elementStart"](38,"button",16),o["\u0275\u0275text"](39," Next "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"nb-step",17),o["\u0275\u0275elementStart"](41,"div",18),o["\u0275\u0275elementStart"](42,"div",19),o["\u0275\u0275elementStart"](43,"table",20),o["\u0275\u0275elementStart"](44,"tbody"),o["\u0275\u0275elementStart"](45,"tr"),o["\u0275\u0275elementStart"](46,"th"),o["\u0275\u0275text"](47,"Online Exam Question"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"td"),o["\u0275\u0275text"](49),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](50,f,8,4,"tr",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](51,"hr"),o["\u0275\u0275elementStart"](52,"div",0),o["\u0275\u0275elementStart"](53,"div",22),o["\u0275\u0275elementStart"](54,"button",23),o["\u0275\u0275listener"]("click",(function(){return t.previousStep()})),o["\u0275\u0275element"](55,"nb-icon",24),o["\u0275\u0275elementStart"](56,"span"),o["\u0275\u0275text"](57,"prev"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](58,"div",25),o["\u0275\u0275elementStart"](59,"button",26),o["\u0275\u0275listener"]("click",(function(){return t.saveOnlineExamQuestion()})),o["\u0275\u0275elementStart"](60,"span"),o["\u0275\u0275text"](61,"Submit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"]("",t.onlineExam?"Edit":"Add"," Online Exam Question"),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("linear",!0)("disableStepNavigation",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("stepControl",t.onlineExamQuestionForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.onlineExamQuestionForm),o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("status",t.onlineExamQuestionForm.get("question").touched?t.onlineExamQuestionForm.get("question").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.onlineExamQuestionForm.get("question").invalid&&t.onlineExamQuestionForm.get("question").touched),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.onlineExamQuestionForm.get("answers").controls),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",t.onlineExamQuestionForm.hasError("atLeastOneCorrectAnswerError")&&t.onlineExamQuestionForm.touched),o["\u0275\u0275advance"](18),o["\u0275\u0275textInterpolate"](t.onlineExamQuestionForm.value.question),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.onlineExamQuestionForm.get("answers").controls),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.submit),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit))},directives:[d.y,d.A,d.v,d.x,d.vb,d.ub,i.v,i.n,i.g,d.Q,i.a,i.m,i.e,r.n,r.m,d.N,d.sb,d.D],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let Q=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[u.g.forChild(w)],u.g]}),e})(),y=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,Q,d.R,d.w,d.B,d.tb,d.wb,d.ob,d.P,d.E,i.s]]}),e})()}}]);
//# sourceMappingURL=11-es2015.e9382b71ee6295a662aa.js.map