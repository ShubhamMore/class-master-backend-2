{"version":3,"sources":["webpack:///src/app/employee/branch/dashboard/dashboard.component.html","webpack:///src/app/employee/branch/dashboard/dashboard-routing.module.ts","webpack:///src/app/employee/branch/dashboard/dashboard.component.ts","webpack:///src/app/employee/branch/dashboard/dashboard.module.ts"],"names":["DashboardComponent","DashboardModule","DashboardRoutingModule","routes","path","component","branchService","dashboardService","toastrService","storageService","router","route","dateService","budgetService","menuService","themeService","this","loading","branchId","getBranchId","currentYear","getCurrentYear","year","getDashboardData","getBudgetData","themeSubscription","getJsTheme","subscribe","config","colors","variables","chartjs","options","maintainAspectRatio","responsive","legend","labels","fontColor","textColor","scales","xAxes","gridLines","display","color","axisLineColor","ticks","yAxes","back","branchStorage","totalStorage","convertByteToUnit","totalStorageAssigned","usedStorage","totalStorageUsed","availableStorage","value","toFixed","unit","usedStorageInPercentage","parseInt","getBranchDashboard","dashboardInfo","calculateStorage","showMenus","error","showToastr","navigate","relativeTo","queryParams","type","getBudgetForBranchDashboard","toString","budget","setBarChartData","income","expense","i","inc","find","curIncome","_id","push","amount","exp","curExpense","data","datasets","label","backgroundColor","warningLight","dangerLight","position","status","message","show","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","forChild","ChartModule"],"mappings":"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","file":"x","sourcesContent":["<div class=\"row\" *ngIf=\"!loading\">\r\n  <div class=\"col-md-4 col-sm-6 col-12\">\r\n    <nb-card status=\"warning\">\r\n      <nb-card-header>\r\n        <button\r\n          class=\"float-right text-white\"\r\n          nbButton\r\n          size=\"small\"\r\n          outline\r\n          status=\"warning\"\r\n          nbTooltip=\"Add Course\"\r\n          shape=\"round\"\r\n          (click)=\"addCourse()\"\r\n        >\r\n          <nb-icon icon=\"plus\"></nb-icon>\r\n        </button>\r\n        <h3 class=\"text-white\"><span class=\"pointer\" (click)=\"manageCourse()\">Course</span></h3>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <nb-actions size=\"giant\" fullWidth>\r\n          <nb-action>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <h4 class=\"text-center\">{{ dashboardInfo.activeCourses }}</h4>\r\n                <h6>Active</h6>\r\n              </div>\r\n            </div>\r\n          </nb-action>\r\n          <nb-action>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <h4 class=\"text-center\">{{ dashboardInfo.inactiveCourses }}</h4>\r\n                <h6>Inactive</h6>\r\n              </div>\r\n            </div>\r\n          </nb-action>\r\n        </nb-actions>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n\r\n  <div class=\"col-md-4 col-sm-6 col-12\">\r\n    <nb-card status=\"success\">\r\n      <nb-card-header>\r\n        <button\r\n          class=\"float-right text-white\"\r\n          nbButton\r\n          size=\"small\"\r\n          outline\r\n          status=\"success\"\r\n          nbTooltip=\"Add Student\"\r\n          shape=\"round\"\r\n          (click)=\"addStudent()\"\r\n        >\r\n          <nb-icon icon=\"plus\"></nb-icon>\r\n        </button>\r\n        <h3 class=\"text-white\"><span class=\"pointer\" (click)=\"manageStudent()\">Student</span></h3>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <nb-actions size=\"giant\" fullWidth>\r\n          <nb-action>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <h4 class=\"text-center\">{{ dashboardInfo.activeStudents }}</h4>\r\n                <h6>Active</h6>\r\n              </div>\r\n            </div>\r\n          </nb-action>\r\n          <nb-action>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <h4 class=\"text-center\">{{ dashboardInfo.inactiveStudents }}</h4>\r\n                <h6>Inactive</h6>\r\n              </div>\r\n            </div>\r\n          </nb-action>\r\n        </nb-actions>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n\r\n  <div class=\"col-md-4 col-sm-6 col-12\">\r\n    <nb-card status=\"danger\">\r\n      <nb-card-header>\r\n        <button\r\n          class=\"float-right text-white\"\r\n          nbButton\r\n          size=\"small\"\r\n          outline\r\n          status=\"danger\"\r\n          nbTooltip=\"Add Employee\"\r\n          shape=\"round\"\r\n          (click)=\"addEmployee()\"\r\n        >\r\n          <nb-icon icon=\"plus\"></nb-icon>\r\n        </button>\r\n        <h3 class=\"text-white\"><span class=\"pointer\" (click)=\"manageEmployee()\">Employee</span></h3>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <nb-actions size=\"giant\" fullWidth>\r\n          <nb-action>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <h4 class=\"text-center\">{{ dashboardInfo.activeEmployees }}</h4>\r\n                <h6>Active</h6>\r\n              </div>\r\n            </div>\r\n          </nb-action>\r\n          <nb-action>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <h4 class=\"text-center\">{{ dashboardInfo.inactiveEmployees }}</h4>\r\n                <h6>Inactive</h6>\r\n              </div>\r\n            </div>\r\n          </nb-action>\r\n        </nb-actions>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n\r\n  <div class=\"col-md-5 col-sm-6 col-12\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <nb-card status=\"info\">\r\n          <nb-card-header>\r\n            <button\r\n              class=\"float-right text-white\"\r\n              nbButton\r\n              size=\"small\"\r\n              outline\r\n              status=\"info\"\r\n              nbTooltip=\"Add Lead\"\r\n              shape=\"round\"\r\n              (click)=\"addLead()\"\r\n            >\r\n              <nb-icon icon=\"plus\"></nb-icon>\r\n            </button>\r\n            <h3 class=\"text-white\"><span class=\"pointer\" (click)=\"manageLead()\">Lead</span></h3>\r\n          </nb-card-header>\r\n          <nb-card-body>\r\n            <nb-actions size=\"giant\" fullWidth>\r\n              <nb-action>\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <h4 class=\"text-center\">{{ dashboardInfo.wonLeads }}</h4>\r\n                    <h6>Won</h6>\r\n                  </div>\r\n                </div>\r\n              </nb-action>\r\n              <nb-action>\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <h4 class=\"text-center\">{{ dashboardInfo.openLeads }}</h4>\r\n                    <h6>Open</h6>\r\n                  </div>\r\n                </div>\r\n              </nb-action>\r\n              <nb-action>\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <h4 class=\"text-center\">{{ dashboardInfo.lostLeads }}</h4>\r\n                    <h6>Lost</h6>\r\n                  </div>\r\n                </div>\r\n              </nb-action>\r\n            </nb-actions>\r\n          </nb-card-body>\r\n        </nb-card>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <nb-card>\r\n          <nb-card-header>\r\n            <h3>Branch Storage</h3>\r\n          </nb-card-header>\r\n          <nb-card-body>\r\n            <div class=\"progress-info\">\r\n              <h4>\r\n                {{ availableStorage }} <small>left of {{ totalStorage }}</small>\r\n              </h4>\r\n              <nb-progress-bar\r\n                [value]=\"usedStorageInPercentage\"\r\n                status=\"danger\"\r\n                [displayValue]=\"true\"\r\n              >\r\n                <span *ngIf=\"usedStorageInPercentage >= 25\">&nbsp;Used</span>\r\n              </nb-progress-bar>\r\n              <div class=\"caption description\">\r\n                <bdi>{{ usedStorage }} Used</bdi>\r\n              </div>\r\n            </div>\r\n          </nb-card-body>\r\n        </nb-card>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <nb-card status=\"\">\r\n          <nb-card-header>\r\n            <button\r\n              class=\"float-right\"\r\n              nbButton size=\"small\"  \r\n              outline\r\n\r\n              status=\"danger\"\r\n              nbTooltip=\"Manage Class Schedule\"\r\n              shape=\"round\"\r\n              (click)=\"manageClassSchedule()\"\r\n            >\r\n              <nb-icon icon=\"arrow-forward\"></nb-icon>\r\n            </button>\r\n            <h3 class=\"\">\r\n              <span class=\"pointer text-danger\" (click)=\"manageClassSchedule()\"\r\n                >Manage Class Schedule</span\r\n              >\r\n            </h3>\r\n          </nb-card-header>\r\n        </nb-card>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <nb-card status=\"\">\r\n          <nb-card-header>\r\n            <button\r\n              class=\"float-right\"\r\n              nbButton size=\"small\"  \r\n              outline\r\n\r\n              status=\"success\"\r\n              nbTooltip=\"Manage Reports\"\r\n              shape=\"round\"\r\n              (click)=\"manageStudentReports()\"\r\n            >\r\n              <nb-icon icon=\"arrow-forward\"></nb-icon>\r\n            </button>\r\n            <h3 class=\"\">\r\n              <span class=\"pointer text-success\" (click)=\"manageStudentReports()\"\r\n                >Manage Reports</span\r\n              >\r\n            </h3>\r\n          </nb-card-header>\r\n        </nb-card>\r\n      </div>\r\n    </div> -->\r\n  </div>\r\n\r\n  <div class=\"col-md-7 col-sm-6 col-12\">\r\n    <nb-card>\r\n      <nb-card-header>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-8 col-sm-7 col-12\">\r\n            <h3><span class=\"pointer\" (click)=\"manageBudget()\">Budget</span></h3>\r\n          </div>\r\n          <div class=\"col-md-4 col-sm-5 col-12\">\r\n            <div class=\"btn-group\">\r\n              <button\r\n                nbButton\r\n                size=\"small\"\r\n                status=\"primary\"\r\n                nbTooltip=\"Previous Year\"\r\n                (click)=\"previousYear()\"\r\n                *ngIf=\"year > 2018\"\r\n              >\r\n                <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\r\n              </button>\r\n              <button type=\"button\" nbButton size=\"small\">\r\n                <strong>{{ year }}</strong>\r\n              </button>\r\n              <button\r\n                nbButton\r\n                size=\"small\"\r\n                status=\"primary\"\r\n                nbTooltip=\"Next Year\"\r\n                (click)=\"nextYear()\"\r\n                *ngIf=\"year < currentYear\"\r\n              >\r\n                <nb-icon icon=\"arrow-ios-forward-outline\"></nb-icon>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <chart class=\"bar-chart\" type=\"bar\" [data]=\"data\" [options]=\"options\"></chart>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n</div>\r\n","import { DashboardComponent } from './dashboard.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DashboardComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DashboardRoutingModule {}\n","import { MenuService } from './../../menu.service';\nimport { BranchStorageModel } from '../../../models/branch-storage.model';\nimport { StorageService } from './../../../services/shared-services/storage.service';\nimport { BudgetService } from './../../../services/budget.service';\nimport { DateService } from './../../../services/shared-services/date.service';\nimport { NbToastrService, NbThemeService } from '@nebular/theme';\nimport { DashboardService } from './../../../services/dashboard.service';\nimport { BranchService } from './../../../services/branch.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\ninterface DashboardInfo {\n  branchStorage: BranchStorageModel;\n  activeCourses: number;\n  inactiveCourses: number;\n  activeStudents: number;\n  inactiveStudents: number;\n  activeEmployees: number;\n  inactiveEmployees: number;\n  openLeads: number;\n  lostLeads: number;\n  wonLeads: number;\n}\n\ninterface Budget {\n  income: { _id: number; amount: number }[];\n  expense: { _id: number; amount: number }[];\n}\n\n@Component({\n  selector: 'ngx-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss'],\n})\nexport class DashboardComponent implements OnInit {\n  loading: boolean;\n  branchId: string;\n  dashboardInfo: DashboardInfo;\n\n  currentYear: number;\n  year: number;\n\n  data: any;\n  options: any;\n  themeSubscription: any;\n  colors: any;\n\n  totalStorage: string;\n  usedStorage: string;\n  availableStorage: string;\n  usedStorageInPercentage: number;\n\n  constructor(\n    private branchService: BranchService,\n    private dashboardService: DashboardService,\n    private toastrService: NbToastrService,\n    private storageService: StorageService,\n    private router: Router,\n    private route: ActivatedRoute,\n    public dateService: DateService,\n    public budgetService: BudgetService,\n    private menuService: MenuService,\n    private themeService: NbThemeService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.back();\n      return;\n    }\n    this.currentYear = +this.dateService.getCurrentYear();\n    this.year = +this.dateService.getCurrentYear();\n    this.getDashboardData();\n    this.getBudgetData();\n\n    this.themeSubscription = this.themeService.getJsTheme().subscribe((config: any) => {\n      this.colors = config.variables;\n      const chartjs: any = config.variables.chartjs;\n\n      this.options = {\n        maintainAspectRatio: false,\n        responsive: true,\n        legend: {\n          labels: {\n            fontColor: chartjs.textColor,\n          },\n        },\n        scales: {\n          xAxes: [\n            {\n              gridLines: {\n                display: false,\n                color: chartjs.axisLineColor,\n              },\n              ticks: {\n                fontColor: chartjs.textColor,\n              },\n            },\n          ],\n          yAxes: [\n            {\n              gridLines: {\n                display: true,\n                color: chartjs.axisLineColor,\n              },\n              ticks: {\n                fontColor: chartjs.textColor,\n              },\n            },\n          ],\n        },\n      };\n    });\n  }\n\n  calculateStorage(branchStorage: BranchStorageModel) {\n    const totalStorage: any = this.storageService.convertByteToUnit(\n      branchStorage.totalStorageAssigned,\n    );\n    const usedStorage: any = this.storageService.convertByteToUnit(branchStorage.totalStorageUsed);\n\n    const availableStorage: any = this.storageService.convertByteToUnit(\n      branchStorage.totalStorageAssigned - branchStorage.totalStorageUsed,\n    );\n\n    this.totalStorage = totalStorage.value.toFixed(1) + ' ' + totalStorage.unit;\n    this.usedStorage = usedStorage.value.toFixed(1) + ' ' + usedStorage.unit;\n    this.availableStorage = availableStorage.value.toFixed(1) + ' ' + availableStorage.unit;\n\n    // tslint:disable-next-line: radix\n    this.usedStorageInPercentage = parseInt(\n      ((branchStorage.totalStorageUsed * 100) / branchStorage.totalStorageAssigned).toFixed(1),\n    );\n  }\n\n  getDashboardData() {\n    this.dashboardService.getBranchDashboard(this.branchId).subscribe(\n      (dashboardInfo: DashboardInfo) => {\n        this.dashboardInfo = dashboardInfo;\n        this.calculateStorage(dashboardInfo.branchStorage);\n        this.menuService.showMenus();\n        this.loading = false;\n      },\n      (error: any) => {\n        this.showToastr('top-right', 'danger', error);\n        this.router.navigate(['../../'], { relativeTo: this.route });\n      },\n    );\n  }\n\n  addStudent() {\n    this.router.navigate(['../student/add'], { relativeTo: this.route });\n  }\n\n  manageStudent() {\n    this.router.navigate(['../student'], {\n      relativeTo: this.route,\n      queryParams: { type: 'active' },\n    });\n  }\n\n  addEmployee() {\n    this.router.navigate(['../employee/add'], { relativeTo: this.route });\n  }\n\n  manageEmployee() {\n    this.router.navigate(['../employee'], {\n      relativeTo: this.route,\n      queryParams: { type: 'active' },\n    });\n  }\n\n  addCourse() {\n    this.router.navigate(['../manage-branch/course/add'], { relativeTo: this.route });\n  }\n\n  manageCourse() {\n    this.router.navigate(['../manage-branch/course'], { relativeTo: this.route });\n  }\n\n  addLead() {\n    this.router.navigate(['../lead/add'], { relativeTo: this.route });\n  }\n\n  manageLead() {\n    this.router.navigate(['../lead'], { relativeTo: this.route, queryParams: { type: 'active' } });\n  }\n\n  manageBudget() {\n    this.router.navigate(['../budget'], { relativeTo: this.route });\n  }\n\n  manageClassSchedule() {\n    this.router.navigate(['../schedule'], { relativeTo: this.route });\n  }\n\n  manageStudentReports() {\n    this.router.navigate(['../students-report'], { relativeTo: this.route });\n  }\n\n  previousYear() {\n    if (this.year >= 2018) {\n      this.year--;\n      this.getBudgetData();\n    }\n  }\n\n  nextYear() {\n    if (this.year <= this.currentYear) {\n      this.year++;\n      this.getBudgetData();\n    }\n  }\n\n  getBudgetData() {\n    this.budgetService.getBudgetForBranchDashboard(this.branchId, this.year.toString()).subscribe(\n      (budget: Budget) => {\n        this.setBarChartData(budget);\n      },\n      (error: any) => {\n        this.showToastr('top-right', 'danger', error);\n      },\n    );\n  }\n\n  setBarChartData(budget: Budget) {\n    const income: number[] = [];\n    const expense: number[] = [];\n\n    for (let i = 0; i < 12; i++) {\n      // Income\n      const inc = budget.income.find((curIncome: any) => curIncome._id === i + 1);\n      if (inc) {\n        income.push(inc.amount);\n      } else {\n        income.push(0);\n      }\n\n      // Expense\n      const exp = budget.expense.find((curExpense: any) => curExpense._id === i + 1);\n      if (exp) {\n        expense.push(exp.amount);\n      } else {\n        expense.push(0);\n      }\n    }\n\n    this.data = {\n      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n      datasets: [\n        {\n          data: income,\n          label: 'Income',\n          backgroundColor: this.colors.warningLight,\n        },\n        {\n          data: expense,\n          label: 'Expense',\n          backgroundColor: this.colors.dangerLight,\n        },\n      ],\n    };\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route });\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import { ChartModule } from 'angular2-chartjs';\n\nimport {\n  NbCardModule,\n  NbActionsModule,\n  NbButtonModule,\n  NbTooltipModule,\n  NbIconModule,\n  NbProgressBarModule,\n} from '@nebular/theme';\nimport { DashboardComponent } from './dashboard.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DashboardRoutingModule } from './dashboard-routing.module';\n\n@NgModule({\n  declarations: [DashboardComponent],\n  imports: [\n    CommonModule,\n    NbActionsModule,\n    ChartModule,\n    DashboardRoutingModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbTooltipModule,\n    NbProgressBarModule,\n  ],\n})\nexport class DashboardModule {}\n"]}