(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{"7bFp":function(e,t,i){"use strict";i.r(t);var c=i("aceb"),n=i("ofXK"),s=i("tyNb"),a=i("FYcy"),l=i("IAlr"),o=i("EQut"),b=i("fXoL");const r=["filePicker"];function u(e,t){if(1&e&&(b.Wb(0,"nb-option",20),b.Cc(1),b.Vb()),2&e){const e=t.$implicit;b.mc("value",e._id),b.Eb(1),b.Dc(e.subject)}}function d(e,t){if(1&e){const e=b.Xb();b.Wb(0,"nb-select",17),b.ec("selectedChange",(function(t){return b.uc(e),b.gc(2).onSelectSubject(t)})),b.Wb(1,"nb-option",18),b.Cc(2,"Select Subject"),b.Vb(),b.Ac(3,u,2,2,"nb-option",19),b.Vb()}if(2&e){const e=b.gc(2);b.mc("selected",e.subject)("status",e.invalidSubject?""===e.subject?"danger":"success":"basic"),b.Eb(3),b.mc("ngForOf",e.course.subjects)}}function h(e,t){1&e&&(b.Wb(0,"p",22),b.Cc(1," Subject is required! "),b.Vb())}function p(e,t){if(1&e&&(b.Ub(0),b.Ac(1,h,2,0,"p",21),b.Tb()),2&e){const e=b.gc(2);b.Eb(1),b.mc("ngIf",""===e.subject)}}function f(e,t){1&e&&(b.Ub(0),b.Wb(1,"p",22),b.Cc(2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),b.Vb(),b.Tb())}function g(e,t){if(1&e){const e=b.Xb();b.Wb(0,"tr",26),b.Wb(1,"td",31),b.Cc(2),b.Vb(),b.Wb(3,"td",31),b.Wb(4,"span",32),b.Cc(5),b.Vb(),b.Vb(),b.Wb(6,"td",33),b.Wb(7,"button",34),b.ec("click",(function(){b.uc(e);const i=t.index;return b.gc(3).removeFile(i)})),b.Rb(8,"nb-icon",35),b.Vb(),b.Vb(),b.Vb()}if(2&e){const e=t.$implicit,i=t.index;b.Eb(2),b.Dc(i+1),b.Eb(3),b.Ec(" ",e.name," "),b.Eb(2),b.oc("nbTooltip","Remove ",e.name,"")}}function v(e,t){if(1&e&&(b.Wb(0,"div",23),b.Wb(1,"table",24),b.Wb(2,"thead",25),b.Wb(3,"tr",26),b.Wb(4,"th",27),b.Cc(5,"ID"),b.Vb(),b.Wb(6,"th",27),b.Cc(7,"Content File"),b.Vb(),b.Wb(8,"th",28),b.Cc(9,"Remove"),b.Vb(),b.Vb(),b.Vb(),b.Wb(10,"tbody",29),b.Ac(11,g,9,3,"tr",30),b.Vb(),b.Vb(),b.Vb()),2&e){const e=b.gc(2);b.Eb(11),b.mc("ngForOf",e.uploadCourseMaterials)}}function m(e,t){1&e&&b.Cc(0," No Files Selected, Please Select Files to Upload ")}function C(e,t){if(1&e){const e=b.Xb();b.Wb(0,"nb-card"),b.Wb(1,"nb-card-header"),b.Wb(2,"div",1),b.Wb(3,"div",2),b.Wb(4,"h3"),b.Cc(5,"Add Material"),b.Vb(),b.Vb(),b.Wb(6,"div",3),b.Wb(7,"button",4),b.ec("click",(function(){return b.uc(e),b.gc().saveCourseMaterial()})),b.Cc(8," Upload\xa0 "),b.Rb(9,"nb-icon",5),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(10,"nb-card-body"),b.Wb(11,"div",1),b.Wb(12,"div",6),b.Wb(13,"div",7),b.Wb(14,"label",8),b.Cc(15,"Select Subject :"),b.Vb(),b.Ac(16,d,4,3,"nb-select",9),b.Ac(17,p,2,1,"ng-container",0),b.Vb(),b.Vb(),b.Wb(18,"div",6),b.Wb(19,"div",7),b.Wb(20,"label",8),b.Cc(21,"Click on Following Button to Select Course Material Files"),b.Vb(),b.Wb(22,"input",10,11),b.ec("change",(function(t){return b.uc(e),b.gc().onFilePicked(t)})),b.Vb(),b.Wb(24,"button",12),b.ec("click",(function(){return b.uc(e),b.sc(23).click()})),b.Cc(25," Click Here to Pick Files "),b.Vb(),b.Ac(26,f,3,0,"ng-container",0),b.Vb(),b.Vb(),b.Vb(),b.Rb(27,"hr"),b.Wb(28,"h4",13),b.Cc(29,"File/s To Upload"),b.Vb(),b.Wb(30,"div",1),b.Wb(31,"div",14),b.Ac(32,v,12,1,"div",15),b.Ac(33,m,1,0,"ng-template",null,16,b.Bc),b.Vb(),b.Vb(),b.Vb(),b.Vb()}if(2&e){const e=b.sc(34),t=b.gc();b.Eb(16),b.mc("ngIf",t.course),b.Eb(1),b.mc("ngIf",t.invalidSubject),b.Eb(9),b.mc("ngIf",t.invalidFile),b.Eb(6),b.mc("ngIf",t.uploadCourseMaterials.length>0)("ngIfElse",e)}}const W=[{path:"",component:(()=>{class e{constructor(e,t,i,c,n,s,a){this.branchService=e,this.courseService=t,this.courseMaterialService=i,this.toastrService=c,this.router=n,this.location=s,this.route=a}ngOnInit(){if(this.loading=!0,this.invalidFile=!1,this.invalidSubject=!1,this.branchId=this.branchService.getBranchId(),this.courseId=this.courseService.getCourseId(),!this.branchId||!this.courseId)return this.showToastr("top-right","danger","Invalid Course"),void this.cancel();this.uploadCourseMaterials=[],this.subject="",this.courseService.getCourseData().subscribe(e=>{e?(this.course=e,this.loading=!1):this.cancel()})}onFilePicked(e){this.invalidFile=!1;const t=e.target.files,i=["pdf","jpg","png","jpeg","mp4"];let c=null;const n=t.length;for(let s=0;s<n;s++)if(c=t[s].name.substring(t[s].name.lastIndexOf(".")+1).toLowerCase(),-1===i.indexOf(c))return this.invalidFile=!0,void(this.fileInput.nativeElement.value="");this.invalidFile=!1;for(let s=0;s<n;s++)this.uploadCourseMaterials.push(t[s]);this.fileInput.nativeElement.value=""}onSelectSubject(e){this.subject=e,this.invalidSubject=""===e}saveCourseMaterial(){if(this.subject&&""!==this.subject||(this.invalidSubject=!0),this.uploadCourseMaterials.length<1)return this.showToastr("top-right","danger","Select at least 1 Course material File"),void(this.invalidFile=!0);if(this.invalidSubject)return void this.showToastr("top-right","danger","Please Select Subject");this.loading=!0,this.invalidFile=!1;const e=new FormData;e.append("branch",this.branchId),e.append("category",this.course.basicDetails.category),e.append("course",this.courseId),e.append("subject",this.subject);for(let t=0;t<this.uploadCourseMaterials.length;t++)e.append("material",this.uploadCourseMaterials[t],this.uploadCourseMaterials[t].name.substring(0,this.uploadCourseMaterials[t].name.lastIndexOf(".")));this.courseMaterialService.newCourseMaterials(e).subscribe(e=>{this.uploadCourseMaterials=[],this.cancel()},e=>{this.loading=!1})}removeFile(e){this.uploadCourseMaterials.splice(e,1)}showToastr(e,t,i){this.toastrService.show(t,i,{position:e,status:t})}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(b.Qb(o.a),b.Qb(l.a),b.Qb(a.a),b.Qb(c.xb),b.Qb(s.c),b.Qb(n.i),b.Qb(s.a))},e.\u0275cmp=b.Kb({type:e,selectors:[["ngx-add-course-material"]],viewQuery:function(e,t){var i;1&e&&b.Hc(r,!0),2&e&&b.rc(i=b.fc())&&(t.fileInput=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","type","button","size","medium","fullWidth","","size","small","status","primary",3,"click"],["icon","arrow-circle-up-outline"],[1,"col-md-6"],[1,"form-control-group"],["for","input-subject",1,"label"],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange",4,"ngIf"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","multiple","","hidden","",3,"change"],["filePicker",""],["nbButton","","type","button","fullWidth","","size","small","status","warning","id","files",3,"click"],[1,"text-center"],[1,"col-md-10","mx-auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["noFiles",""],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-heading"],[1,"table-row"],[1,"table-heading-data"],[1,"table-heading-data","text-center"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-data"],[1,"mr-2"],[1,"table-data","text-center"],["type","button","nbButton","","shape","round","status","danger","size","tiny",3,"nbTooltip","click"],["icon","close-outline"]],template:function(e,t){1&e&&b.Ac(0,C,35,5,"nb-card",0),2&e&&b.mc("ngIf",!t.loading)},directives:[n.n,c.x,c.z,c.u,c.L,c.w,c.O,c.jb,c.eb,n.m,c.zb],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>i.e(0).then(i.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let V=(()=>{class e{}return e.\u0275mod=b.Ob({type:e}),e.\u0275inj=b.Nb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(W)],s.g]}),e})();i.d(t,"AddCourseMaterialModule",(function(){return j}));let j=(()=>{class e{}return e.\u0275mod=b.Ob({type:e}),e.\u0275inj=b.Nb({factory:function(t){return new(t||e)},imports:[[n.c,V,c.A,c.P,c.N,c.Ab,c.v,c.kb]]}),e})()}}]);