{"version":3,"sources":["webpack:///src/app/institute/branch/manage-branch/discount-and-offer/manage-discount-and-offer/manage-discount-and-offer.component.html","webpack:///src/app/institute/branch/manage-branch/discount-and-offer/manage-discount-and-offer/manage-discount-and-offer-routing.module.ts","webpack:///src/app/institute/branch/manage-branch/discount-and-offer/manage-discount-and-offer/manage-discount-and-offer.component.ts","webpack:///src/app/institute/branch/manage-branch/discount-and-offer/manage-discount-and-offer/manage-discount-and-offer.module.ts"],"names":["routes","path","component","ManageDiscountAndOfferComponent","branchService","dateService","discountAndOfferService","toastrService","router","route","this","loading","branchId","getBranchId","discountAndOffers","getDiscountAndOffers","navigate","relativeTo","subscribe","err","id","setDiscountAndOfferId","queryParams","mode","status","i","changeDiscountAndOfferStatus","res","showToastr","position","message","show","addDiscountAndOffer","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","ManageDiscountAndOfferRoutingModule","forChild","ManageDiscountAndOfferModule"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-9 col-sm-8\">\n        <h3>Discounts And Offers</h3>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <button nbButton size=\"small\" status=\"primary\" fullWidth (click)=\"addDiscountAndOffer()\">\n          Add Discount & Offer <nb-icon icon=\"plus-circle-outline\"></nb-icon>\n        </button>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body class=\"body-container\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <ng-container *ngIf=\"!loading; else loadingData\">\n          <div\n            class=\"table-responsive\"\n            *ngIf=\"discountAndOffers.length > 0; else noDiscountsAndOffers\"\n          >\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Discount And Offer</th>\n                  <th>Offer Code</th>\n                  <th>Percentage/Amount</th>\n                  <th>Start Date</th>\n                  <th>Expiry Date</th>\n                  <th>Action</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let discountAndOffer of discountAndOffers; let i = index\">\n                  <td>{{ i + 1 }}</td>\n                  <td>{{ discountAndOffer.offerName }}</td>\n                  <td>{{ discountAndOffer.code }}</td>\n                  <td>\n                    {{ discountAndOffer.discountAmount }}\n                    {{ discountAndOffer.discountType === 'percentage' ? '%' : '' }}\n                  </td>\n                  <td class=\"keep-hyphen\">\n                    {{ dateService.formatDate(discountAndOffer.startDate) }}\n                  </td>\n                  <td class=\"keep-hyphen\">\n                    {{ dateService.formatDate(discountAndOffer.expiryDate) }}\n                  </td>\n                  <td>\n                    <button\n                      class=\"mr-3\"\n                      nbButton\n                      size=\"small\"\n                      status=\"basic\"\n                      (click)=\"editDiscountAndOffer(discountAndOffer._id)\"\n                    >\n                      Edit\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      class=\"\"\n                      nbButton\n                      size=\"small\"\n                      [status]=\"!discountAndOffer.status ? 'warning' : 'danger'\"\n                      (click)=\"\n                        changeDiscountAndOfferStatus(\n                          discountAndOffer._id,\n                          !discountAndOffer.status,\n                          i\n                        )\n                      \"\n                    >\n                      {{ !discountAndOffer.status ? 'Activate' : 'Deactivate' }}\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <ng-template #noDiscountsAndOffers>\n            <p class=\"text-center pt-5 pb-5\">No Discounts And Offers Available</p>\n          </ng-template>\n        </ng-container>\n        <ng-template #loadingData>\n          <p class=\"text-center pt-5 pb-5\">Loading...</p>\n        </ng-template>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ManageDiscountAndOfferComponent } from './manage-discount-and-offer.component';\n\nconst routes: Routes = [\n  { path: '', component: ManageDiscountAndOfferComponent },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManageDiscountAndOfferRoutingModule {}\n","import { DateService } from './../../../../../services/shared-services/date.service';\nimport { DiscountAndOfferService } from './../../../../../services/discount-and-offer.service';\nimport { BranchService } from './../../../../../services/branch.service';\nimport { DiscountAndOfferModel } from './../../../../../models/discount-and-offer.model';\nimport { NbToastrService } from '@nebular/theme';\nimport { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'ngx-manage-discount-and-offer',\n  templateUrl: './manage-discount-and-offer.component.html',\n  styleUrls: ['./manage-discount-and-offer.component.scss'],\n})\nexport class ManageDiscountAndOfferComponent implements OnInit {\n  loading: boolean;\n  branchId: string;\n  discountAndOffers: DiscountAndOfferModel[];\n\n  constructor(\n    private branchService: BranchService,\n    public dateService: DateService,\n    private discountAndOfferService: DiscountAndOfferService,\n    private toastrService: NbToastrService,\n\n    private router: Router,\n    private route: ActivatedRoute,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.router.navigate(['../'], { relativeTo: this.route });\n\n      return;\n    }\n\n    this.discountAndOffers = [];\n\n    this.getDiscountAndOffers();\n  }\n\n  getDiscountAndOffers() {\n    this.loading = true;\n    this.discountAndOfferService.getDiscountAndOffers(this.branchId).subscribe(\n      (discountAndOffers: DiscountAndOfferModel[]) => {\n        this.discountAndOffers = discountAndOffers;\n        this.loading = false;\n      },\n      (err: any) => {\n        this.loading = false;\n      },\n    );\n  }\n\n  addDiscountAndOffer() {\n    this.router.navigate(['../add'], { relativeTo: this.route });\n  }\n\n  editDiscountAndOffer(id: string) {\n    this.discountAndOfferService.setDiscountAndOfferId(id);\n    this.router.navigate(['../edit'], { relativeTo: this.route, queryParams: { mode: 'edit' } });\n  }\n\n  changeDiscountAndOfferStatus(id: string, status: boolean, i: number) {\n    this.loading = true;\n    this.discountAndOfferService.changeDiscountAndOfferStatus(id, status).subscribe(\n      (res: any) => {\n        this.discountAndOffers[i].status = status;\n        this.showToastr(\n          'top-right',\n          'success',\n          `DiscountAndOffer ${status ? 'Activated' : 'Deactivated'} Successfully!`,\n        );\n        this.loading = false;\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n        this.loading = false;\n      },\n    );\n  }\n\n  showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import { ManageDiscountAndOfferRoutingModule } from './manage-discount-and-offer-routing.module';\nimport { ManageDiscountAndOfferComponent } from './manage-discount-and-offer.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NbCardModule, NbButtonModule, NbIconModule } from '@nebular/theme';\n@NgModule({\n  declarations: [ManageDiscountAndOfferComponent],\n  imports: [\n    CommonModule,\n    ManageDiscountAndOfferRoutingModule,\n\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n  ],\n})\nexport class ManageDiscountAndOfferModule {}\n"]}