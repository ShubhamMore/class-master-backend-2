{"version":3,"sources":["webpack:///src/app/services/branch-storage.service.ts","webpack:///src/app/institute/branch/storage/storage.component.html","webpack:///src/app/institute/branch/storage/storage-routing.module.ts","webpack:///src/app/institute/branch/storage/storage.component.ts","webpack:///src/app/institute/branch/storage/storage.module.ts"],"names":["BranchStorageService","httpService","branchStorage","BehaviorSubject","this","next","branch","httpPost","api","data","pipe","map","response","catchError","err","throwError","storagePackage","order","receipt","routes","path","component","StorageComponent","branchService","dialogService","paymentService","storageService","storagePackageService","branchStorageService","toastrService","router","route","dateService","loading","branchId","getBranchId","getBranchStorage","subscribe","calculateStorage","getStoragePackages","storagePackages","error","showToastr","navigate","relativeTo","status","updateStorage","updateBranchStorage","paymentDetails","packageType","res","ngOnInit","packageName","price","remainingDays","dateDifferenceInDays","getDateString","extraStorageExpireOn","branchStoragePackage","find","storage","getAmount","Math","round","validity","toString","checkout","open","context","closeOnBackdropClick","closeOnEsc","onClose","onClosePayment","amount","upgradeAmount","setPaymentDetails","getPaymentDetails","onCheckout","bytes","convertByteToUnit","value","toFixed","unit","storageInBytes","convertUnitToBytes","storageSizeWithUnit","totalStorage","totalStorageAssigned","usedStorage","totalStorageUsed","availableStorage","usedStorageInPercentage","parseInt","parseFloat","position","message","show","back","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","StorageRoutingModule","forChild","StorageModule"],"mappings":"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","file":"x","sourcesContent":["import { BranchStorageModel } from './../models/branch-storage.model';\nimport { Injectable } from '@angular/core';\nimport { HttpService } from './shared-services/http.service';\nimport { map, catchError } from 'rxjs/operators';\nimport { throwError, BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BranchStorageService {\n  branchStorage = new BehaviorSubject<BranchStorageModel>(null);\n\n  setBranchStorageDetails(branchStorage: BranchStorageModel) {\n    this.branchStorage.next(branchStorage);\n  }\n\n  getBranchStorageDetails() {\n    return this.branchStorage;\n  }\n\n  deleteBranchStorageDetails() {\n    this.branchStorage.next(null);\n  }\n\n  constructor(private httpService: HttpService) {}\n\n  getBranchStorage(branch: any) {\n    const data = { api: 'getBranchStorage', data: { branch } };\n    return this.httpService.httpPost(data).pipe(\n      map((response: any) => {\n        return response;\n      }),\n      catchError((err: any) => {\n        return throwError(err);\n      }),\n    );\n  }\n\n  updateBranchStorage(branch: string, storagePackage: string, order: string, receipt: string) {\n    const data = { api: 'updateBranchStorage', data: { branch, storagePackage, order, receipt } };\n    return this.httpService.httpPost(data).pipe(\n      map((response: any) => {\n        return response;\n      }),\n      catchError((err: any) => {\n        return throwError(err);\n      }),\n    );\n  }\n}\n","<nb-card>\n  <nb-card-header>\n    <button class=\"float-right\" nbButton size=\"small\" status=\"warning\" (click)=\"back()\">\n      Back\n    </button>\n    <h4>Storage</h4>\n  </nb-card-header>\n  <nb-card-body>\n    <div class=\"row\" *ngIf=\"!loading; else loadingData\">\n      <div class=\"col-md-6 col-12\">\n        <p>\n          <strong>Regular Storage: </strong>\n          {{ convertByteToUnit(branchStorage.regularStorageAssigned) }}\n        </p>\n        <ng-container *ngIf=\"!!branchStorage.storagePackage\">\n          <p>\n            <strong>Extra Storage Package: </strong>\n            {{ branchStorage.storagePackage }}\n          </p>\n          <p>\n            <strong>Extra Storage: </strong>\n            {{ convertByteToUnit(branchStorage.extraStorageAssigned) }}\n          </p>\n          <p>\n            <strong>Extra Storage Expires On: </strong>\n            {{ dateService.formatDate(branchStorage.extraStorageExpireOn) }}\n          </p>\n        </ng-container>\n        <p>\n          <strong>Total Storage: </strong>\n          {{ convertByteToUnit(branchStorage.totalStorageAssigned) }}\n        </p>\n      </div>\n\n      <div class=\"col-md-6 col-12\">\n        <div class=\"progress-info\">\n          <h4>\n            {{ availableStorage }} <small>left of {{ totalStorage }}</small>\n          </h4>\n          <nb-progress-bar [value]=\"usedStorageInPercentage\" status=\"danger\" [displayValue]=\"true\">\n            <span *ngIf=\"usedStorageInPercentage >= 25\">&nbsp;Used</span>\n          </nb-progress-bar>\n          <div class=\"caption description\">\n            <bdi>{{ usedStorage }} Used</bdi>\n          </div>\n        </div>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n\n<nb-card>\n  <nb-card-header>\n    <h6>Want to increase Storage?</h6>\n    <h4>Storage Packages</h4>\n  </nb-card-header>\n  <nb-card-body>\n    <ng-container *ngIf=\"!loading; else loadingData\">\n      <div class=\"row\" *ngIf=\"storagePackages.length > 0; else noPackages\">\n        <div\n          class=\"col-md-3 col-sm-6 col-12 mx-auto\"\n          *ngFor=\"let package of storagePackages; let i = index\"\n        >\n          <nb-card class=\"card\">\n            <nb-card-header>\n              <h4 class=\"text-center\">{{ package.packageName }}</h4>\n            </nb-card-header>\n            <nb-card-body>\n              <div>\n                <nb-icon icon=\"hard-drive-outline\"></nb-icon>\n                &nbsp;\n                <span>{{ calculateStorageSize(package.storage) }}</span>\n              </div>\n              <div>\n                <nb-icon icon=\"clock-outline\"></nb-icon>\n                &nbsp;\n                <span>{{ dateService.convertDaysToMonths(package.validity) }} Month/s</span>\n              </div>\n              <div\n                [ngClass]=\"\n                  branchStorage.storagePackage && package.packageName > branchStorage.storagePackage\n                    ? 'line-on-text'\n                    : ''\n                \"\n              >\n                <nb-icon icon=\"pricetags-outline\"></nb-icon>\n                &nbsp;\n                <span>{{ getAmount(package.price) }}/-</span>\n              </div>\n              <div *ngIf=\"package.packageName > branchStorage.storagePackage\">\n                <nb-icon icon=\"pricetags-outline\"></nb-icon>\n                &nbsp;\n                <span>{{ upgradeAmount(package.price) }}/-</span>\n              </div>\n            </nb-card-body>\n            <nb-card-footer>\n              <button\n                class=\"float-right\"\n                nbButton\n                outline\n                size=\"small\"\n                [status]=\"'success'\"\n                [nbTooltip]=\"isUpgradable(package) ? 'Can\\'t Downgrade Package' : 'Upgrade Package'\"\n                (click)=\"activate(package)\"\n                [disabled]=\"isUpgradable(package)\"\n                *ngIf=\"branchStorage.storagePackage !== package.packageName; else activePackage\"\n              >\n                {{\n                  branchStorage.storagePackage && package.packageName > branchStorage.storagePackage\n                    ? 'Upgrade'\n                    : 'Activate'\n                }}\n              </button>\n            </nb-card-footer>\n          </nb-card>\n        </div>\n      </div>\n    </ng-container>\n  </nb-card-body>\n</nb-card>\n\n<ng-template #loadingData>\n  <p class=\"pt-5 pb-5 text-center\">Loading...</p>\n</ng-template>\n\n<ng-template #noPackages>\n  <p class=\"pt-5 pb-5 text-center\">No Storage Packages</p>\n</ng-template>\n\n<ng-template #activePackage>\n  <button class=\"float-right\" nbButton size=\"small\" [status]=\"'success'\">\n    {{ 'Active' }}\n  </button>\n</ng-template>\n","import { StorageComponent } from './storage.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: StorageComponent },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StorageRoutingModule {}\n","import { CheckoutComponent } from './../../checkout/checkout.component';\nimport { PaymentComponent } from './../../payment/payment.component';\nimport { PaymentService } from './../../../services/payment.service';\nimport { NbToastrService, NbDialogService } from '@nebular/theme';\nimport { DateService } from './../../../services/shared-services/date.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { BranchStorageService } from './../../../services/branch-storage.service';\nimport { BranchService } from './../../../services/branch.service';\nimport { StoragePackageService } from './../../../services/storage-package.service';\nimport { StoragePackageModel } from './../../../models/storage-package.model';\nimport { BranchStorageModel } from './../../../models/branch-storage.model';\nimport { Component, OnInit } from '@angular/core';\nimport { StorageService } from '../../../services/shared-services/storage.service';\n\n@Component({\n  selector: 'ngx-storage',\n  templateUrl: './storage.component.html',\n  styleUrls: ['./storage.component.scss'],\n})\nexport class StorageComponent implements OnInit {\n  loading: boolean;\n  branchId: string;\n\n  branchStorage: BranchStorageModel;\n  storagePackages: StoragePackageModel[];\n\n  totalStorage: string;\n  usedStorage: string;\n  availableStorage: string;\n  usedStorageInPercentage: number;\n\n  paymentDetails: { planType: string; packageType: string; amount: string };\n\n  constructor(\n    private branchService: BranchService,\n    private dialogService: NbDialogService,\n    private paymentService: PaymentService,\n    private storageService: StorageService,\n    private storagePackageService: StoragePackageService,\n    private branchStorageService: BranchStorageService,\n    private toastrService: NbToastrService,\n    private router: Router,\n    private route: ActivatedRoute,\n    public dateService: DateService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.router.navigate(['../page-not-found'], { relativeTo: this.route });\n      return;\n    }\n\n    this.branchStorageService.getBranchStorage(this.branchId).subscribe(\n      (branchStorage: BranchStorageModel) => {\n        this.branchStorage = branchStorage;\n        this.calculateStorage(branchStorage);\n\n        this.storagePackageService.getStoragePackages().subscribe(\n          (storagePackages: StoragePackageModel[]) => {\n            this.storagePackages = storagePackages;\n            this.loading = false;\n          },\n          (error: any) => {\n            this.showToastr('top-right', 'danger', error);\n            this.loading = false;\n          },\n        );\n      },\n      (error: any) => {\n        this.showToastr('top-right', 'danger', error);\n        this.loading = false;\n      },\n    );\n  }\n\n  onClosePayment(order: any) {\n    if (order.status) {\n      this.updateStorage(order.order, order.receipt);\n    }\n  }\n\n  updateStorage(order: string, receipt: string) {\n    this.branchStorageService\n      .updateBranchStorage(this.branchId, this.paymentDetails.packageType, order, receipt)\n      .subscribe(\n        (res: any) => {\n          this.ngOnInit();\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n        },\n      );\n  }\n\n  isUpgradable(storagePackage: StoragePackageModel) {\n    if (!this.branchStorage.storagePackage) {\n      return false;\n    } else if (storagePackage.packageName > this.branchStorage.storagePackage) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  upgradeAmount(price: number) {\n    const remainingDays = this.dateService.dateDifferenceInDays(\n      this.dateService.getDateString(),\n      this.branchStorage.extraStorageExpireOn,\n    );\n\n    const branchStoragePackage = this.storagePackages.find(\n      (storage: StoragePackageModel) => storage.packageName === this.branchStorage.storagePackage,\n    );\n\n    const remainingAmount =\n      (+branchStoragePackage.price / +branchStoragePackage.validity) * +remainingDays;\n\n    const upgradableAmount = this.getAmount(Math.round(+(price - remainingAmount) * 1.1));\n\n    return upgradableAmount.toString();\n  }\n\n  onCheckout(checkout: any) {\n    if (checkout.status) {\n      this.dialogService\n        .open(PaymentComponent, {\n          context: {},\n          closeOnBackdropClick: false,\n          closeOnEsc: false,\n        })\n        .onClose.subscribe((order: any) => order && this.onClosePayment(order));\n    }\n  }\n\n  activate(storagePackage: StoragePackageModel) {\n    const amount: string =\n      this.branchStorage.storagePackage &&\n      storagePackage.packageName > this.branchStorage.storagePackage\n        ? this.upgradeAmount(storagePackage.price)\n        : storagePackage.price.toString();\n\n    const type =\n      this.branchStorage.storagePackage &&\n      storagePackage.packageName > this.branchStorage.storagePackage\n        ? 'upgrade'\n        : 'new';\n\n    this.paymentService.setPaymentDetails('storage', storagePackage.packageName, amount, type);\n\n    this.paymentDetails = this.paymentService.getPaymentDetails();\n    this.dialogService\n      .open(CheckoutComponent, {\n        context: {},\n        closeOnBackdropClick: false,\n        closeOnEsc: false,\n      })\n      .onClose.subscribe((checkout: any) => checkout && this.onCheckout(checkout));\n  }\n\n  convertByteToUnit(bytes: any) {\n    const storage: any = this.storageService.convertByteToUnit(bytes);\n    return storage.value.toFixed(1) + ' ' + storage.unit;\n  }\n\n  calculateStorageSize(storage: any) {\n    const storageInBytes = this.storageService.convertUnitToBytes(storage, 'MB');\n    const storageSizeWithUnit = this.storageService.convertByteToUnit(storageInBytes);\n    return storageSizeWithUnit.value.toFixed(1) + ' ' + storageSizeWithUnit.unit;\n  }\n\n  calculateStorage(branchStorage: BranchStorageModel) {\n    const totalStorage: any = this.storageService.convertByteToUnit(\n      branchStorage.totalStorageAssigned,\n    );\n    const usedStorage: any = this.storageService.convertByteToUnit(branchStorage.totalStorageUsed);\n\n    const availableStorage: any = this.storageService.convertByteToUnit(\n      branchStorage.totalStorageAssigned - branchStorage.totalStorageUsed,\n    );\n\n    this.totalStorage = totalStorage.value.toFixed(1) + ' ' + totalStorage.unit;\n    this.usedStorage = usedStorage.value.toFixed(1) + ' ' + usedStorage.unit;\n    this.availableStorage = availableStorage.value.toFixed(1) + ' ' + availableStorage.unit;\n\n    // tslint:disable-next-line: radix\n    this.usedStorageInPercentage = parseInt(\n      ((branchStorage.totalStorageUsed * 100) / branchStorage.totalStorageAssigned).toFixed(1),\n    );\n  }\n\n  getAmount(amount: any) {\n    amount = parseFloat(amount.toString());\n    return amount.toFixed(2).toString();\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route });\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import {\n  NbCardModule,\n  NbButtonModule,\n  NbIconModule,\n  NbProgressBarModule,\n  NbTooltipModule,\n} from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { StorageRoutingModule } from './storage-routing.module';\nimport { StorageComponent } from './storage.component';\n\n@NgModule({\n  declarations: [StorageComponent],\n  imports: [\n    CommonModule,\n    StorageRoutingModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbProgressBarModule,\n    NbTooltipModule,\n  ],\n})\nexport class StorageModule {}\n"]}