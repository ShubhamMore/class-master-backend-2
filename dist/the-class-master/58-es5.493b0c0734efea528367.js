!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"7plo":function(t,a,r){"use strict";r.r(a),r.d(a,"HistoryModule",(function(){return M}));var l=r("aceb"),i=r("ofXK"),o=r("jLJ7"),c=r("fXoL"),s=r("xyIN");function d(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"uppercase"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275elementStart"](11,"button",10),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](3).selectPlanType(e)})),c["\u0275\u0275text"](12," Select "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,l=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](r+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](5,4,a.name)),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("",a.duration," Month/s"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",l.getAmount(a.price),"/-")}}function m(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",7),c["\u0275\u0275elementStart"](1,"table",8),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"th"),c["\u0275\u0275text"](4,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"Membership Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"Duration"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"Price"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"tbody"),c["\u0275\u0275template"](14,d,13,6,"tr",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngForOf",n.memberships)}}function u(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",5),c["\u0275\u0275template"](2,m,15,1,"div",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](),a=c["\u0275\u0275reference"](11);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",n.memberships.length>0)("ngIfElse",a)}}function p(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",11),c["\u0275\u0275text"](1,"Loading..."),c["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",11),c["\u0275\u0275text"](1,"No Membership Plans Available"),c["\u0275\u0275elementEnd"]())}var v,f=((v=function(){function t(n,a,r){e(this,t),this.membershipService=n,this.toastrService=a,this.ref=r}return n(t,[{key:"ngOnInit",value:function(){this.loading=!0,this.memberships=[new o.a(null,"monthly","1","1999",!0),new o.a(null,"quarterly","3","4999",!0),new o.a(null,"half-yearly","6","7999",!0),new o.a(null,"yearly","12","11999",!0)],this.getMemberships()}},{key:"getMemberships",value:function(){var e=this;this.loading=!0,this.membershipService.getMemberships().subscribe((function(t){for(var n=function(n){var a=e.memberships[n],r=t.find((function(e){return e.name===a.name}));r&&(e.memberships[n]=r)},a=0;a<4;a++)n(a);e.loading=!1}),(function(t){e.showToastr("top-right","danger",t),e.loading=!1}))}},{key:"getAmount",value:function(e){return(e=parseFloat(e.toString())).toFixed(2).toString()}},{key:"selectPlanType",value:function(e){this.ref.close(e)}},{key:"onClose",value:function(){this.ref.close()}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}]),t}()).\u0275fac=function(e){return new(e||v)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](l.Gb),c["\u0275\u0275directiveInject"](l.J))},v.\u0275cmp=c["\u0275\u0275defineComponent"]({type:v,selectors:[["ngx-plan-type"]],decls:12,vars:2,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noMemberships",""],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["type","button","nbButton","","size","small","status","primary",3,"click"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"h3"),c["\u0275\u0275text"](5,"Membership Plans"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"nb-card-body"),c["\u0275\u0275template"](7,u,3,2,"div",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](8,p,2,0,"ng-template",null,3,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](10,h,2,0,"ng-template",null,4,c["\u0275\u0275templateRefExtractor"])),2&e){var n=c["\u0275\u0275reference"](9);c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",n)}},directives:[l.y,l.A,l.x,i.n,i.m,l.v],pipes:[i.w],styles:[""]}),v),g=r("W0sp"),S=r("ZatZ"),x=r("tyNb");function E(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](a+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.category),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.status?"Active":"Inactive")}}function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275elementStart"](1,"div",14),c["\u0275\u0275elementStart"](2,"table",15),c["\u0275\u0275elementStart"](3,"thead"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Category"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Status"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"tbody"),c["\u0275\u0275template"](11,E,7,3,"tr",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngForOf",n.branch.categories)}}function y(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index,r=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](a+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.planType),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",n.amount,"/-"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](r.dateService.formatDate(n.activationDate)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](r.dateService.formatDate(n.expiryDate))}}function I(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",14),c["\u0275\u0275elementStart"](1,"table",17),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"th"),c["\u0275\u0275text"](4,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"Plan Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"Activation Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Expiry Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"tbody"),c["\u0275\u0275template"](14,y,11,5,"tr",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngForOf",n.history)}}function w(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",6),c["\u0275\u0275elementStart"](2,"p"),c["\u0275\u0275elementStart"](3,"strong"),c["\u0275\u0275text"](4,"Branch Name: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",6),c["\u0275\u0275elementStart"](7,"button",7),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"]();return e.changeBranchStatus(!e.branch.status)})),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"p"),c["\u0275\u0275elementStart"](11,"strong"),c["\u0275\u0275text"](12,"Email: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275elementStart"](15,"p"),c["\u0275\u0275elementStart"](16,"strong"),c["\u0275\u0275text"](17,"Contact: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",9),c["\u0275\u0275elementStart"](20,"p"),c["\u0275\u0275elementStart"](21,"strong"),c["\u0275\u0275text"](22,"Address: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",10),c["\u0275\u0275elementStart"](25,"p"),c["\u0275\u0275elementStart"](26,"strong"),c["\u0275\u0275text"](27,"Category: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](28,b,12,1,"div",11),c["\u0275\u0275element"](29,"hr"),c["\u0275\u0275elementStart"](30,"div",9),c["\u0275\u0275elementStart"](31,"h5"),c["\u0275\u0275text"](32,"History:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](33,I,15,1,"div",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var a=c["\u0275\u0275nextContext"](),r=c["\u0275\u0275reference"](13);c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](a.branch.basicDetails.branchName),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("status",a.branch.status?"danger":"success"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",a.branch.status?"Deactivate":"Activate Now"," "),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](a.branch.basicDetails.email),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](a.branch.basicDetails.phone),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" ",a.getAddress(a.branch.address),""),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",a.branch.categories.length>0),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",a.history.length>0)("ngIfElse",r)}}function k(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",18),c["\u0275\u0275text"](1,"Loading..."),c["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",18),c["\u0275\u0275text"](1,"No Branch History Available"),c["\u0275\u0275elementEnd"]())}var B,T,D,j=[{path:"",component:(B=function(){function t(n,a,r,l,i,o){e(this,t),this.instituteService=n,this.toastrService=a,this.dialogService=r,this.dateService=l,this.router=i,this.route=o}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.instituteService.getInstitute().subscribe((function(t){t?(e.institute=t,e.instituteService.getBranch().subscribe((function(t){t?(e.branch=t,e.instituteService.getInstituteBranchHistory(t._id).subscribe((function(t){e.history=t,e.loading=!1}),(function(t){e.showToastr("top right","danger",t),e.loading=!1}))):e.showToastr("top right","danger","Invalid Institute")}))):e.showToastr("top right","danger","Invalid Institute")}))}},{key:"getAddress",value:function(e){return e.address1+", "+(e.address2?e.address2+", ":"")+e.city+" - "+e.pinCode+", "+e.state}},{key:"changeBranchStatus",value:function(e){e?this.openPlanTypeDialog():this.deactivateBranch()}},{key:"openPlanTypeDialog",value:function(){var e=this;this.dialogService.open(f,{context:{}}).onClose.subscribe((function(t){return t&&e.activateBranch(t)}))}},{key:"activateBranch",value:function(e){var t=this;e?(this.loading=!0,this.instituteService.activateInstituteBranch(this.branch._id,e.name,e.price).subscribe((function(e){t.branch.status=!0,t.loading=!1}),(function(e){t.showToastr("top right","danger",e),t.loading=!1}))):this.showToastr("top right","danger","Invalid Membership Plan")}},{key:"deactivateBranch",value:function(){var e=this;this.loading=!0,this.instituteService.deactivateInstituteBranch(this.branch._id).subscribe((function(t){e.branch.status=!1,e.loading=!1}),(function(t){e.showToastr("top right","danger",t),e.loading=!1}))}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}},{key:"back",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}}]),t}(),B.\u0275fac=function(e){return new(e||B)(c["\u0275\u0275directiveInject"](g.a),c["\u0275\u0275directiveInject"](l.Gb),c["\u0275\u0275directiveInject"](l.K),c["\u0275\u0275directiveInject"](S.a),c["\u0275\u0275directiveInject"](x.c),c["\u0275\u0275directiveInject"](x.a))},B.\u0275cmp=c["\u0275\u0275defineComponent"]({type:B,selectors:[["ngx-history"]],decls:14,vars:2,consts:[[1,"row"],[1,"col-md-12"],["type","button","size","small","nbButton","","status","warning",1,"float-right",3,"click"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noHistory",""],[1,"col-sm-6","col-12"],["nbButton","","size","small","fullWidth","",1,"",3,"status","click"],[1,"col-md-6","col-12"],[1,"col-12"],[1,"col-md-3","col-sm-5","col-12"],["class","col-md-9 col-sm-7 col-12",4,"ngIf"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"col-md-9","col-sm-7","col-12"],[1,"table-responsive"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[1,"table"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"button",2),c["\u0275\u0275listener"]("click",(function(){return t.back()})),c["\u0275\u0275text"](5," Back "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"h3"),c["\u0275\u0275text"](7,"Branch Details"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"nb-card-body"),c["\u0275\u0275template"](9,w,34,9,"div",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,k,2,0,"ng-template",null,4,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](12,C,2,0,"ng-template",null,5,c["\u0275\u0275templateRefExtractor"])),2&e){var n=c["\u0275\u0275reference"](11);c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",n)}},directives:[l.y,l.A,l.v,l.x,i.n,i.m],styles:[""]}),B)},{path:"page-not-found",loadChildren:function(){return r.e(0).then(r.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],A=((D=function t(){e(this,t)}).\u0275mod=c["\u0275\u0275defineNgModule"]({type:D}),D.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||D)},imports:[[x.g.forChild(j)],x.g]}),D),M=((T=function t(){e(this,t)}).\u0275mod=c["\u0275\u0275defineNgModule"]({type:T}),T.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||T)},imports:[[i.c,l.Jb,l.R,l.w,l.P,l.B,A]]}),T)}}])}();
//# sourceMappingURL=58-es5.493b0c0734efea528367.js.map