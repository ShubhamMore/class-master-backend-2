(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{QTuy:function(e,t,n){"use strict";n.r(t),n.d(t,"AddStudentCourseModule",(function(){return be}));var l=n("3Pt+"),a=n("aceb"),r=n("ofXK"),s=n("no5z"),o=n("fXoL"),i=n("ZatZ"),u=n("EQut"),d=n("IAlr"),m=n("lst6"),c=n("5V5q"),p=n("JmRu"),h=n("W14u"),g=n("qsE9"),C=n("tyNb");const b=["stepper"];function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-option",68),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e._id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.basicDetails.courseName)}}function f(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Student Course is required! "),o["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,f,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("course").errors?null:e.studentCourseForm.get("course").errors.required)}}function I(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-option",68),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e._id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.basicDetails.batchName)}}function F(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Student Batch is required! "),o["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,F,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("batch").errors?null:e.studentCourseForm.get("batch").errors.required)}}function E(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Roll Number is required! "),o["\u0275\u0275elementEnd"]())}function y(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Roll Number should be greater than 0 "),o["\u0275\u0275elementEnd"]())}function A(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," This roll number already Exist! "),o["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,E,2,0,"p",69),o["\u0275\u0275template"](2,y,2,0,"p",69),o["\u0275\u0275template"](3,A,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("rollNumber").errors?null:e.studentCourseForm.get("rollNumber").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("rollNumber").errors?null:e.studentCourseForm.get("rollNumber").errors.min),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.rollNumberAlreadyExist)}}function D(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-option",68),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("value",e._id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.getDiscount(e._id))}}function N(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-option",68),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"uppercase"),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,2,e))}}function V(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Discount Amount should be more than or equal to 0 "),o["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Discount Percentage should be between 0% to 100% "),o["\u0275\u0275elementEnd"]())}function R(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,V,2,0,"p",69),o["\u0275\u0275template"](2,P,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("additionalDiscountAmount").errors?null:e.studentCourseForm.get("additionalDiscountAmount").errors.min),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.studentCourseForm.hasError("invalidDiscountPercentage"))}}function T(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Activation date is required "),o["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,T,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("activationDate").errors?null:e.studentCourseForm.get("activationDate").errors.required)}}function O(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Net Payable Amount is Required "),o["\u0275\u0275elementEnd"]())}function M(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Net Payable Amount should be greater than 0 "),o["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,O,2,0,"p",69),o["\u0275\u0275template"](2,M,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("netPayable").errors?null:e.studentCourseForm.get("netPayable").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseForm.get("netPayable").errors?null:e.studentCourseForm.get("netPayable").errors.min)}}function B(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Date is required "),o["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,B,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("date").errors?null:e.studentCourseFeeForm.get("date").errors.required)}}function W(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Student Course is required! "),o["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,W,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("installmentType").errors?null:e.studentCourseFeeForm.get("installmentType").errors.required)}}function $(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Number of Installments are Required "),o["\u0275\u0275elementEnd"]())}function G(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Number of Installments should be greater than 0 "),o["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,$,2,0,"p",69),o["\u0275\u0275template"](2,G,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("noOfInstallments").errors?null:e.studentCourseFeeForm.get("noOfInstallments").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("noOfInstallments").errors?null:e.studentCourseFeeForm.get("noOfInstallments").errors.min)}}function Q(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Pending Amount is Required "),o["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Pending Amount should be greater than 0 "),o["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Q,2,0,"p",69),o["\u0275\u0275template"](2,J,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("pendingAmount").errors?null:e.studentCourseFeeForm.get("pendingAmount").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("pendingAmount").errors?null:e.studentCourseFeeForm.get("pendingAmount").errors.min)}}function X(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Collected Amount is Required "),o["\u0275\u0275elementEnd"]())}function Z(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Collected Amount should be greater than 0 "),o["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,X,2,0,"p",69),o["\u0275\u0275template"](2,Z,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("amountCollected").errors?null:e.studentCourseFeeForm.get("amountCollected").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("amountCollected").errors?null:e.studentCourseFeeForm.get("amountCollected").errors.min)}}function L(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Total Amount is Required "),o["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1," Total Amount should be greater than 0 "),o["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,L,2,0,"p",69),o["\u0275\u0275template"](2,H,2,0,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("totalAmount").errors?null:e.studentCourseFeeForm.get("totalAmount").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.studentCourseFeeForm.get("totalAmount").errors?null:e.studentCourseFeeForm.get("totalAmount").errors.min)}}function ee(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Installment ",e+1," Date is required ")}}function te(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,ee,2,1,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.get("installmentDate").errors?null:e.get("installmentDate").errors.required)}}function ne(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Installment ",e+1," Amount is Required ")}}function le(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" Installment ",e+1," Amount should be Minimum ",t.getMinInstallmentAmount(e)," ")}}function ae(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" Installment ",e+1," Amount should be Maximum ",t.getMaxInstallmentAmount(e)," ")}}function re(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,ne,2,1,"p",69),o["\u0275\u0275template"](2,le,2,2,"p",69),o["\u0275\u0275template"](3,ae,2,2,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.get("installmentAmount").errors?null:e.get("installmentAmount").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.hasError("invalidMinInstallmentAmount")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.hasError("invalidMaxInstallmentAmount"))}}function se(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Installment ",e+1," Pending Amount is Required ")}}function oe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" Installment ",e+1," Pending Amount should be Minimum ",t.getMinInstallmentPendingAmount(e)," ")}}function ie(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).index,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" Installment ",e+1," Pending Amount should be Maximum ",t.getMaxInstallmentPendingAmount(e)," ")}}function ue(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,se,2,1,"p",69),o["\u0275\u0275template"](2,oe,2,2,"p",69),o["\u0275\u0275template"](3,ie,2,2,"p",69),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.get("amountPending").errors?null:e.get("amountPending").errors.required),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.hasError("invalidMinInstallmentPendingAmount")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.hasError("invalidMaxInstallmentPendingAmount"))}}function de(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"tr",71),o["\u0275\u0275elementStart"](2,"td"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"td"),o["\u0275\u0275elementStart"](5,"div",9),o["\u0275\u0275element"](6,"input",72),o["\u0275\u0275template"](7,te,2,1,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"td"),o["\u0275\u0275elementStart"](9,"div",9),o["\u0275\u0275elementStart"](10,"input",73),o["\u0275\u0275listener"]("input",(function(n){o["\u0275\u0275restoreView"](e);const l=t.index;return o["\u0275\u0275nextContext"](3).customInstallmentAmount(n.target.value,l)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,re,4,3,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"td"),o["\u0275\u0275elementStart"](13,"div",9),o["\u0275\u0275element"](14,"input",74),o["\u0275\u0275template"](15,ue,4,3,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.$implicit,n=t.index,l=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",e),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("Installment ",e.getRawValue().installmentNo,""),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate1"]("id","input-installmentDate-",n,""),o["\u0275\u0275propertyInterpolate1"]("name","installmentDate-",n,""),o["\u0275\u0275property"]("min",l.getMinInstallmentDate(n))("max",l.getMaxInstallmentDate(n))("status",e.get("installmentDate").touched?e.get("installmentDate").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.get("installmentDate").touched&&e.get("installmentDate").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate1"]("id","input-installmentAmount-",n,""),o["\u0275\u0275propertyInterpolate1"]("name","installmentAmount-",n,""),o["\u0275\u0275property"]("min",l.getMinInstallmentAmount(n))("max",l.getMaxInstallmentAmount(n))("status",e.get("installmentAmount").touched?e.get("installmentAmount").invalid||e.hasError("invalidMinInstallmentAmount")||e.hasError("invalidMaxInstallmentAmount")?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.get("installmentAmount").touched),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate1"]("id","input-amountPending-",n,""),o["\u0275\u0275propertyInterpolate1"]("name","amountPending-",n,""),o["\u0275\u0275property"]("min",l.getMinInstallmentPendingAmount(n))("max",l.getMaxInstallmentPendingAmount(n))("status",e.get("amountPending").touched?e.get("amountPending").invalid||e.hasError("invalidMinInstallmentPendingAmount")||e.hasError("invalidMaxInstallmentPendingAmount")?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.get("amountPending").touched)}}function me(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275elementStart"](1,"table",62),o["\u0275\u0275elementStart"](2,"thead"),o["\u0275\u0275elementStart"](3,"tr"),o["\u0275\u0275elementStart"](4,"th"),o["\u0275\u0275text"](5,"Installment Number"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"th"),o["\u0275\u0275text"](7,"Installment Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"th"),o["\u0275\u0275text"](9,"Installment Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"th"),o["\u0275\u0275text"](11,"Pending Amount after This Installment"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"tbody"),o["\u0275\u0275template"](13,de,16,20,"ng-container",65),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](13),o["\u0275\u0275property"]("ngForOf",e.studentCourseInstallmentForm.get("installments").controls)}}function ce(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",75),o["\u0275\u0275text"](1,"No Installments"),o["\u0275\u0275elementEnd"]())}function pe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("Installment ",e.getRawValue().installmentNo,""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",n.dateService.formatDate(e.getRawValue().installmentDate)," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.getAmount(e.getRawValue().installmentAmount)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.getAmount(e.getRawValue().amountPending))}}function he(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().back()})),o["\u0275\u0275text"](3," Back "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"h3",2),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"nb-card-body"),o["\u0275\u0275elementStart"](7,"nb-stepper",3,4),o["\u0275\u0275elementStart"](9,"nb-step",5),o["\u0275\u0275elementStart"](10,"form",6),o["\u0275\u0275listener"]("submit",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().studentCourseFormSubmit()})),o["\u0275\u0275elementStart"](11,"div",7),o["\u0275\u0275elementStart"](12,"div",8),o["\u0275\u0275elementStart"](13,"div",9),o["\u0275\u0275elementStart"](14,"label",10),o["\u0275\u0275text"](15,"Course:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"nb-select",11),o["\u0275\u0275listener"]("selectedChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onSelectCourse(t)})),o["\u0275\u0275elementStart"](17,"nb-option",12),o["\u0275\u0275text"](18,"Select Course"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](19,S,2,2,"nb-option",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](20,v,2,1,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",8),o["\u0275\u0275elementStart"](22,"div",9),o["\u0275\u0275elementStart"](23,"label",14),o["\u0275\u0275text"](24,"Batch:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"nb-select",15),o["\u0275\u0275listener"]("selectedChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onSelectBatch(t)})),o["\u0275\u0275elementStart"](26,"nb-option",12),o["\u0275\u0275text"](27,"Select Batch"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](28,I,2,2,"nb-option",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](29,x,2,1,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div",8),o["\u0275\u0275elementStart"](31,"div",9),o["\u0275\u0275elementStart"](32,"label",16),o["\u0275\u0275text"](33,"Roll Number:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"input",17),o["\u0275\u0275listener"]("input",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().checkRollNumber()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](35,w,4,3,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"div",8),o["\u0275\u0275elementStart"](37,"div",9),o["\u0275\u0275elementStart"](38,"label",18),o["\u0275\u0275text"](39,"Discount/Offer:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"nb-select",19),o["\u0275\u0275listener"]("selectedChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onSelectDiscount(t)})),o["\u0275\u0275elementStart"](41,"nb-option",12),o["\u0275\u0275text"](42,"Select Discount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](43,D,2,2,"nb-option",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](44,"div",8),o["\u0275\u0275elementStart"](45,"div",9),o["\u0275\u0275elementStart"](46,"label",20),o["\u0275\u0275text"](47,"Additional Discount Type:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"nb-select",21),o["\u0275\u0275listener"]("selectedChange",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().changeAdditionalDiscountType()})),o["\u0275\u0275template"](49,N,3,4,"nb-option",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](50,"div",8),o["\u0275\u0275elementStart"](51,"div",9),o["\u0275\u0275elementStart"](52,"label",22),o["\u0275\u0275text"](53,"Additional Discount Amount:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](54,"input",23),o["\u0275\u0275listener"]("input",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onAdditionalDiscountAmount(t.target.value)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](55,R,3,2,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](56,"div",24),o["\u0275\u0275elementStart"](57,"div",9),o["\u0275\u0275elementStart"](58,"label",25),o["\u0275\u0275text"](59,"Activation Date:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](60,"input",26),o["\u0275\u0275template"](61,q,2,1,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](62,"div",24),o["\u0275\u0275elementStart"](63,"div",9),o["\u0275\u0275elementStart"](64,"label",27),o["\u0275\u0275text"](65,"Net Payable:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](66,"input",28),o["\u0275\u0275template"](67,k,3,2,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](68,"hr"),o["\u0275\u0275elementStart"](69,"div",7),o["\u0275\u0275elementStart"](70,"div",29),o["\u0275\u0275elementStart"](71,"button",30),o["\u0275\u0275elementStart"](72,"span"),o["\u0275\u0275text"](73,"Next"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](74,"nb-icon",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](75,"nb-step",32),o["\u0275\u0275elementStart"](76,"form",33),o["\u0275\u0275listener"]("ngSubmit",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().studentCourseFeeFormSubmit()})),o["\u0275\u0275elementStart"](77,"div",7),o["\u0275\u0275elementStart"](78,"div",8),o["\u0275\u0275elementStart"](79,"div",9),o["\u0275\u0275elementStart"](80,"label",34),o["\u0275\u0275text"](81,"Date:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](82,"input",35),o["\u0275\u0275template"](83,_,2,1,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](84,"div",8),o["\u0275\u0275elementStart"](85,"div",9),o["\u0275\u0275elementStart"](86,"label",36),o["\u0275\u0275text"](87,"Installment Type:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](88,"nb-select",37),o["\u0275\u0275listener"]("selectedChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onSelectInstallmentType(t)})),o["\u0275\u0275elementStart"](89,"nb-option",38),o["\u0275\u0275text"](90,"Pay Once"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](91,"nb-option",39),o["\u0275\u0275text"](92,"Pay Twice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](93,"nb-option",40),o["\u0275\u0275text"](94,"Pay Quarterly"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](95,"nb-option",41),o["\u0275\u0275text"](96,"Pay Monthly"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](97,"nb-option",42),o["\u0275\u0275text"](98,"Pay Custom"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](99,j,2,1,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](100,"div",8),o["\u0275\u0275elementStart"](101,"div",9),o["\u0275\u0275elementStart"](102,"label",43),o["\u0275\u0275text"](103,"Number of Installments:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](104,"input",44),o["\u0275\u0275listener"]("input",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().generateNoOfInstallments(t.target.value)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](105,z,3,2,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](106,"div",8),o["\u0275\u0275elementStart"](107,"div",9),o["\u0275\u0275elementStart"](108,"label",45),o["\u0275\u0275text"](109,"Pending Amount:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](110,"input",46),o["\u0275\u0275template"](111,U,3,2,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](112,"div",8),o["\u0275\u0275elementStart"](113,"div",9),o["\u0275\u0275elementStart"](114,"label",47),o["\u0275\u0275text"](115,"Amount Collected:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](116,"input",48),o["\u0275\u0275template"](117,K,3,2,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](118,"div",8),o["\u0275\u0275elementStart"](119,"div",9),o["\u0275\u0275elementStart"](120,"label",49),o["\u0275\u0275text"](121,"Total Payable Amount:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](122,"input",50),o["\u0275\u0275template"](123,Y,3,2,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](124,"hr"),o["\u0275\u0275elementStart"](125,"div",7),o["\u0275\u0275elementStart"](126,"div",51),o["\u0275\u0275elementStart"](127,"button",52),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().previousStep()})),o["\u0275\u0275element"](128,"nb-icon",53),o["\u0275\u0275elementStart"](129,"span"),o["\u0275\u0275text"](130,"prev"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](131,"div",54),o["\u0275\u0275elementStart"](132,"button",30),o["\u0275\u0275elementStart"](133,"span"),o["\u0275\u0275text"](134,"Next"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](135,"nb-icon",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](136,"nb-step",55),o["\u0275\u0275elementStart"](137,"form",33),o["\u0275\u0275listener"]("ngSubmit",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().studentCourseInstallmentFormSubmit()})),o["\u0275\u0275elementStart"](138,"div",7),o["\u0275\u0275elementStart"](139,"div",56),o["\u0275\u0275template"](140,me,14,1,"div",57),o["\u0275\u0275template"](141,ce,2,0,"ng-template",null,58,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](143,"hr"),o["\u0275\u0275elementStart"](144,"div",7),o["\u0275\u0275elementStart"](145,"div",51),o["\u0275\u0275elementStart"](146,"button",52),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().previousStep()})),o["\u0275\u0275element"](147,"nb-icon",53),o["\u0275\u0275elementStart"](148,"span"),o["\u0275\u0275text"](149,"prev"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](150,"div",54),o["\u0275\u0275elementStart"](151,"button",30),o["\u0275\u0275elementStart"](152,"span"),o["\u0275\u0275text"](153,"Next"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](154,"nb-icon",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](155,"nb-step",59),o["\u0275\u0275elementStart"](156,"div",60),o["\u0275\u0275elementStart"](157,"div",61),o["\u0275\u0275elementStart"](158,"table",62),o["\u0275\u0275elementStart"](159,"tbody"),o["\u0275\u0275elementStart"](160,"tr"),o["\u0275\u0275elementStart"](161,"th",63),o["\u0275\u0275text"](162,"Course Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](163,"tr"),o["\u0275\u0275elementStart"](164,"th"),o["\u0275\u0275text"](165,"Course"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](166,"td"),o["\u0275\u0275text"](167),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](168,"tr"),o["\u0275\u0275elementStart"](169,"th"),o["\u0275\u0275text"](170,"Batch"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](171,"td"),o["\u0275\u0275text"](172),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](173,"tr"),o["\u0275\u0275elementStart"](174,"th"),o["\u0275\u0275text"](175,"Roll Number"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](176,"td"),o["\u0275\u0275text"](177),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](178,"tr"),o["\u0275\u0275elementStart"](179,"th"),o["\u0275\u0275text"](180,"Discount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](181,"td"),o["\u0275\u0275text"](182),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](183,"tr"),o["\u0275\u0275elementStart"](184,"th"),o["\u0275\u0275text"](185,"Additional Discount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](186,"td"),o["\u0275\u0275text"](187),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](188,"tr"),o["\u0275\u0275elementStart"](189,"th"),o["\u0275\u0275text"](190,"Net Payable"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](191,"td"),o["\u0275\u0275text"](192),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](193,"tr"),o["\u0275\u0275elementStart"](194,"th"),o["\u0275\u0275text"](195,"Activation Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](196,"td"),o["\u0275\u0275text"](197),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](198,"tr"),o["\u0275\u0275elementStart"](199,"th",63),o["\u0275\u0275text"](200,"Course Fee Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](201,"tr"),o["\u0275\u0275elementStart"](202,"th"),o["\u0275\u0275text"](203,"Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](204,"td"),o["\u0275\u0275text"](205),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](206,"tr"),o["\u0275\u0275elementStart"](207,"th"),o["\u0275\u0275text"](208,"Number of Installments"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](209,"td"),o["\u0275\u0275text"](210),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](211,"tr"),o["\u0275\u0275elementStart"](212,"th"),o["\u0275\u0275text"](213,"Amount Collected"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](214,"td"),o["\u0275\u0275text"](215),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](216,"tr"),o["\u0275\u0275elementStart"](217,"th"),o["\u0275\u0275text"](218,"Pending Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](219,"td"),o["\u0275\u0275text"](220),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](221,"tr"),o["\u0275\u0275elementStart"](222,"th"),o["\u0275\u0275text"](223,"Total Payable Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](224,"td"),o["\u0275\u0275text"](225),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](226,"tr"),o["\u0275\u0275elementStart"](227,"th",63),o["\u0275\u0275text"](228,"Installment Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](229,"tr"),o["\u0275\u0275elementStart"](230,"td",63),o["\u0275\u0275elementStart"](231,"div",61),o["\u0275\u0275elementStart"](232,"table",64),o["\u0275\u0275elementStart"](233,"thead"),o["\u0275\u0275elementStart"](234,"tr"),o["\u0275\u0275elementStart"](235,"th"),o["\u0275\u0275text"](236,"Installment No."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](237,"th"),o["\u0275\u0275text"](238,"Installment Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](239,"th"),o["\u0275\u0275text"](240,"Installment Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](241,"th"),o["\u0275\u0275text"](242,"Pending Amount after Installment"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](243,"tbody"),o["\u0275\u0275template"](244,pe,9,4,"tr",65),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](245,"hr"),o["\u0275\u0275elementStart"](246,"div",7),o["\u0275\u0275elementStart"](247,"div",51),o["\u0275\u0275elementStart"](248,"button",66),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().previousStep()})),o["\u0275\u0275element"](249,"nb-icon",53),o["\u0275\u0275elementStart"](250,"span"),o["\u0275\u0275text"](251,"prev"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](252,"div",54),o["\u0275\u0275elementStart"](253,"button",67),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().saveStudentCourse()})),o["\u0275\u0275elementStart"](254,"span"),o["\u0275\u0275text"](255,"Submit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](142),t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.studentCourse?"Edit Student Course":"New Student Course"," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("linear",!0)("disableStepNavigation",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("stepControl",t.studentCourseForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.studentCourseForm),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("status",t.studentCourseForm.get("course").touched?t.studentCourseForm.get("course").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.courses),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseForm.get("course").invalid&&t.studentCourseForm.get("course").touched),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseForm.get("batch").touched?t.studentCourseForm.get("batch").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.courseBatches),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseForm.get("batch").invalid&&t.studentCourseForm.get("batch").touched),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseForm.get("rollNumber").touched?t.studentCourseForm.get("rollNumber").invalid||t.rollNumberAlreadyExist?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(t.studentCourseForm.get("rollNumber").invalid||t.rollNumberAlreadyExist)&&t.studentCourseForm.get("rollNumber").touched),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngForOf",t.discounts),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("selected",t.discountTypes.length>0?t.discountTypes[0]:""),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.discountTypes),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseForm.get("additionalDiscountAmount").touched?t.studentCourseForm.get("additionalDiscountAmount").invalid||t.studentCourseForm.hasError("invalidDiscountPercentage")?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseForm.get("additionalDiscountAmount").touched),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseForm.get("activationDate").invalid?"danger":"success"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseForm.get("activationDate").invalid),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseForm.get("netPayable").touched?t.studentCourseForm.get("netPayable").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseForm.get("netPayable").invalid&&t.studentCourseForm.get("netPayable").touched),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("stepControl",t.studentCourseFeeForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.studentCourseFeeForm),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("status",t.studentCourseFeeForm.get("date").invalid?"danger":"success"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseFeeForm.get("date").invalid),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseFeeForm.get("installmentType").touched?t.studentCourseFeeForm.get("installmentType").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](11),o["\u0275\u0275property"]("ngIf",t.studentCourseFeeForm.get("installmentType").invalid&&t.studentCourseFeeForm.get("installmentType").touched),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseFeeForm.get("noOfInstallments").touched?t.studentCourseFeeForm.get("noOfInstallments").invalid?"danger":"success":"basic"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseFeeForm.get("noOfInstallments").invalid&&t.studentCourseFeeForm.get("noOfInstallments").touched),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseFeeForm.get("pendingAmount").invalid?"danger":"success"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseFeeForm.get("pendingAmount").invalid),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseFeeForm.get("amountCollected").invalid?"danger":"success"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseFeeForm.get("amountCollected").invalid),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",t.studentCourseFeeForm.get("totalAmount").invalid?"danger":"success"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.studentCourseFeeForm.get("totalAmount").invalid),o["\u0275\u0275advance"](13),o["\u0275\u0275property"]("stepControl",t.studentCourseInstallmentForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.studentCourseInstallmentForm),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!!t.getNoOfInstallments()&&t.studentCourseInstallmentForm.get("installments").controls.length>0)("ngIfElse",e),o["\u0275\u0275advance"](27),o["\u0275\u0275textInterpolate"](t.getCourse(t.studentCourseForm.getRawValue().course)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getBatch(t.studentCourseForm.getRawValue().batch)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.studentCourseForm.getRawValue().rollNumber),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getDiscount(t.studentCourseForm.getRawValue().discount)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.studentCourseForm.getRawValue().additionalDiscountAmount?t.studentCourseForm.getRawValue().additionalDiscountAmount+("percentage"===t.studentCourseForm.getRawValue().additionalDiscountType?"%":""):"--"," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getAmount(t.studentCourseForm.getRawValue().netPayable)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.dateService.formatDate(t.studentCourseForm.getRawValue().activationDate)," "),o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.studentCourseFeeForm.getRawValue().date)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.studentCourseFeeForm.getRawValue().noOfInstallments),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getAmount(t.studentCourseFeeForm.getRawValue().amountCollected)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getAmount(t.studentCourseFeeForm.getRawValue().pendingAmount)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getAmount(t.studentCourseFeeForm.getRawValue().totalAmount)),o["\u0275\u0275advance"](19),o["\u0275\u0275property"]("ngForOf",t.studentCourseInstallmentForm.get("installments").controls),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.submit),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit)}}const ge=[{path:"",component:(()=>{class e{constructor(e,t,n,l,a,r,s,o,i,u,d){this.dateService=e,this.toastrService=t,this.branchService=n,this.courseService=l,this.batchService=a,this.discountAndOfferService=r,this.studentService=s,this.studentCourseService=o,this.studentCourseInstallmentService=i,this.router=u,this.route=d}ngOnInit(){if(this.loading=!0,this.submit=!1,this.branchId=this.branchService.getBranchId(),this.categoryId=this.branchService.getCategoryId(),this.studentId=this.studentService.getStudentId(),!this.branchId&&!this.categoryId&&!this.studentId)return void this.router.navigate(["../"],{relativeTo:this.route});let e;return this.studentCourseId=this.studentCourseService.getStudentCourseId(),this.route.queryParams.subscribe(t=>{e=t.mode}),e&&"edit"!==e?(this.showToastr("top-right","danger","Invalid Route"),void this.router.navigate(["../page-not-found"],{relativeTo:this.route})):e&&!this.studentCourseId?(this.showToastr("top-right","danger","Student Course Not Found"),void this.router.navigate(["../page-not-found"],{relativeTo:this.route})):(this.discounts=[],this.courses=[],this.batches=[],this.courseBatches=[],this.discountTypes=[],this.rollNumberAlreadyExist=!1,this.courseService.getCoursesData().subscribe(e=>{this.courses=e}),this.batchService.getBatchesData().subscribe(e=>{this.batches=e}),this.discountAndOfferService.getDiscountAndOffersData().subscribe(e=>{this.discounts=e}),this.discountTypes=this.discountAndOfferService.getDiscountTypes(),this.studentCourseForm=new l.f({course:new l.d("",{validators:[l.u.required]}),batch:new l.d("",{validators:[l.u.required]}),rollNumber:new l.d(null,{validators:[l.u.required,l.u.min(1)]}),discount:new l.d("",{validators:[]}),additionalDiscountType:new l.d(this.discountTypes.length>0?this.discountTypes[0]:"",{validators:[]}),additionalDiscountAmount:new l.d(0,{validators:[l.u.min(0)]}),activationDate:new l.d(this.dateService.getDateString(),{validators:[l.u.required]}),netPayable:new l.d(0,{validators:[l.u.required]})},{validators:this.discountPercentageValidator.bind(this)}),this.studentCourseFeeForm=new l.f({installmentType:new l.d("0",{validators:[l.u.required]}),date:new l.d(this.dateService.getDateString(),{validators:[l.u.required]}),noOfInstallments:new l.d(1,{validators:[l.u.required,l.u.min(1)]}),pendingAmount:new l.d(0,{validators:[l.u.required,l.u.min(0)]}),amountCollected:new l.d(0,{validators:[l.u.required,l.u.min(0)]}),totalAmount:new l.d(0,{validators:[l.u.required,l.u.min(0)]})}),this.studentCourseInstallmentForm=new l.f({installments:new l.b([])}),void(e&&this.studentId&&this.studentCourseId?this.studentCourseService.getStudentCourseForEditing(this.studentCourseId).subscribe(e=>{this.studentCourse=e.studentCourse,this.studentCourseInstallment=e.studentCourseInstallment,this.studentCourseForm.patchValue({course:this.studentCourse.course,activationDate:this.studentCourse.activationDate,rollNumber:this.studentCourse.rollNumber,discount:this.studentCourse.discount,additionalDiscountType:this.studentCourse.additionalDiscountType,additionalDiscountAmount:this.studentCourse.additionalDiscountAmount,netPayable:this.studentCourse.netPayable}),this.onSelectCourse(this.studentCourse.course),this.studentCourseForm.patchValue({batch:this.studentCourse.batch}),this.disableStudentCourseDetails(),this.studentCourseInstallment&&(this.studentCourseFeeForm.patchValue({installmentType:this.studentCourseInstallment.installmentType,date:this.studentCourseInstallment.date,noOfInstallments:this.studentCourseInstallment.noOfInstallments,amountCollected:this.studentCourseInstallment.amountCollected,pendingAmount:this.studentCourseInstallment.pendingAmount,totalAmount:this.studentCourseInstallment.totalAmount}),this.disableStudentCourseFeeForm(),this.resetStudentCourseInstallments(),this.studentCourseInstallment.installments.forEach((e,t)=>{this.addStudentCourseInstallment(e),e.receiptId&&this.getStudentCourseInstallments()[t].get("installmentDate").disable()}),this.disableStudentCourseInstallmentFields()),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.back()}):this.loading=!1))}discountPercentageValidator(e){const t=e.getRawValue().additionalDiscountType,n=+e.getRawValue().additionalDiscountAmount;return"percentage"===t&&n>100?{invalidDiscountPercentage:!0}:null}checkRollNumber(){let e=this.studentCourseForm.getRawValue().rollNumber;const t=this.studentCourseForm.getRawValue().batch;if(e){if(e=e.toString(),this.studentCourse&&this.studentCourse.batch===t&&this.studentCourse.rollNumber===e)return;const n=this.studentCourseForm.getRawValue().course;n&&t&&this.studentCourseService.checkBatchRollNumber(this.branchId,this.categoryId,n,t,e).subscribe(e=>{this.rollNumberAlreadyExist=e.rollNumberExist},e=>{})}}onSelectCourse(e){this.studentCourseForm.patchValue({batch:""}),this.courseBatches=[],this.courseBatches=this.batches.filter(t=>t.course===e),this.course=this.courses.find(t=>t._id===e),this.calculateNetPayableAmount()}getAmount(e){return(e=+e).toFixed(2).toString()+"/-"}onSelectBatch(e){""!==e?(this.studentCourseForm.get("rollNumber").enable(),this.batch=this.batches.find(t=>t._id===e),this.checkRollNumber()):this.studentCourseForm.get("rollNumber").disable()}onSelectDiscount(e){this.discount=this.discounts.find(t=>t._id===e),this.calculateNetPayableAmount()}onAdditionalDiscountAmount(e){e>=0&&this.calculateNetPayableAmount()}changeAdditionalDiscountType(){this.studentCourseForm.patchValue({additionalDiscount:0}),this.calculateNetPayableAmount()}calculateNetPayableAmount(){let e=0,t=0,n=0,l=0;const a=this.course?+this.course.feeDetails.totalFees:0,r=this.discount?this.discount.discountType:"",s=this.studentCourseForm.getRawValue().additionalDiscountType,o=this.discount?+this.discount.discountAmount:0,i=+this.studentCourseForm.getRawValue().additionalDiscountAmount;if(this.course&&a){l=a,this.discount&&r&&("percentage"===r?t+=o:n+=o),i&&("percentage"===s?t+=i:n+=i),l=a-n-t/100*a,e=l,this.studentCourseForm.patchValue({netPayable:e}),this.studentCourseFeeForm.patchValue({totalAmount:e}),this.calculatePendingAmount();const u=this.studentCourseFeeForm.getRawValue().installmentType;this.onSelectInstallmentType(u)}}calculatePendingAmount(){let e=0;e=+this.studentCourseFeeForm.getRawValue().totalAmount-(this.studentCourseFeeForm.getRawValue().amountCollected||0),this.studentCourseFeeForm.patchValue({pendingAmount:e})}enableStudentCourseDetails(){this.studentCourseForm.get("course").enable(),this.studentCourseForm.get("discount").enable(),this.studentCourseForm.get("additionalDiscountType").enable(),this.studentCourseForm.get("additionalDiscountAmount").enable()}disableStudentCourseDetails(){this.studentCourseForm.get("course").disable(),this.studentCourseForm.get("discount").disable(),this.studentCourseForm.get("additionalDiscountType").disable(),this.studentCourseForm.get("additionalDiscountAmount").disable()}enableStudentCourseFeeForm(){this.studentCourseFeeForm.get("installmentType").enable(),this.studentCourseFeeForm.get("noOfInstallments").enable()}disableStudentCourseFeeForm(){this.studentCourseFeeForm.get("installmentType").disable(),this.studentCourseFeeForm.get("noOfInstallments").disable()}getStudentCourseInstallments(){return this.studentCourseInstallmentForm.get("installments").controls}resetStudentCourseInstallments(){this.studentCourseInstallmentForm.get("installments").controls=[]}newStudentCourseInstallment(e){return new l.f({_id:new l.d(e._id?e._id:(new s.a).toString(),{validators:[l.u.required]}),installmentNo:new l.d(e.installmentNo?e.installmentNo:null,{validators:[l.u.required]}),installmentDate:new l.d(e.installmentDate?e.installmentDate:null,{validators:[l.u.required]}),installmentAmount:new l.d(e.installmentAmount?e.installmentAmount:0,{validators:[l.u.required]}),amountPending:new l.d(e.installmentAmount?e.amountPending:0,{validators:[l.u.required]}),receiptId:new l.d(e.receiptId?e.receiptId:null,{validators:[]}),status:new l.d(!e.status||e.status,{validators:[]})},{validators:[this.minInstallmentAmountValidator.bind(this),this.maxInstallmentAmountValidator.bind(this),this.minInstallmentPendingAmountValidator.bind(this),this.maxInstallmentPendingAmountValidator.bind(this)]})}minInstallmentAmountValidator(e){const t=+e.getRawValue().installmentNo;return+e.getRawValue().installmentAmount<this.getMinInstallmentAmount(t-1)?{invalidMinInstallmentAmount:!0}:null}maxInstallmentAmountValidator(e){const t=+e.getRawValue().installmentNo;return+e.getRawValue().installmentAmount>this.getMaxInstallmentAmount(t-1)?{invalidMaxInstallmentAmount:!0}:null}minInstallmentPendingAmountValidator(e){const t=+e.getRawValue().installmentNo;return+e.getRawValue().amountPending<this.getMinInstallmentPendingAmount(t-1)?{invalidMinInstallmentPendingAmount:!0}:null}maxInstallmentPendingAmountValidator(e){const t=+e.getRawValue().installmentNo;return+e.getRawValue().amountPending>this.getMaxInstallmentPendingAmount(t-1)?{invalidMinInstallmentPendingAmount:!0}:null}addStudentCourseInstallment(e){this.getStudentCourseInstallments().push(this.newStudentCourseInstallment(e))}onSelectInstallmentType(e){if(this.studentCourseFeeForm.patchValue({amountCollected:0}),"0"===e)this.studentCourseFeeForm.get("noOfInstallments").disable(),this.generateNoOfInstallments(1);else if("1"===e)this.studentCourseFeeForm.get("noOfInstallments").disable(),this.generateNoOfInstallments(2);else if("2"===e)this.studentCourseFeeForm.get("noOfInstallments").disable(),this.generateNoOfInstallments(4);else if("3"===e)this.studentCourseFeeForm.get("noOfInstallments").disable(),this.generateNoOfInstallments(this.course.basicDetails.duration);else{this.studentCourseFeeForm.get("noOfInstallments").enable();const e=this.studentCourseFeeForm.getRawValue().noOfInstallments;this.generateNoOfInstallments(e)}}generateNoOfInstallments(e){if(e){e=e>0?e:3,this.studentCourseFeeForm.patchValue({amountCollected:0}),this.studentCourseFeeForm.patchValue({noOfInstallments:e});const t=2592e6,n=+this.course.basicDetails.duration/e,l=this.studentCourseFeeForm.getRawValue().date,a=+this.studentCourseForm.getRawValue().netPayable/e,r=+this.studentCourseFeeForm.getRawValue().pendingAmount;this.resetStudentCourseInstallments();for(let o=0;o<e;o++){const e=this.dateService.millisecondsToDateString(this.dateService.dateToMilliseconds(l)+t*(n*o));let i=r-+a*(o+1);i=i<0?0:i;const u={_id:new s.a,installmentNo:(o+1).toString(),installmentDate:e,installmentAmount:Math.ceil(a),amountPending:Math.ceil(i),receiptId:null,status:!0};this.addStudentCourseInstallment(u)}"4"===this.studentCourseFeeForm.getRawValue().installmentType?this.enableStudentCourseInstallmentFields():this.disableStudentCourseInstallmentFields()}}customInstallmentAmount(e,t){if(!e||e<this.getMinInstallmentAmount(t)||e>this.getMaxInstallmentAmount(t))return;const n=this.getStudentCourseInstallments(),l=this.getNoOfInstallments(),a=(0===t?this.studentCourseFeeForm.getRawValue().totalAmount:n[t-1].getRawValue().amountPending)-e;n[t].patchValue({amountPending:a});const r=l-(t+1)>0?l-(t+1):1;let s=Math.ceil(a/r);if(t!==l-1)for(let o=0;o<r;o++){let e=a-+s*(o+1);e=e<0?0:e;const r=t+o+1;r===l-1&&this.getMaxInstallmentAmount(r)<s&&(s=this.getMaxInstallmentAmount(r)),n[r].patchValue({installmentAmount:s,amountPending:e})}}getMinInstallmentDate(e){const t=this.getStudentCourseInstallments();return 0===e?this.studentCourseFeeForm.getRawValue().date:t[e-1].getRawValue().installmentDate}getMaxInstallmentDate(e){const t=this.getStudentCourseInstallments(),n=this.getNoOfInstallments();return 0===e&&1===n?this.studentCourseFeeForm.getRawValue().date:e===n-1?this.dateService.millisecondsToDateString(this.dateService.dateToMilliseconds(this.studentCourseFeeForm.getRawValue().date)+2592e6*this.course.basicDetails.duration):t[e+1].getRawValue().installmentDate}getMinInstallmentAmount(e){const t=this.getStudentCourseInstallments(),n=this.getNoOfInstallments();return 0===e&&1===n?this.studentCourseFeeForm.getRawValue().totalAmount:0===e&&n>1?1:e===n-1?t[e-1].getRawValue().amountPending:1}getMaxInstallmentAmount(e){const t=this.getStudentCourseInstallments(),n=this.getNoOfInstallments();return 0===e&&n>=1?this.studentCourseFeeForm.getRawValue().totalAmount:t[e-1].getRawValue().amountPending}getMinInstallmentPendingAmount(e){const t=this.getStudentCourseInstallments(),n=this.getNoOfInstallments();return 0===e&&n>=1||e===n-1?0:t[e]?t[e-1].getRawValue().amountPending-t[e].getRawValue().installmentAmount:0}getMaxInstallmentPendingAmount(e){const t=this.getStudentCourseInstallments(),n=this.getNoOfInstallments();return 0===e&&n>=1?this.studentCourseFeeForm.getRawValue().totalAmount:e===n-1?0:t[e]?t[e-1].getRawValue().amountPending-t[e].getRawValue().installmentAmount+1:void 0}getNoOfInstallments(){return+this.studentCourseFeeForm.getRawValue().noOfInstallments}enableStudentCourseInstallmentFields(){this.getStudentCourseInstallments().forEach(e=>{e.get("installmentAmount").enable()})}disableStudentCourseInstallmentFields(){this.getStudentCourseInstallments().forEach(e=>{e.get("installmentAmount").disable()})}previousStep(){this.studentCourse&&this.disableStudentCourseDetails();const e=this.studentCourseFeeForm.getRawValue().installmentType;(this.studentCourseInstallment||"4"!==e)&&this.disableStudentCourseInstallmentFields(),this.stepper.previous()}studentCourseFormSubmit(){this.studentCourseForm.markAllAsTouched(),this.rollNumberAlreadyExist?this.showToastr("top-right","danger","Student Roll Number for this Batch already Exist"):this.studentCourseForm.invalid?this.showToastr("top-right","danger","Student Course Details are Required"):(this.studentCourse&&this.enableStudentCourseDetails(),this.stepper.next())}studentCourseFeeFormSubmit(){this.studentCourseFeeForm.markAllAsTouched(),this.studentCourseFeeForm.invalid?this.showToastr("top-right","danger","Student Course Fee Details are Required"):this.stepper.next()}studentCourseInstallmentFormSubmit(){this.studentCourseInstallmentForm.markAllAsTouched(),this.studentCourseInstallmentForm.invalid?this.showToastr("top-right","danger","Student Course Installment Details are Required"):this.validateStudentCourseInstallmentForm()?(this.enableStudentCourseInstallmentFields(),this.stepper.next()):this.showToastr("top-right","danger","Student Course Installment Details are Required")}validateStudentCourseInstallmentForm(){const e=this.getStudentCourseInstallments();let t=!1;return e.forEach((e,n)=>{e.invalid&&(t=!0)}),!t}saveStudentCourse(){if(this.studentCourseForm.markAllAsTouched(),this.studentCourseFeeForm.markAllAsTouched(),this.studentCourseInstallmentForm.markAllAsTouched(),this.rollNumberAlreadyExist)return void this.showToastr("top-right","danger","Student Roll Number for this Batch already Exist");if(this.studentCourseForm.invalid)return void this.showToastr("top-right","danger","Student Course Details are Required");if(this.studentCourseFeeForm.invalid)return void this.showToastr("top-right","danger","Student Course Fee Details are Required");if(this.studentCourseInstallmentForm.invalid)return void this.showToastr("top-right","danger","Student Course Installment Details are Required");if(!this.validateStudentCourseInstallmentForm())return void this.showToastr("top-right","danger","Student Course Installment Details are Required");this.submit=!0;const e=this.studentCourseForm.getRawValue();e.branch=this.branchId,e.category=this.categoryId,e.student=this.studentId;const t=this.studentCourseFeeForm.getRawValue();t.installments=this.studentCourseInstallmentForm.getRawValue().installments,t.branch=this.branchId,t.category=this.categoryId,t.course=e.course,t.student=this.studentId,this.studentCourse||this.studentCourseInstallment?this.studentCourse&&!this.studentCourseInstallment?this.studentCourseInstallmentService.addStudentCourseInstallment(this.studentCourse._id,t).subscribe(e=>{this.showToastr("top-right","success","Student Course Installments Created Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1}):(e._id=this.studentCourse._id,t._id=this.studentCourseInstallment._id,this.studentCourseService.editStudentCourse(e,t).subscribe(e=>{this.showToastr("top-right","success","Student Course Updated Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})):this.studentCourseService.addStudentCourse(e,t).subscribe(e=>{this.showToastr("top-right","success","Student Course Created Successfully!"),this.back()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}getCourse(e){const t=this.courses.find(t=>t._id===e);return t?t.basicDetails.courseName:"--"}getBatch(e){const t=this.batches.find(t=>t._id===e);return t?t.basicDetails.batchName:"--"}getDiscount(e){const t=this.discounts.find(t=>t._id===e);return t?t.offerName+" ("+t.code+" - "+t.discountAmount+("percentage"===t.discountType?"%":".00")+")":"--"}back(){this.router.navigate(["../"],{relativeTo:this.route,replaceUrl:!0})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](a.Gb),o["\u0275\u0275directiveInject"](u.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](p.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](C.c),o["\u0275\u0275directiveInject"](C.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-student-course"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](b,!0),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.stepper=n.first)},decls:1,vars:1,consts:[[4,"ngIf"],["type","button","nbButton","","size","small","status","warning",1,"float-right",3,"click"],[1,""],[3,"linear","disableStepNavigation"],["stepper",""],["label","Course Details",3,"stepControl"],[1,"",3,"formGroup","submit"],[1,"row"],[1,"col-md-4"],[1,"form-control-group"],["for","input-student-course",1,"label"],["id","input-student-course","name","course","formControlName","course","placeholder","Select Course","fullWidth","",3,"status","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","input-student-batch",1,"label"],["id","input-student-batch","name","batch","formControlName","batch","placeholder","Select Batch","fullWidth","",3,"status","selectedChange"],["for","input-roll-number",1,"label"],["type","number","nbInput","","id","input-roll-number","name","rollNumber","formControlName","rollNumber","min","1","placeholder","Roll Number","fullWidth","",3,"status","input"],["for","input-student-discount",1,"label"],["id","input-student-discount","name","discount","formControlName","discount","placeholder","Select Discount","fullWidth","",3,"selectedChange"],["for","input-additional-discount-type",1,"label"],["id","input-additional-discount-type","name","additionalDiscountType","formControlName","additionalDiscountType","placeholder","Select Discount Type","fullWidth","",3,"selected","selectedChange"],["for","input-discount-amount",1,"label"],["type","number","nbInput","","id","input-discount-amount","name","additionalDiscountAmount","formControlName","additionalDiscountAmount","placeholder","Discount Amount","min","0","fullWidth","",3,"status","input"],[1,"col-md-6"],["for","input-activation-date",1,"label"],["type","date","nbInput","","id","input-activation-date","name","activationDate","formControlName","activationDate","placeholder","Activation Date","fullWidth","",3,"status"],["for","input-net-payable",1,"label"],["type","number","nbInput","","id","input-net-payable","name","netPayable","formControlName","netPayable","placeholder","Net Payable","min","0","fullWidth","","disabled","true",3,"status"],[1,"col-md-12","text-right"],["nbButton","","size","small","type","submit"],["icon","arrow-ios-forward-outline"],["label","Course Fee Details",3,"stepControl"],[1,"step-container",3,"formGroup","ngSubmit"],["for","input-date",1,"label"],["type","date","nbInput","","id","input-date","name","date","formControlName","date","placeholder","Date","fullWidth","",3,"status"],["for","input-course-installment-type",1,"label"],["id","input-course-installment-type","name","installmentType","formControlName","installmentType","placeholder","Select Installment Type","fullWidth","",3,"status","selectedChange"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["for","input-noOfInstallments",1,"label"],["type","number","nbInput","","id","input-noOfInstallments","name","noOfInstallments","formControlName","noOfInstallments","placeholder","Number of Installments","min","0","fullWidth","",3,"status","input"],["for","input-pendingAmount",1,"label"],["type","number","nbInput","","id","input-pendingAmount","name","pendingAmount","formControlName","pendingAmount","placeholder","Pending Amount","min","0","fullWidth","","disabled","true",3,"status"],["for","input-amountCollected",1,"label"],["type","number","nbInput","","id","input-amountCollected","name","amountCollected","formControlName","amountCollected","placeholder","Amount Collected","min","0","fullWidth","","disabled","true",3,"status"],["for","input-totalAmount",1,"label"],["type","number","nbInput","","id","input-totalAmount","name","totalAmount","formControlName","totalAmount","placeholder","Total Amount","min","0","fullWidth","","disabled","true",3,"status"],[1,"col-6","text-left"],["type","button","nbButton","","size","small",1,"",3,"click"],["icon","arrow-ios-back-outline"],[1,"col-6","text-right"],["label","Installment Details",3,"stepControl"],[1,"col-md-12"],["class","table-responsive",4,"ngIf","ngIfElse"],["noInstallments",""],["label","Submit"],[1,"step-container"],[1,"table-responsive"],[1,"table","table-bordered"],["colspan","2"],[1,"table","table-sm","table-bordered"],[4,"ngFor","ngForOf"],["type","button","nbButton","","size","small",1,"",3,"disabled","click"],["nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner","click"],[3,"value"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[3,"formGroup"],["type","date","nbInput","","formControlName","installmentDate","placeholder","Installment Date","fullWidth","",3,"id","name","min","max","status"],["type","number","nbInput","","formControlName","installmentAmount","placeholder","Installment Amount","fullWidth","",3,"id","name","min","max","status","input"],["type","number","nbInput","","formControlName","amountPending","placeholder","Pending Amount","fullWidth","","disabled","true",3,"id","name","min","max","status"],[1,"mt-4","text-center"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,he,256,56,"nb-card",0),2&e&&o["\u0275\u0275property"]("ngIf",!t.loading)},directives:[r.n,a.y,a.A,a.v,a.x,a.vb,a.ub,l.v,l.n,l.g,a.nb,l.m,l.e,a.gb,r.m,l.q,a.Q,l.a,a.N,a.sb],pipes:[r.w],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let Ce=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[C.g.forChild(ge)],C.g]}),e})(),be=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,Ce,a.B,a.P,a.w,a.R,a.tb,a.wb,a.E,a.M,a.ob,l.s]]}),e})()}}]);
//# sourceMappingURL=20-es2015.5962314e4a8b4ffb3ea1.js.map