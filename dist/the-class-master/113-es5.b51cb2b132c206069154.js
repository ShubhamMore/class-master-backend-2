!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{"7bFp":function(n,i,a){"use strict";a.r(i),a.d(i,"AddCourseMaterialModule",(function(){return F}));var r=a("aceb"),l=a("ofXK"),o=a("tyNb"),s=a("fXoL"),c=a("EQut"),u=a("IAlr"),d=a("FYcy"),p=["filePicker"];function m(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-option",20),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n._id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n.subject)}}function h(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"nb-select",17),s["\u0275\u0275listener"]("selectedChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onSelectSubject(e)})),s["\u0275\u0275elementStart"](1,"nb-option",18),s["\u0275\u0275text"](2,"Select Subject"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,m,2,2,"nb-option",19),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("selected",i.subject)("status",i.invalidSubject?""===i.subject?"danger":"success":"basic"),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",i.course.subjects)}}function f(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"p",22),s["\u0275\u0275text"](1,"Subject is required!"),s["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,f,2,0,"p",21),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",""===n.subject)}}function v(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"p",22),s["\u0275\u0275text"](2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]())}function g(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr",26),s["\u0275\u0275elementStart"](1,"td",31),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td",31),s["\u0275\u0275elementStart"](4,"span",32),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"td",33),s["\u0275\u0275elementStart"](7,"button",34),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.index;return s["\u0275\u0275nextContext"](3).removeFile(e)})),s["\u0275\u0275element"](8,"nb-icon",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](a+1),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",i.name," "),s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate1"]("nbTooltip","Remove ",i.name,"")}}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275elementStart"](1,"table",24),s["\u0275\u0275elementStart"](2,"thead",25),s["\u0275\u0275elementStart"](3,"tr",26),s["\u0275\u0275elementStart"](4,"th",27),s["\u0275\u0275text"](5,"ID"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"th",27),s["\u0275\u0275text"](7,"Content File"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"th",28),s["\u0275\u0275text"](9,"Remove"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"tbody",29),s["\u0275\u0275template"](11,g,9,3,"tr",30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngForOf",n.uploadCourseMaterials)}}function y(e,t){1&e&&s["\u0275\u0275text"](0," No Files Selected, Please Select Files to Upload ")}function x(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h3"),s["\u0275\u0275text"](5,"Add Material"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"button",4),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().saveCourseMaterial()})),s["\u0275\u0275text"](8," Upload\xa0 "),s["\u0275\u0275element"](9,"nb-icon",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"nb-card-body"),s["\u0275\u0275elementStart"](11,"div",1),s["\u0275\u0275elementStart"](12,"div",6),s["\u0275\u0275elementStart"](13,"div",7),s["\u0275\u0275elementStart"](14,"label",8),s["\u0275\u0275text"](15,"Select Subject :"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](16,h,4,3,"nb-select",9),s["\u0275\u0275template"](17,b,2,1,"ng-container",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",6),s["\u0275\u0275elementStart"](19,"div",7),s["\u0275\u0275elementStart"](20,"label",8),s["\u0275\u0275text"](21,"Click on Following Button to Select Course Material Files"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"input",10,11),s["\u0275\u0275listener"]("change",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onFilePicked(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"button",12),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275reference"](23).click()})),s["\u0275\u0275text"](25," Click Here to Pick Files "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](26,v,3,0,"ng-container",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](27,"hr"),s["\u0275\u0275elementStart"](28,"h4",13),s["\u0275\u0275text"](29,"File/s To Upload"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",1),s["\u0275\u0275elementStart"](31,"div",14),s["\u0275\u0275template"](32,S,12,1,"div",15),s["\u0275\u0275template"](33,y,1,0,"ng-template",null,16,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275reference"](34),a=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("disabled",a.submit)("nbSpinner",a.submit),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngIf",a.course),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",a.invalidSubject),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngIf",a.invalidFile),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",a.uploadCourseMaterials.length>0)("ngIfElse",i)}}var E,C,j,I=[{path:"",component:(E=function(){function n(t,i,a,r,l,o){e(this,n),this.branchService=t,this.courseService=i,this.courseMaterialService=a,this.toastrService=r,this.router=l,this.route=o}var i,a,r;return i=n,(a=[{key:"ngOnInit",value:function(){var e=this;if(this.loading=!0,this.submit=!1,this.invalidFile=!1,this.invalidSubject=!1,this.branchId=this.branchService.getBranchId(),this.courseId=this.courseService.getCourseId(),!this.branchId||!this.courseId)return this.showToastr("top-right","danger","Invalid Course"),void this.cancel();this.uploadCourseMaterials=[],this.subject="",this.courseService.getCourseData().subscribe((function(t){t?(e.course=t,e.loading=!1):e.cancel()}))}},{key:"onFilePicked",value:function(e){this.invalidFile=!1;for(var t=e.target.files,n=["pdf","jpg","png","jpeg","mp4"],i=null,a=t.length,r=0;r<a;r++)if(i=t[r].name.substring(t[r].name.lastIndexOf(".")+1).toLowerCase(),-1===n.indexOf(i))return this.invalidFile=!0,void(this.fileInput.nativeElement.value="");this.invalidFile=!1;for(var l=0;l<a;l++)this.uploadCourseMaterials.push(t[l]);this.fileInput.nativeElement.value=""}},{key:"onSelectSubject",value:function(e){this.subject=e,this.invalidSubject=""===e}},{key:"saveCourseMaterial",value:function(){var e=this;if(this.subject&&""!==this.subject||(this.invalidSubject=!0),this.uploadCourseMaterials.length<1)return this.showToastr("top-right","danger","Select at least 1 Course material File"),void(this.invalidFile=!0);if(this.invalidSubject)this.showToastr("top-right","danger","Please Select Subject");else{this.submit=!0,this.invalidFile=!1;var t=new FormData;t.append("branch",this.branchId),t.append("category",this.course.basicDetails.category),t.append("course",this.courseId),t.append("subject",this.subject);for(var n=0;n<this.uploadCourseMaterials.length;n++)t.append("material",this.uploadCourseMaterials[n],this.uploadCourseMaterials[n].name.substring(0,this.uploadCourseMaterials[n].name.lastIndexOf(".")));this.courseMaterialService.newCourseMaterials(t).subscribe((function(t){var n=e.uploadCourseMaterials.length,i=t.overStorageFiles;i<n&&e.showToastr("top-right","success","".concat(n-i," file").concat(n-i==1?" is":"s are"," Uploaded Successfully!")),i>0&&e.showToastr("top-right","danger","Storage is full, ".concat(i," file").concat(1===i?" is":"s are"," not Uploaded")),e.uploadCourseMaterials=[],e.submit=!1,e.cancel()}),(function(t){e.showToastr("top-right","danger",t),e.submit=!1}))}}},{key:"removeFile",value:function(e){this.uploadCourseMaterials.splice(e,1)}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}},{key:"cancel",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}}])&&t(i.prototype,a),r&&t(i,r),n}(),E.\u0275fac=function(e){return new(e||E)(s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](u.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](r.Gb),s["\u0275\u0275directiveInject"](o.c),s["\u0275\u0275directiveInject"](o.a))},E.\u0275cmp=s["\u0275\u0275defineComponent"]({type:E,selectors:[["ngx-add-course-material"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](p,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","size","small","type","button","fullWidth","","status","primary","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner","click"],["icon","arrow-circle-up-outline"],[1,"col-md-6"],[1,"form-control-group"],["for","input-subject",1,"label"],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange",4,"ngIf"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","multiple","","hidden","",3,"change"],["filePicker",""],["nbButton","","size","small","type","button","fullWidth","","status","warning","id","files",3,"click"],[1,"text-center"],[1,"col-md-10","mx-auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["noFiles",""],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-heading"],[1,"table-row"],[1,"table-heading-data"],[1,"table-heading-data","text-center"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-data"],[1,"mr-2"],[1,"table-data","text-center"],["type","button","nbButton","","size","tiny","shape","round","status","danger",3,"nbTooltip","click"],["icon","close-outline"]],template:function(e,t){1&e&&s["\u0275\u0275template"](0,x,35,7,"nb-card",0),2&e&&s["\u0275\u0275property"]("ngIf",!t.loading)},directives:[l.n,r.y,r.A,r.v,r.sb,r.N,r.x,r.Q,r.nb,r.gb,l.m,r.Ib],styles:[""]}),E)},{path:"page-not-found",loadChildren:function(){return a.e(0).then(a.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],w=((j=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:j}),j.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||j)},imports:[[o.g.forChild(I)],o.g]}),j),F=((C=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:C}),C.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||C)},imports:[[l.c,w,r.B,r.R,r.P,r.Jb,r.tb,r.w,r.ob]]}),C)}}])}();
//# sourceMappingURL=113-es5.b51cb2b132c206069154.js.map