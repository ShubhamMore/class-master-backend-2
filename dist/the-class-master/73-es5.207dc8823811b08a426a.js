!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"2ivy":function(n,s,r){"use strict";r.r(s),r.d(s,"SubmissionGradingModule",(function(){return G}));var i=r("3Pt+"),a=r("aceb"),o=r("ofXK"),m=r("fXoL"),l=r("EQut"),d=r("cbqz"),u=r("AVwh"),c=r("ZatZ"),g=r("tyNb");function p(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",17),m["\u0275\u0275text"](1," Assignment Grades are required! "),m["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",17),m["\u0275\u0275text"](1," Assignment Total Grades Should be more than equal to 0 "),m["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"p",17),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" Assignment Total Grades Should be less than equal to ",n.assignment.totalGrades," ")}}function f(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,p,2,0,"p",16),m["\u0275\u0275template"](2,b,2,0,"p",16),m["\u0275\u0275template"](3,S,2,1,"p",16),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==n.assignmentSubmissionForm.get("grades").errors?null:n.assignmentSubmissionForm.get("grades").errors.required),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==n.assignmentSubmissionForm.get("totalGrades").errors?null:n.assignmentSubmissionForm.get("totalGrades").errors.min),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==n.assignmentSubmissionForm.get("totalGrades").errors?null:n.assignmentSubmissionForm.get("totalGrades").errors.max)}}function v(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",17),m["\u0275\u0275text"](1," Assignment Remark is required! "),m["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,v,2,0,"p",16),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==n.assignmentSubmissionForm.get("remark").errors?null:n.assignmentSubmissionForm.get("remark").errors.required)}}function x(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"form",3),m["\u0275\u0275listener"]("submit",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().saveGrades()})),m["\u0275\u0275elementStart"](1,"div",4),m["\u0275\u0275elementStart"](2,"div",5),m["\u0275\u0275elementStart"](3,"p"),m["\u0275\u0275elementStart"](4,"strong"),m["\u0275\u0275text"](5,"Description : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](6,"br"),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",6),m["\u0275\u0275elementStart"](10,"p"),m["\u0275\u0275elementStart"](11,"strong"),m["\u0275\u0275text"](12,"Submitted On : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"strong"),m["\u0275\u0275text"](15,"Attachment : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"a",7),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",6),m["\u0275\u0275elementStart"](19,"div",8),m["\u0275\u0275elementStart"](20,"label",9),m["\u0275\u0275text"](21,"Grades:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](22,"input",10),m["\u0275\u0275template"](23,f,4,3,"ng-container",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",5),m["\u0275\u0275elementStart"](25,"div",8),m["\u0275\u0275elementStart"](26,"label",12),m["\u0275\u0275text"](27,"Remark:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](28,"textarea",13),m["\u0275\u0275template"](29,h,2,1,"ng-container",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](30,"hr"),m["\u0275\u0275elementStart"](31,"div",4),m["\u0275\u0275elementStart"](32,"div",14),m["\u0275\u0275elementStart"](33,"button",15),m["\u0275\u0275text"](34," Save "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var s=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("formGroup",s.assignmentSubmissionForm),m["\u0275\u0275advance"](8),m["\u0275\u0275textInterpolate"](s.assignmentSubmission.description),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate1"]("",s.dateService.millisecondsToDate(s.assignmentSubmission.createdAt)," "),m["\u0275\u0275advance"](3),m["\u0275\u0275propertyInterpolate"]("download",s.assignmentSubmission.studentName+"-"+s.assignmentSubmission.fileName),m["\u0275\u0275property"]("href",s.assignmentSubmission.secureUrl,m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",s.assignmentSubmission.fileName," "),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("max",s.assignment.totalGrades)("status",s.assignmentSubmissionForm.get("grades").touched?s.assignmentSubmissionForm.get("grades").invalid?"danger":"success":"basic")("placeholder",s.assignment.totalGrades),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",s.assignmentSubmissionForm.get("grades").invalid&&s.assignmentSubmissionForm.get("grades").touched),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("status",s.assignmentSubmissionForm.get("remark").touched?s.assignmentSubmissionForm.get("remark").invalid?"danger":"success":"basic"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",s.assignmentSubmissionForm.get("remark").invalid&&s.assignmentSubmissionForm.get("remark").touched),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("disabled",s.submit)("nbSpinner",s.submit)}}function E(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",18),m["\u0275\u0275text"](1,"Loading..."),m["\u0275\u0275elementEnd"]())}var y,I,k,w=[{path:"",component:(y=function(){function n(t,s,r,i,a,o,m){e(this,n),this.branchService=t,this.assignmentSubmissionService=s,this.assignmentService=r,this.dateService=i,this.router=a,this.route=o,this.toastrService=m}var s,r,a;return s=n,(r=[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.submit=!1,this.branchId=this.branchService.getBranchId(),this.branchId?this.assignmentService.getAssignmentData().subscribe((function(t){if(e.assignment=t,!t)return e.showToastr("top-right","danger","Assignment Not Found"),void e.back();e.assignmentSubmissionService.getAssignmentSubmissionData().subscribe((function(n){e.assignmentSubmission=n,n?(e.assignmentSubmissionForm=new i.f({grades:new i.d(n.grades,{validators:[i.u.required,i.u.min(0),i.u.max(+t.totalGrades)]}),remark:new i.d(n.remark,{validators:[i.u.required]})}),e.loading=!1):e.back()}))})):this.back()}},{key:"saveGrades",value:function(){var e=this;if(this.assignmentSubmissionForm.markAllAsTouched(),this.assignmentSubmissionForm.invalid)this.showToastr("top-right","danger","All grading Fields are required");else{this.submit=!0;var t=Object.assign({_id:this.assignmentSubmission._id},this.assignmentSubmissionForm.value);this.assignmentSubmissionService.saveAssignmentSubmissionGrades(t).subscribe((function(t){e.showToastr("top-right","success","Grades Updated Successfully"),e.back()}),(function(t){e.showToastr("top-right","danger",t),e.submit=!1}))}}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}},{key:"back",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}},{key:"ngOnDestroy",value:function(){this.assignmentSubmissionService.deleteAssignmentSubmissionData()}}])&&t(s.prototype,r),a&&t(s,a),n}(),y.\u0275fac=function(e){return new(e||y)(m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](u.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](g.c),m["\u0275\u0275directiveInject"](g.a),m["\u0275\u0275directiveInject"](a.Gb))},y.\u0275cmp=m["\u0275\u0275defineComponent"]({type:y,selectors:[["ngx-submission-grading"]],decls:22,vars:5,consts:[[1,"pl-3"],[3,"formGroup","submit",4,"ngIf","ngIfElse"],["loadingData",""],[3,"formGroup","submit"],[1,"row"],[1,"col-md-12"],[1,"col-md-6"],["target","_blank",3,"href","download"],[1,"form-control-group"],["for","input-submission-grades",1,"label"],["type","number","nbInput","","id","input-submission-grades","name","grades","formControlName","grades","min","0","fullWidth","",3,"max","status","placeholder"],[4,"ngIf"],["for","input-submission-remark",1,"label"],["type","text","nbInput","","id","input-submission-remark","name","remark","rows","2","formControlName","remark","placeholder","Remark","fullWidth","",3,"status"],[1,"col-12"],["type","submit","nbButton","","size","small","status","primary","nbSpinnerStatus","primary","nbSpinnerSize","small",1,"float-right",3,"disabled","nbSpinner"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div"),m["\u0275\u0275elementStart"](3,"strong"),m["\u0275\u0275text"](4,"Assignment : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"span"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"br"),m["\u0275\u0275elementStart"](8,"strong"),m["\u0275\u0275text"](9,"Submission Date : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"span"),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](12,"br"),m["\u0275\u0275elementStart"](13,"strong"),m["\u0275\u0275text"](14,"Description : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](15,"br"),m["\u0275\u0275elementStart"](16,"span",0),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"nb-card-body"),m["\u0275\u0275template"](19,x,35,14,"form",1),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](20,E,2,0,"ng-template",null,2,m["\u0275\u0275templateRefExtractor"])),2&e){var n=m["\u0275\u0275reference"](21);m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](t.assignment.topic),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.assignment.submissionDate)),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](t.assignment.description),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",n)}},directives:[a.y,a.A,a.x,o.n,i.v,i.n,i.g,i.q,a.Q,i.a,i.m,i.e,a.v,a.sb],styles:[""]}),y)},{path:"page-not-found",loadChildren:function(){return r.e(0).then(r.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found"}],F=((k=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},imports:[[g.g.forChild(w)],g.g]}),k),G=((I=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[o.c,F,a.B,a.w,a.P,a.Jb,a.tb,a.R,i.s]]}),I)}}])}();
//# sourceMappingURL=73-es5.207dc8823811b08a426a.js.map