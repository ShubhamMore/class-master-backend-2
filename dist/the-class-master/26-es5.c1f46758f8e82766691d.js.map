{"version":3,"sources":["webpack:///src/app/institute/branch/exam/test/batch-test/add-test/add-test.component.html","webpack:///src/app/institute/branch/exam/test/batch-test/add-test/add-test-routing.module.ts","webpack:///src/app/institute/branch/exam/test/batch-test/add-test/add-test.component.ts","webpack:///src/app/institute/branch/exam/test/batch-test/add-test/add-test.module.ts"],"names":["AddTestComponent","AddTestModule","AddTestRoutingModule","routes","path","component","branchService","courseService","dateService","batchService","examService","toastrService","router","route","mode","this","loading","submit","branchId","getBranchId","queryParams","subscribe","param","examId","getExamId","showToastr","getCategoryData","category","getCourseData","course","getBatchData","batch","subjects","forEach","curSubject","mySubject","find","subject","_id","push","examForm","examTitle","validators","required","outOfMarks","min","passingMarks","date","getDateString","time","duration","getExam","exam","patchValue","err","back","navigate","relativeTo","stepper","previous","markAllAsTouched","invalid","next","value","branch","marks","editExam","res","error","saveExam","subjectId","position","status","message","show","replaceUrl","deleteExamId","deleteExamData","submitExamForm","previousStep","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-9\">\n        <h3>{{ exam ? 'Edit' : 'Add' }} Test</h3>\n      </div>\n      <div class=\"col-3\">\n        <button class=\"float-right\" nbButton size=\"small\" status=\"warning\" (click)=\"back()\">\n          Back\n        </button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <nb-stepper #stepper [linear]=\"true\" [disableStepNavigation]=\"true\">\n          <nb-step [stepControl]=\"examForm\" label=\"Exam Details\">\n            <form [formGroup]=\"examForm\" (submit)=\"submitExamForm()\">\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-exam-title\">Exam Title:</label>\n                    <input\n                      type=\"text\"\n                      nbInput\n                      id=\"input-exam-title\"\n                      name=\"title\"\n                      formControlName=\"examTitle\"\n                      placeholder=\"Exam Title\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('examTitle').touched\n                          ? examForm.get('examTitle').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    />\n                    <ng-container\n                      *ngIf=\"examForm.get('examTitle').invalid && examForm.get('examTitle').touched\"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('examTitle').errors?.required\"\n                      >\n                        Exam title is required!\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-subject\">Subject:</label>\n                    <nb-select\n                      id=\"input-subject\"\n                      name=\"subject\"\n                      formControlName=\"subject\"\n                      placeholder=\"Subject\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('subject').touched\n                          ? examForm.get('subject').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    >\n                      <nb-option value=\"\">Select Subject</nb-option>\n                      <nb-option *ngFor=\"let subject of subjects\" [value]=\"subject._id\">{{\n                        subject.subject\n                      }}</nb-option>\n                    </nb-select>\n                    <ng-container\n                      *ngIf=\"examForm.get('subject').invalid && examForm.get('subject').touched\"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('subject').errors?.required\"\n                      >\n                        Subject is required!\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-exam-out-of-marks\">Out of Marks:</label>\n                    <input\n                      type=\"number\"\n                      nbInput\n                      id=\"input-exam-out-of-marks\"\n                      name=\"outOfMarks\"\n                      min=\"0\"\n                      formControlName=\"outOfMarks\"\n                      placeholder=\"Out of Marks\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('outOfMarks').touched\n                          ? examForm.get('outOfMarks').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    />\n                    <ng-container\n                      *ngIf=\"\n                        examForm.get('outOfMarks').invalid && examForm.get('outOfMarks').touched\n                      \"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('outOfMarks').errors?.required\"\n                      >\n                        Out of Marks is required!\n                      </p>\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('outOfMarks').errors?.min\"\n                      >\n                        Out of Marks should be greater than 0\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-exam-passing-marks\">Passing Marks:</label>\n                    <input\n                      type=\"number\"\n                      nbInput\n                      id=\"input-exam-passing-marks\"\n                      name=\"passingMarks\"\n                      min=\"0\"\n                      formControlName=\"passingMarks\"\n                      placeholder=\"Passing Marks\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('passingMarks').touched\n                          ? examForm.get('passingMarks').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    />\n                    <ng-container\n                      *ngIf=\"\n                        examForm.get('passingMarks').invalid && examForm.get('passingMarks').touched\n                      \"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('passingMarks').errors?.required\"\n                      >\n                        Passing Marks is required!\n                      </p>\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('passingMarks').errors?.min\"\n                      >\n                        Passing Marks should be greater than 0\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-date\">Date:</label>\n                    <input\n                      type=\"date\"\n                      nbInput\n                      id=\"input-date\"\n                      name=\"date\"\n                      [min]=\"exam ? exam.date : dateService.getDateString()\"\n                      formControlName=\"date\"\n                      placeholder=\"Date\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('date').touched\n                          ? examForm.get('date').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    />\n                    <ng-container\n                      *ngIf=\"examForm.get('date').invalid && examForm.get('date').touched\"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('date').errors?.required\"\n                      >\n                        Date is required!\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-time\">Time:</label>\n                    <input\n                      type=\"time\"\n                      step=\"300\"\n                      nbInput\n                      id=\"input-time\"\n                      name=\"time\"\n                      formControlName=\"time\"\n                      placeholder=\"Time\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('time').touched\n                          ? examForm.get('time').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    />\n                    <ng-container\n                      *ngIf=\"examForm.get('time').invalid && examForm.get('time').touched\"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('time').errors?.required\"\n                      >\n                        Time is required!\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-control-group\">\n                    <label class=\"label\" for=\"input-duration\">Duration (in Min):</label>\n                    <input\n                      type=\"number\"\n                      nbInput\n                      id=\"input-duration\"\n                      name=\"duration\"\n                      min=\"0\"\n                      formControlName=\"duration\"\n                      placeholder=\"Duration (in Min)\"\n                      fullWidth\n                      [status]=\"\n                        examForm.get('duration').touched\n                          ? examForm.get('duration').invalid\n                            ? 'danger'\n                            : 'success'\n                          : 'basic'\n                      \"\n                    />\n                    <ng-container\n                      *ngIf=\"examForm.get('duration').invalid && examForm.get('duration').touched\"\n                    >\n                      <p\n                        class=\"caption status-danger\"\n                        *ngIf=\"examForm.get('duration').errors?.required\"\n                      >\n                        Duration is required!\n                      </p>\n                      <p class=\"caption status-danger\" *ngIf=\"examForm.get('duration').errors?.min\">\n                        Duration should be greater than 0\n                      </p>\n                    </ng-container>\n                  </div>\n                </div>\n              </div>\n\n              <hr />\n              <div class=\"row\">\n                <div class=\"col-12\">\n                  <button type=\"submit\" class=\"float-right\" nbButton size=\"small\" status=\"basic\">\n                    Next\n                  </button>\n                </div>\n              </div>\n            </form>\n          </nb-step>\n\n          <nb-step label=\"Submit\">\n            <div class=\"step-container\">\n              <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                  <tbody>\n                    <tr>\n                      <th>Exam Title</th>\n                      <td>{{ examForm.value.examTitle }}</td>\n                    </tr>\n                    <tr>\n                      <th>Subject</th>\n                      <td>{{ getSubject(examForm.value.subject) }}</td>\n                    </tr>\n                    <tr>\n                      <th>Out of Marks</th>\n                      <td>{{ examForm.value.outOfMarks }}</td>\n                    </tr>\n                    <tr>\n                      <th>Passing Marks</th>\n                      <td>{{ examForm.value.passingMarks }}</td>\n                    </tr>\n                    <tr>\n                      <th>Date</th>\n                      <td>{{ dateService.formatDate(examForm.value.date) }}</td>\n                    </tr>\n                    <tr>\n                      <th>Time</th>\n                      <td>{{ dateService.formatTime(examForm.value.time) }}</td>\n                    </tr>\n                    <tr>\n                      <th>Duration (in Min)</th>\n                      <td>{{ examForm.value.duration }} Min</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              <hr />\n\n              <div class=\"row\">\n                <div class=\"col-md-6 text-left\">\n                  <button\n                    type=\"button\"\n                    class=\"\"\n                    nbButton\n                    size=\"small\"\n                    (click)=\"previousStep()\"\n                    [disabled]=\"submit\"\n                  >\n                    <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\n                    <span>prev</span>\n                  </button>\n                </div>\n                <div class=\"col-md-6 text-right\">\n                  <button\n                    nbButton\n                    size=\"small\"\n                    (click)=\"saveExam()\"\n                    [disabled]=\"submit\"\n                    [nbSpinner]=\"submit\"\n                    nbSpinnerStatus=\"primary\"\n                    nbSpinnerSize=\"small\"\n                  >\n                    <span>Submit</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </nb-step>\n        </nb-stepper>\n        <form [formGroup]=\"examForm\" (submit)=\"saveExam()\"></form>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { AddTestComponent } from './add-test.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: AddTestComponent },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddTestRoutingModule {}\n","import { ExamService } from './../../../../../../services/exam.service';\nimport { NbToastrService, NbStepperComponent } from '@nebular/theme';\nimport { BatchService } from './../../../../../../services/batch.service';\nimport { CourseService } from './../../../../../../services/course.service';\nimport { BatchModel } from './../../../../../../models/batch.model';\nimport { CourseModel, SubjectModel } from './../../../../../../models/course.model';\nimport { CategoryModel, BranchModel } from './../../../../../../models/branch.model';\nimport { ExamModel } from './../../../../../../models/exam.model';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\nimport { BranchService } from './../../../../../../services/branch.service';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { DateService } from '../../../../../../services/shared-services/date.service';\n\n@Component({\n  selector: 'ngx-add-test',\n  templateUrl: './add-test.component.html',\n  styleUrls: ['./add-test.component.scss'],\n})\nexport class AddTestComponent implements OnInit, OnDestroy {\n  @ViewChild('stepper', { static: false }) stepper: NbStepperComponent;\n\n  loading: boolean;\n  submit: boolean;\n\n  branchId: string;\n  category: CategoryModel;\n  course: CourseModel;\n  batch: BatchModel;\n  examForm: FormGroup;\n  examId: string;\n  exam: ExamModel;\n  subjects: SubjectModel[];\n\n  constructor(\n    private branchService: BranchService,\n    private courseService: CourseService,\n    public dateService: DateService,\n    private batchService: BatchService,\n    private examService: ExamService,\n    private toastrService: NbToastrService,\n    private router: Router,\n    private route: ActivatedRoute,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.submit = false;\n\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.router.navigate(['../'], { relativeTo: this.route });\n      return;\n    }\n\n    let mode: string;\n\n    this.route.queryParams.subscribe((param: Params) => {\n      mode = param.mode;\n    });\n\n    this.examId = this.examService.getExamId();\n\n    if (mode && mode !== 'edit') {\n      this.showToastr('top-right', 'danger', 'Invalid Route');\n      // this.router.navigate(['../page-not-found'], { relativeTo: this.route });\n      return;\n    } else if (mode && !this.examId) {\n      this.showToastr('top-right', 'danger', 'Exam Not Found');\n      // this.router.navigate(['../page-not-found'], { relativeTo: this.route });\n      return;\n    }\n\n    this.branchService.getCategoryData().subscribe((category: CategoryModel) => {\n      this.category = category;\n    });\n\n    this.courseService.getCourseData().subscribe((course: CourseModel) => {\n      this.course = course;\n    });\n\n    this.batchService.getBatchData().subscribe((batch: BatchModel) => {\n      this.batch = batch;\n    });\n\n    this.subjects = [];\n    this.batch.subjects.forEach((curSubject: any) => {\n      const mySubject = this.course.subjects.find(\n        (subject: SubjectModel) => subject._id === curSubject.subject,\n      );\n      this.subjects.push(mySubject);\n    });\n\n    this.examForm = new FormGroup({\n      examTitle: new FormControl(null, { validators: [Validators.required] }),\n      subject: new FormControl(null, { validators: [Validators.required] }),\n      outOfMarks: new FormControl(null, { validators: [Validators.required, Validators.min(0)] }),\n      passingMarks: new FormControl(null, { validators: [Validators.required, Validators.min(0)] }),\n      date: new FormControl(this.dateService.getDateString(), {\n        validators: [Validators.required],\n      }),\n      time: new FormControl(null, { validators: [Validators.required] }),\n      duration: new FormControl(null, { validators: [Validators.required, Validators.min(0)] }),\n    });\n\n    if (mode && this.examId) {\n      this.examService.getExam(this.examId).subscribe(\n        (exam: ExamModel) => {\n          this.exam = exam;\n\n          this.examForm.patchValue({\n            examTitle: this.exam.examTitle,\n            subject: this.exam.subject,\n            outOfMarks: this.exam.outOfMarks,\n            passingMarks: this.exam.passingMarks,\n            date: this.exam.date,\n            time: this.exam.time,\n            duration: this.exam.duration,\n          });\n\n          this.loading = false;\n        },\n        (err: any) => {\n          this.showToastr('top-right', 'danger', err);\n          this.back();\n        },\n      );\n    } else {\n      this.loading = false;\n    }\n  }\n\n  previousStep() {\n    this.stepper.previous();\n  }\n\n  submitExamForm() {\n    this.examForm.markAllAsTouched();\n    if (this.examForm.invalid) {\n      this.showToastr('top-right', 'danger', 'All Exam Fields are Required');\n      return;\n    }\n\n    this.stepper.next();\n  }\n\n  saveExam() {\n    this.examForm.markAllAsTouched();\n    if (this.examForm.invalid) {\n      this.showToastr('top-right', 'danger', 'All Exam Fields are Required');\n      return;\n    }\n    this.submit = true;\n\n    const exam: any = this.examForm.value;\n    exam.branch = this.branchId;\n    exam.category = this.category._id;\n    exam.course = this.course._id;\n    exam.batch = this.batch._id;\n\n    if (!this.exam) {\n      this.examService.saveExam(exam).subscribe(\n        (res: any) => {\n          this.showToastr('top-right', 'success', 'New Exam Added Successfully!');\n          this.back();\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.submit = false;\n        },\n      );\n    } else {\n      exam._id = this.exam._id;\n      exam.marks = this.exam.marks;\n      this.examService.editExam(exam).subscribe(\n        (res: any) => {\n          this.showToastr('top-right', 'success', 'New Exam Updated Successfully!');\n          this.back();\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.submit = false;\n        },\n      );\n    }\n  }\n\n  getSubject(subjectId: string) {\n    const subject = this.subjects.find((curSubject: SubjectModel) => curSubject._id === subjectId);\n    if (subject) {\n      return subject.subject;\n    }\n\n    return '--';\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route, replaceUrl: true });\n  }\n\n  ngOnDestroy() {\n    this.examService.deleteExamId();\n    this.examService.deleteExamData();\n  }\n}\n","import {\n  NbInputModule,\n  NbButtonModule,\n  NbCardModule,\n  NbSpinnerModule,\n  NbStepperModule,\n  NbSelectModule,\n  NbIconModule,\n} from '@nebular/theme';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AddTestComponent } from './add-test.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AddTestRoutingModule } from './add-test-routing.module';\n\n@NgModule({\n  declarations: [AddTestComponent],\n  imports: [\n    CommonModule,\n    AddTestRoutingModule,\n    NbInputModule,\n    NbIconModule,\n    NbSelectModule,\n    NbCardModule,\n    NbSpinnerModule,\n    NbStepperModule,\n    NbButtonModule,\n    ReactiveFormsModule,\n  ],\n})\nexport class AddTestModule {}\n"]}