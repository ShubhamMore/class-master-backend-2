{"version":3,"sources":["webpack:///src/app/institute/transaction/view-transaction/view-transaction.component.html","webpack:///src/app/institute/transaction/view-transaction/view-transaction-routing.module.ts","webpack:///src/app/institute/transaction/view-transaction/view-transaction.component.ts","webpack:///src/app/institute/transaction/view-transaction/view-transaction.module.ts"],"names":["routes","path","component","ViewTransactionComponent","transactionService","router","route","dateService","toastrService","this","loading","gstNo","environment","address","getInstituteTransactionData","subscribe","transaction","showToastr","back","receiptAmount","amount","gstAmount","toFixed","totalAmount","navigate","relativeTo","position","status","message","show","window","print","canActivate","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","ViewTransactionRoutingModule","forChild","ViewTransactionModule"],"mappings":"sTAeI,uCACE,yCACE,yCACE,yCACE,yCACE,yCACE,oCAKF,8BACF,8BAEA,yCACE,yCACE,yBACF,8BACF,8BAEA,0CACE,0CAAiB,0BAAiB,8BACpC,8BACF,8BAEA,kCAEA,0CACE,2CACE,sCAAG,2CAAQ,mCAAM,8BAAS,0BAA0B,8BACtD,8BAEA,2CACE,sCAAG,2CAAQ,6CAAgB,8BAAS,0BAA2B,8BACjE,8BAEA,2CACE,sCAAG,2CAAQ,uCAAU,8BAAS,0BAA0B,8BAC1D,8BAEA,2CACE,sCACE,2CAAQ,mCAAM,8BACd,0BACF,8BACF,8BAaF,8BAEA,0CACE,2CACE,2CACE,6CACE,4CACE,uCACE,uCAAI,wCAAW,8BACf,uCAAI,mCAAM,8BACZ,8BACF,8BACA,0CACE,uCACE,uCAAI,0BAA6D,8BACjE,uCAAI,0BAAc,8BACpB,8BACA,uCACE,uCAAI,oCAAO,8BACX,uCAAI,0BAAiB,8BACvB,8BACF,8BACA,0CACE,uCACE,uCAAI,mCAAM,8BACV,uCAAI,0BAAmB,8BACzB,8BACF,8BACF,8BACF,8BACF,8BACF,8BAEA,kCACA,kCAEA,0CACE,0CACE,yCACE,0CAAO,0FAA6D,8BACtE,8BACF,8BACF,8BAEA,0CACE,0CACE,8CAME,+HAEA,0CACF,8BACF,8BACF,8BACF,8BACF,8BACF,8B,+CAtGY,iFAKe,mFAQS,qFAIU,6FAIN,qFAM5B,4JA6BU,8HACA,gFAIA,mFAMA,sF,sBAwCxB,wCAAiC,sCAAU,+BCtI7C,MAAMA,EAAiB,CACrB,CAAEC,KAAM,GAAIC,UCQP,M,MAAMC,EAUX,YACUC,EACAC,EACAC,EACDC,EACCC,GAJA,KAAAJ,qBACA,KAAAC,SACA,KAAAC,QACD,KAAAC,cACC,KAAAC,gBAGV,WACEC,KAAKC,SAAU,EAEfD,KAAKE,MAAQC,EAAA,EAAYD,MACzBF,KAAKI,QAAUD,EAAA,EAAYC,QAE3BJ,KAAKL,mBACFU,8BACAC,UAAWC,IACLA,IACHP,KAAKQ,WAAW,YAAa,SAAU,6BACvCR,KAAKS,QAEPT,KAAKO,YAAcA,EAEnB,MAAMG,GAAiBH,EAAYI,OAE7BA,EAASD,EAAgB,KAG/BV,KAAKY,WAFaF,EAAgBC,GAEPE,QAAQ,GACnCb,KAAKW,OAASA,EAAOE,QAAQ,GAE7Bb,KAAKc,YAAcJ,EAAcG,QAAQ,GAEzCb,KAAKC,SAAU,IAIrB,OACED,KAAKJ,OAAOmB,SAAS,CAAC,OAAQ,CAAEC,WAAYhB,KAAKH,QAG3C,WAAWoB,EAAeC,EAAaC,GAC7CnB,KAAKD,cAAcqB,KAAKF,EAAQC,EAAS,CACvCF,WACAC,WAIJ,QAWEG,OAAOC,QAGT,gB,6CAxEW5B,GAAwB,iM,mDAAxBA,EAAwB,uxB,GAAA,MFbrC,2CACE,kDACE,4CAME,qDAAS,EAAAe,UAET,kCACF,8BACA,sCAAI,uCAAW,8BACjB,8BACA,gDACE,6CAuHF,8BACF,8BAEA,+F,2CA1HS,yEAAkC,gB,2DEFpC,GDR4Cc,YAAa,IAE9D,CACE/B,KAAM,iBACNgC,aAAc,IACZ,iCAA+DC,KAC5DC,GAAMA,EAAEC,qBAIf,CACEnC,KAAM,KACNoC,WAAY,iBACZC,UAAW,SAQR,Y,MAAMC,G,yDAAAA,I,+EAAAA,IAA4B,SAH9B,CAAC,IAAaC,SAASxC,IACtB,O,GAEL,GERA,Q,MAAMyC,G,yDAAAA,I,+EAAAA,IAAqB,SATvB,CACP,IACA,EACA,IACA,IACA,IACA,S,GAGG","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <button\n      type=\"button\"\n      nbButton\n      class=\"float-right\"\n      status=\"warning\"\n      size=\"small\"\n      (click)=\"back()\"\n    >\n      Back\n    </button>\n    <h3>Transaction</h3>\n  </nb-card-header>\n  <nb-card-body>\n    <div *ngIf=\"!loading; else loadingData\">\n      <div class=\"row m-5\" id=\"printable-bill\">\n        <div class=\"col-md-9 col-11 mx-auto\">\n          <div class=\"row\">\n            <div class=\"col-md-4 col-sm-6 co-10 mx-auto\">\n              <div class=\"text-center\">\n                <img\n                  src=\"./../../../../assets/brand/the-class-master.png\"\n                  alt=\"Class Master\"\n                  width=\"75%\"\n                />\n              </div>\n            </div>\n\n            <div class=\"col-12\">\n              <h6 class=\"text-center pt-2\">\n                {{ address }}\n              </h6>\n            </div>\n\n            <div class=\"col-12\">\n              <h6 class=\"pt-2\">GSTN: {{ gstNo }}</h6>\n            </div>\n          </div>\n\n          <hr />\n\n          <div class=\"row\">\n            <div class=\"col-md-6 col-10 mx-auto\">\n              <p><strong>Name: </strong>{{ transaction.userName }}</p>\n            </div>\n\n            <div class=\"col-md-6 col-10 mx-auto\">\n              <p><strong>Transaction Id: </strong>trans_{{ transaction._id }}</p>\n            </div>\n\n            <div class=\"col-md-6 col-10 mx-auto\">\n              <p><strong>Order Id: </strong>{{ transaction.order_id }}</p>\n            </div>\n\n            <div class=\"col-md-6 col-10 mx-auto\">\n              <p>\n                <strong>Date: </strong>\n                {{ dateService.formatDate(dateService.convertToDateString(transaction.createdAt)) }}\n              </p>\n            </div>\n\n            <!-- <div class=\"col-md-6 col-10 mx-auto\">\n              <p>\n                <strong>Branch: </strong>{{ transaction.branchBasicDetails.branchName }}\n              </p>\n            </div>\n\n            <div class=\"col-md-6 col-10 mx-auto\">\n              <p>\n                <strong>Branch City: </strong>{{ transaction.branchAddress.city }}\n              </p>\n            </div> -->\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col-md-8 col-sm-10 col-12 mx-auto\">\n              <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                  <thead class=\"text-center\">\n                    <tr>\n                      <th>Description</th>\n                      <th>Amount</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>{{ transaction.packageType }}&nbsp;{{ transaction.planType }}</td>\n                      <td>{{ amount }}/-</td>\n                    </tr>\n                    <tr>\n                      <td>GST 18%</td>\n                      <td>{{ gstAmount }}/-</td>\n                    </tr>\n                  </tbody>\n                  <tfoot>\n                    <tr>\n                      <th>Total:</th>\n                      <th>{{ totalAmount }}/-</th>\n                    </tr>\n                  </tfoot>\n                </table>\n              </div>\n            </div>\n          </div>\n\n          <br />\n          <hr />\n\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <h6 class=\"text-center\">\n                <small>This is computer generated receipt and requires no signature.</small>\n              </h6>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <button\n                class=\"float-right\"\n                nbButton\n                status=\"success\"\n                size=\"small\"\n                nbTooltip=\"Print\"\n                (click)=\"print()\"\n              >\n                <nb-icon icon=\"printer-outline\"></nb-icon>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n\n<ng-template #loadingData>\n  <p class=\"pt-5 pb-5 text-center\">Loading...</p>\n</ng-template>\n","import { ViewTransactionComponent } from './view-transaction.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: ViewTransactionComponent, canActivate: [] },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ViewTransactionRoutingModule {}\n","import { DateService } from './../../../services/shared-services/date.service';\nimport { NbToastrService } from '@nebular/theme';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { InstituteTransactionModel } from './../../../models/institute-transaction.model';\nimport { TransactionService } from './../../../services/transaction.service';\nimport { environment } from './../../../../environments/environment';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\n\n@Component({\n  selector: 'ngx-view-transaction',\n  templateUrl: './view-transaction.component.html',\n  styleUrls: ['./view-transaction.component.scss'],\n})\nexport class ViewTransactionComponent implements OnInit, OnDestroy {\n  loading: boolean;\n  transaction: InstituteTransactionModel;\n  address: string;\n\n  gstNo: string;\n  amount: string;\n  gstAmount: string;\n  totalAmount: string;\n\n  constructor(\n    private transactionService: TransactionService,\n    private router: Router,\n    private route: ActivatedRoute,\n    public dateService: DateService,\n    private toastrService: NbToastrService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n\n    this.gstNo = environment.gstNo;\n    this.address = environment.address;\n\n    this.transactionService\n      .getInstituteTransactionData()\n      .subscribe((transaction: InstituteTransactionModel) => {\n        if (!transaction) {\n          this.showToastr('top-right', 'danger', 'Transaction Not Available');\n          this.back();\n        }\n        this.transaction = transaction;\n\n        const receiptAmount = +transaction.amount;\n\n        const amount = receiptAmount / 1.18;\n        const gstAmount = receiptAmount - amount;\n\n        this.gstAmount = gstAmount.toFixed(2);\n        this.amount = amount.toFixed(2);\n\n        this.totalAmount = receiptAmount.toFixed(2);\n\n        this.loading = false;\n      });\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route });\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n\n  print() {\n    // const divContents = document.getElementById('printable-bill').innerHTML;\n    // const a = window.open('', '', '');\n    // a.document.write('<html><body>');\n    // a.document.write(divContents);\n    // a.document.write('</body></html>');\n    // a.document.close();\n    // a.print();\n    // setTimeout(() => {\n    //   a.close();\n    // }, 100);\n    window.print();\n  }\n\n  ngOnDestroy() {}\n}\n","import { NbCardModule, NbButtonModule, NbIconModule, NbTooltipModule } from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ViewTransactionRoutingModule } from './view-transaction-routing.module';\nimport { ViewTransactionComponent } from './view-transaction.component';\n\n@NgModule({\n  declarations: [ViewTransactionComponent],\n  imports: [\n    CommonModule,\n    ViewTransactionRoutingModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbTooltipModule,\n  ],\n})\nexport class ViewTransactionModule {}\n"]}