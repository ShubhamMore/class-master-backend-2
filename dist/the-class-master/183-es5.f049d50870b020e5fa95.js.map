{"version":3,"sources":["webpack:///src/app/institute/branch/lecture/question-answers/add-question-answers/add-answer/add-answer.component.html","webpack:///src/app/institute/branch/lecture/question-answers/add-question-answers/add-answer/add-answer.component.ts","webpack:///src/app/institute/branch/lecture/question-answers/view-question-answers/view-question-answers.component.html","webpack:///src/app/institute/branch/lecture/question-answers/view-question-answers/view-question-answers-routing.module.ts","webpack:///src/app/institute/branch/lecture/question-answers/view-question-answers/view-question-answers.component.ts","webpack:///src/app/institute/branch/lecture/question-answers/view-question-answers/view-question-answers.module.ts"],"names":["AddAnswerComponent","toastrService","branchService","lectureService","questionAnswersService","ref","this","loading","submit","branchId","getBranchId","answerForm","answer","lectureQuestionAnswer","validators","required","getQuestion","subscribe","questionAnswers","lectureQuestion","getQuestionAnswer","questionAnswer","patchValue","getLectureData","lecture","onClose","close","markAllAsTouched","invalid","showToastr","value","branch","category","course","batch","_id","question","editLectureQuestionAnswer","res","error","newLectureQuestionAnswer","position","status","message","show","deleteQuestionAnswerId","deleteQuestionAnswer","ViewQuestionAnswersComponent","ViewQuestionAnswersModule","ViewQuestionAnswersRoutingModule","routes","path","component","authService","dateService","router","route","dialogService","user","getUserData","getQuestionAnswers","back","getLectureQuestionAnswers","id","getQuestionAnswersId","getLectureQuestionAnswer","setQuestionId","setQuestion","openAnswerDialog","open","context","saveLectureQuestionAnswer","questionDate","convertToDate","toString","substr","deleteLectureQuestion","err","i","deleteLectureQuestionAnswer","answers","splice","setQuestionAnswerId","setQuestionAnswer","index","findIndex","curAnswer","name","push","navigate","relativeTo","deleteQuestionAnswersId","deleteQuestionAnswers","loadChildren","then","m","PageNotFoundModule","redirectTo","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card class=\"answer-box\">\n  <nb-card-header>\n    <nb-icon class=\"float-right pointer\" icon=\"close-outline\" (click)=\"onClose()\"></nb-icon>\n    <h3>{{ lectureQuestionAnswer ? 'Edit' : 'New' }} Answer</h3>\n  </nb-card-header>\n\n  <nb-card-body>\n    <form [formGroup]=\"answerForm\" (submit)=\"saveLectureQuestionAnswer()\" *ngIf=\"!loading\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"form-control-group\">\n            <label class=\"label\" for=\"input-answer\">Answer:</label>\n            <textarea\n              type=\"text\"\n              nbInput\n              id=\"input-answer\"\n              name=\"answer\"\n              formControlName=\"answer\"\n              placeholder=\"Answer\"\n              fullWidth\n              [status]=\"\n                answerForm.get('answer').touched\n                  ? answerForm.get('answer').invalid\n                    ? 'danger'\n                    : 'success'\n                  : 'basic'\n              \"\n            ></textarea>\n            <ng-container\n              *ngIf=\"answerForm.get('answer').invalid && answerForm.get('answer').touched\"\n            >\n              <p class=\"caption status-danger\" *ngIf=\"answerForm.get('answer').errors?.required\">\n                Answer is required!\n              </p>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n\n      <hr />\n\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <button\n            type=\"button\"\n            nbButton\n            size=\"small\"\n            status=\"danger\"\n            (click)=\"onClose()\"\n            [disabled]=\"submit\"\n          >\n            Cancel\n          </button>\n        </div>\n        <div class=\"col-6 text-right\">\n          <button\n            type=\"submit\"\n            nbButton\n            size=\"small\"\n            status=\"success\"\n            [disabled]=\"submit\"\n            [nbSpinner]=\"submit\"\n            nbSpinnerStatus=\"primary\"\n            nbSpinnerSize=\"small\"\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n","import { LectureService } from '../../../../../../services/lecture.service';\nimport { BranchService } from '../../../../../../services/branch.service';\nimport { QuestionAnswersService } from '../../../../../../services/question-answers.service';\nimport { LectureQuestionModel } from '../../../../../../models/lecture-question.model';\nimport { NbDialogRef, NbToastrService } from '@nebular/theme';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { LectureQuestionAnswerModel } from '../../../../../../models/lecture-question-answers.model';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ScheduleModel as LectureModel } from '../../../../../../models/schedule.model';\n\n@Component({\n  selector: 'ngx-add-answer',\n  templateUrl: './add-answer.component.html',\n  styleUrls: ['./add-answer.component.scss'],\n})\nexport class AddAnswerComponent implements OnInit, OnDestroy {\n  loading: boolean;\n  submit: boolean;\n\n  answerForm: FormGroup;\n\n  branchId: string;\n  lecture: LectureModel;\n  lectureQuestionAnswer: LectureQuestionAnswerModel;\n  lectureQuestion: LectureQuestionModel;\n\n  constructor(\n    private toastrService: NbToastrService,\n    private branchService: BranchService,\n    private lectureService: LectureService,\n    private questionAnswersService: QuestionAnswersService,\n    protected ref: NbDialogRef<AddAnswerComponent>,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.submit = false;\n\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.onClose();\n      return;\n    }\n\n    this.answerForm = new FormGroup({\n      answer: new FormControl(\n        this.lectureQuestionAnswer ? this.lectureQuestionAnswer.answer : null,\n        {\n          validators: [Validators.required],\n        },\n      ),\n    });\n\n    this.questionAnswersService.getQuestion().subscribe((questionAnswers: LectureQuestionModel) => {\n      this.lectureQuestion = questionAnswers;\n    });\n\n    this.questionAnswersService\n      .getQuestionAnswer()\n      .subscribe((questionAnswer: LectureQuestionAnswerModel) => {\n        this.lectureQuestionAnswer = questionAnswer;\n        if (questionAnswer) {\n          this.answerForm.patchValue({ answer: this.lectureQuestionAnswer.answer });\n        }\n      });\n\n    this.lectureService.getLectureData().subscribe((lecture: LectureModel) => {\n      this.lecture = lecture;\n      if (!this.lecture) {\n        this.onClose();\n        return;\n      }\n      this.loading = false;\n    });\n  }\n\n  onClose() {\n    this.ref.close();\n  }\n\n  saveLectureQuestionAnswer() {\n    this.answerForm.markAllAsTouched();\n    if (this.answerForm.invalid) {\n      this.showToastr('top-right', 'danger', 'Answer is Required');\n      return;\n    }\n\n    this.submit = true;\n\n    const answer: string = this.answerForm.value.answer;\n\n    const lectureQuestionAnswer: any = {\n      branch: this.branchId,\n      category: this.lecture.category,\n      course: this.lecture.course,\n      batch: this.lecture.batch,\n      lecture: this.lecture._id,\n      question: this.lectureQuestion._id,\n      answer: answer,\n    };\n\n    if (!this.lectureQuestionAnswer) {\n      this.questionAnswersService.newLectureQuestionAnswer(lectureQuestionAnswer).subscribe(\n        (newLectureQuestionAnswer: LectureQuestionAnswerModel) => {\n          this.showToastr('top-right', 'success', 'New Answer Added Successfully!');\n          this.ref.close(newLectureQuestionAnswer);\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.submit = false;\n        },\n      );\n    } else {\n      lectureQuestionAnswer._id = this.lectureQuestionAnswer._id;\n\n      this.questionAnswersService.editLectureQuestionAnswer(lectureQuestionAnswer).subscribe(\n        (res: any) => {\n          this.lectureQuestionAnswer.answer = answer;\n          this.showToastr('top-right', 'success', 'Answer Updated Successfully!');\n          this.ref.close(this.lectureQuestionAnswer);\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.submit = false;\n        },\n      );\n    }\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n\n  ngOnDestroy() {\n    this.questionAnswersService.deleteQuestionAnswerId();\n    this.questionAnswersService.deleteQuestionAnswer();\n  }\n}\n","<!-- <ngx-add-answer\n  *ngIf=\"answerModel\"\n  [answer]=\"lectureQuestionAnswer\"\n  (close)=\"closeAnswerModel()\"\n  (submitAnswer)=\"saveLectureQuestionAnswer($event)\"\n></ngx-add-answer> -->\n\n<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <button class=\"float-right\" nbButton size=\"small\" status=\"warning\" (click)=\"back()\">\n          Back\n        </button>\n        <h3>Question & Answers</h3>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body class=\"body-container\">\n    <ng-container *ngIf=\"!loading; else loadingData\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <nb-card>\n            <nb-card-header>\n              <div class=\"row\">\n                <div class=\"col-md-6 col-12\">\n                  <nb-user\n                    [name]=\"lectureQuestion.name ? lectureQuestion.name : 'Unknown'\"\n                    [title]=\"formatQuestionAnswerDate(lectureQuestion.createdAt)\"\n                  ></nb-user>\n                </div>\n                <div class=\"col-md-6 col-12 text-right\">\n                  <button\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"success\"\n                    (click)=\"addQuestionAnswer(lectureQuestion)\"\n                  >\n                    Answer\n                  </button>\n                  <button\n                    *ngIf=\"lectureQuestion.createdBy === user.imsMasterId\"\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"basic\"\n                    (click)=\"editQuestion(lectureQuestion)\"\n                  >\n                    Edit\n                  </button>\n                  <button\n                    *ngIf=\"lectureQuestion.createdBy === user.imsMasterId\"\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"danger\"\n                    (click)=\"deleteQuestion(lectureQuestion._id)\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </nb-card-header>\n            <nb-card-body>\n              <div [innerHTML]=\"lectureQuestion.question\"></div>\n            </nb-card-body>\n          </nb-card>\n        </div>\n      </div>\n\n      <div class=\"row\" *ngIf=\"lectureQuestion.answers.length > 0; else noAnswers\">\n        <div class=\"col-1\"></div>\n\n        <div class=\"col-11\">\n          <nb-card *ngFor=\"let lectureQuestionAnswer of lectureQuestion.answers; let i = index\">\n            <nb-card-header>\n              <div class=\"row\">\n                <div class=\"col-md-6 col-12\">\n                  <nb-user\n                    [name]=\"lectureQuestionAnswer.name ? lectureQuestionAnswer.name : 'Unknown'\"\n                    [title]=\"formatQuestionAnswerDate(lectureQuestionAnswer.createdAt)\"\n                  ></nb-user>\n                </div>\n                <div class=\"col-md-6 col-12 text-right\">\n                  <button\n                    *ngIf=\"lectureQuestionAnswer.createdBy === user.imsMasterId\"\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"basic\"\n                    (click)=\"editQuestionAnswer(lectureQuestionAnswer)\"\n                  >\n                    Edit\n                  </button>\n                  <button\n                    *ngIf=\"lectureQuestionAnswer.createdBy === user.imsMasterId\"\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"danger\"\n                    (click)=\"deleteQuestionAnswer(lectureQuestionAnswer._id)\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </nb-card-header>\n            <nb-card-body>\n              <div [innerHTML]=\"lectureQuestionAnswer.answer\"></div>\n            </nb-card-body>\n          </nb-card>\n        </div>\n      </div>\n\n      <ng-template #noAnswers>\n        <p class=\"pt-5 pb-5 text-center\">You are first to Answer this Question..</p>\n      </ng-template>\n    </ng-container>\n    <ng-template #loadingData>\n      <p class=\"text-center pt-5 pb-5\">Loading...</p>\n    </ng-template>\n  </nb-card-body>\n</nb-card>\n","import { ViewQuestionAnswersComponent } from './view-question-answers.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ViewQuestionAnswersComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ViewQuestionAnswersRoutingModule {}\n","import { AddQuestionComponent } from './../add-question-answers/add-question/add-question.component';\nimport { AddAnswerComponent } from '../add-question-answers/add-answer/add-answer.component';\nimport { DateService } from './../../../../../services/shared-services/date.service';\nimport { AuthService } from './../../../../../authentication/auth/auth-service/auth.service';\nimport { QuestionAnswersService } from './../../../../../services/question-answers.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LectureService } from './../../../../../services/lecture.service';\nimport { BranchService } from './../../../../../services/branch.service';\nimport { LectureQuestionModel } from '../../../../../models/lecture-question.model';\nimport { NbToastrService, NbDialogService } from '@nebular/theme';\nimport { ScheduleModel as LectureModel } from './../../../../../models/schedule.model';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { LectureQuestionAnswerModel } from '../../../../../models/lecture-question-answers.model';\n\n@Component({\n  selector: 'ngx-view-question-answers',\n  templateUrl: './view-question-answers.component.html',\n  styleUrls: ['./view-question-answers.component.scss'],\n})\nexport class ViewQuestionAnswersComponent implements OnInit, OnDestroy {\n  loading: boolean;\n  lectureQuestion: LectureQuestionModel;\n  branchId: string;\n  lecture: LectureModel;\n  editLectureQuestionAnswer: boolean;\n  user: { name: string; imsMasterId: string };\n\n  constructor(\n    private authService: AuthService,\n    private toastrService: NbToastrService,\n    private branchService: BranchService,\n    private lectureService: LectureService,\n    private questionAnswersService: QuestionAnswersService,\n    private dateService: DateService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private dialogService: NbDialogService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.back();\n      return;\n    }\n\n    this.editLectureQuestionAnswer = false;\n\n    this.user = this.authService.getUserData();\n\n    this.questionAnswersService\n      .getQuestionAnswers()\n      .subscribe((questionAnswers: LectureQuestionModel) => {\n        if (!questionAnswers) {\n        }\n        this.lectureQuestion = questionAnswers;\n      });\n\n    this.lectureService.getLectureData().subscribe((lecture: LectureModel) => {\n      this.lecture = lecture;\n      if (!this.lecture) {\n        this.back();\n        return;\n      }\n    });\n\n    this.getLectureQuestionAnswers(this.lectureQuestion._id);\n\n    if (!this.lectureQuestion) {\n    } else {\n      const id = this.questionAnswersService.getQuestionAnswersId();\n      if (id) {\n        this.getLectureQuestionAnswers(id);\n      } else {\n        this.showToastr('top-right', 'danger', 'Question Not Found');\n        this.back();\n      }\n    }\n  }\n\n  getLectureQuestionAnswers(id: string) {\n    this.questionAnswersService.getLectureQuestionAnswer(id).subscribe(\n      (questionAnswer: LectureQuestionModel) => {\n        this.lectureQuestion = questionAnswer;\n        this.loading = false;\n      },\n      (error: any) => {\n        this.showToastr('top-right', 'danger', error);\n        this.back();\n      },\n    );\n  }\n\n  addQuestionAnswer(lectureQuestion: LectureQuestionModel) {\n    this.questionAnswersService.setQuestionId(lectureQuestion._id);\n    this.questionAnswersService.setQuestion(lectureQuestion);\n    this.openAnswerDialog();\n  }\n\n  private openAnswerDialog() {\n    this.dialogService\n      .open(AddAnswerComponent, {\n        context: {},\n      })\n      .onClose.subscribe(\n        (answer: LectureQuestionAnswerModel) => answer && this.saveLectureQuestionAnswer(answer),\n      );\n  }\n\n  editQuestion(lectureQuestion: LectureQuestionModel) {\n    this.questionAnswersService.setQuestionId(lectureQuestion._id);\n    this.questionAnswersService.setQuestion(lectureQuestion);\n    this.dialogService\n      .open(AddQuestionComponent, {\n        context: {},\n      })\n      .onClose.subscribe((question: LectureQuestionModel) => {\n        if (question) {\n          this.lectureQuestion = question;\n        }\n      });\n  }\n\n  formatQuestionAnswerDate(questionDate: any) {\n    const date: string = this.dateService.convertToDate(questionDate).toString();\n    return date.substr(0, 21);\n  }\n\n  deleteQuestion(id: string) {\n    this.loading = true;\n    this.questionAnswersService.deleteLectureQuestion(id).subscribe(\n      (res: any) => {\n        this.back();\n        this.showToastr('top-right', 'success', `Question Deleted Successfully!`);\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n        this.loading = false;\n      },\n    );\n  }\n\n  deleteQuestionAnswer(id: string, i: number) {\n    this.questionAnswersService.deleteLectureQuestionAnswer(id).subscribe(\n      (res: any) => {\n        this.lectureQuestion.answers.splice(i, 1);\n        this.showToastr('top-right', 'success', `Answer Deleted Successfully!`);\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n      },\n    );\n  }\n\n  editQuestionAnswer(lectureQuestionAnswer: LectureQuestionAnswerModel) {\n    if (lectureQuestionAnswer) {\n      this.questionAnswersService.setQuestionAnswerId(lectureQuestionAnswer._id);\n      this.questionAnswersService.setQuestionAnswer(lectureQuestionAnswer);\n      this.editLectureQuestionAnswer = true;\n      this.openAnswerDialog();\n    } else {\n      // tslint:disable-next-line: quotemark\n      this.showToastr('top-right', 'danger', \"Can't Edit this Answer\");\n    }\n  }\n\n  saveLectureQuestionAnswer(newLectureQuestionAnswer: LectureQuestionAnswerModel) {\n    if (!this.editLectureQuestionAnswer) {\n      newLectureQuestionAnswer.name = this.user.name;\n      this.lectureQuestion.answers.push(newLectureQuestionAnswer);\n    } else {\n      const index = this.lectureQuestion.answers.findIndex(\n        (curAnswer: LectureQuestionAnswerModel) => curAnswer._id === newLectureQuestionAnswer._id,\n      );\n\n      if (index >= 0) {\n        this.lectureQuestion.answers[index] = newLectureQuestionAnswer;\n      }\n      this.editLectureQuestionAnswer = false;\n    }\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route });\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n\n  ngOnDestroy() {\n    this.questionAnswersService.deleteQuestionAnswersId();\n    this.questionAnswersService.deleteQuestionAnswers();\n  }\n}\n","import { AddQuestionAnswersModule } from './../add-question-answers/add-question-answers.module';\nimport { NbCardModule, NbButtonModule, NbIconModule, NbUserModule } from '@nebular/theme';\nimport { ViewQuestionAnswersComponent } from './view-question-answers.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ViewQuestionAnswersRoutingModule } from './view-question-answers-routing.module';\n\n@NgModule({\n  declarations: [ViewQuestionAnswersComponent],\n  imports: [\n    CommonModule,\n    ViewQuestionAnswersRoutingModule,\n    AddQuestionAnswersModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbUserModule,\n  ],\n})\nexport class ViewQuestionAnswersModule {}\n"]}