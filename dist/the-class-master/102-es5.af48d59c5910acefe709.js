!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{dGLe:function(n,a,r){"use strict";r.r(a),r.d(a,"AttendanceModule",(function(){return k}));var c=r("aceb"),i=r("ofXK"),o=r("fXoL"),l=r("EQut"),d=r("IAlr"),s=r("lst6"),u=r("ZatZ"),m=r("7kqb"),h=r("ggm5"),v=r("tyNb");function p(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td",10),o["\u0275\u0275elementStart"](6,"div",11),o["\u0275\u0275elementStart"](7,"label"),o["\u0275\u0275elementStart"](8,"input",12),o["\u0275\u0275listener"]("change",(function(e){o["\u0275\u0275restoreView"](n);var a=t.index;return o["\u0275\u0275nextContext"](2).onChangeAttendance(e.target.checked,a)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"label",13),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](a.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](a.rollNumber),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("id",a.student)("checked",a.attendance),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("for",a.student),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](a.attendance?"P":"A")}}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"div",7),o["\u0275\u0275elementStart"](2,"table",8),o["\u0275\u0275elementStart"](3,"thead"),o["\u0275\u0275elementStart"](4,"tr"),o["\u0275\u0275elementStart"](5,"th"),o["\u0275\u0275text"](6,"Student Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"th"),o["\u0275\u0275text"](8,"Roll Number"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"th"),o["\u0275\u0275text"](10,"Mark Attendance"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"tbody"),o["\u0275\u0275template"](12,p,11,6,"tr",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](12),o["\u0275\u0275property"]("ngForOf",n.students)}}function g(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",14),o["\u0275\u0275text"](1,"No Students Found"),o["\u0275\u0275elementEnd"]())}var b,S,E,x=[{path:"",component:(b=function(){function n(t,a,r,c,i,o,l,d,s){e(this,n),this.branchService=t,this.courseService=a,this.batchService=r,this.dateService=c,this.lectureService=i,this.attendanceService=o,this.toastrService=l,this.router=d,this.route=s}var a,r,c;return a=n,(r=[{key:"ngOnInit",value:function(){var e=this;return this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.lectureService.getLectureData().subscribe((function(t){e.lecture=t})),this.lecture?(this.courseService.getCourseData().subscribe((function(t){e.course=t})),this.batchService.getBatchData().subscribe((function(t){e.batch=t})),this.students=[],void this.getStudents()):(this.showToastr("top-right","danger","Lecture Not Found"),void this.back())):(this.showToastr("top-right","danger","Branch Not Found"),void this.back())}},{key:"getStudents",value:function(){var e=this;this.loading=!0,this.attendanceService.getStudents(this.lecture.branch,this.lecture.category,this.lecture.course,this.lecture.batch,this.lecture._id).subscribe((function(t){t.map((function(e){return e.attendance=!!e.attendance&&e.attendance})),e.students=t,e.loading=!1}),(function(t){e.showToastr("top-right","danger",t),e.loading=!1}))}},{key:"onChangeAttendance",value:function(e,t){this.students[t].attendance=e}},{key:"saveAttendance",value:function(){var e=this;this.attendanceService.saveAttendance({date:this.lecture.date,branch:this.lecture.branch,category:this.lecture.category,course:this.lecture.course,batch:this.lecture.batch,subject:this.lecture.subject,lecture:this.lecture._id,attendance:this.students}).subscribe((function(t){e.showToastr("top-right","success","Attendance ".concat(t?"Updated":"Marked"," Successfully")),e.back()}),(function(t){e.showToastr("top-right","danger",t)}))}},{key:"getTime",value:function(e,t){return(e=this.dateService.formatTime(e))+" - "+this.dateService.formatTime(t)}},{key:"getTeacher",value:function(e){return e}},{key:"getSubject",value:function(e){var t=this.course.subjects.find((function(t){return t._id===e}));return t?t.subject:"--"}},{key:"back",value:function(){this.router.navigate(["../manage"],{relativeTo:this.route})}},{key:"showToastr",value:function(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}])&&t(a.prototype,r),c&&t(a,c),n}(),b.\u0275fac=function(e){return new(e||b)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](u.a),o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](c.Gb),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](v.a))},b.\u0275cmp=o["\u0275\u0275defineComponent"]({type:b,selectors:[["ngx-attendance"]],decls:46,vars:8,consts:[[1,"row"],[1,"col-md-4","col-sm-6","col-12"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-12","text-right"],["type","button","nbButton","","size","small","status","primary",3,"click"],["noStudents",""],[1,"col-12"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mark-attendance-selector"],["type","checkbox",1,"mark-attendance",3,"id","checked","change"],[3,"for"],[1,"text-center","pt-5","pb-5"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"div",0),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275elementStart"](4,"span"),o["\u0275\u0275elementStart"](5,"strong"),o["\u0275\u0275text"](6,"Date: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",1),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275elementStart"](10,"strong"),o["\u0275\u0275text"](11,"Time: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",1),o["\u0275\u0275elementStart"](14,"span"),o["\u0275\u0275elementStart"](15,"strong"),o["\u0275\u0275text"](16,"Course: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",1),o["\u0275\u0275elementStart"](19,"span"),o["\u0275\u0275elementStart"](20,"strong"),o["\u0275\u0275text"](21,"Batch: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",1),o["\u0275\u0275elementStart"](24,"span"),o["\u0275\u0275elementStart"](25,"strong"),o["\u0275\u0275text"](26,"Subject: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](27),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",1),o["\u0275\u0275elementStart"](29,"span"),o["\u0275\u0275elementStart"](30,"strong"),o["\u0275\u0275text"](31,"Lecture Topic: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](32),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"nb-card"),o["\u0275\u0275elementStart"](34,"nb-card-header"),o["\u0275\u0275elementStart"](35,"h4"),o["\u0275\u0275text"](36,"ATTENDANCE RECORDING"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"nb-card-body"),o["\u0275\u0275elementStart"](38,"div",0),o["\u0275\u0275template"](39,f,13,1,"div",2),o["\u0275\u0275element"](40,"hr"),o["\u0275\u0275elementStart"](41,"div",3),o["\u0275\u0275elementStart"](42,"button",4),o["\u0275\u0275listener"]("click",(function(){return t.saveAttendance()})),o["\u0275\u0275text"](43," Save "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](44,g,2,0,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](45);o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.lecture.date)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getTime(t.lecture.startTime,t.lecture.endTime)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.course.basicDetails.courseName),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.batch.basicDetails.batchName),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.getSubject(t.lecture.subject)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.lecture.topic),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngIf",t.students.length>0)("ngIfElse",n)}},directives:[c.y,c.A,c.x,i.n,c.v,i.m],styles:[".mark-attendance-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none!important}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:inline-block;font-size:75%;border:1px solid #aaa;border-radius:50%;background:#fff;height:30px;width:30px;padding:1px;margin:1px;line-height:25px;text-align:center;cursor:pointer;transition:background .2s,color .2s}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#0095ff;color:#fff}"]}),b)},{path:"page-not-found",loadChildren:function(){return r.e(0).then(r.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found"}],y=((E=function t(){e(this,t)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:E}),E.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||E)},imports:[[v.g.forChild(x)],v.g]}),E),k=((S=function t(){e(this,t)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[i.c,y,c.B,c.w,c.P]]}),S)}}])}();
//# sourceMappingURL=102-es5.af48d59c5910acefe709.js.map