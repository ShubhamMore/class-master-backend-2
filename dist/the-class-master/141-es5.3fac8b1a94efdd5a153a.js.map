{"version":3,"sources":["webpack:///src/app/employee/branch/students-report/manage-student-reports/manage-student-reports.component.html","webpack:///src/app/employee/branch/students-report/manage-student-reports/manage-student-reports-routing.module.ts","webpack:///src/app/employee/branch/students-report/manage-student-reports/manage-student-reports.component.ts","webpack:///src/app/employee/branch/students-report/manage-student-reports/manage-student-reports.module.ts"],"names":["ManageStudentReportsComponent","ManageStudentReportsModule","ManageStudentReportsRoutingModule","routes","path","component","branchService","studentService","toastrService","branchStudentService","router","route","this","queryParams","subscribe","param","ngOnInit","loading","branchId","getBranchId","branchStudents","filteredBranchStudents","categories","category","getCategories","getStudents","navigate","relativeTo","getBranchData","branch","getBranch","setBranchData","error","showToastr","getBranchAllStudentNameIds","err","student","trim","toLowerCase","filter","branchStudent","name","includes","id","setStudentId","setCategoryId","setBranchStudentId","categoryId","find","curCategory","_id","position","status","message","show","searchStudent","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-9 col-sm-4\">\n        <h3>Student Reports</h3>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <nb-select\n          id=\"select-category\"\n          name=\"category\"\n          [selected]=\"category\"\n          fullWidth\n          placeholder=\"Select Category\"\n          (selectedChange)=\"getStudents($event)\"\n        >\n          <nb-option value=\"\">All</nb-option>\n          <nb-option *ngFor=\"let category of categories\" [value]=\"category._id\">{{\n            category.category\n          }}</nb-option>\n        </nb-select>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body class=\"body-container\">\n    <div class=\"row\">\n      <div class=\"col-md-6 col-sm-8 col-12\">\n        <nb-form-field>\n          <nb-icon nbPrefix icon=\"search-outline\" pack=\"eva\"></nb-icon>\n          <input\n            type=\"text\"\n            nbInput\n            shape=\"round\"\n            placeholder=\"Search\"\n            fullWidth\n            (input)=\"searchStudent($event.target.value)\"\n          />\n        </nb-form-field>\n      </div>\n    </div>\n\n    <br />\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <ng-container *ngIf=\"!loading; else loadingData\">\n          <div\n            class=\"table-responsive\"\n            *ngIf=\"filteredBranchStudents.length > 0; else noBranchStudents\"\n          >\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Student</th>\n                  <th>Category</th>\n                  <th>Status</th>\n                  <th>Course Reports</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let branchStudent of filteredBranchStudents; let i = index\">\n                  <td>{{ i + 1 }}</td>\n                  <td>{{ branchStudent.name }}</td>\n                  <td>{{ getCategory(branchStudent.category) }}</td>\n                  <td>\n                    <span [ngClass]=\"branchStudent.status ? 'active' : 'inactive'\">{{\n                      branchStudent.status ? 'Active' : 'Inactive'\n                    }}</span>\n                  </td>\n                  <td>\n                    <button\n                      nbButton\n                      size=\"small\"\n                      status=\"success\"\n                      nbPrefix\n                      (click)=\"\n                        branchStudentCourses(\n                          branchStudent._id,\n                          branchStudent.student,\n                          branchStudent.category\n                        )\n                      \"\n                    >\n                      Course Reports\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <ng-template #noBranchStudents>\n            <p class=\"text-center pt-5 pb-5\">No Students Available</p>\n          </ng-template>\n        </ng-container>\n        <ng-template #loadingData>\n          <p class=\"text-center pt-5 pb-5\">Loading...</p>\n        </ng-template>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { ManageStudentReportsComponent } from './manage-student-reports.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManageStudentReportsComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManageStudentReportsRoutingModule {}\n","import { NbToastrService } from '@nebular/theme';\nimport { CategoryModel, BranchModel } from './../../../../models/branch.model';\nimport { StudentService } from './../../../../services/student.service';\nimport { BranchStudentService } from '../../../../services/branch-student.service';\nimport { BranchStudentModel } from '../../../../models/branch-student.model';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { BranchService } from './../../../../services/branch.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'ngx-manage-student-reports',\n  templateUrl: './manage-student-reports.component.html',\n  styleUrls: ['./manage-student-reports.component.scss'],\n})\nexport class ManageStudentReportsComponent implements OnInit {\n  loading: boolean;\n  private branchId: string;\n  branchStudents: BranchStudentModel[];\n  filteredBranchStudents: BranchStudentModel[];\n\n  categories: CategoryModel[];\n  category: string;\n  constructor(\n    private branchService: BranchService,\n    private studentService: StudentService,\n    private toastrService: NbToastrService,\n    private branchStudentService: BranchStudentService,\n\n    private router: Router,\n    private route: ActivatedRoute,\n  ) {\n    this.route.queryParams.subscribe((param: Params) => {\n      // put the code from `ngOnInit` here\n      this.ngOnInit();\n    });\n  }\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.router.navigate(['../'], { relativeTo: this.route });\n      return;\n    }\n\n    this.branchStudents = [];\n    this.filteredBranchStudents = [];\n    this.categories = [];\n    this.category = '';\n\n    this.getCategories();\n    this.getStudents(this.category);\n  }\n\n  private getCategories() {\n    this.branchService.getBranchData().subscribe((branch: BranchModel) => {\n      if (branch) {\n        this.categories = branch.categories;\n      }\n    });\n\n    if (!this.categories) {\n      this.branchService.getBranch(this.branchId).subscribe(\n        (branch: BranchModel) => {\n          this.branchService.setBranchData(branch);\n          this.categories = branch.categories;\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.loading = false;\n        },\n      );\n    }\n  }\n\n  getStudents(category: string) {\n    this.loading = true;\n    this.branchStudentService.getBranchAllStudentNameIds(this.branchId, category).subscribe(\n      (branchStudents: BranchStudentModel[]) => {\n        this.branchStudents = branchStudents;\n        this.filteredBranchStudents = branchStudents;\n        this.loading = false;\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n        this.loading = false;\n      },\n    );\n  }\n\n  searchStudent(student: string) {\n    student = student.trim().toLowerCase();\n    if (student) {\n      this.filteredBranchStudents = this.branchStudents.filter(\n        (branchStudent: BranchStudentModel) => branchStudent.name.toLowerCase().includes(student),\n      );\n    } else {\n      this.filteredBranchStudents = [...this.branchStudents];\n    }\n  }\n\n  branchStudentCourses(id: string, student: string, category: string) {\n    this.studentService.setStudentId(student);\n    this.branchService.setCategoryId(category);\n    this.branchStudentService.setBranchStudentId(id);\n    this.router.navigate(['../course'], { relativeTo: this.route });\n  }\n\n  getCategory(categoryId: string) {\n    const category = this.categories.find(\n      (curCategory: CategoryModel) => curCategory._id === categoryId,\n    );\n\n    if (category) {\n      return category.category;\n    }\n\n    return '--';\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import {\n  NbCardModule,\n  NbFormFieldModule,\n  NbInputModule,\n  NbSelectModule,\n  NbButtonModule,\n  NbIconModule,\n  NbTooltipModule,\n} from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ManageStudentReportsRoutingModule } from './manage-student-reports-routing.module';\nimport { ManageStudentReportsComponent } from './manage-student-reports.component';\n\n@NgModule({\n  declarations: [ManageStudentReportsComponent],\n  imports: [\n    CommonModule,\n    ManageStudentReportsRoutingModule,\n    NbCardModule,\n    NbInputModule,\n    NbSelectModule,\n    NbFormFieldModule,\n    NbButtonModule,\n    NbIconModule,\n    NbTooltipModule,\n  ],\n})\nexport class ManageStudentReportsModule {}\n"]}