(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"/UeL":function(e,t,a){"use strict";a.r(t),a.d(t,"StoragePackagesModule",(function(){return D}));var n=a("aceb"),r=a("3Pt+"),o=a("ofXK"),i=a("fXoL"),s=a("05WV");function l(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Storage Package Name is required! "),i["\u0275\u0275elementEnd"]())}function c(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,l,2,0,"p",15),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("packageName").errors?null:e.storagePackageForm.get("packageName").errors.required)}}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Storage is required! "),i["\u0275\u0275elementEnd"]())}function d(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Storage should be more than 0 "),i["\u0275\u0275elementEnd"]())}function m(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,g,2,0,"p",15),i["\u0275\u0275template"](2,d,2,0,"p",15),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("storage").errors?null:e.storagePackageForm.get("storage").errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("storage").errors?null:e.storagePackageForm.get("storage").errors.min)}}function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Storage Validity is required! "),i["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Storage Validity should be more than 0 "),i["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,u,2,0,"p",15),i["\u0275\u0275template"](2,p,2,0,"p",15),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("validity").errors?null:e.storagePackageForm.get("validity").errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("validity").errors?null:e.storagePackageForm.get("validity").errors.min)}}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Price Amount is required! "),i["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1," Price Amount should be more than or equal to 0 "),i["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,h,2,0,"p",15),i["\u0275\u0275template"](2,v,2,0,"p",15),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("price").errors?null:e.storagePackageForm.get("price").errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.storagePackageForm.get("price").errors?null:e.storagePackageForm.get("price").errors.min)}}let f=(()=>{class e{constructor(e,t,a){this.storagePackageService=e,this.toastrService=t,this.ref=a}ngOnInit(){this.loading=!0,this.submit=!1,this.storagePackageService.getStoragePackageData().subscribe(e=>{this.storagePackageForm=new r.f({packageName:new r.d(null,{validators:[r.u.required]}),storage:new r.d(null,{validators:[r.u.required,r.u.min(0)]}),validity:new r.d(null,{validators:[r.u.required,r.u.min(0)]}),price:new r.d(null,{validators:[r.u.required,r.u.min(0)]})}),e&&(this.storagePackage=e,this.storagePackageForm.patchValue({packageName:e.packageName,storage:e.storage,validity:e.validity,price:e.price})),this.loading=!1})}saveStoragePackage(){if(this.storagePackageForm.markAllAsTouched(),this.storagePackageForm.invalid)return void this.showToastr("top-right","danger","StoragePackage Details are required");this.submit=!0;const e=Object.assign({},this.storagePackageForm.value);this.storagePackage?(e._id=this.storagePackage._id,this.storagePackageService.editStoragePackage(e).subscribe(e=>{this.ref.close(e)},e=>{this.showToastr("top-right","danger",e),this.submit=!1})):this.storagePackageService.saveStoragePackage(e).subscribe(e=>{this.ref.close(e)},e=>{this.showToastr("top-right","danger",e),this.submit=!1})}onClose(){this.ref.close()}showToastr(e,t,a){this.toastrService.show(t,a,{position:e,status:t})}ngOnDestroy(){this.storagePackageService.setStoragePackageData(null)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](n.Gb),i["\u0275\u0275directiveInject"](n.J))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-save-storage-package"]],decls:51,vars:12,consts:[[1,"storagePackage-box"],["icon","close-outline",1,"float-right","pointer",3,"click"],[1,""],[1,"",3,"formGroup","submit"],[1,"table-responsive"],[1,"table","table-borderless"],[1,"form-control-group"],["type","text","nbInput","","id","input-package-name","name","packageName","formControlName","packageName","placeholder","Package Name","fullWidth","",3,"status"],[4,"ngIf"],["type","number","nbInput","","id","input-storage","name","storage","min","0","formControlName","storage","placeholder","Storage (in MB)","fullWidth","",3,"status"],["type","number","nbInput","","id","input-validity","name","validity","min","0","formControlName","validity","placeholder","Storage Validity (in Days)","fullWidth","",3,"status"],["type","number","nbInput","","id","input-price","name","price","min","0","formControlName","price","placeholder","Price","fullWidth","",3,"status"],[1,"row"],[1,"col-md-12","text-right"],["type","submit","nbButton","","size","small","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-card",0),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"nb-icon",1),i["\u0275\u0275listener"]("click",(function(){return t.onClose()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"h3",2),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"nb-card-body"),i["\u0275\u0275elementStart"](6,"form",3),i["\u0275\u0275listener"]("submit",(function(){return t.saveStoragePackage()})),i["\u0275\u0275elementStart"](7,"div",4),i["\u0275\u0275elementStart"](8,"table",5),i["\u0275\u0275elementStart"](9,"tbody"),i["\u0275\u0275elementStart"](10,"tr"),i["\u0275\u0275elementStart"](11,"th"),i["\u0275\u0275text"](12,"Package Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"td"),i["\u0275\u0275text"](14,":"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"td"),i["\u0275\u0275elementStart"](16,"div",6),i["\u0275\u0275element"](17,"input",7),i["\u0275\u0275template"](18,c,2,1,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"tr"),i["\u0275\u0275elementStart"](20,"th"),i["\u0275\u0275text"](21,"Storage (in MB)"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"td"),i["\u0275\u0275text"](23,":"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"td"),i["\u0275\u0275elementStart"](25,"div",6),i["\u0275\u0275element"](26,"input",9),i["\u0275\u0275template"](27,m,3,2,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"tr"),i["\u0275\u0275elementStart"](29,"th"),i["\u0275\u0275text"](30,"Storage Validity (in Days)"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"td"),i["\u0275\u0275text"](32,":"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"td"),i["\u0275\u0275elementStart"](34,"div",6),i["\u0275\u0275element"](35,"input",10),i["\u0275\u0275template"](36,S,3,2,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"tr"),i["\u0275\u0275elementStart"](38,"th"),i["\u0275\u0275text"](39,"Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"td"),i["\u0275\u0275text"](41,":"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](42,"td"),i["\u0275\u0275elementStart"](43,"div",6),i["\u0275\u0275element"](44,"input",11),i["\u0275\u0275template"](45,k,3,2,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](46,"hr"),i["\u0275\u0275elementStart"](47,"div",12),i["\u0275\u0275elementStart"](48,"div",13),i["\u0275\u0275elementStart"](49,"button",14),i["\u0275\u0275text"](50," Save "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("",t.storagePackage?"Update":"Add"," Storage Package"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroup",t.storagePackageForm),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("status",t.storagePackageForm.get("packageName").touched?t.storagePackageForm.get("packageName").invalid?"danger":"success":"basic"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.storagePackageForm.get("packageName").touched),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("status",t.storagePackageForm.get("storage").touched?t.storagePackageForm.get("storage").invalid?"danger":"success":"basic"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.storagePackageForm.get("storage").touched),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("status",t.storagePackageForm.get("validity").touched?t.storagePackageForm.get("validity").invalid?"danger":"success":"basic"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.storagePackageForm.get("validity").touched),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("status",t.storagePackageForm.get("price").touched?t.storagePackageForm.get("price").invalid?"danger":"success":"basic"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.storagePackageForm.get("price").touched),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit))},directives:[n.y,n.A,n.N,n.x,r.v,r.n,r.g,n.Q,r.a,r.m,r.e,o.n,r.q,n.v,n.sb],styles:[""]}),e})();var P=a("L3Ly");function b(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"td"),i["\u0275\u0275text"](10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"td"),i["\u0275\u0275elementStart"](12,"button",13),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const a=t.$implicit;return i["\u0275\u0275nextContext"](3).editStoragePackage(a)})),i["\u0275\u0275text"](13," Edit "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"td"),i["\u0275\u0275elementStart"](15,"button",14),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const a=t.$implicit,n=t.index;return i["\u0275\u0275nextContext"](3).changeStoragePackageStatus(a._id,!a.status,n)})),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"td"),i["\u0275\u0275elementStart"](18,"button",15),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const a=t.$implicit,n=t.index;return i["\u0275\u0275nextContext"](3).deleteStoragePackage(a._id,n)})),i["\u0275\u0275text"](19," Delete "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,a=t.index,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a+1),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.packageName),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.calculateStorage(e.storage)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",e.validity," Days"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",n.getAmount(e.price),"/-"),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("status",e.status?"warning":"success"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.status?"Deactivate":"Activate"," ")}}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"table",10),i["\u0275\u0275elementStart"](2,"thead"),i["\u0275\u0275elementStart"](3,"th"),i["\u0275\u0275text"](4,"#"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"th"),i["\u0275\u0275text"](6,"Package"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"th"),i["\u0275\u0275text"](8,"Storage Size"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"th"),i["\u0275\u0275text"](10,"Validity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"th"),i["\u0275\u0275text"](12,"Price"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"th",11),i["\u0275\u0275text"](14,"Action"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"tbody"),i["\u0275\u0275template"](16,b,20,7,"tr",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](16),i["\u0275\u0275property"]("ngForOf",e.storagePackages)}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",7),i["\u0275\u0275template"](2,E,17,1,"div",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](14);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.storagePackages.length>0)("ngIfElse",t)}}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1,"Loading..."),i["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",16),i["\u0275\u0275text"](1,"No Storage Packages Available"),i["\u0275\u0275elementEnd"]())}let F=(()=>{class e{constructor(e,t,a,n){this.storageService=e,this.storagePackageService=t,this.toastrService=a,this.dialogService=n}ngOnInit(){this.loading=!0,this.storagePackages=[],this.getStoragePackages()}getStoragePackages(){this.loading=!0,this.storagePackageService.getStoragePackages().subscribe(e=>{this.storagePackages=e,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}openStoragePackageDialog(){this.dialogService.open(f,{context:{}}).onClose.subscribe(e=>e&&this.getStoragePackages())}calculateStorage(e){const t=this.storageService.convertUnitToBytes(e,"MB"),a=this.storageService.convertByteToUnit(t);return a.value.toFixed(1)+" "+a.unit}getAmount(e){return(e=parseFloat(e.toString())).toFixed(2).toString()}editStoragePackage(e){this.storagePackageService.setStoragePackageData(e),this.openStoragePackageDialog()}changeStoragePackageStatus(e,t,a){this.loading=!0,this.storagePackageService.changeStoragePackageStatus(e,t).subscribe(e=>{this.showToastr("top-right","success","Storage Package Status Updated Successfully"),this.storagePackages[a].status=t,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}deleteStoragePackage(e,t){this.loading=!0,this.storagePackageService.deleteStoragePackage(e).subscribe(e=>{this.showToastr("top-right","success","Storage Package Deleted Successfully"),this.storagePackages.splice(t,1),this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}showToastr(e,t,a){this.toastrService.show(t,a,{position:e,status:t})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](P.a),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](n.Gb),i["\u0275\u0275directiveInject"](n.K))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-storage-packages"]],decls:15,vars:2,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","status","primary","size","small","fullWidth","",3,"click"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],["noStoragePackages",""],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table"],["colspan","3"],[4,"ngFor","ngForOf"],["type","button","nbButton","","size","small","status","basic",3,"click"],["type","button","nbButton","","size","small",3,"status","click"],["type","button","nbButton","","size","small","status","danger",3,"click"],[1,"pt-5","pb-5","text-center"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275text"](5,"Storage Packages"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",2),i["\u0275\u0275elementStart"](7,"button",3),i["\u0275\u0275listener"]("click",(function(){return t.openStoragePackageDialog()})),i["\u0275\u0275text"](8," Add Storage Package "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"nb-card-body"),i["\u0275\u0275template"](10,x,3,2,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,y,2,0,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](13,I,2,0,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",e)}},directives:[n.y,n.A,n.v,n.x,o.n,o.m],styles:[""]}),e})();var w=a("tyNb");const C=[{path:"",component:F},{path:"page-not-found",loadChildren:()=>a.e(0).then(a.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let N=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[w.g.forChild(C)],w.g]}),e})(),D=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.c,N,n.B,n.R,n.w,n.ob,n.tb,n.P,r.s]]}),e})()}}]);
//# sourceMappingURL=63-es2015.f6d28d171809efb85318.js.map