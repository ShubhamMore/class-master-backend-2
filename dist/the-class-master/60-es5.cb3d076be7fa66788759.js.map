{"version":3,"sources":["webpack:///src/app/admin/membership-plans/save-membership-plan/save-membership-plan.component.html","webpack:///src/app/admin/membership-plans/save-membership-plan/save-membership-plan.component.ts","webpack:///src/app/admin/membership-plans/membership-plans.component.html","webpack:///src/app/admin/membership-plans/membership-plans.component.ts","webpack:///src/app/admin/membership-plans/membership-plans.module.ts","webpack:///src/app/admin/membership-plans/membership-plans-routing.module.ts"],"names":["SaveMembershipPlanComponent","membershipService","toastrService","ref","this","loading","submit","getMembershipPlan","subscribe","membership","membershipForm","name","validators","required","duration","price","min","onClose","markAllAsTouched","invalid","showToastr","value","_id","saveMembershipPlan","resMembership","close","error","position","status","message","show","setMembershipPlan","saveMembership","MembershipPlansComponent","MembershipPlansModule","MembershipPlansRoutingModule","dialogService","memberships","getMemberships","i","newMembership","find","curMembership","open","context","amount","parseFloat","toString","toFixed","membershipPlan","openMembershipDialog","routes","path","component","loadChildren","then","m","PageNotFoundModule","redirectTo","pathMatch","forChild"],"mappings":"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","file":"x","sourcesContent":["<nb-card class=\"membership-box\">\n  <nb-card-header>\n    <nb-icon class=\"float-right pointer\" icon=\"close-outline\" (click)=\"onClose()\"></nb-icon>\n    <h3 class=\"\">\n      {{ membership.name | uppercase }}\n    </h3>\n  </nb-card-header>\n  <nb-card-body>\n    <form class=\"\" (submit)=\"saveMembership()\" [formGroup]=\"membershipForm\">\n      <div class=\"table-responsive\">\n        <table class=\"table table-borderless\">\n          <tbody>\n            <tr>\n              <th>Plan Name</th>\n              <td>:</td>\n              <td>{{ membershipForm.value.name | uppercase }}</td>\n            </tr>\n            <tr>\n              <th>Duration</th>\n              <td>:</td>\n              <td>{{ membershipForm.value.duration }} Month/s</td>\n            </tr>\n            <tr>\n              <th>Price</th>\n              <td>:</td>\n              <td>\n                <div class=\"form-control-group\">\n                  <input\n                    type=\"number\"\n                    nbInput\n                    id=\"input-price\"\n                    name=\"price\"\n                    min=\"0\"\n                    formControlName=\"price\"\n                    placeholder=\"Price\"\n                    fullWidth\n                    [status]=\"\n                      membershipForm.get('price').touched\n                        ? membershipForm.get('price').invalid\n                          ? 'danger'\n                          : 'success'\n                        : 'basic'\n                    \"\n                  />\n                  <ng-container *ngIf=\"membershipForm.get('price').touched\">\n                    <p\n                      class=\"caption status-danger\"\n                      *ngIf=\"membershipForm.get('price').errors?.required\"\n                    >\n                      Price Amount is required!\n                    </p>\n                    <p\n                      class=\"caption status-danger\"\n                      *ngIf=\"membershipForm.get('price').errors?.min\"\n                    >\n                      Price Amount should be more than or equal to 0\n                    </p>\n                  </ng-container>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <hr />\n\n      <div class=\"row\">\n        <div class=\"col-md-12 text-right\">\n          <button\n            type=\"submit\"\n            nbButton\n            size=\"small\"\n            [disabled]=\"submit\"\n            [nbSpinner]=\"submit\"\n            nbSpinnerStatus=\"primary\"\n            nbSpinnerSize=\"small\"\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n","import { MembershipService } from './../../../services/membership.service';\nimport { MembershipPlanModel as MembershipModel } from './../../../models/membership-plan.model';\nimport { NbDialogRef, NbToastrService } from '@nebular/theme';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\n\n@Component({\n  selector: 'ngx-save-membership-plan',\n  templateUrl: './save-membership-plan.component.html',\n  styleUrls: ['./save-membership-plan.component.scss'],\n})\nexport class SaveMembershipPlanComponent implements OnInit, OnDestroy {\n  loading: boolean;\n  submit: boolean;\n\n  membership: MembershipModel;\n  membershipForm: FormGroup;\n\n  constructor(\n    private membershipService: MembershipService,\n    private toastrService: NbToastrService,\n    protected ref: NbDialogRef<SaveMembershipPlanComponent>,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.submit = false;\n\n    this.membershipService.getMembershipPlan().subscribe((membership: MembershipModel) => {\n      this.membership = membership;\n\n      if (!membership) {\n        this.onClose();\n        return;\n      }\n\n      this.membershipForm = new FormGroup({\n        name: new FormControl(membership.name, {\n          validators: [Validators.required],\n        }),\n        duration: new FormControl(membership.duration, {\n          validators: [Validators.required],\n        }),\n        price: new FormControl(membership.price, {\n          validators: [Validators.required, Validators.min(0)],\n        }),\n      });\n\n      this.loading = false;\n    });\n  }\n\n  saveMembership() {\n    this.membershipForm.markAllAsTouched();\n\n    if (this.membershipForm.invalid) {\n      this.showToastr('top-right', 'danger', 'Membership Details are required');\n      return;\n    }\n\n    this.submit = true;\n\n    const membership: any = { ...this.membershipForm.value };\n\n    if (this.membership._id) {\n      membership._id = this.membership._id;\n    }\n\n    this.membershipService.saveMembershipPlan(membership).subscribe(\n      (resMembership: MembershipModel) => {\n        this.ref.close(resMembership);\n      },\n      (error: any) => {\n        this.showToastr('top-right', 'danger', error);\n        this.submit = false;\n      },\n    );\n  }\n\n  onClose() {\n    this.ref.close();\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n\n  ngOnDestroy() {\n    this.membershipService.setMembershipPlan(null);\n  }\n}\n","<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-9 col-sm-8\">\n        <h3>Membership Plans</h3>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body>\n    <div class=\"row\" *ngIf=\"!loading; else loadingData\">\n      <div class=\"col-12\">\n        <div class=\"table-responsive\" *ngIf=\"memberships.length > 0; else noMemberships\">\n          <table class=\"table\">\n            <thead>\n              <th>#</th>\n              <th>Membership Type</th>\n              <th>Duration</th>\n              <th>Price</th>\n              <th>Action</th>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let membership of memberships; let i = index\">\n                <td>{{ i + 1 }}</td>\n                <td>{{ membership.name | uppercase }}</td>\n                <td>{{ membership.duration }} Month/s</td>\n                <td>{{ getAmount(membership.price) }}/-</td>\n                <td>\n                  <button\n                    type=\"button\"\n                    nbButton\n                    size=\"small\"\n                    status=\"basic\"\n                    (click)=\"editMembership(membership)\"\n                  >\n                    Edit\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n\n<ng-template #loadingData>\n  <p class=\"pt-5 pb-5 text-center\">Loading...</p>\n</ng-template>\n\n<ng-template #noMemberships>\n  <p class=\"pt-5 pb-5 text-center\">No Membership Plans Available</p>\n</ng-template>\n","import { SaveMembershipPlanComponent } from './save-membership-plan/save-membership-plan.component';\nimport { MembershipPlanModel } from './../../models/membership-plan.model';\nimport { NbToastrService, NbDialogService } from '@nebular/theme';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { MembershipService } from './../../services/membership.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'ngx-membership-plans',\n  templateUrl: './membership-plans.component.html',\n  styleUrls: ['./membership-plans.component.scss'],\n})\nexport class MembershipPlansComponent implements OnInit {\n  loading: boolean;\n\n  memberships: MembershipPlanModel[];\n\n  constructor(\n    private membershipService: MembershipService,\n    private toastrService: NbToastrService,\n    private dialogService: NbDialogService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.memberships = [\n      new MembershipPlanModel(null, 'monthly', '1', '1999', true),\n      new MembershipPlanModel(null, 'quarterly', '3', '4999', true),\n      new MembershipPlanModel(null, 'half-yearly', '6', '7999', true),\n      new MembershipPlanModel(null, 'yearly', '12', '11999', true),\n    ];\n\n    this.getMemberships();\n  }\n\n  getMemberships() {\n    this.loading = true;\n    this.membershipService.getMemberships().subscribe(\n      (memberships: MembershipPlanModel[]) => {\n        for (let i = 0; i < 4; i++) {\n          const membership = this.memberships[i];\n\n          const newMembership = memberships.find(\n            (curMembership: MembershipPlanModel) => curMembership.name === membership.name,\n          );\n\n          if (newMembership) {\n            this.memberships[i] = newMembership;\n          }\n        }\n\n        this.loading = false;\n      },\n      (error: any) => {\n        this.showToastr('top-right', 'danger', error);\n        this.loading = false;\n      },\n    );\n  }\n\n  openMembershipDialog() {\n    this.dialogService\n      .open(SaveMembershipPlanComponent, {\n        context: {},\n      })\n      .onClose.subscribe((membership: any) => membership && this.getMemberships());\n  }\n\n  getAmount(amount: any) {\n    amount = parseFloat(amount.toString());\n    return amount.toFixed(2).toString();\n  }\n\n  editMembership(membershipPlan: MembershipPlanModel) {\n    this.membershipService.setMembershipPlan(membershipPlan);\n    this.openMembershipDialog();\n  }\n\n  showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import {\n  NbIconModule,\n  NbSelectModule,\n  NbButtonModule,\n  NbInputModule,\n  NbSpinnerModule,\n  NbCardModule,\n} from '@nebular/theme';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MembershipPlansRoutingModule } from './membership-plans-routing.module';\nimport { MembershipPlansComponent } from './membership-plans.component';\nimport { SaveMembershipPlanComponent } from './save-membership-plan/save-membership-plan.component';\n\n@NgModule({\n  declarations: [MembershipPlansComponent, SaveMembershipPlanComponent],\n  imports: [\n    CommonModule,\n    MembershipPlansRoutingModule,\n    NbCardModule,\n    NbInputModule,\n    NbButtonModule,\n    NbSelectModule,\n    NbSpinnerModule,\n    NbIconModule,\n    ReactiveFormsModule,\n  ],\n})\nexport class MembershipPlansModule {}\n","import { MembershipPlansComponent } from './membership-plans.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MembershipPlansComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../shared/page-not-found/page-not-found.module').then((m) => m.PageNotFoundModule),\n  },\n\n  {\n    path: '**',\n    redirectTo: 'page-not-found',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MembershipPlansRoutingModule {}\n"]}