(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{IwCN:function(t,e,r){"use strict";r.r(e);var o=r("ofXK"),s=r("3Pt+"),i=r("AytR"),n=r("nwtg"),a=r("5hth"),l=r("fXoL"),c=r("tyNb"),u=r("aceb");function b(t,e){1&t&&(l.Wb(0,"p",17),l.Cc(1," Email is required! "),l.Vb())}function d(t,e){1&t&&(l.Wb(0,"p",17),l.Cc(1," Email should be the real one! "),l.Vb())}function m(t,e){if(1&t&&(l.Ub(0),l.Ac(1,b,2,0,"p",16),l.Ac(2,d,2,0,"p",16),l.Tb()),2&t){const t=l.gc();l.Eb(1),l.mc("ngIf",null==t.form.get("email").errors?null:t.form.get("email").errors.required),l.Eb(1),l.mc("ngIf",null==t.form.get("email").errors?null:t.form.get("email").errors.email)}}function f(t,e){1&t&&(l.Wb(0,"p",17),l.Cc(1," Password is required! "),l.Vb())}function g(t,e){1&t&&(l.Wb(0,"p",17),l.Cc(1," Password should contain minimum 7 characters "),l.Vb())}function p(t,e){if(1&t&&(l.Ub(0),l.Ac(1,f,2,0,"p",16),l.Ac(2,g,2,0,"p",16),l.Tb()),2&t){const t=l.gc();l.Eb(1),l.mc("ngIf",null==t.form.get("password").errors?null:t.form.get("password").errors.required),l.Eb(1),l.mc("ngIf",null==t.form.get("password").errors?null:t.form.get("password").errors.minlength)}}const h=[{path:"",component:(()=>{class t{constructor(t,e,r,o,s){this.authService=t,this.router=e,this.toastrService=r,this.encryptService=o,this.route=s}ngOnInit(){this.loading=!0,this.form=new s.f({email:new s.d(null,{validators:[s.u.required,s.u.email]}),password:new s.d(null,{validators:[s.u.required]})}),this.loading=!1}login(){if(!this.form.valid)return;this.loading=!0;const t=this.form.value.email,e=this.encryptService.encrypt(this.form.value.password,i.a.encKey);this.authObs=this.authService.login(t,e),this.authSubscribe()}authSubscribe(){this.authObs.subscribe(t=>{this.loading=!1,this.showToastr("top-right","success","Login successful!"),this.router.navigate("admin"===t.userRole?["/admin"]:"employee"===t.userRole||"institute"===t.userRole?["/institute"]:"student"===t.userRole?["/student"]:["/login"],{relativeTo:this.route}),this.form.reset()},t=>{this.showToastr("top-right","danger",t),this.loading=!1})}showToastr(t,e,r){this.toastrService.show(e,r,{position:t,status:e})}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(n.a),l.Qb(c.c),l.Qb(u.jb),l.Qb(a.a),l.Qb(c.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["ngx-login"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-md-6","col-sm-10","col-12","mx-auto"],["id","title",1,"title"],[1,"sub-title"],["aria-labelledby","title",3,"formGroup","ngSubmit"],[1,"form-control-group"],["for","email",1,"label"],["type","email","nbInput","","fullWidth","","name","email","id","email","placeholder","Email address","formControlName","email","autofocus","",3,"status"],[4,"ngIf"],[1,"label-with-link"],["for","input-password",1,"label"],["type","password","nbInput","","fullWidth","","formControlName","password","name","password","id","password","placeholder","Password",3,"status"],["routerLink","/forgot-password",1,"forgot-password","caption-2"],["nbButton","","fullWidth","","status","primary"],["aria-label","Register",1,"another-action","text-right"],["routerLink","/register",1,"text-link"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"nb-card"),l.Wb(3,"nb-card-body"),l.Wb(4,"h1",2),l.Cc(5,"Login"),l.Vb(),l.Wb(6,"p",3),l.Cc(7,"Hello! Log in with your email."),l.Vb(),l.Wb(8,"form",4),l.ec("ngSubmit",(function(){return e.login()})),l.Wb(9,"div",5),l.Wb(10,"label",6),l.Cc(11,"Email address:"),l.Vb(),l.Rb(12,"input",7),l.Ac(13,m,3,2,"ng-container",8),l.Vb(),l.Wb(14,"div",5),l.Wb(15,"span",9),l.Wb(16,"label",10),l.Cc(17,"Password:"),l.Vb(),l.Vb(),l.Rb(18,"input",11),l.Ac(19,p,3,2,"ng-container",8),l.Wb(20,"a",12),l.Cc(21,"Forgot Password?"),l.Vb(),l.Vb(),l.Rb(22,"br"),l.Wb(23,"button",13),l.Cc(24," Log In "),l.Vb(),l.Vb(),l.Rb(25,"br"),l.Wb(26,"section",14),l.Cc(27," Don't have an account? "),l.Wb(28,"a",15),l.Cc(29,"Register Now"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Eb(8),l.mc("formGroup",e.form),l.Eb(4),l.mc("status",e.form.get("email").touched?e.form.get("email").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.form.get("email").invalid&&e.form.get("email").touched),l.Eb(5),l.mc("status",e.form.get("password").touched?e.form.get("password").invalid?"danger":"success":"basic"),l.Eb(1),l.mc("ngIf",e.form.get("password").invalid&&e.form.get("password").touched))},directives:[u.r,u.q,s.v,s.n,s.g,u.G,s.a,s.m,s.e,o.n,c.f,u.o],styles:["",""]}),t})(),canActivate:[]},{path:"page-not-found",loadChildren:()=>r.e(0).then(r.bind(null,"DeSt")).then(t=>t.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let w=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[c.g.forChild(h)],c.g]}),t})();var v=r("vTDv");r.d(e,"LoginModule",(function(){return W}));let W=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[o.c,w,s.h,s.s,v.a,u.t,u.p,u.F,u.p,u.i,u.H,u.w,u.k,u.W]]}),t})()}}]);