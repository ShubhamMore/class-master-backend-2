function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{"7bFp":function(e,t,i){"use strict";i.r(t);var n=i("aceb"),c=i("ofXK"),a=i("tyNb"),l=i("FYcy"),s=i("IAlr"),o=i("EQut"),r=i("fXoL"),u=["filePicker"];function b(e,t){if(1&e&&(r.Wb(0,"nb-option",20),r.Cc(1),r.Vb()),2&e){var i=t.$implicit;r.mc("value",i._id),r.Eb(1),r.Dc(i.subject)}}function d(e,t){if(1&e){var i=r.Xb();r.Wb(0,"nb-select",17),r.ec("selectedChange",(function(e){return r.uc(i),r.gc(2).onSelectSubject(e)})),r.Wb(1,"nb-option",18),r.Cc(2,"Select Subject"),r.Vb(),r.Ac(3,b,2,2,"nb-option",19),r.Vb()}if(2&e){var n=r.gc(2);r.mc("selected",n.subject)("status",n.invalidSubject?""===n.subject?"danger":"success":"basic"),r.Eb(3),r.mc("ngForOf",n.course.subjects)}}function h(e,t){1&e&&(r.Wb(0,"p",22),r.Cc(1," Subject is required! "),r.Vb())}function f(e,t){if(1&e&&(r.Ub(0),r.Ac(1,h,2,0,"p",21),r.Tb()),2&e){var i=r.gc(2);r.Eb(1),r.mc("ngIf",""===i.subject)}}function p(e,t){1&e&&(r.Ub(0),r.Wb(1,"p",22),r.Cc(2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),r.Vb(),r.Tb())}function v(e,t){if(1&e){var i=r.Xb();r.Wb(0,"tr",26),r.Wb(1,"td",31),r.Cc(2),r.Vb(),r.Wb(3,"td",31),r.Wb(4,"span",32),r.Cc(5),r.Vb(),r.Vb(),r.Wb(6,"td",33),r.Wb(7,"button",34),r.ec("click",(function(){r.uc(i);var e=t.index;return r.gc(3).removeFile(e)})),r.Rb(8,"nb-icon",35),r.Vb(),r.Vb(),r.Vb()}if(2&e){var n=t.$implicit,c=t.index;r.Eb(2),r.Dc(c+1),r.Eb(3),r.Ec(" ",n.name," "),r.Eb(2),r.oc("nbTooltip","Remove ",n.name,"")}}function g(e,t){if(1&e&&(r.Wb(0,"div",23),r.Wb(1,"table",24),r.Wb(2,"thead",25),r.Wb(3,"tr",26),r.Wb(4,"th",27),r.Cc(5,"ID"),r.Vb(),r.Wb(6,"th",27),r.Cc(7,"Content File"),r.Vb(),r.Wb(8,"th",28),r.Cc(9,"Remove"),r.Vb(),r.Vb(),r.Vb(),r.Wb(10,"tbody",29),r.Ac(11,v,9,3,"tr",30),r.Vb(),r.Vb(),r.Vb()),2&e){var i=r.gc(2);r.Eb(11),r.mc("ngForOf",i.uploadCourseMaterials)}}function m(e,t){1&e&&r.Cc(0," No Files Selected, Please Select Files to Upload ")}function C(e,t){if(1&e){var i=r.Xb();r.Wb(0,"nb-card"),r.Wb(1,"nb-card-header"),r.Wb(2,"div",1),r.Wb(3,"div",2),r.Wb(4,"h3"),r.Cc(5,"Add Material"),r.Vb(),r.Vb(),r.Wb(6,"div",3),r.Wb(7,"button",4),r.ec("click",(function(){return r.uc(i),r.gc().saveCourseMaterial()})),r.Cc(8," Upload\xa0 "),r.Rb(9,"nb-icon",5),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(10,"nb-card-body"),r.Wb(11,"div",1),r.Wb(12,"div",6),r.Wb(13,"div",7),r.Wb(14,"label",8),r.Cc(15,"Select Subject :"),r.Vb(),r.Ac(16,d,4,3,"nb-select",9),r.Ac(17,f,2,1,"ng-container",0),r.Vb(),r.Vb(),r.Wb(18,"div",6),r.Wb(19,"div",7),r.Wb(20,"label",8),r.Cc(21,"Click on Following Button to Select Course Material Files"),r.Vb(),r.Wb(22,"input",10,11),r.ec("change",(function(e){return r.uc(i),r.gc().onFilePicked(e)})),r.Vb(),r.Wb(24,"button",12),r.ec("click",(function(){return r.uc(i),r.sc(23).click()})),r.Cc(25," Click Here to Pick Files "),r.Vb(),r.Ac(26,p,3,0,"ng-container",0),r.Vb(),r.Vb(),r.Vb(),r.Rb(27,"hr"),r.Wb(28,"h4",13),r.Cc(29,"File/s To Upload"),r.Vb(),r.Wb(30,"div",1),r.Wb(31,"div",14),r.Ac(32,g,12,1,"div",15),r.Ac(33,m,1,0,"ng-template",null,16,r.Bc),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){var n=r.sc(34),c=r.gc();r.Eb(16),r.mc("ngIf",c.course),r.Eb(1),r.mc("ngIf",c.invalidSubject),r.Eb(9),r.mc("ngIf",c.invalidFile),r.Eb(6),r.mc("ngIf",c.uploadCourseMaterials.length>0)("ngIfElse",n)}}var W,V,j=[{path:"",component:(W=function(){function e(t,i,n,c,a,l,s){_classCallCheck(this,e),this.branchService=t,this.courseService=i,this.courseMaterialService=n,this.toastrService=c,this.router=a,this.location=l,this.route=s}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.loading=!0,this.invalidFile=!1,this.invalidSubject=!1,this.branchId=this.branchService.getBranchId(),this.courseId=this.courseService.getCourseId(),!this.branchId||!this.courseId)return this.showToastr("top-right","danger","Invalid Course"),void this.cancel();this.uploadCourseMaterials=[],this.subject="",this.courseService.getCourseData().subscribe((function(t){t?(e.course=t,e.loading=!1):e.cancel()}))}},{key:"onFilePicked",value:function(e){this.invalidFile=!1;for(var t=e.target.files,i=["pdf","jpg","png","jpeg","mp4"],n=null,c=t.length,a=0;a<c;a++)if(n=t[a].name.substring(t[a].name.lastIndexOf(".")+1).toLowerCase(),-1===i.indexOf(n))return this.invalidFile=!0,void(this.fileInput.nativeElement.value="");this.invalidFile=!1;for(var l=0;l<c;l++)this.uploadCourseMaterials.push(t[l]);this.fileInput.nativeElement.value=""}},{key:"onSelectSubject",value:function(e){this.subject=e,this.invalidSubject=""===e}},{key:"saveCourseMaterial",value:function(){var e=this;if(this.subject&&""!==this.subject||(this.invalidSubject=!0),this.uploadCourseMaterials.length<1)return this.showToastr("top-right","danger","Select at least 1 Course material File"),void(this.invalidFile=!0);if(this.invalidSubject)this.showToastr("top-right","danger","Please Select Subject");else{this.loading=!0,this.invalidFile=!1;var t=new FormData;t.append("branch",this.branchId),t.append("category",this.course.basicDetails.category),t.append("course",this.courseId),t.append("subject",this.subject);for(var i=0;i<this.uploadCourseMaterials.length;i++)t.append("material",this.uploadCourseMaterials[i],this.uploadCourseMaterials[i].name.substring(0,this.uploadCourseMaterials[i].name.lastIndexOf(".")));this.courseMaterialService.newCourseMaterials(t).subscribe((function(t){e.uploadCourseMaterials=[],e.cancel()}),(function(t){e.loading=!1}))}}},{key:"removeFile",value:function(e){this.uploadCourseMaterials.splice(e,1)}},{key:"showToastr",value:function(e,t,i){this.toastrService.show(t,i,{position:e,status:t})}},{key:"cancel",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}}]),e}(),W.\u0275fac=function(e){return new(e||W)(r.Qb(o.a),r.Qb(s.a),r.Qb(l.a),r.Qb(n.xb),r.Qb(a.c),r.Qb(c.i),r.Qb(a.a))},W.\u0275cmp=r.Kb({type:W,selectors:[["ngx-add-course-material"]],viewQuery:function(e,t){var i;1&e&&r.Hc(u,!0),2&e&&r.rc(i=r.fc())&&(t.fileInput=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","type","button","size","medium","fullWidth","","size","small","status","primary",3,"click"],["icon","arrow-circle-up-outline"],[1,"col-md-6"],[1,"form-control-group"],["for","input-subject",1,"label"],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange",4,"ngIf"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","multiple","","hidden","",3,"change"],["filePicker",""],["nbButton","","type","button","fullWidth","","size","small","status","warning","id","files",3,"click"],[1,"text-center"],[1,"col-md-10","mx-auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["noFiles",""],["type","text","id","input-subject","name","subject","placeholder","Select Subject","fullWidth","",3,"selected","status","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-heading"],[1,"table-row"],[1,"table-heading-data"],[1,"table-heading-data","text-center"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-data"],[1,"mr-2"],[1,"table-data","text-center"],["type","button","nbButton","","shape","round","status","danger","size","tiny",3,"nbTooltip","click"],["icon","close-outline"]],template:function(e,t){1&e&&r.Ac(0,C,35,5,"nb-card",0),2&e&&r.mc("ngIf",!t.loading)},directives:[c.n,n.x,n.z,n.u,n.L,n.w,n.O,n.jb,n.eb,c.m,n.zb],styles:[""]}),W)},{path:"page-not-found",loadChildren:function(){return i.e(0).then(i.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],S=((V=function e(){_classCallCheck(this,e)}).\u0275mod=r.Ob({type:V}),V.\u0275inj=r.Nb({factory:function(e){return new(e||V)},imports:[[a.g.forChild(j)],a.g]}),V);i.d(t,"AddCourseMaterialModule",(function(){return F}));var y,F=((y=function e(){_classCallCheck(this,e)}).\u0275mod=r.Ob({type:y}),y.\u0275inj=r.Nb({factory:function(e){return new(e||y)},imports:[[c.c,S,n.A,n.P,n.N,n.Ab,n.v,n.kb]]}),y)}}]);