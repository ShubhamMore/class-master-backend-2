{"version":3,"sources":["webpack:///src/app/institute/branch/lecture/question-answers/add-question-answers/add-question-answers-routing.module.ts","webpack:///src/app/institute/branch/lecture/question-answers/add-question-answers/add-question-answers.module.ts","webpack:///src/app/institute/branch/lecture/question-answers/add-question-answers/add-question/add-question.component.ts","webpack:///src/app/institute/branch/lecture/question-answers/add-question-answers/add-question/add-question.component.html","webpack:///src/app/institute/branch/lecture/question-answers/question-answers.component.html","webpack:///src/app/institute/branch/lecture/question-answers/question-answers-routing.module.ts","webpack:///src/app/institute/branch/lecture/question-answers/question-answers.component.ts","webpack:///src/app/institute/branch/lecture/question-answers/question-answers.module.ts"],"names":["routes","AddQuestionAnswersRoutingModule","forChild","AddQuestionAnswersModule","AddQuestionComponent","toastrService","branchService","lectureService","questionAnswersService","ref","this","loading","submit","branchId","getBranchId","lectureQuestionForm","question","validators","required","getQuestion","subscribe","questionAnswers","lectureQuestion","patchValue","getLectureData","lecture","onClose","markAllAsTouched","invalid","showToastr","value","branch","category","course","batch","_id","editLectureQuestion","res","close","error","newLectureQuestion","position","status","message","show","deleteQuestionId","deleteQuestion","saveLectureQuestion","path","component","QuestionAnswersComponent","authService","questionAnswerService","router","route","dialogService","dateService","user","getUserData","questionsAnswers","getQuestionAnswers","back","getLectureQuestionAnswers","err","openQuestionDialog","open","context","questionAnswer","setQuestionId","setQuestion","questionDate","convertToDate","toString","substr","id","i","deleteLectureQuestion","splice","setQuestionAnswersId","setQuestionAnswers","navigate","relativeTo","index","findIndex","curQuestion","name","push","addQuestion","loadChildren","then","m","ViewQuestionAnswersModule","PageNotFoundModule","redirectTo","QuestionAnswersRoutingModule","QuestionAnswersModule"],"mappings":"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","file":"x","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddQuestionAnswersRoutingModule {}\n","import { ReactiveFormsModule } from '@angular/forms';\nimport {\n  NbCardModule,\n  NbButtonModule,\n  NbInputModule,\n  NbSpinnerModule,\n  NbIconModule,\n} from '@nebular/theme';\nimport { AddAnswerComponent } from './add-answer/add-answer.component';\nimport { AddQuestionComponent } from './add-question/add-question.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AddQuestionAnswersRoutingModule } from './add-question-answers-routing.module';\n\n@NgModule({\n  declarations: [AddQuestionComponent, AddAnswerComponent],\n  imports: [\n    CommonModule,\n    AddQuestionAnswersRoutingModule,\n    NbCardModule,\n    NbButtonModule,\n    NbInputModule,\n    NbIconModule,\n    NbSpinnerModule,\n    ReactiveFormsModule,\n  ],\n  exports: [AddQuestionComponent, AddAnswerComponent],\n})\nexport class AddQuestionAnswersModule {}\n","import { QuestionAnswersService } from './../../../../../../services/question-answers.service';\nimport { LectureService } from './../../../../../../services/lecture.service';\nimport { BranchService } from './../../../../../../services/branch.service';\nimport { LectureQuestionModel } from './../../../../../../models/lecture-question.model';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { NbToastrService, NbDialogRef } from '@nebular/theme';\nimport { ScheduleModel as LectureModel } from './../../../../../../models/schedule.model';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\n\n@Component({\n  selector: 'ngx-add-question',\n  templateUrl: './add-question.component.html',\n  styleUrls: ['./add-question.component.scss'],\n})\nexport class AddQuestionComponent implements OnInit, OnDestroy {\n  loading: boolean;\n  submit: boolean;\n\n  lectureQuestion: LectureQuestionModel;\n  branchId: string;\n  lecture: LectureModel;\n  lectureQuestionForm: FormGroup;\n\n  constructor(\n    private toastrService: NbToastrService,\n    private branchService: BranchService,\n    private lectureService: LectureService,\n    private questionAnswersService: QuestionAnswersService,\n    protected ref: NbDialogRef<AddQuestionComponent>, // private router: Router, // private route: ActivatedRoute,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.submit = false;\n\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.onClose();\n      return;\n    }\n\n    this.lectureQuestionForm = new FormGroup({\n      question: new FormControl(null, {\n        validators: [Validators.required],\n      }),\n    });\n\n    this.questionAnswersService.getQuestion().subscribe((questionAnswers: LectureQuestionModel) => {\n      this.lectureQuestion = questionAnswers;\n      if (questionAnswers) {\n        this.lectureQuestionForm.patchValue({ question: this.lectureQuestion.question });\n      }\n    });\n\n    this.lectureService.getLectureData().subscribe((lecture: LectureModel) => {\n      this.lecture = lecture;\n      if (!this.lecture) {\n        this.onClose();\n        return;\n      }\n      this.loading = false;\n    });\n  }\n\n  saveLectureQuestion() {\n    this.lectureQuestionForm.markAllAsTouched();\n    if (this.lectureQuestionForm.invalid) {\n      this.showToastr('top-right', 'danger', 'Question is Required');\n      return;\n    }\n    this.submit = true;\n\n    const question: string = this.lectureQuestionForm.value.question;\n\n    const lectureQuestion: any = {\n      branch: this.branchId,\n      category: this.lecture.category,\n      course: this.lecture.course,\n      batch: this.lecture.batch,\n      lecture: this.lecture._id,\n      question: question,\n    };\n\n    if (!this.lectureQuestion) {\n      this.questionAnswersService.newLectureQuestion(lectureQuestion).subscribe(\n        (newLectureQuestion: LectureQuestionModel) => {\n          this.showToastr('top-right', 'success', 'New Question Added Successfully!');\n          this.ref.close(newLectureQuestion);\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.submit = false;\n        },\n      );\n    } else {\n      lectureQuestion._id = this.lectureQuestion._id;\n      this.questionAnswersService.editLectureQuestion(lectureQuestion).subscribe(\n        (res: any) => {\n          this.lectureQuestion.question = question;\n          this.showToastr('top-right', 'success', 'Question Updated Successfully!');\n          this.ref.close(this.lectureQuestion);\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.submit = false;\n        },\n      );\n    }\n  }\n\n  onClose() {\n    this.ref.close();\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n\n  ngOnDestroy() {\n    this.questionAnswersService.deleteQuestionId();\n    this.questionAnswersService.deleteQuestion();\n  }\n}\n","<nb-card class=\"question-box\">\n  <nb-card-header>\n    <nb-icon class=\"float-right pointer\" icon=\"close-outline\" (click)=\"onClose()\"></nb-icon>\n    <h3>{{ lectureQuestion ? 'Edit' : 'New' }} Question</h3>\n  </nb-card-header>\n\n  <nb-card-body>\n    <form [formGroup]=\"lectureQuestionForm\" (submit)=\"saveLectureQuestion()\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"form-control-group\">\n            <label class=\"label\" for=\"input-question\">Question:</label>\n            <textarea\n              type=\"text\"\n              nbInput\n              id=\"input-question\"\n              name=\"question\"\n              formControlName=\"question\"\n              placeholder=\"Question\"\n              fullWidth\n              [status]=\"\n                lectureQuestionForm.get('question').touched\n                  ? lectureQuestionForm.get('question').invalid\n                    ? 'danger'\n                    : 'success'\n                  : 'basic'\n              \"\n            ></textarea>\n            <ng-container\n              *ngIf=\"\n                lectureQuestionForm.get('question').invalid &&\n                lectureQuestionForm.get('question').touched\n              \"\n            >\n              <p\n                class=\"caption status-danger\"\n                *ngIf=\"lectureQuestionForm.get('question').errors?.required\"\n              >\n                Question is required!\n              </p>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n\n      <hr />\n\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <button\n            type=\"button\"\n            nbButton\n            size=\"small\"\n            status=\"danger\"\n            (click)=\"onClose()\"\n            [disabled]=\"submit\"\n          >\n            Cancel\n          </button>\n        </div>\n        <div class=\"col-6 text-right\">\n          <button\n            type=\"submit\"\n            nbButton\n            size=\"small\"\n            status=\"success\"\n            [disabled]=\"submit\"\n            [nbSpinner]=\"submit\"\n            nbSpinnerStatus=\"primary\"\n            nbSpinnerSize=\"small\"\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n","<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-9 col-sm-8\">\n        <h3>\n          Question & Answers\n        </h3>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <button nbButton size=\"small\" status=\"primary\" fullWidth (click)=\"addQuestion()\">\n          Add Question <nb-icon icon=\"plus-circle-outline\"></nb-icon>\n        </button>\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body class=\"body-container\">\n    <div class=\"row\" *ngIf=\"!loading; else loadingData\">\n      <div class=\"col-md-12\">\n        <ng-container *ngIf=\"questionsAnswers.length > 0; else noQuestions\">\n          <nb-card *ngFor=\"let lectureQuestion of questionsAnswers; let i = index\">\n            <nb-card-header>\n              <div class=\"row\">\n                <div class=\"col-md-6 col-12\">\n                  <nb-user\n                    [name]=\"lectureQuestion.name ? lectureQuestion.name : 'Unknown'\"\n                    [title]=\"formatQuestionAnswerDate(lectureQuestion.createdAt)\"\n                  ></nb-user>\n                </div>\n                <div class=\"col-md-6 col-12 text-right\">\n                  <button\n                    *ngIf=\"lectureQuestion.createdBy === user.imsMasterId\"\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"basic\"\n                    (click)=\"editQuestion(lectureQuestion)\"\n                  >\n                    Edit\n                  </button>\n                  <button\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"primary\"\n                    (click)=\"viewQuestionAnswer(lectureQuestion)\"\n                  >\n                    View\n                  </button>\n                  <button\n                    *ngIf=\"lectureQuestion.createdBy === user.imsMasterId\"\n                    class=\"mr-3\"\n                    nbButton\n                    size=\"small\"\n                    status=\"danger\"\n                    (click)=\"deleteQuestion(lectureQuestion._id)\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </nb-card-header>\n            <nb-card-body>\n              <div [innerHTML]=\"lectureQuestion.question\"></div>\n            </nb-card-body>\n          </nb-card>\n        </ng-container>\n        <ng-template #noQuestions>\n          <p class=\"text-center pt-5 pb-5\">You are first to Ask the Question</p>\n        </ng-template>\n      </div>\n    </div>\n    <ng-template #loadingData>\n      <p class=\"text-center pt-5 pb-5\">Loading...</p>\n    </ng-template>\n  </nb-card-body>\n</nb-card>\n","import { QuestionAnswersComponent } from './question-answers.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: QuestionAnswersComponent,\n  },\n\n  {\n    path: 'view',\n    loadChildren: () =>\n      import('./view-question-answers/view-question-answers.module').then(\n        (m) => m.ViewQuestionAnswersModule,\n      ),\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class QuestionAnswersRoutingModule {}\n","import { AddQuestionComponent } from './add-question-answers/add-question/add-question.component';\nimport { DateService } from './../../../../services/shared-services/date.service';\nimport { AuthService } from './../../../../authentication/auth/auth-service/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LectureQuestionModel } from '../../../../models/lecture-question.model';\nimport { Component, OnInit } from '@angular/core';\nimport { ScheduleModel as LectureModel } from './../../../../models/schedule.model';\nimport { LectureService } from './../../../../services/lecture.service';\nimport { QuestionAnswersService } from './../../../../services/question-answers.service';\nimport { BranchService } from './../../../../services/branch.service';\nimport { NbToastrService, NbDialogService } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-question-answers',\n  templateUrl: './question-answers.component.html',\n  styleUrls: ['./question-answers.component.scss'],\n})\nexport class QuestionAnswersComponent implements OnInit {\n  loading: boolean;\n  branchId: string;\n  lecture: LectureModel;\n  questionsAnswers: LectureQuestionModel[];\n  editLectureQuestion: boolean;\n  user: { name: string; imsMasterId: string };\n\n  constructor(\n    private authService: AuthService,\n    private branchService: BranchService,\n    private lectureService: LectureService,\n    private questionAnswerService: QuestionAnswersService,\n    private toastrService: NbToastrService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private dialogService: NbDialogService,\n    public dateService: DateService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.back();\n      return;\n    }\n\n    this.editLectureQuestion = false;\n\n    this.user = this.authService.getUserData();\n\n    this.questionsAnswers = [];\n\n    this.lectureService.getLectureData().subscribe((lecture: LectureModel) => {\n      this.lecture = lecture;\n      if (!this.lecture) {\n        this.back();\n        return;\n      }\n      this.getQuestionAnswers();\n    });\n  }\n\n  getQuestionAnswers() {\n    this.loading = true;\n    this.questionAnswerService\n      .getLectureQuestionAnswers(\n        this.branchId,\n        this.lecture.category,\n        this.lecture.course,\n        this.lecture.batch,\n        this.lecture._id,\n      )\n      .subscribe(\n        (questionsAnswers: LectureQuestionModel[]) => {\n          this.questionsAnswers = questionsAnswers;\n          this.loading = false;\n        },\n        (err: any) => {\n          this.loading = false;\n        },\n      );\n  }\n\n  addQuestion() {\n    this.openQuestionDialog();\n  }\n\n  openQuestionDialog() {\n    this.dialogService\n      .open(AddQuestionComponent, {\n        context: {},\n      })\n      .onClose.subscribe(\n        (question: LectureQuestionModel) => question && this.saveLectureQuestion(question),\n      );\n  }\n\n  editQuestion(questionAnswer: LectureQuestionModel) {\n    this.questionAnswerService.setQuestionId(questionAnswer._id);\n    this.questionAnswerService.setQuestion(questionAnswer);\n    this.editLectureQuestion = true;\n    this.openQuestionDialog();\n  }\n\n  formatQuestionAnswerDate(questionDate: any) {\n    const date: string = this.dateService.convertToDate(questionDate).toString();\n    return date.substr(0, 21);\n  }\n\n  deleteQuestion(id: string, i: number) {\n    this.loading = true;\n    this.questionAnswerService.deleteLectureQuestion(id).subscribe(\n      (res: any) => {\n        this.questionsAnswers.splice(i, 1);\n        this.showToastr('top-right', 'success', `Question Deleted Successfully!`);\n        this.loading = false;\n      },\n      (err: any) => {\n        this.showToastr('top-right', 'danger', err);\n        this.loading = false;\n      },\n    );\n  }\n\n  viewQuestionAnswer(questionAnswer: LectureQuestionModel) {\n    this.questionAnswerService.setQuestionAnswersId(questionAnswer._id);\n    this.questionAnswerService.setQuestionAnswers(questionAnswer);\n    this.router.navigate(['./view'], { relativeTo: this.route });\n  }\n\n  saveLectureQuestion(question: LectureQuestionModel) {\n    if (!this.editLectureQuestion) {\n      question.name = this.user.name;\n      this.questionsAnswers.push(question);\n    } else {\n      const index = this.questionsAnswers.findIndex(\n        (curQuestion: LectureQuestionModel) => curQuestion._id === question._id,\n      );\n\n      if (index >= 0) {\n        this.questionsAnswers[index] = question;\n      }\n\n      this.editLectureQuestion = false;\n    }\n  }\n\n  back() {\n    this.router.navigate(['../'], { relativeTo: this.route });\n  }\n\n  showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import { AddQuestionAnswersModule } from './add-question-answers/add-question-answers.module';\nimport { QuestionAnswersComponent } from './question-answers.component';\nimport { NbCardModule, NbButtonModule, NbIconModule, NbUserModule } from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { QuestionAnswersRoutingModule } from './question-answers-routing.module';\n\n@NgModule({\n  declarations: [QuestionAnswersComponent],\n  imports: [\n    CommonModule,\n    QuestionAnswersRoutingModule,\n    AddQuestionAnswersModule,\n    NbCardModule,\n    NbButtonModule,\n    NbIconModule,\n    NbUserModule,\n  ],\n})\nexport class QuestionAnswersModule {}\n"]}