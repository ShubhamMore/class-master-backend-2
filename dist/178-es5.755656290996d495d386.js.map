{"version":3,"sources":["webpack:///src/app/institute/branch/lecture/manage-lecture/online-lecture/online-lecture.component.html","webpack:///src/app/institute/branch/lecture/manage-lecture/online-lecture/online-lecture.component.ts","webpack:///src/app/institute/branch/lecture/manage-lecture/manage-lecture.component.html","webpack:///src/app/institute/branch/lecture/manage-lecture/manage-lecture-routing.module.ts","webpack:///src/app/institute/branch/lecture/manage-lecture/manage-lecture.component.ts","webpack:///src/app/institute/branch/lecture/manage-lecture/manage-lecture.module.ts"],"names":["OnlineLectureComponent","lectureService","authService","encryptService","this","loading","lecture","getLectureId","user","getUserData","imsMasterId","zoomURL","environment","zoomLiveURL","ManageLectureComponent","ManageLectureModule","ManageLectureRoutingModule","routes","path","component","branchService","courseService","batchService","dateService","router","route","windowService","toastrService","branchId","getBranchId","getCategoryData","subscribe","category","getCourseData","course","getBatchData","batch","date","getSearchDate","getDateString","onlineLectures","classroomLectures","getLecture","navigate","relativeTo","startTime","endTime","formatTime","subject","mySubject","subjects","find","curSubject","_id","setLectureId","setLectureData","sessionType","open","title","topic","context","showToastr","getLectures","lectures","filter","error","setSearchDate","position","status","message","show","dateChanged","loadChildren","then","m","PageNotFoundModule","redirectTo","forChild"],"mappings":"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","file":"x","sourcesContent":["<div class=\"zoom-meeting\" *ngIf=\"!loading\">\n  <iframe\n    width=\"100%\"\n    height=\"100%\"\n    [src]=\"zoomURL | safeUrl\"\n    frameborder=\"0\"\n    allowfullscreen=\"true\"\n    allow=\"camera; microphone;\"\n  >\n  </iframe>\n</div>\n","import { EncryptService } from '../../../../../services/shared-services/encrypt.service';\nimport { AuthService } from '../../../../../authentication/auth/auth-service/auth.service';\nimport { environment } from '../../../../../../environments/environment';\nimport { LectureService } from '../../../../../services/lecture.service';\nimport { Component, OnInit } from '@angular/core';\n@Component({\n  selector: 'ngx-online-lecture',\n  templateUrl: './online-lecture.component.html',\n  styleUrls: ['./online-lecture.component.scss'],\n})\nexport class OnlineLectureComponent implements OnInit {\n  loading: boolean;\n  error: string;\n  zoomURL: any;\n  constructor(\n    private lectureService: LectureService,\n    private authService: AuthService,\n    private encryptService: EncryptService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n\n    const lecture = this.lectureService.getLectureId();\n    const user = this.authService.getUserData().imsMasterId;\n\n    this.zoomURL = environment.zoomLiveURL + '?lecture=' + lecture + '&user=' + user;\n    this.loading = false;\n  }\n}\n","<nb-card>\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-md-9 col-sm-8\">\n        <h3>\n          Lecture of <small *ngIf=\"batch\">{{ batch.basicDetails.batchName }}</small>\n        </h3>\n      </div>\n      <div class=\"col-md-3 col-sm-4\">\n        <input type=\"date\" nbInput fullWidth [(ngModel)]=\"date\" (change)=\"dateChanged()\" />\n      </div>\n    </div>\n  </nb-card-header>\n  <nb-card-body *ngIf=\"!loading; else loadingTemplate\">\n    <nb-tabset fullWidth>\n      <nb-tab tabTitle=\"Classroom Lecture\">\n        <div class=\"table-responsive\" *ngIf=\"classroomLectures.length > 0; else noClassroomLecture\">\n          <table class=\"table\">\n            <tbody>\n              <tr *ngFor=\"let lecture of classroomLectures\">\n                <td>{{ getTime(lecture.startTime, lecture.endTime) }}</td>\n                <td>{{ getSubject(lecture.subject) }}</td>\n                <td>{{ lecture.topic }}</td>\n                <td>{{ lecture.teacher }}</td>\n\n                <td>\n                  <button status=\"primary\" nbButton size=\"small\" (click)=\"markAttendance(lecture)\">\n                    Attendance\n                  </button>\n                </td>\n                <td>\n                  <button status=\"warning\" nbButton size=\"small\" (click)=\"lectureMaterial(lecture)\">\n                    Study Material\n                  </button>\n                </td>\n                <td>\n                  <button status=\"success\" nbButton size=\"small\" (click)=\"questionAnswers(lecture)\">\n                    Q&A\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </nb-tab>\n      <nb-tab tabTitle=\"Online Lecture\">\n        <div class=\"table-responsive\" *ngIf=\"onlineLectures.length > 0; else noOnlineLecture\">\n          <table class=\"table\">\n            <tbody>\n              <tr *ngFor=\"let lecture of onlineLectures\">\n                <td>{{ getTime(lecture.startTime, lecture.endTime) }}</td>\n                <td>{{ getSubject(lecture.subject) }}</td>\n                <td>{{ lecture.topic }}</td>\n                <td>{{ lecture.teacher }}</td>\n                <td>\n                  <button status=\"info\" nbButton size=\"small\" (click)=\"startOnlineLecture(lecture)\">\n                    Go Live\n                  </button>\n                </td>\n                <td>\n                  <button status=\"primary\" nbButton size=\"small\" (click)=\"markAttendance(lecture)\">\n                    Attendance\n                  </button>\n                </td>\n                <td>\n                  <button status=\"warning\" nbButton size=\"small\" (click)=\"lectureMaterial(lecture)\">\n                    Study Material\n                  </button>\n                </td>\n                <td>\n                  <button status=\"success\" nbButton size=\"small\" (click)=\"questionAnswers(lecture)\">\n                    Q&A\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </nb-tab>\n    </nb-tabset>\n  </nb-card-body>\n</nb-card>\n\n<ng-template #noClassroomLecture>\n  <p class=\"text-center pt-5 pb-5\">No Classroom Lecture</p>\n</ng-template>\n\n<ng-template #noOnlineLecture>\n  <p class=\"text-center pt-5 pb-5\">No Online Lecture</p>\n</ng-template>\n\n<ng-template #loadingTemplate>\n  <p class=\"text-center pt-5 pb-5\">Loading...</p>\n</ng-template>\n","import { ManageLectureComponent } from './manage-lecture.component';\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManageLectureComponent,\n  },\n\n  {\n    path: 'page-not-found',\n    loadChildren: () =>\n      import('../../../../shared/page-not-found/page-not-found.module').then(\n        (m) => m.PageNotFoundModule,\n      ),\n  },\n\n  { path: '**', redirectTo: 'page-not-found' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManageLectureRoutingModule {}\n","import { OnlineLectureComponent } from './online-lecture/online-lecture.component';\nimport { NbToastrService, NbWindowService } from '@nebular/theme';\nimport { BatchModel } from './../../../../models/batch.model';\nimport { CategoryModel } from './../../../../models/branch.model';\nimport { CourseModel, SubjectModel } from './../../../../models/course.model';\nimport { CourseService } from './../../../../services/course.service';\nimport { LectureService } from './../../../../services/lecture.service';\nimport { ScheduleModel as LectureModel } from './../../../../models/schedule.model';\nimport { DateService } from './../../../../services/shared-services/date.service';\nimport { Component, OnInit } from '@angular/core';\nimport { BranchService } from './../../../../services/branch.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { BatchService } from './../../../../services/batch.service';\n\n@Component({\n  selector: 'ngx-manage-lecture',\n  templateUrl: './manage-lecture.component.html',\n  styleUrls: ['./manage-lecture.component.scss'],\n})\nexport class ManageLectureComponent implements OnInit {\n  loading: boolean;\n  branchId: string;\n\n  category: CategoryModel;\n  course: CourseModel;\n  batch: BatchModel;\n\n  onlineLectures: LectureModel[];\n  classroomLectures: LectureModel[];\n\n  date: string;\n\n  constructor(\n    private branchService: BranchService,\n    private lectureService: LectureService,\n    private courseService: CourseService,\n    private batchService: BatchService,\n    public dateService: DateService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private windowService: NbWindowService,\n    private toastrService: NbToastrService,\n  ) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.branchId = this.branchService.getBranchId();\n    if (!this.branchId) {\n      this.router.navigate(['../'], { relativeTo: this.route });\n      return;\n    }\n\n    this.branchService.getCategoryData().subscribe((category: CategoryModel) => {\n      this.category = category;\n    });\n\n    this.courseService.getCourseData().subscribe((course: CourseModel) => {\n      this.course = course;\n    });\n\n    this.batchService.getBatchData().subscribe((batch: BatchModel) => {\n      this.batch = batch;\n    });\n\n    this.date = this.lectureService.getSearchDate();\n    if (!this.date) {\n      this.date = this.dateService.getDateString();\n    }\n\n    this.onlineLectures = [];\n    this.classroomLectures = [];\n\n    this.getLecture();\n  }\n\n  getTime(startTime: string, endTime: string) {\n    startTime = this.dateService.formatTime(startTime);\n    endTime = this.dateService.formatTime(endTime);\n    return startTime + ' - ' + endTime;\n  }\n\n  getSubject(subject: string) {\n    const mySubject = this.course.subjects.find(\n      (curSubject: SubjectModel) => curSubject._id === subject,\n    );\n\n    if (!mySubject) {\n      return '--';\n    }\n\n    return mySubject.subject;\n  }\n\n  markAttendance(lecture: LectureModel) {\n    this.lectureService.setLectureId(lecture._id);\n    this.lectureService.setLectureData(lecture);\n    this.router.navigate(['../attendance'], {\n      relativeTo: this.route,\n    });\n  }\n\n  startOnlineLecture(lecture: LectureModel) {\n    if (lecture.sessionType === 'online') {\n      this.lectureService.setLectureId(lecture._id);\n      this.windowService.open(OnlineLectureComponent, {\n        title: lecture.topic,\n        context: {},\n      });\n    } else {\n      this.showToastr('top-right', 'danger', 'This os not an Online Lecture');\n    }\n  }\n\n  lectureMaterial(lecture: LectureModel) {\n    this.lectureService.setLectureId(lecture._id);\n    this.lectureService.setLectureData(lecture);\n    this.router.navigate(['../material'], {\n      relativeTo: this.route,\n    });\n  }\n\n  questionAnswers(lecture: LectureModel) {\n    this.lectureService.setLectureId(lecture._id);\n    this.lectureService.setLectureData(lecture);\n    this.router.navigate(['../q&a'], {\n      relativeTo: this.route,\n    });\n  }\n\n  getLecture() {\n    this.loading = true;\n    this.lectureService\n      .getLectures(this.branchId, this.category._id, this.course._id, this.batch._id, this.date)\n      .subscribe(\n        (lectures: LectureModel[]) => {\n          this.onlineLectures = lectures.filter(\n            (lecture: LectureModel) => lecture.sessionType === 'online',\n          );\n          this.classroomLectures = lectures.filter(\n            (lecture: LectureModel) => lecture.sessionType === 'classroom',\n          );\n          this.loading = false;\n        },\n        (error: any) => {\n          this.showToastr('top-right', 'danger', error);\n          this.loading = false;\n        },\n      );\n  }\n\n  dateChanged() {\n    if (this.date) {\n      this.lectureService.setSearchDate(this.date);\n      this.getLecture();\n    }\n  }\n\n  private showToastr(position: any, status: any, message: string) {\n    this.toastrService.show(status, message, {\n      position,\n      status,\n    });\n  }\n}\n","import { SharedModule } from './../../../../shared/shared.module';\nimport { OnlineLectureComponent } from './online-lecture/online-lecture.component';\nimport { FormsModule } from '@angular/forms';\nimport {\n  NbCardModule,\n  NbIconModule,\n  NbButtonModule,\n  NbInputModule,\n  NbTooltipModule,\n  NbAccordionModule,\n  NbTabsetModule,\n  NbFormFieldModule,\n} from '@nebular/theme';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ManageLectureRoutingModule } from './manage-lecture-routing.module';\nimport { ManageLectureComponent } from './manage-lecture.component';\nimport { SafeUrlPipe } from '../../../../pipe/safe-url.pipe';\n\n@NgModule({\n  declarations: [ManageLectureComponent, OnlineLectureComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    ManageLectureRoutingModule,\n    NbCardModule,\n    NbTooltipModule,\n    NbIconModule,\n    NbButtonModule,\n    NbInputModule,\n    NbAccordionModule,\n    NbTabsetModule,\n    NbFormFieldModule,\n    FormsModule,\n  ],\n})\nexport class ManageLectureModule {}\n"]}