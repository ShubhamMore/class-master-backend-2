(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{iy8L:function(t,e,c){"use strict";c.r(e);var s=c("ofXK"),i=c("IAlr"),o=c("EQut"),n=c("fXoL"),r=c("aceb"),a=c("tyNb");function b(t,e){if(1&t&&(n.Wb(0,"nb-option",14),n.Cc(1),n.Vb()),2&t){const t=e.$implicit;n.mc("value",t._id),n.Eb(1),n.Dc(t.category)}}function u(t,e){if(1&t){const t=n.Xb();n.Wb(0,"tr"),n.Wb(1,"td"),n.Cc(2),n.Vb(),n.Wb(3,"td"),n.Cc(4),n.Vb(),n.Wb(5,"td"),n.Cc(6),n.Vb(),n.Wb(7,"td"),n.Cc(8),n.Vb(),n.Wb(9,"td"),n.Wb(10,"button",20),n.ec("click",(function(){n.uc(t);const c=e.$implicit;return n.gc(3).courseBatches(c)})),n.Cc(11," Batches "),n.Vb(),n.Wb(12,"button",21),n.ec("click",(function(){n.uc(t);const c=e.$implicit;return n.gc(3).editCourse(c._id)})),n.Cc(13," Edit "),n.Vb(),n.Wb(14,"button",22),n.ec("click",(function(){n.uc(t);const c=e.$implicit,s=e.index;return n.gc(3).changeCourseStatus(c._id,!c.status,s)})),n.Cc(15),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=e.$implicit,c=e.index,s=n.gc(3);n.Eb(2),n.Dc(c+1),n.Eb(2),n.Dc(t.basicDetails.courseName),n.Eb(2),n.Dc(s.getCategory(t.basicDetails.category)),n.Eb(2),n.Dc(t.feeDetails.totalFees),n.Eb(6),n.mc("status",t.status?"danger":"warning"),n.Eb(1),n.Ec(" ",t.status?"Deactivate":"Activate"," ")}}function l(t,e){if(1&t&&(n.Wb(0,"div",17),n.Wb(1,"table",18),n.Wb(2,"thead"),n.Wb(3,"tr"),n.Wb(4,"th"),n.Cc(5,"#"),n.Vb(),n.Wb(6,"th"),n.Cc(7,"Course"),n.Vb(),n.Wb(8,"th"),n.Cc(9,"Category"),n.Vb(),n.Wb(10,"th"),n.Cc(11,"Fees"),n.Vb(),n.Wb(12,"th"),n.Cc(13,"Action"),n.Vb(),n.Vb(),n.Vb(),n.Wb(14,"tbody"),n.Ac(15,u,16,6,"tr",19),n.Vb(),n.Vb(),n.Vb()),2&t){const t=n.gc(2);n.Eb(15),n.mc("ngForOf",t.courses)}}function d(t,e){1&t&&(n.Wb(0,"p",23),n.Cc(1,"No Courses Available"),n.Vb())}function h(t,e){if(1&t&&(n.Ub(0),n.Ac(1,l,16,1,"div",15),n.Ac(2,d,2,0,"ng-template",null,16,n.Bc),n.Tb()),2&t){const t=n.sc(3),e=n.gc();n.Eb(1),n.mc("ngIf",e.courses.length>0)("ngIfElse",t)}}function g(t,e){1&t&&(n.Wb(0,"p",23),n.Cc(1,"Loading..."),n.Vb())}const f=[{path:"",component:(()=>{class t{constructor(t,e,c,s,i,o){this.branchService=t,this.courseService=e,this.toastrService=c,this.router=s,this.route=i,this.location=o}ngOnInit(){this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.courses=[],this.categories=[],this.category="",this.branchService.getBranch(this.branchId).subscribe(t=>{this.branchService.setBranchData(t),this.categories=t.categories,this.getCourses("")},t=>{})):this.location.back()}getCourses(t){this.loading=!0,this.category=t,this.courseService.getCourses(this.branchId,t).subscribe(t=>{this.courses=t,this.loading=!1},t=>{this.loading=!1})}getCategory(t){const e=this.categories.find(e=>e._id===t);return e?e.category:"--"}addCourse(){this.router.navigate(["../add"],{relativeTo:this.route})}courseBatches(t){this.courseService.setCourseData(t),this.router.navigate(["../batch"],{relativeTo:this.route})}editCourse(t){this.courseService.setCourseId(t),this.router.navigate(["../edit"],{relativeTo:this.route,queryParams:{mode:"edit"}})}changeCourseStatus(t,e,c){this.loading=!0,this.courseService.changeCourseStatus(t,e).subscribe(t=>{this.courses[c].status=e,this.showToastr("top-right","success",`Course ${e?"Activated":"Deactivated"} Successfully!`),this.loading=!1},t=>{this.showToastr("top-right","danger",t),this.loading=!1})}showToastr(t,e,c){this.toastrService.show(e,c,{position:t,status:e})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(o.a),n.Qb(i.a),n.Qb(r.jb),n.Qb(a.c),n.Qb(a.a),n.Qb(s.i))},t.\u0275cmp=n.Kb({type:t,selectors:[["ngx-manage-course"]],decls:27,vars:4,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","status","primary","fullWidth","","size","small",3,"click"],["icon","plus-circle-outline"],[1,"col-md-9"],[1,"col-md-3"],["id","select-category","name","category","fullWidth","","placeholder","Select Category",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"body-container"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["loadingData",""],[3,"value"],["class","table-responsive",4,"ngIf","ngIfElse"],["noCourses",""],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["nbButton","","status","info","size","small",1,"mr-3",3,"click"],["nbButton","","status","basic","size","small",1,"mr-3",3,"click"],["nbButton","","size","small",1,"",3,"status","click"],[1,"text-center"]],template:function(t,e){if(1&t&&(n.Wb(0,"nb-card"),n.Wb(1,"nb-card-header"),n.Wb(2,"div",0),n.Wb(3,"div",1),n.Wb(4,"h3"),n.Cc(5,"Courses"),n.Vb(),n.Vb(),n.Wb(6,"div",2),n.Wb(7,"button",3),n.ec("click",(function(){return e.addCourse()})),n.Cc(8," Add Course "),n.Rb(9,"nb-icon",4),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(10,"nb-card"),n.Wb(11,"nb-card-header"),n.Wb(12,"div",0),n.Wb(13,"div",5),n.Wb(14,"h5"),n.Cc(15,"Select Category"),n.Vb(),n.Vb(),n.Wb(16,"div",6),n.Wb(17,"nb-select",7),n.ec("selectedChange",(function(t){return e.getCourses(t)})),n.Wb(18,"nb-option",8),n.Cc(19,"All"),n.Vb(),n.Ac(20,b,2,2,"nb-option",9),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(21,"nb-card-body",10),n.Wb(22,"div",0),n.Wb(23,"div",11),n.Ac(24,h,4,2,"ng-container",12),n.Ac(25,g,2,0,"ng-template",null,13,n.Bc),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t){const t=n.sc(26);n.Eb(17),n.mc("selected",e.category),n.Eb(3),n.mc("ngForOf",e.categories),n.Eb(4),n.mc("ngIf",!e.loading)("ngIfElse",t)}},directives:[r.r,r.s,r.o,r.D,r.V,r.T,s.m,r.q,s.n],styles:[".body-container[_ngcontent-%COMP%]{height:25rem;max-height:25rem;overflow-y:auto}"]}),t})()},{path:"page-not-found",loadChildren:()=>c.e(0).then(c.bind(null,"DeSt")).then(t=>t.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let C=(()=>{class t{}return t.\u0275mod=n.Ob({type:t}),t.\u0275inj=n.Nb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(f)],a.g]}),t})();c.d(e,"ManageCourseModule",(function(){return m}));let m=(()=>{class t{}return t.\u0275mod=n.Ob({type:t}),t.\u0275inj=n.Nb({factory:function(e){return new(e||t)},imports:[[s.c,C,r.t,r.p,r.W,r.F,r.H]]}),t})()}}]);