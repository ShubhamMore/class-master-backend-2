function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7e1n":function(e,t,i){"use strict";i.r(t);var n=i("aceb"),a=i("ofXK"),c=i("ziii"),l=i("7kqb"),r=i("EQut"),o=i("fXoL"),s=i("tyNb"),u=["filePicker"];function b(e,t){1&e&&(o.Ub(0),o.Wb(1,"p",16),o.Cc(2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),o.Vb(),o.Tb())}function d(e,t){if(1&e){var i=o.Xb();o.Wb(0,"tr",20),o.Wb(1,"td",25),o.Cc(2),o.Vb(),o.Wb(3,"td",25),o.Wb(4,"span",26),o.Cc(5),o.Vb(),o.Vb(),o.Wb(6,"td",27),o.Wb(7,"button",28),o.ec("click",(function(){o.uc(i);var e=t.index;return o.gc(3).removeFile(e)})),o.Rb(8,"nb-icon",29),o.Vb(),o.Vb(),o.Vb()}if(2&e){var n=t.$implicit,a=t.index;o.Eb(2),o.Dc(a+1),o.Eb(3),o.Ec(" ",n.name," "),o.Eb(2),o.oc("nbTooltip","Remove ",n.name,"")}}function h(e,t){if(1&e&&(o.Wb(0,"div",17),o.Wb(1,"table",18),o.Wb(2,"thead",19),o.Wb(3,"tr",20),o.Wb(4,"th",21),o.Cc(5,"ID"),o.Vb(),o.Wb(6,"th",21),o.Cc(7,"Content File"),o.Vb(),o.Wb(8,"th",22),o.Cc(9,"Remove"),o.Vb(),o.Vb(),o.Vb(),o.Wb(10,"tbody",23),o.Ac(11,d,9,3,"tr",24),o.Vb(),o.Vb(),o.Vb()),2&e){var i=o.gc(2);o.Eb(11),o.mc("ngForOf",i.uploadLectureMaterials)}}function f(e,t){1&e&&o.Cc(0," No Files Selected, Please Select Files to Upload ")}function p(e,t){if(1&e){var i=o.Xb();o.Wb(0,"nb-card"),o.Wb(1,"nb-card-header"),o.Wb(2,"div",1),o.Wb(3,"div",2),o.Wb(4,"h3"),o.Cc(5,"Add Material"),o.Vb(),o.Vb(),o.Wb(6,"div",3),o.Wb(7,"button",4),o.ec("click",(function(){return o.uc(i),o.gc().saveLectureMaterial()})),o.Cc(8," Upload\xa0 "),o.Rb(9,"nb-icon",5),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(10,"nb-card-body"),o.Wb(11,"div",1),o.Wb(12,"div",6),o.Wb(13,"div",7),o.Wb(14,"label",8),o.Cc(15,"Click on Following Button to Select Lecture Material Files"),o.Vb(),o.Wb(16,"input",9,10),o.ec("change",(function(e){return o.uc(i),o.gc().onFilePicked(e)})),o.Vb(),o.Wb(18,"button",11),o.ec("click",(function(){return o.uc(i),o.sc(17).click()})),o.Cc(19," Click Here to Pick Files "),o.Vb(),o.Ac(20,b,3,0,"ng-container",0),o.Vb(),o.Vb(),o.Vb(),o.Rb(21,"hr"),o.Wb(22,"h4",12),o.Cc(23,"File/s To Upload"),o.Vb(),o.Wb(24,"div",1),o.Wb(25,"div",13),o.Ac(26,h,12,1,"div",14),o.Ac(27,f,1,0,"ng-template",null,15,o.Bc),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var n=o.sc(28),a=o.gc();o.Eb(20),o.mc("ngIf",a.invalidFile),o.Eb(6),o.mc("ngIf",a.uploadLectureMaterials.length>0)("ngIfElse",n)}}var v,g,m=[{path:"",component:(v=function(){function e(t,i,n,a,c,l,r){_classCallCheck(this,e),this.branchService=t,this.lectureService=i,this.lectureMaterialService=n,this.toastrService=a,this.router=c,this.location=l,this.route=r}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.loading=!0,this.invalidFile=!1,this.branchId=this.branchService.getBranchId(),!this.branchId)return this.showToastr("top-right","danger","Invalid Lecture"),void this.cancel();this.uploadLectureMaterials=[],this.lectureService.getLectureData().subscribe((function(t){t?(e.lecture=t,e.loading=!1):e.cancel()}))}},{key:"onFilePicked",value:function(e){this.invalidFile=!1;for(var t=e.target.files,i=["pdf","jpg","png","jpeg","mp4"],n=null,a=t.length,c=0;c<a;c++)if(n=t[c].name.substring(t[c].name.lastIndexOf(".")+1).toLowerCase(),-1===i.indexOf(n))return this.invalidFile=!0,void(this.fileInput.nativeElement.value="");this.invalidFile=!1;for(var l=0;l<a;l++)this.uploadLectureMaterials.push(t[l]);this.fileInput.nativeElement.value=""}},{key:"saveLectureMaterial",value:function(){var e=this;if(this.uploadLectureMaterials.length<1)return this.showToastr("top-right","danger","Select at least 1 Lecture material File"),void(this.invalidFile=!0);this.loading=!0,this.invalidFile=!1;var t=new FormData;t.append("branch",this.branchId),t.append("category",this.lecture.category),t.append("course",this.lecture.course),t.append("batch",this.lecture.batch),t.append("lecture",this.lecture._id);for(var i=0;i<this.uploadLectureMaterials.length;i++)t.append("material",this.uploadLectureMaterials[i],this.uploadLectureMaterials[i].name.substring(0,this.uploadLectureMaterials[i].name.lastIndexOf(".")));this.lectureMaterialService.newLectureMaterials(t).subscribe((function(t){e.uploadLectureMaterials=[],e.cancel()}),(function(t){e.loading=!1}))}},{key:"removeFile",value:function(e){this.uploadLectureMaterials.splice(e,1)}},{key:"showToastr",value:function(e,t,i){this.toastrService.show(t,i,{position:e,status:t})}},{key:"cancel",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}}]),e}(),v.\u0275fac=function(e){return new(e||v)(o.Qb(r.a),o.Qb(l.a),o.Qb(c.a),o.Qb(n.xb),o.Qb(s.c),o.Qb(a.i),o.Qb(s.a))},v.\u0275cmp=o.Kb({type:v,selectors:[["ngx-add-study-material"]],viewQuery:function(e,t){var i;1&e&&o.Hc(u,!0),2&e&&o.rc(i=o.fc())&&(t.fileInput=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","type","button","size","medium","fullWidth","","size","small","status","primary",3,"click"],["icon","arrow-circle-up-outline"],[1,"col-12"],[1,"form-control-group"],["for","input-subject",1,"label"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","multiple","","hidden","",3,"change"],["filePicker",""],["nbButton","","type","button","fullWidth","","size","small","status","warning","id","files",3,"click"],[1,"text-center"],[1,"col-md-10","mx-auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["noFiles",""],[1,"caption","status-danger"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-heading"],[1,"table-row"],[1,"table-heading-data"],[1,"table-heading-data","text-center"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-data"],[1,"mr-2"],[1,"table-data","text-center"],["type","button","nbButton","","shape","round","status","danger","size","tiny",3,"nbTooltip","click"],["icon","close-outline"]],template:function(e,t){1&e&&o.Ac(0,p,29,3,"nb-card",0),2&e&&o.mc("ngIf",!t.loading)},directives:[a.n,n.x,n.z,n.u,n.L,n.w,a.m,n.zb],styles:[""]}),v)},{path:"page-not-found",loadChildren:function(){return i.e(0).then(i.bind(null,"DeSt")).then((function(e){return e.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found"}],W=((g=function e(){_classCallCheck(this,e)}).\u0275mod=o.Ob({type:g}),g.\u0275inj=o.Nb({factory:function(e){return new(e||g)},imports:[[s.g.forChild(m)],s.g]}),g);i.d(t,"AddStudyMaterialModule",(function(){return y}));var V,y=((V=function e(){_classCallCheck(this,e)}).\u0275mod=o.Ob({type:V}),V.\u0275inj=o.Nb({factory:function(e){return new(e||V)},imports:[[a.c,W,n.A,n.v,n.kb,n.N,n.Ab]]}),V)}}]);