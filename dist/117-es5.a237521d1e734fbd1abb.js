function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{"bV+h":function(t,e,r){"use strict";r.r(e);var n=r("aceb"),a=r("3Pt+"),s=r("ofXK"),c=r("lst6"),i=r("IAlr"),o=r("ZatZ"),b=r("zZNt"),u=r("EQut"),d=r("fXoL"),l=r("tyNb");function h(t,e){if(1&t&&(d.Wb(0,"p",18),d.Cc(1),d.Vb()),2&t){var r=d.gc(2).$implicit,n=d.gc(2);d.Eb(1),d.Ec(" Enter ",n.getStudent(r.value.student)," Marks ")}}function m(t,e){if(1&t&&(d.Ub(0),d.Ac(1,h,2,1,"p",17),d.Tb()),2&t){var r=d.gc().$implicit;d.Eb(1),d.mc("ngIf",null==r.get("marks").errors?null:r.get("marks").errors.required)}}function f(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"tr",13),d.Wb(2,"td"),d.Cc(3),d.Vb(),d.Wb(4,"td"),d.Wb(5,"div",14),d.Rb(6,"input",15),d.Ac(7,m,2,1,"ng-container",16),d.Vb(),d.Vb(),d.Vb(),d.Tb()),2&t){var r=e.$implicit,n=d.gc(2);d.Eb(1),d.mc("formGroup",r),d.Eb(2),d.Dc(n.getStudent(r.value.student)),d.Eb(3),d.mc("status",r.get("marks").touched?r.get("marks").invalid?"danger":"success":"basic"),d.Eb(1),d.mc("ngIf",r.get("marks").invalid&&r.get("marks").touched)}}function g(t,e){if(1&t){var r=d.Xb();d.Wb(0,"div",7),d.Wb(1,"form",8),d.ec("submit",(function(){return d.uc(r),d.gc().saveMarks()})),d.Wb(2,"table",9),d.Wb(3,"thead"),d.Wb(4,"tr"),d.Wb(5,"th"),d.Cc(6,"#"),d.Vb(),d.Wb(7,"th"),d.Cc(8,"Student"),d.Vb(),d.Wb(9,"th"),d.Cc(10,"Marks"),d.Vb(),d.Vb(),d.Vb(),d.Wb(11,"tbody"),d.Ac(12,f,8,4,"ng-container",10),d.Vb(),d.Vb(),d.Rb(13,"hr"),d.Wb(14,"div",0),d.Wb(15,"div",11),d.Wb(16,"button",12),d.Cc(17," Save "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&t){var n=d.gc();d.Eb(1),d.mc("formGroup",n.studentMarksForm),d.Eb(11),d.mc("ngForOf",n.studentMarksForm.get("marks").controls)}}function v(t,e){1&t&&(d.Wb(0,"p",19),d.Cc(1," No Students Found "),d.Vb())}var k,p,V=[{path:"",component:(k=function(){function t(e,r,n,a,s,c,i,o){_classCallCheck(this,t),this.branchService=e,this.toastrService=r,this.courseService=n,this.batchService=a,this.router=s,this.examService=c,this.dateService=i,this.route=o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;if(this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId)return this.examService.getExamData().subscribe((function(e){t.exam=e})),this.exam?(this.branchService.getCategoryData().subscribe((function(e){t.category=e})),this.courseService.getCourseData().subscribe((function(e){t.course=e})),this.batchService.getBatchData().subscribe((function(e){t.batch=e})),this.studentMarksForm=new a.f({marks:new a.b([])}),this.students=[],this.getMarks().controls=[],void this.examService.getStudents(this.exam.branch,this.exam.category,this.exam.course,this.exam.batch).subscribe((function(e){t.students=e,t.exam.marks.length>0?t.exam.marks.forEach((function(e){t.addStudentMark(e.student,e.marks)})):e.forEach((function(e){t.addStudentMark(e.student,null)})),t.loading=!1}),(function(e){t.showToastr("top-right","danger",e),t.back()}))):(this.showToastr("top-right","danger","Exam Not Found"),void this.back());this.back()}},{key:"getMarks",value:function(){return this.studentMarksForm.get("marks")}},{key:"addStudentMark",value:function(t,e){return new a.f({student:new a.d(t,{validators:[a.u.required]}),marks:new a.d(e,{validators:[a.u.required]})})}},{key:"saveMarks",value:function(){var t=this;this.studentMarksForm.markAllAsTouched(),this.studentMarksForm.invalid?this.showToastr("top-right","danger","Enter All Students valid Marks"):(this.loading=!0,this.examService.saveStudentsMarks(this.exam._id,this.studentMarksForm.value.marks).subscribe((function(e){t.showToastr("top-right","success","Exam Score Updates Successfully!"),t.back()}),(function(e){t.showToastr("top-right","danger",e),t.loading=!1})))}},{key:"showToastr",value:function(t,e,r){this.toastrService.show(e,r,{position:t,status:e})}},{key:"getSubject",value:function(t){var e=this.course.subjects.find((function(e){return e._id===t}));return e?e.subject:"--"}},{key:"getStudent",value:function(t){var e=this.students.find((function(e){return e.student===t}));return e?e.student:"--"}},{key:"back",value:function(){this.router.navigate(["../"],{relativeTo:this.route})}}]),t}(),k.\u0275fac=function(t){return new(t||k)(d.Qb(u.a),d.Qb(n.xb),d.Qb(i.a),d.Qb(c.a),d.Qb(l.c),d.Qb(b.a),d.Qb(o.a),d.Qb(l.a))},k.\u0275cmp=d.Kb({type:k,selectors:[["ngx-add-test-score"]],decls:56,vars:10,consts:[[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","status","warning","size","tiny",1,"float-right",3,"click"],[1,"col-md-6","col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],["noStudentMarks",""],[1,"table-responsive"],[3,"formGroup","submit"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"col-12"],["type","submit","nbButton","","status","primary","size","medium",1,"float-right"],[3,"formGroup"],[1,"form-control-group"],["type","number","nbInput","","id","input-marks","name","marks","placeholder","marks","formControlName","marks","autofocus","","fullWidth","",3,"status"],[4,"ngIf"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],[1,"text-center","mt-5","mb-5"]],template:function(t,e){if(1&t&&(d.Wb(0,"nb-card"),d.Wb(1,"nb-card-header"),d.Wb(2,"div",0),d.Wb(3,"div",1),d.Wb(4,"h3"),d.Cc(5,"Exam Score"),d.Vb(),d.Vb(),d.Wb(6,"div",2),d.Wb(7,"button",3),d.ec("click",(function(){return e.back()})),d.Cc(8," Back "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(9,"nb-card-body"),d.Wb(10,"nb-card"),d.Wb(11,"nb-card-header"),d.Wb(12,"div",0),d.Wb(13,"div",4),d.Wb(14,"span"),d.Wb(15,"strong"),d.Cc(16,"Exam Title: "),d.Vb(),d.Cc(17),d.Vb(),d.Rb(18,"br"),d.Wb(19,"span"),d.Wb(20,"strong"),d.Cc(21,"Date: "),d.Vb(),d.Cc(22),d.Vb(),d.Rb(23,"br"),d.Wb(24,"span"),d.Wb(25,"strong"),d.Cc(26,"Time: "),d.Vb(),d.Cc(27),d.Vb(),d.Rb(28,"br"),d.Wb(29,"span"),d.Wb(30,"strong"),d.Cc(31,"Duration: "),d.Vb(),d.Cc(32),d.Vb(),d.Vb(),d.Wb(33,"div",4),d.Wb(34,"span"),d.Wb(35,"strong"),d.Cc(36,"Category: "),d.Vb(),d.Cc(37),d.Vb(),d.Rb(38,"br"),d.Wb(39,"span"),d.Wb(40,"strong"),d.Cc(41,"Course: "),d.Vb(),d.Cc(42),d.Vb(),d.Rb(43,"br"),d.Wb(44,"span"),d.Wb(45,"strong"),d.Cc(46,"Batch: "),d.Vb(),d.Cc(47),d.Vb(),d.Rb(48,"br"),d.Wb(49,"span"),d.Wb(50,"strong"),d.Cc(51,"Subject: "),d.Vb(),d.Cc(52),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Ac(53,g,18,2,"div",5),d.Ac(54,v,2,0,"ng-template",null,6,d.Bc),d.Vb(),d.Vb()),2&t){var r=d.sc(55);d.Eb(17),d.Dc(e.exam.examTitle),d.Eb(5),d.Dc(e.dateService.formatDate(e.exam.date)),d.Eb(5),d.Dc(e.dateService.formatTime(e.exam.time)),d.Eb(5),d.Ec("",e.exam.duration," Min"),d.Eb(5),d.Dc(e.category.category),d.Eb(5),d.Dc(e.course.basicDetails.courseName),d.Eb(5),d.Dc(e.batch.basicDetails.batchName),d.Eb(5),d.Dc(e.getSubject(e.exam.subject)),d.Eb(1),d.mc("ngIf",e.studentMarksForm.get("marks").controls.length>0)("ngIfElse",r)}},directives:[n.x,n.z,n.u,n.w,s.n,a.v,a.n,a.g,s.m,a.q,n.O,a.a,a.m,a.e],styles:[""]}),k)},{path:"page-not-found",loadChildren:function(){return r.e(0).then(r.bind(null,"DeSt")).then((function(t){return t.PageNotFoundModule}))}},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}],W=((p=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:p}),p.\u0275inj=d.Nb({factory:function(t){return new(t||p)},imports:[[l.g.forChild(V)],l.g]}),p);r.d(e,"AddTestScoreModule",(function(){return S}));var C,S=((C=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:C}),C.\u0275inj=d.Nb({factory:function(t){return new(t||C)},imports:[[s.c,W,n.A,n.P,n.v,a.s]]}),C)}}]);