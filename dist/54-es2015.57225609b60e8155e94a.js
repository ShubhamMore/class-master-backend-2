(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{YfTX:function(i,t,e){"use strict";e.r(t);var n=e("3Pt+"),l=e("aceb"),s=e("ofXK"),r=e("EQut"),a=e("fCOA"),o=e("lJxs"),b=e("JIr8"),d=e("z6cu"),c=e("fXoL");let g=(()=>{class i{constructor(i){this.httpService=i}setBilling(i){this.billingDetails=i}getBilling(){return this.billingDetails}deleteBilling(){this.billingDetails=null}saveBillingDetails(i){return this.httpService.httpPost({api:"saveBillingDetails",data:i}).pipe(Object(o.a)(i=>i),Object(b.a)(i=>Object(d.a)(i)))}getBillingDetails(i){return this.httpService.httpPost({api:"getBillingDetails",data:{branch:i}}).pipe(Object(o.a)(i=>i),Object(b.a)(i=>Object(d.a)(i)))}}return i.\u0275fac=function(t){return new(t||i)(c.ac(a.a))},i.\u0275prov=c.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var u=e("tyNb");function m(i,t){1&i&&(c.Wb(0,"p",19),c.Cc(1," User Name is required! "),c.Vb())}function h(i,t){1&i&&(c.Wb(0,"p",19),c.Cc(1," Company Name should contain minimum 5 characters "),c.Vb())}function p(i,t){if(1&i&&(c.Ub(0),c.Ac(1,m,2,0,"p",18),c.Ac(2,h,2,0,"p",18),c.Tb()),2&i){const i=c.gc();c.Eb(1),c.mc("ngIf",null==i.billingForm.get("name").errors?null:i.billingForm.get("name").errors.required),c.Eb(1),c.mc("ngIf",null==i.billingForm.get("name").errors?null:i.billingForm.get("name").errors.minlength)}}function f(i,t){1&i&&(c.Wb(0,"p",19),c.Cc(1," Company address is required! "),c.Vb())}function v(i,t){1&i&&(c.Wb(0,"p",19),c.Cc(1," Company address should be 10 characters "),c.Vb())}function C(i,t){if(1&i&&(c.Ub(0),c.Ac(1,f,2,0,"p",18),c.Ac(2,v,2,0,"p",18),c.Tb()),2&i){const i=c.gc();c.Eb(1),c.mc("ngIf",null==i.billingForm.get("address").errors?null:i.billingForm.get("address").errors.required),c.Eb(1),c.mc("ngIf",null==i.billingForm.get("address").errors?null:i.billingForm.get("address").errors.minlength)}}const W=[{path:"",component:(()=>{class i{constructor(i,t,e,n,l,s){this.branchService=i,this.toastrService=t,this.billingService=e,this.router=n,this.route=l,this.location=s}ngOnInit(){this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.billingForm=new n.f({name:new n.d(null,{validators:[n.u.required,n.u.minLength(5)]}),address:new n.d(null,{validators:[n.u.required,n.u.minLength(10)]}),gstNumber:new n.d(null,{validators:[]}),termsAndConditions:new n.d(null,{validators:[]})}),this.getBillingDetails()):this.location.back()}getBillingDetails(){this.billingService.getBillingDetails(this.branchId).subscribe(i=>{this.billingDetails=i,this.billingDetails&&this.billingForm.patchValue({name:this.billingDetails.name,address:this.billingDetails.address,gstNumber:this.billingDetails.gstNumber,termsAndConditions:this.billingDetails.termsAndConditions}),this.loading=!1},i=>{this.loading=!1})}saveBillingDetails(){if(this.billingForm.markAllAsTouched(),this.billingForm.invalid)return void this.showToastr("top-right","danger","Fill Billing Details Correctly");this.loading=!0;const i=this.billingForm.value;i.branch=this.branchId,this.billingDetails&&(i._id=this.billingDetails._id),this.billingService.saveBillingDetails(i).subscribe(i=>{this.showToastr("top-right","success","Billing Details Updated Successfully!"),this.location.back(),this.loading=!1},i=>{this.showToastr("top-right","danger",i),this.loading=!1})}showToastr(i,t,e){this.toastrService.show(t,e,{position:i,status:t})}}return i.\u0275fac=function(t){return new(t||i)(c.Qb(r.a),c.Qb(l.jb),c.Qb(g),c.Qb(u.c),c.Qb(u.a),c.Qb(s.i))},i.\u0275cmp=c.Kb({type:i,selectors:[["ngx-receipt-info"]],decls:36,vars:5,consts:[["id","title",1,"title"],[1,"row"],[1,"col-12"],[3,"formGroup","ngSubmit"],[1,"col-md-6"],[1,"form-control-group"],["for","input-billing-name",1,"label"],["type","text","nbInput","","id","input-billing-name","name","name","formControlName","name","placeholder","Company Name","minlength","5","maxlength","30","fullWidth","",3,"status"],[4,"ngIf"],["for","input-gst-number",1,"label"],["type","text","nbInput","","id","input-gst-number","name","gstNumber","formControlName","gstNumber","placeholder","GST Number (Optional)","fullWidth",""],[1,"col-md-12"],["for","input-billing-address",1,"label"],["type","text","nbInput","","id","input-billing-address","name","address","formControlName","address","placeholder","Company Address","rows","2","minlength","10","maxlength","150","fullWidth","",3,"status"],["for","input-terms-conditions",1,"label"],["type","text","nbInput","","id","input-terms-conditions","name","termsAndConditions","formControlName","termsAndConditions","placeholder","Terms & Conditions (Optional)","rows","2","minlength","25","fullWidth",""],[1,"col-12","text-right"],["type","submit","nbButton","","status","primary","size","small"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(i,t){1&i&&(c.Wb(0,"nb-card"),c.Wb(1,"nb-card-header"),c.Wb(2,"h3",0),c.Cc(3,"Receipt Details"),c.Vb(),c.Vb(),c.Wb(4,"nb-card-body"),c.Wb(5,"div",1),c.Wb(6,"div",2),c.Wb(7,"form",3),c.ec("ngSubmit",(function(){return t.saveBillingDetails()})),c.Wb(8,"div",1),c.Wb(9,"div",4),c.Wb(10,"div",5),c.Wb(11,"label",6),c.Cc(12,"Company Name:"),c.Vb(),c.Rb(13,"input",7),c.Ac(14,p,3,2,"ng-container",8),c.Vb(),c.Vb(),c.Wb(15,"div",4),c.Wb(16,"div",5),c.Wb(17,"label",9),c.Cc(18,"GST Number:"),c.Vb(),c.Rb(19,"input",10),c.Vb(),c.Vb(),c.Wb(20,"div",11),c.Wb(21,"div",5),c.Wb(22,"label",12),c.Cc(23,"Company Address:"),c.Vb(),c.Rb(24,"textarea",13),c.Ac(25,C,3,2,"ng-container",8),c.Vb(),c.Vb(),c.Wb(26,"div",11),c.Wb(27,"div",5),c.Wb(28,"label",14),c.Cc(29,"Terms & Conditions:"),c.Vb(),c.Rb(30,"textarea",15),c.Vb(),c.Vb(),c.Vb(),c.Rb(31,"br"),c.Wb(32,"div",1),c.Wb(33,"div",16),c.Wb(34,"button",17),c.Cc(35,"Save"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&i&&(c.Eb(7),c.mc("formGroup",t.billingForm),c.Eb(6),c.mc("status",t.billingForm.get("name").touched?t.billingForm.get("name").invalid?"danger":"success":"basic"),c.Eb(1),c.mc("ngIf",t.billingForm.get("name").invalid&&t.billingForm.get("name").touched),c.Eb(10),c.mc("status",t.billingForm.get("address").touched?t.billingForm.get("address").invalid?"danger":"success":"basic"),c.Eb(1),c.mc("ngIf",t.billingForm.get("address").invalid&&t.billingForm.get("address").touched))},directives:[l.r,l.s,l.q,n.v,n.n,n.g,l.G,n.a,n.m,n.e,n.j,n.i,s.n,l.o],styles:[""]}),i})()},{path:"page-not-found",loadChildren:()=>e.e(0).then(e.bind(null,"DeSt")).then(i=>i.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found",pathMatch:"full"}];let V=(()=>{class i{}return i.\u0275mod=c.Ob({type:i}),i.\u0275inj=c.Nb({factory:function(t){return new(t||i)},imports:[[u.g.forChild(W)],u.g]}),i})();e.d(t,"ReceiptInfoModule",(function(){return D}));let D=(()=>{class i{}return i.\u0275mod=c.Ob({type:i}),i.\u0275inj=c.Nb({factory:function(t){return new(t||i)},imports:[[s.c,V,l.H,l.p,l.t,n.s]]}),i})()}}]);