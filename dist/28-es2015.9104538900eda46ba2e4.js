(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{BsjJ:function(e,t,n){"use strict";n.r(t),n.d(t,"AddStudyMaterialModule",(function(){return v}));var i=n("aceb"),l=n("ofXK"),r=n("fXoL"),a=n("EQut"),o=n("7kqb"),s=n("ziii"),c=n("tyNb");const d=["filePicker"];function u(e,t){1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"p",16),r["\u0275\u0275text"](2," *Please Select a Valid File (*.pdf, '*.jpg, *.png, *.jpeg, *.mp4) "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]())}function m(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr",20),r["\u0275\u0275elementStart"](1,"td",25),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td",25),r["\u0275\u0275elementStart"](4,"span",26),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"td",27),r["\u0275\u0275elementStart"](7,"button",28),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.index;return r["\u0275\u0275nextContext"](3).removeFile(n)})),r["\u0275\u0275element"](8,"nb-icon",29),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",e.name," "),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate1"]("nbTooltip","Remove ",e.name,"")}}function p(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275elementStart"](1,"table",18),r["\u0275\u0275elementStart"](2,"thead",19),r["\u0275\u0275elementStart"](3,"tr",20),r["\u0275\u0275elementStart"](4,"th",21),r["\u0275\u0275text"](5,"ID"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th",21),r["\u0275\u0275text"](7,"Content File"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th",22),r["\u0275\u0275text"](9,"Remove"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"tbody",23),r["\u0275\u0275template"](11,m,9,3,"tr",24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngForOf",e.uploadLectureMaterials)}}function h(e,t){1&e&&r["\u0275\u0275text"](0," No Files Selected, Please Select Files to Upload ")}function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h3"),r["\u0275\u0275text"](5,"Add Material"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"button",4),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().saveLectureMaterial()})),r["\u0275\u0275text"](8," Upload\xa0 "),r["\u0275\u0275element"](9,"nb-icon",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"nb-card-body"),r["\u0275\u0275elementStart"](11,"div",1),r["\u0275\u0275elementStart"](12,"div",6),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"label",8),r["\u0275\u0275text"](15,"Click on Following Button to Select Lecture Material Files"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"input",9,10),r["\u0275\u0275listener"]("change",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onFilePicked(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"button",11),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](17).click()})),r["\u0275\u0275text"](19," Click Here to Pick Files "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](20,u,3,0,"ng-container",0),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"hr"),r["\u0275\u0275elementStart"](22,"h4",12),r["\u0275\u0275text"](23,"File/s To Upload"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",1),r["\u0275\u0275elementStart"](25,"div",13),r["\u0275\u0275template"](26,p,12,1,"div",14),r["\u0275\u0275template"](27,h,1,0,"ng-template",null,15,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275reference"](28),t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("disabled",t.submit)("nbSpinner",t.submit),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngIf",t.invalidFile),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.uploadLectureMaterials.length>0)("ngIfElse",e)}}const b=[{path:"",component:(()=>{class e{constructor(e,t,n,i,l,r,a){this.branchService=e,this.lectureService=t,this.lectureMaterialService=n,this.toastrService=i,this.router=l,this.location=r,this.route=a}ngOnInit(){if(this.loading=!0,this.submit=!1,this.invalidFile=!1,this.branchId=this.branchService.getBranchId(),!this.branchId)return this.showToastr("top-right","danger","Invalid Lecture"),void this.cancel();this.uploadLectureMaterials=[],this.lectureService.getLectureData().subscribe(e=>{e?(this.lecture=e,this.loading=!1):this.cancel()})}onFilePicked(e){this.invalidFile=!1;const t=e.target.files,n=["pdf","jpg","png","jpeg","mp4"];let i=null;const l=t.length;for(let r=0;r<l;r++)if(i=t[r].name.substring(t[r].name.lastIndexOf(".")+1).toLowerCase(),-1===n.indexOf(i))return this.invalidFile=!0,void(this.fileInput.nativeElement.value="");this.invalidFile=!1;for(let r=0;r<l;r++)this.uploadLectureMaterials.push(t[r]);this.fileInput.nativeElement.value=""}saveLectureMaterial(){if(this.uploadLectureMaterials.length<1)return this.showToastr("top-right","danger","Select at least 1 Lecture material File"),void(this.invalidFile=!0);this.submit=!0,this.invalidFile=!1;const e=new FormData;e.append("branch",this.branchId),e.append("category",this.lecture.category),e.append("course",this.lecture.course),e.append("batch",this.lecture.batch),e.append("lecture",this.lecture._id);for(let t=0;t<this.uploadLectureMaterials.length;t++)e.append("material",this.uploadLectureMaterials[t],this.uploadLectureMaterials[t].name.substring(0,this.uploadLectureMaterials[t].name.lastIndexOf(".")));this.lectureMaterialService.newLectureMaterials(e).subscribe(e=>{const t=this.uploadLectureMaterials.length,n=e.overStorageFiles;n<t&&this.showToastr("top-right","success",`${t-n} file${t-n==1?" is":"s are"} Uploaded Successfully!`),n>0&&this.showToastr("top-right","danger",`Storage is full, ${n} file${1===n?" is":"s are"} not Uploaded`),this.uploadLectureMaterials=[],this.submit=!1,this.cancel()},e=>{this.showToastr("top-right","danger",e),this.submit=!1})}removeFile(e){this.uploadLectureMaterials.splice(e,1)}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](i.Gb),r["\u0275\u0275directiveInject"](c.c),r["\u0275\u0275directiveInject"](l.i),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-study-material"]],viewQuery:function(e,t){var n;1&e&&r["\u0275\u0275viewQuery"](d,!0),2&e&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9","col-sm-8"],[1,"col-md-3","col-sm-4"],["nbButton","","size","small","type","button","fullWidth","","status","primary","nbSpinnerStatus","primary","nbSpinnerSize","small",3,"disabled","nbSpinner","click"],["icon","arrow-circle-up-outline"],[1,"col-12"],[1,"form-control-group"],["for","input-subject",1,"label"],["type","file","nbInput","","id","input-file","name","file","placeholder","Select File","fullWidth","","multiple","","hidden","",3,"change"],["filePicker",""],["nbButton","","size","small","type","button","fullWidth","","status","warning","id","files",3,"click"],[1,"text-center"],[1,"col-md-10","mx-auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["noFiles",""],[1,"caption","status-danger"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-heading"],[1,"table-row"],[1,"table-heading-data"],[1,"table-heading-data","text-center"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-data"],[1,"mr-2"],[1,"table-data","text-center"],["type","button","nbButton","","size","tiny","shape","round","status","danger",3,"nbTooltip","click"],["icon","close-outline"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,f,29,5,"nb-card",0),2&e&&r["\u0275\u0275property"]("ngIf",!t.loading)},directives:[l.n,i.y,i.A,i.v,i.sb,i.N,i.x,l.m,i.Ib],styles:[""]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found"}];let g=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[c.g.forChild(b)],c.g]}),e})(),v=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.c,g,i.B,i.w,i.tb,i.ob,i.P,i.Jb]]}),e})()}}]);
//# sourceMappingURL=28-es2015.9104538900eda46ba2e4.js.map