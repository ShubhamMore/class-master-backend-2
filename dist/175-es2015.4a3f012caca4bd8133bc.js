(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{"q/Ke":function(e,t,n){"use strict";n.r(t),n.d(t,"AttendanceModule",(function(){return v}));var a=n("aceb"),r=n("ofXK"),c=n("fXoL"),i=n("EQut"),d=n("IAlr"),l=n("lst6"),s=n("ZatZ"),o=n("7kqb"),m=n("ggm5"),u=n("tyNb");function h(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td",10),c["\u0275\u0275elementStart"](6,"div",11),c["\u0275\u0275elementStart"](7,"label"),c["\u0275\u0275elementStart"](8,"input",12),c["\u0275\u0275listener"]("change",(function(n){c["\u0275\u0275restoreView"](e);const a=t.index;return c["\u0275\u0275nextContext"](2).onChangeAttendance(n.target.checked,a)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"label",13),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.rollNumber),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("id",e.student)("checked",e.attendance),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("for",e.student),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.attendance?"P":"A")}}function p(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275elementStart"](1,"div",7),c["\u0275\u0275elementStart"](2,"table",8),c["\u0275\u0275elementStart"](3,"thead"),c["\u0275\u0275elementStart"](4,"tr"),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"Student Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"Roll Number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"Mark Attendance"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"tbody"),c["\u0275\u0275template"](12,h,11,6,"tr",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](12),c["\u0275\u0275property"]("ngForOf",e.students)}}function g(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p",14),c["\u0275\u0275text"](1,"No Students Found"),c["\u0275\u0275elementEnd"]())}const b=[{path:"",component:(()=>{class e{constructor(e,t,n,a,r,c,i,d,l){this.branchService=e,this.courseService=t,this.batchService=n,this.dateService=a,this.lectureService=r,this.attendanceService=c,this.toastrService=i,this.router=d,this.route=l}ngOnInit(){return this.loading=!0,this.branchId=this.branchService.getBranchId(),this.branchId?(this.lectureService.getLectureData().subscribe(e=>{this.lecture=e}),this.lecture?(this.courseService.getCourseData().subscribe(e=>{this.course=e}),this.batchService.getBatchData().subscribe(e=>{this.batch=e}),this.students=[],void this.getStudents()):(this.showToastr("top-right","danger","Lecture Not Found"),void this.back())):(this.showToastr("top-right","danger","Branch Not Found"),void this.back())}getStudents(){this.loading=!0,this.attendanceService.getStudents(this.lecture.branch,this.lecture.category,this.lecture.course,this.lecture.batch,this.lecture._id).subscribe(e=>{e.map(e=>e.attendance=!!e.attendance&&e.attendance),this.students=e,this.loading=!1},e=>{this.showToastr("top-right","danger",e),this.loading=!1})}onChangeAttendance(e,t){this.students[t].attendance=e}saveAttendance(){this.attendanceService.saveAttendance({date:this.lecture.date,branch:this.lecture.branch,category:this.lecture.category,course:this.lecture.course,batch:this.lecture.batch,subject:this.lecture.subject,lecture:this.lecture._id,attendance:this.students}).subscribe(e=>{this.showToastr("top-right","success",`Attendance ${e?"Updated":"Marked"} Successfully`),this.back()},e=>{this.showToastr("top-right","danger",e)})}getTime(e,t){return(e=this.dateService.formatTime(e))+" - "+this.dateService.formatTime(t)}getTeacher(e){return e}getSubject(e){const t=this.course.subjects.find(t=>t._id===e);return t?t.subject:"--"}back(){this.router.navigate(["../manage"],{relativeTo:this.route})}showToastr(e,t,n){this.toastrService.show(t,n,{position:e,status:t})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](d.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](a.Gb),c["\u0275\u0275directiveInject"](u.c),c["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-attendance"]],decls:46,vars:8,consts:[[1,"row"],[1,"col-md-4","col-sm-6","col-12"],["class","col-12",4,"ngIf","ngIfElse"],[1,"col-12","text-right"],["type","button","nbButton","","size","small","status","primary",3,"click"],["noStudents",""],[1,"col-12"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mark-attendance-selector"],["type","checkbox",1,"mark-attendance",3,"id","checked","change"],[3,"for"],[1,"text-center","pt-5","pb-5"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"span"),c["\u0275\u0275elementStart"](5,"strong"),c["\u0275\u0275text"](6,"Date: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",1),c["\u0275\u0275elementStart"](9,"span"),c["\u0275\u0275elementStart"](10,"strong"),c["\u0275\u0275text"](11,"Time: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",1),c["\u0275\u0275elementStart"](14,"span"),c["\u0275\u0275elementStart"](15,"strong"),c["\u0275\u0275text"](16,"Course: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",1),c["\u0275\u0275elementStart"](19,"span"),c["\u0275\u0275elementStart"](20,"strong"),c["\u0275\u0275text"](21,"Batch: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",1),c["\u0275\u0275elementStart"](24,"span"),c["\u0275\u0275elementStart"](25,"strong"),c["\u0275\u0275text"](26,"Subject: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",1),c["\u0275\u0275elementStart"](29,"span"),c["\u0275\u0275elementStart"](30,"strong"),c["\u0275\u0275text"](31,"Lecture Topic: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](32),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"nb-card"),c["\u0275\u0275elementStart"](34,"nb-card-header"),c["\u0275\u0275elementStart"](35,"h4"),c["\u0275\u0275text"](36,"ATTENDANCE RECORDING"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"nb-card-body"),c["\u0275\u0275elementStart"](38,"div",0),c["\u0275\u0275template"](39,p,13,1,"div",2),c["\u0275\u0275element"](40,"hr"),c["\u0275\u0275elementStart"](41,"div",3),c["\u0275\u0275elementStart"](42,"button",4),c["\u0275\u0275listener"]("click",(function(){return t.saveAttendance()})),c["\u0275\u0275text"](43," Save "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](44,g,2,0,"ng-template",null,5,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275reference"](45);c["\u0275\u0275advance"](7),c["\u0275\u0275textInterpolate"](t.dateService.formatDate(t.lecture.date)),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.getTime(t.lecture.startTime,t.lecture.endTime)),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.course.basicDetails.courseName),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.batch.basicDetails.batchName),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.getSubject(t.lecture.subject)),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.lecture.topic),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.students.length>0)("ngIfElse",e)}},directives:[a.y,a.A,a.x,r.n,a.v,r.m],styles:[".mark-attendance-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none!important}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:inline-block;font-size:75%;border:1px solid #aaa;border-radius:50%;background:#fff;height:30px;width:30px;padding:1px;margin:1px;line-height:25px;text-align:center;cursor:pointer;transition:background .2s,color .2s}.mark-attendance-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#0095ff;color:#fff}"]}),e})()},{path:"page-not-found",loadChildren:()=>n.e(0).then(n.bind(null,"DeSt")).then(e=>e.PageNotFoundModule)},{path:"**",redirectTo:"page-not-found"}];let S=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[u.g.forChild(b)],u.g]}),e})(),v=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,S,a.B,a.w,a.P]]}),e})()}}]);
//# sourceMappingURL=175-es2015.4a3f012caca4bd8133bc.js.map